"use strict";var FJ=Object.defineProperty,LJ=(_t,ke,j)=>ke in _t?FJ(_t,ke,{enumerable:!0,configurable:!0,writable:!0,value:j}):_t[ke]=j,Ze=(_t,ke,j)=>(LJ(_t,"symbol"!=typeof ke?ke+"":ke,j),j);(self.webpackChunkbruel_portfolio=self.webpackChunkbruel_portfolio||[]).push([[179],{2011:(_t,ke,j)=>{j.d(ke,{Dh:()=>Pe,GT:()=>Se,cc:()=>ze,on:()=>He,pX:()=>ce,xv:()=>Re});var f=j(4650),z=j(9260);_t=j.hmd(_t);const U=["ngOnDestroy"],ce=(ue,_e,ht,Dt={})=>new Proxy(ue,{get:(Ae,ye)=>ht.runOutsideAngular(()=>{var we;if(ue[ye])return!(null===(we=Dt?.spy)||void 0===we)&&we.get&&Dt.spy.get(ye,ue[ye]),ue[ye];if(U.indexOf(ye)>-1)return()=>{};const Ge=_e.toPromise().then(Ke=>{const ie=Ke&&Ke[ye];return"function"==typeof ie?ie.bind(Ke):ie&&ie.then?ie.then(Xe=>ht.run(()=>Xe)):ht.run(()=>ie)});return new Proxy(()=>{},{get:(Ke,ie)=>Ge[ie],apply:(Ke,ie,Xe)=>Ge.then(At=>{var dt;const Kt=At&&At(...Xe);return!(null===(dt=Dt?.spy)||void 0===dt)&&dt.apply&&Dt.spy.apply(ye,Xe,Kt),Kt})})})}),Se=(ue,_e)=>{_e.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(Dt=>{Object.defineProperty(ue.prototype,Dt,Object.getOwnPropertyDescriptor(ht.prototype||ht,Dt))})})};class Ce{constructor(_e){return _e}}const Pe=new f.OlP("angularfire2.app.options"),Re=new f.OlP("angularfire2.app.name");function He(ue,_e,ht){const Ae="object"==typeof ht&&ht||{};Ae.name=Ae.name||"string"==typeof ht&&ht||"[DEFAULT]";const we=z.Z.apps.filter(Ge=>Ge&&Ge.name===Ae.name)[0]||_e.runOutsideAngular(()=>z.Z.initializeApp(ue,Ae));try{JSON.stringify(ue)!==JSON.stringify(we.options)&&Z("error",`${we.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(we)}const Z=(ue,..._e)=>{(0,f.X6Q)()&&typeof console<"u"&&console[ue](..._e)};function ze(ue,_e,ht,Dt,Ae){const[,ye,we]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===ue)||[];if(ye)return function Be(ue,_e){try{return ue.toString()===_e.toString()}catch{return ue===_e}}(Ae,we)||(rt("error",`${_e} was already initialized on the ${ht} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),rt("warn",{is:Ae,was:we})),ye;{const Ge=Dt();return globalThis.\u0275AngularfireInstanceCache.push([ue,Ge,Ae]),Ge}}const xe=!!_t.hot,rt=(ue,..._e)=>{(0,f.X6Q)()&&typeof console<"u"&&console[ue](..._e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},1389:(_t,ke,j)=>{j.d(ke,{$:()=>Wo,A:()=>q,D:()=>Be,I:()=>tr,J:()=>zs,L:()=>Ts,N:()=>oi,P:()=>ZE,Q:()=>O_,R:()=>Bi,U:()=>Ul,V:()=>bi,W:()=>VE,X:()=>dc,Y:()=>bh,Z:()=>Pa,_:()=>Lt,a:()=>bo,a0:()=>Dh,a1:()=>bg,a2:()=>dr,a3:()=>F_,a4:()=>BE,a5:()=>Sh,a6:()=>yc,a7:()=>L_,a8:()=>V_,a9:()=>U_,aA:()=>ie,aB:()=>Ag,aC:()=>vr,aD:()=>_i,aE:()=>Pc,aF:()=>Qh,aG:()=>hv,aH:()=>Vn,aL:()=>Yl,aO:()=>Ss,aa:()=>Eg,ab:()=>jl,ac:()=>B_,ad:()=>j_,ae:()=>H_,af:()=>vc,ai:()=>mo,aj:()=>bc,ak:()=>Ph,an:()=>N_,ao:()=>Nh,aq:()=>Z_,ar:()=>Ic,as:()=>At,at:()=>me,au:()=>ge,av:()=>Ae,aw:()=>Lc,ax:()=>Mg,ay:()=>Je,az:()=>ye,b:()=>J_,c:()=>za,d:()=>Sg,e:()=>rr,f:()=>fv,g:()=>gv,h:()=>Wa,i:()=>$E,j:()=>xg,k:()=>Ng,l:()=>qE,m:()=>Dv,p:()=>Re,r:()=>lv,s:()=>av,u:()=>Wh});var f=j(5861),z=j(2090),U=j(6881),ce=j(655),Se=j(1877),Ce=j(4859);const Re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Be=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},xe=function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new Se.Yd("@firebase/auth");function Dt(E,...m){_e.logLevel<=Se.in.ERROR&&_e.error(`Auth (${U.SDK_VERSION}): ${E}`,...m)}function Ae(E,...m){throw Ke(E,...m)}function ye(E,...m){return Ke(E,...m)}function we(E,m,v){const I=Object.assign(Object.assign({},xe()),{[m]:v});return new z.LL("auth","Firebase",I).create(m,{appName:E.name})}function Ge(E,m,v){if(!(m instanceof v))throw v.name!==m.constructor.name&&Ae(E,"argument-error"),we(E,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(E,...m){if("string"!=typeof E){const v=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(v,...I)}return rt.create(E,...m)}function ie(E,m,...v){if(!E)throw Ke(m,...v)}function Xe(E){const m="INTERNAL ASSERTION FAILED: "+E;throw Dt(m),new Error(m)}function At(E,m){E||Xe(m)}function dt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Kt(){return"http:"===ft()||"https:"===ft()}function ft(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class be{constructor(m,v){this.shortDelay=m,this.longDelay=v,At(v>m,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function he(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Me(E,m){At(E.emulator,"Emulator should always be set here");const{url:v}=E.emulator;return m?`${v}${m.startsWith("/")?m.slice(1):m}`:v}class Le{static initialize(m,v,I){this.fetchImpl=m,v&&(this.headersImpl=v),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Tt=new be(3e4,6e4);function bt(E,m){return E.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:E.tenantId}):m}function Rt(E,m,v,I){return tt.apply(this,arguments)}function tt(){return(tt=(0,f.Z)(function*(E,m,v,I,A={}){return Xt(E,A,(0,f.Z)(function*(){let O={},K={};I&&("GET"===m?K=I:O={body:JSON.stringify(I)});const ae=(0,z.xO)(Object.assign({key:E.config.apiKey},K)).slice(1),je=yield E._getAdditionalHeaders();return je["Content-Type"]="application/json",E.languageCode&&(je["X-Firebase-Locale"]=E.languageCode),Le.fetch()(Jn(E,E.config.apiHost,v,ae),Object.assign({method:m,headers:je,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Xt(E,m,v){return zt.apply(this,arguments)}function zt(){return(zt=(0,f.Z)(function*(E,m,v){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},ve),m);try{const A=new ni(E),O=yield Promise.race([v(),A.promise]);A.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw yr(E,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const ae=O.ok?K.errorMessage:K.error.message,[je,Ye]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw yr(E,"credential-already-in-use",K);if("EMAIL_EXISTS"===je)throw yr(E,"email-already-in-use",K);if("USER_DISABLED"===je)throw yr(E,"user-disabled",K);const gt=I[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw we(E,gt,Ye);Ae(E,gt)}}catch(A){if(A instanceof z.ZR)throw A;Ae(E,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function Ut(E,m,v,I){return mr.apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(E,m,v,I,A={}){const O=yield Rt(E,m,v,I,A);return"mfaPendingCredential"in O&&Ae(E,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Jn(E,m,v,I){const A=`${m}${v}?${I}`;return E.config.emulator?Me(E.config,A):`${E.config.apiScheme}://${A}`}class ni{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((v,I)=>{this.timer=setTimeout(()=>I(ye(this.auth,"network-request-failed")),Tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yr(E,m,v){const I={appName:E.name};v.email&&(I.email=v.email),v.phoneNumber&&(I.phoneNumber=v.phoneNumber);const A=ye(E,m,I);return A.customData._tokenResponse=v,A}function ii(){return(ii=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Xi(E,m){return Is.apply(this,arguments)}function Is(){return(Is=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ka(E,m){return ot.apply(this,arguments)}function ot(){return(ot=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Ur(E){if(E)try{const m=new Date(Number(E));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Ji(){return(Ji=(0,f.Z)(function*(E,m=!1){const v=(0,z.m9)(E),I=yield v.getIdToken(m),A=Pn(I);ie(A&&A.exp&&A.auth_time&&A.iat,v.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,K=O?.sign_in_provider;return{claims:A,token:I,authTime:Ur(Oi(A.auth_time)),issuedAtTime:Ur(Oi(A.iat)),expirationTime:Ur(Oi(A.exp)),signInProvider:K||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Oi(E){return 1e3*Number(E)}function Pn(E){const[m,v,I]=E.split(".");if(void 0===m||void 0===v||void 0===I)return Dt("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,z.tV)(v);return A?JSON.parse(A):(Dt("Failed to decode base64 JWT payload"),null)}catch(A){return Dt("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Jt(E,m){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(E,m,v=!1){if(v)return m;try{return yield m}catch(I){throw I instanceof z.ZR&&It(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}function It({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class en{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var v;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const A=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(m=!1){var v=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,f.Z)(function*(){yield v.iteration()}),I)}iteration(){var m=this;return(0,f.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&m.schedule(!0))}m.schedule()})()}}class si{constructor(m,v){this.createdAt=m,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xr(E){return ur.apply(this,arguments)}function ur(){return(ur=(0,f.Z)(function*(E){var m;const v=E.auth,I=yield E.getIdToken(),A=yield Jt(E,ka(v,{idToken:I}));ie(A?.users.length,v,"internal-error");const O=A.users[0];E._notifyReloadListener(O);const K=null!==(m=O.providerUserInfo)&&void 0!==m&&m.length?Cs(O.providerUserInfo):[],ae=Gt(E.providerData,K),gt=!!E.isAnonymous&&!(E.email&&O.passwordHash||ae?.length),Yt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ae,metadata:new si(O.createdAt,O.lastLoginAt),isAnonymous:gt};Object.assign(E,Yt)})).apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(E){const m=(0,z.m9)(E);yield xr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Gt(E,m){return[...E.filter(I=>!m.some(A=>A.providerId===I.providerId)),...m]}function Cs(E){return E.map(m=>{var{providerId:v}=m,I=(0,ce._T)(m,["providerId"]);return{providerId:v,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Br(){return(Br=(0,f.Z)(function*(E,m){const v=yield Xt(E,{},(0,f.Z)(function*(){const I=(0,z.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:A,apiKey:O}=E.config,K=Jn(E,A,"/v1/token",`key=${O}`),ae=yield E._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",Le.fetch()(K,{method:"POST",headers:ae,body:I})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ie(m.idToken,"internal-error"),ie(typeof m.idToken<"u","internal-error"),ie(typeof m.refreshToken<"u","internal-error");const v="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Tn(E){const m=Pn(E);return ie(m,"internal-error"),ie(typeof m.exp<"u","internal-error"),ie(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,v)}getToken(m,v=!1){var I=this;return(0,f.Z)(function*(){return ie(!I.accessToken||I.refreshToken,m,"user-token-expired"),v||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,v){var I=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:K}=yield function on(E,m){return Br.apply(this,arguments)}(m,v);I.updateTokensAndExpiration(A,O,Number(K))})()}updateTokensAndExpiration(m,v,I){this.refreshToken=v||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,v){const{refreshToken:I,accessToken:A,expirationTime:O}=v,K=new Cn;return I&&(ie("string"==typeof I,"internal-error",{appName:m}),K.refreshToken=I),A&&(ie("string"==typeof A,"internal-error",{appName:m}),K.accessToken=A),O&&(ie("number"==typeof O,"internal-error",{appName:m}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Cn,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function _r(E,m){ie("string"==typeof E||typeof E>"u","internal-error",{appName:m})}class $n{constructor(m){var{uid:v,auth:I,stsTokenManager:A}=m,O=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new en(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=I,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new si(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(m){var v=this;return(0,f.Z)(function*(){const I=yield Jt(v,v.stsTokenManager.getToken(v.auth,m));return ie(I,v.auth,"internal-error"),v.accessToken!==I&&(v.accessToken=I,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),I})()}getIdTokenResult(m){return function Hn(E){return Ji.apply(this,arguments)}(this,m)}reload(){return function Pt(E){return er.apply(this,arguments)}(this)}_assign(m){this!==m&&(ie(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(v=>Object.assign({},v)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const v=new $n(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(m){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,v=!1){var I=this;return(0,f.Z)(function*(){let A=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),A=!0),v&&(yield xr(I)),yield I.auth._persistUserIfCurrent(I),A&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,f.Z)(function*(){const v=yield m.getIdToken();return yield Jt(m,function ri(E,m){return ii.apply(this,arguments)}(m.auth,{idToken:v})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,v){var I,A,O,K,ae,je,Ye,gt;const Yt=null!==(I=v.displayName)&&void 0!==I?I:void 0,li=null!==(A=v.email)&&void 0!==A?A:void 0,ui=null!==(O=v.phoneNumber)&&void 0!==O?O:void 0,oa=null!==(K=v.photoURL)&&void 0!==K?K:void 0,Qa=null!==(ae=v.tenantId)&&void 0!==ae?ae:void 0,aa=null!==(je=v._redirectEventId)&&void 0!==je?je:void 0,jc=null!==(Ye=v.createdAt)&&void 0!==Ye?Ye:void 0,Vg=null!==(gt=v.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:cf,emailVerified:df,isAnonymous:hf,providerData:is,stsTokenManager:ff}=v;ie(cf&&ff,m,"internal-error");const mu=Cn.fromJSON(this.name,ff);ie("string"==typeof cf,m,"internal-error"),_r(Yt,m.name),_r(li,m.name),ie("boolean"==typeof df,m,"internal-error"),ie("boolean"==typeof hf,m,"internal-error"),_r(ui,m.name),_r(oa,m.name),_r(Qa,m.name),_r(aa,m.name),_r(jc,m.name),_r(Vg,m.name);const yu=new $n({uid:cf,auth:m,email:li,emailVerified:df,displayName:Yt,isAnonymous:hf,photoURL:oa,phoneNumber:ui,tenantId:Qa,stsTokenManager:mu,createdAt:jc,lastLoginAt:Vg});return is&&Array.isArray(is)&&(yu.providerData=is.map(pf=>Object.assign({},pf))),aa&&(yu._redirectEventId=aa),yu}static _fromIdTokenResponse(m,v,I=!1){return(0,f.Z)(function*(){const A=new Cn;A.updateFromServerResponse(v);const O=new $n({uid:v.localId,auth:m,stsTokenManager:A,isAnonymous:I});return yield xr(O),O})()}}const Ni=new Map;function vr(E){At(E instanceof Function,"Expected a class definition");let m=Ni.get(E);return m?(At(m instanceof E,"Instance stored in cache mismatched with class"),m):(m=new E,Ni.set(E,m),m)}const oi=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(v,I){var A=this;return(0,f.Z)(function*(){A.storage[v]=I})()}_get(v){var I=this;return(0,f.Z)(function*(){const A=I.storage[v];return void 0===A?null:A})()}_remove(v){var I=this;return(0,f.Z)(function*(){delete I.storage[v]})()}_addListener(v,I){}_removeListener(v,I){}}return E.type="NONE",E})();function _i(E,m,v){return`firebase:${E}:${m}:${v}`}class ${constructor(m,v,I){this.persistence=m,this.auth=v,this.userKey=I;const{config:A,name:O}=this.auth;this.fullUserKey=_i(this.userKey,A.apiKey,O),this.fullPersistenceKey=_i("persistence",A.apiKey,O),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,f.Z)(function*(){const v=yield m.persistence._get(m.fullUserKey);return v?$n._fromJSON(m.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var v=this;return(0,f.Z)(function*(){if(v.persistence===m)return;const I=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=m,I?v.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,v,I="authUser"){return(0,f.Z)(function*(){if(!v.length)return new $(vr(oi),m,I);const A=(yield Promise.all(v.map(function(){var Ye=(0,f.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let O=A[0]||vr(oi);const K=_i(I,m.config.apiKey,m.name);let ae=null;for(const Ye of v)try{const gt=yield Ye._get(K);if(gt){const Yt=$n._fromJSON(m,gt);Ye!==O&&(ae=Yt),O=Ye;break}}catch{}const je=A.filter(Ye=>Ye._shouldAllowMigration);return O._shouldAllowMigration&&je.length?(O=je[0],ae&&(yield O._set(K,ae.toJSON())),yield Promise.all(v.map(function(){var Ye=(0,f.Z)(function*(gt){if(gt!==O)try{yield gt._remove(K)}catch{}});return function(gt){return Ye.apply(this,arguments)}}())),new $(O,m,I)):new $(O,m,I)})()}}function H(E){const m=E.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Y(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(L(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(We(m))return"Blackberry";if(pt(m))return"Webos";if(F(m))return"Safari";if((m.includes("chrome/")||P(m))&&!m.includes("edge/"))return"Chrome";if(ge(m))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function L(E=(0,z.z$)()){return/firefox\//i.test(E)}function F(E=(0,z.z$)()){const m=E.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function P(E=(0,z.z$)()){return/crios\//i.test(E)}function Y(E=(0,z.z$)()){return/iemobile/i.test(E)}function ge(E=(0,z.z$)()){return/android/i.test(E)}function We(E=(0,z.z$)()){return/blackberry/i.test(E)}function pt(E=(0,z.z$)()){return/webos/i.test(E)}function me(E=(0,z.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Je(E=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Mt(E=(0,z.z$)()){return me(E)||ge(E)||pt(E)||We(E)||/windows phone/i.test(E)||Y(E)}function vi(E,m=[]){let v;switch(E){case"Browser":v=H((0,z.z$)());break;case"Worker":v=`${H((0,z.z$)())}-${E}`;break;default:v=E}const I=m.length?m.join(","):"FirebaseCore-web";return`${v}/JsCore/${U.SDK_VERSION}/${I}`}function ne(){return(ne=(0,f.Z)(function*(E){return(yield Rt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Oe(E,m){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,f.Z)(function*(E,m){return Rt(E,"GET","/v2/recaptchaConfig",bt(E,m))})).apply(this,arguments)}function St(E){return void 0!==E&&void 0!==E.getResponse}function Vt(E){return void 0!==E&&void 0!==E.enterprise}class pn{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function Wt(E){return new Promise((m,v)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=m,I.onerror=A=>{const O=ye("internal-error");O.customData=A,v(O)},I.type="text/javascript",I.charset="UTF-8",function Ln(){var E,m;return null!==(m=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==m?m:document}().appendChild(I)})}function Wr(E){return`__${E}${Math.floor(1e6*Math.random())}`}class uh{constructor(m){this.type="recaptcha-enterprise",this.auth=Vn(m)}verify(m="verify",v=!1){var I=this;return(0,f.Z)(function*(){function O(){return O=(0,f.Z)(function*(ae){if(!v){if(null==ae.tenantId&&null!=ae._agentRecaptchaConfig)return ae._agentRecaptchaConfig.siteKey;if(null!=ae.tenantId&&void 0!==ae._tenantRecaptchaConfigs[ae.tenantId])return ae._tenantRecaptchaConfigs[ae.tenantId].siteKey}return new Promise(function(){var je=(0,f.Z)(function*(Ye,gt){Oe(ae,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Yt=>{if(void 0!==Yt.recaptchaKey){const li=new pn(Yt);return null==ae.tenantId?ae._agentRecaptchaConfig=li:ae._tenantRecaptchaConfigs[ae.tenantId]=li,Ye(li.siteKey)}gt(new Error("recaptcha Enterprise site key undefined"))}).catch(Yt=>{gt(Yt)})});return function(Ye,gt){return je.apply(this,arguments)}}())}),O.apply(this,arguments)}function K(ae,je,Ye){const gt=window.grecaptcha;Vt(gt)?gt.enterprise.ready(()=>{gt.enterprise.execute(ae,{action:m}).then(Yt=>{je(Yt)}).catch(()=>{je("NO_RECAPTCHA")})}):Ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ae,je)=>{(function A(ae){return O.apply(this,arguments)})(I.auth).then(Ye=>{if(!v&&Vt(window.grecaptcha))K(Ye,ae,je);else{if(typeof window>"u")return void je(new Error("RecaptchaVerifier is only supported in browser"));Wt("https://www.google.com/recaptcha/enterprise.js?render="+Ye).then(()=>{K(Ye,ae,je)}).catch(gt=>{je(gt)})}}).catch(Ye=>{je(Ye)})})})()}}function an(E,m,v){return ch.apply(this,arguments)}function ch(){return(ch=(0,f.Z)(function*(E,m,v,I=!1){const A=new uh(E);let O;try{O=yield A.verify(v)}catch{O=yield A.verify(v,!0)}const K=Object.assign({},m);return Object.assign(K,I?{captchaResp:O}:{captchaResponse:O}),Object.assign(K,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(K,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),K})).apply(this,arguments)}class ng{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,v){const I=O=>new Promise((K,ae)=>{try{K(m(O))}catch(je){ae(je)}});I.onAbort=v,this.queue.push(I);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(m){var v=this;return(0,f.Z)(function*(){if(v.auth.currentUser===m)return;const I=[];try{for(const A of v.queue)yield A(m),A.onAbort&&I.push(A.onAbort)}catch(A){I.reverse();for(const O of I)try{O()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Pl{constructor(m,v,I,A){this.app=m,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=I,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $s(this),this.idTokenSubscription=new $s(this),this.beforeStateQueue=new ng(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(m,v){var I=this;return v&&(this._popupRedirectResolver=vr(v)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,O;if(!I._deleted&&(I.persistenceManager=yield $.create(I,m),!I._deleted)){if(null!==(A=I._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(v),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,f.Z)(function*(){if(m._deleted)return;const v=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||v){if(m.currentUser&&v&&m.currentUser.uid===v.uid)return m._currentUser._assign(v),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(v,!0)}})()}initializeCurrentUser(m){var v=this;return(0,f.Z)(function*(){var I;const A=yield v.assertedPersistence.getCurrentUser();let O=A,K=!1;if(m&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const ae=null===(I=v.redirectUser)||void 0===I?void 0:I._redirectEventId,je=O?._redirectEventId,Ye=yield v.tryRedirectSignIn(m);(!ae||ae===je)&&Ye?.user&&(O=Ye.user,K=!0)}if(!O)return v.directlySetCurrentUser(null);if(!O._redirectEventId){if(K)try{yield v.beforeStateQueue.runMiddleware(O)}catch(ae){O=A,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(ae))}return O?v.reloadAndSetCurrentUserOrClear(O):v.directlySetCurrentUser(null)}return ie(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===O._redirectEventId?v.directlySetCurrentUser(O):v.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(m){var v=this;return(0,f.Z)(function*(){let I=null;try{I=yield v._popupRedirectResolver._completeRedirectFn(v,m,!0)}catch{yield v._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var v=this;return(0,f.Z)(function*(){try{yield xr(m)}catch(I){if("auth/network-request-failed"!==I?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function fe(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var m=this;return(0,f.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var v=this;return(0,f.Z)(function*(){const I=m?(0,z.m9)(m):null;return I&&ie(I.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(I&&I._clone(v))})()}_updateCurrentUser(m,v=!1){var I=this;return(0,f.Z)(function*(){if(!I._deleted)return m&&ie(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),v||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,f.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,f.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var v=this;return this.queue((0,f.Z)(function*(){yield v.assertedPersistence.setPersistence(vr(m))}))}initializeRecaptchaConfig(){var m=this;return(0,f.Z)(function*(){const v=yield Oe(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new pn(v);null==m.tenantId?m._agentRecaptchaConfig=I:m._tenantRecaptchaConfigs[m.tenantId]=I,I.emailPasswordEnabled&&new uh(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new z.LL("auth","Firebase",m())}onAuthStateChanged(m,v,I){return this.registerStateListener(this.authStateSubscription,m,v,I)}beforeAuthStateChanged(m,v){return this.beforeStateQueue.pushCallback(m,v)}onIdTokenChanged(m,v,I){return this.registerStateListener(this.idTokenSubscription,m,v,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,v){var I=this;return(0,f.Z)(function*(){const A=yield I.getOrInitRedirectPersistenceManager(v);return null===m?A.removeCurrentUser():A.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var v=this;return(0,f.Z)(function*(){if(!v.redirectPersistenceManager){const I=m&&vr(m)||v._popupRedirectResolver;ie(I,v,"argument-error"),v.redirectPersistenceManager=yield $.create(v,[vr(I._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(m){var v=this;return(0,f.Z)(function*(){var I,A;return v._isInitialized&&(yield v.queue((0,f.Z)(function*(){}))),(null===(I=v._currentUser)||void 0===I?void 0:I._redirectEventId)===m?v._currentUser:(null===(A=v.redirectUser)||void 0===A?void 0:A._redirectEventId)===m?v.redirectUser:null})()}_persistUserIfCurrent(m){var v=this;return(0,f.Z)(function*(){if(m===v.currentUser)return v.queue((0,f.Z)(function*(){return v.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(v=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,v,I,A){if(this._deleted)return()=>{};const O="function"==typeof v?v:v.next.bind(v),K=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof v?m.addObserver(v,I,A):m.addObserver(v)}directlySetCurrentUser(m){var v=this;return(0,f.Z)(function*(){v.currentUser&&v.currentUser!==m&&v._currentUser._stopProactiveRefresh(),m&&v.isProactiveRefreshEnabled&&m._startProactiveRefresh(),v.currentUser=m,m?yield v.assertedPersistence.setCurrentUser(m):yield v.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=vi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,f.Z)(function*(){var v;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const A=yield null===(v=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();A&&(I["X-Firebase-Client"]=A);const O=yield m._getAppCheckToken();return O&&(I["X-Firebase-AppCheck"]=O),I})()}_getAppCheckToken(){var m=this;return(0,f.Z)(function*(){var v;const I=yield null===(v=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return I?.error&&function ht(E,...m){_e.logLevel<=Se.in.WARN&&_e.warn(`Auth (${U.SDK_VERSION}): ${E}`,...m)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Vn(E){return(0,z.m9)(E)}class $s{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,z.ne)(v=>this.observer=v)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function tr(E,m,v){const I=Vn(E);ie(I._canInitEmulator,I,"emulator-config-failed"),ie(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const A=!!v?.disableWarnings,O=rg(m),{host:K,port:ae}=function qr(E){const m=rg(E),v=/(\/\/)?([^?#/]+)/.exec(E.substr(m.length));if(!v)return{host:"",port:null};const I=v[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(I);if(A){const O=A[1];return{host:O,port:ai(I.substr(O.length+1))}}{const[O,K]=I.split(":");return{host:O,port:ai(K)}}}(m);I.config.emulator={url:`${O}//${K}${null===ae?"":`:${ae}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:K,port:ae,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Nl(){function E(){const m=document.createElement("p"),v=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function rg(E){const m=E.indexOf(":");return m<0?"":E.substr(0,m+1)}function ai(E){if(!E)return null;const m=Number(E);return isNaN(m)?null:m}class zs{constructor(m,v){this.providerId=m,this.signInMethod=v}toJSON(){return Xe("not implemented")}_getIdTokenResponse(m){return Xe("not implemented")}_linkToIdToken(m,v){return Xe("not implemented")}_getReauthenticationResolver(m){return Xe("not implemented")}}function Fl(E,m){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:resetPassword",bt(E,m))})).apply(this,arguments)}function dh(E,m){return ig.apply(this,arguments)}function ig(){return(ig=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function M_(E,m){return hh.apply(this,arguments)}function hh(){return(hh=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:update",bt(E,m))})).apply(this,arguments)}function k_(E,m){return Li.apply(this,arguments)}function Li(){return(Li=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithPassword",bt(E,m))})).apply(this,arguments)}function fh(E,m){return sg.apply(this,arguments)}function sg(){return(sg=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:sendOobCode",bt(E,m))})).apply(this,arguments)}function NE(E,m){return og.apply(this,arguments)}function og(){return(og=(0,f.Z)(function*(E,m){return fh(E,m)})).apply(this,arguments)}function ag(E,m){return lg.apply(this,arguments)}function lg(){return(lg=(0,f.Z)(function*(E,m){return fh(E,m)})).apply(this,arguments)}function ug(E,m){return cg.apply(this,arguments)}function cg(){return(cg=(0,f.Z)(function*(E,m){return fh(E,m)})).apply(this,arguments)}function FE(E,m){return dg.apply(this,arguments)}function dg(){return(dg=(0,f.Z)(function*(E,m){return fh(E,m)})).apply(this,arguments)}function hg(){return(hg=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithEmailLink",bt(E,m))})).apply(this,arguments)}function Ll(){return(Ll=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithEmailLink",bt(E,m))})).apply(this,arguments)}class lc extends zs{constructor(m,v,I,A=null){super("password",I),this._email=m,this._password=v,this._tenantId=A}static _fromEmailAndPassword(m,v){return new lc(m,v,"password")}static _fromEmailAndCode(m,v,I=null){return new lc(m,v,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(m){var v=this;return(0,f.Z)(function*(){var I;switch(v.signInMethod){case"password":const A={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=m._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const O=yield an(m,A,"signInWithPassword");return k_(m,O)}return k_(m,A).catch(function(){var O=(0,f.Z)(function*(K){if("auth/missing-recaptcha-token"===K.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ae=yield an(m,A,"signInWithPassword");return k_(m,ae)}return Promise.reject(K)});return function(K){return O.apply(this,arguments)}}());case"emailLink":return function R_(E,m){return hg.apply(this,arguments)}(m,{email:v._email,oobCode:v._password});default:Ae(m,"internal-error")}})()}_linkToIdToken(m,v){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return dh(m,{idToken:v,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function fg(E,m){return Ll.apply(this,arguments)}(m,{idToken:v,email:I._email,oobCode:I._password});default:Ae(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function ho(E,m){return pg.apply(this,arguments)}function pg(){return(pg=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithIdp",bt(E,m))})).apply(this,arguments)}class Ts extends zs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const v=new Ts(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(v.idToken=m.idToken),m.accessToken&&(v.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(v.nonce=m.nonce),m.pendingToken&&(v.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(v.accessToken=m.oauthToken,v.secret=m.oauthTokenSecret):Ae("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:A}=v,O=(0,ce._T)(v,["providerId","signInMethod"]);if(!I||!A)return null;const K=new Ts(I,A);return K.idToken=O.idToken||void 0,K.accessToken=O.accessToken||void 0,K.secret=O.secret,K.nonce=O.nonce,K.pendingToken=O.pendingToken||null,K}_getIdTokenResponse(m){return ho(m,this.buildRequest())}_linkToIdToken(m,v){const I=this.buildRequest();return I.idToken=v,ho(m,I)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,ho(m,v)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),m.postBody=(0,z.xO)(v)}return m}}function ph(E,m){return uc.apply(this,arguments)}function uc(){return(uc=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:sendVerificationCode",bt(E,m))})).apply(this,arguments)}function Vl(){return(Vl=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithPhoneNumber",bt(E,m))})).apply(this,arguments)}function mh(){return(mh=(0,f.Z)(function*(E,m){const v=yield Ut(E,"POST","/v1/accounts:signInWithPhoneNumber",bt(E,m));if(v.temporaryProof)throw yr(E,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const P_={USER_NOT_FOUND:"user-not-found"};function yh(){return(yh=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithPhoneNumber",bt(E,Object.assign(Object.assign({},m),{operation:"REAUTH"})),P_)})).apply(this,arguments)}class br extends zs{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,v){return new br({verificationId:m,verificationCode:v})}static _fromTokenResponse(m,v){return new br({phoneNumber:m,temporaryProof:v})}_getIdTokenResponse(m){return function gh(E,m){return Vl.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,v){return function gg(E,m){return mh.apply(this,arguments)}(m,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function cc(E,m){return yh.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:v,verificationId:I,verificationCode:A}=this.params;return m&&v?{temporaryProof:m,phoneNumber:v}:{sessionInfo:I,code:A}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:v,verificationCode:I,phoneNumber:A,temporaryProof:O}=m;return I||v||A||O?new br({verificationId:v,verificationCode:I,phoneNumber:A,temporaryProof:O}):null}}class po{constructor(m){var v,I,A,O,K,ae;const je=(0,z.zd)((0,z.pd)(m)),Ye=null!==(v=je.apiKey)&&void 0!==v?v:null,gt=null!==(I=je.oobCode)&&void 0!==I?I:null,Yt=function _h(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=je.mode)&&void 0!==A?A:null);ie(Ye&&gt&&Yt,"argument-error"),this.apiKey=Ye,this.operation=Yt,this.code=gt,this.continueUrl=null!==(O=je.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=je.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ae=je.tenantId)&&void 0!==ae?ae:null}static parseLink(m){const v=function LE(E){const m=(0,z.zd)((0,z.pd)(E)).link,v=m?(0,z.zd)((0,z.pd)(m)).deep_link_id:null,I=(0,z.zd)((0,z.pd)(E)).deep_link_id;return(I?(0,z.zd)((0,z.pd)(I)).link:null)||I||v||m||E}(m);try{return new po(v)}catch{return null}}}let O_=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(v,I){return lc._fromEmailAndPassword(v,I)}static credentialWithLink(v,I){const A=po.parseLink(I);return ie(A,"argument-error"),lc._fromEmailAndCode(v,A.code,A.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class bn{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ra extends bn{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class dc extends Ra{static credentialFromJSON(m){const v="string"==typeof m?JSON.parse(m):m;return ie("providerId"in v&&"signInMethod"in v,"argument-error"),Ts._fromParams(v)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ie(m.idToken||m.accessToken,"argument-error"),Ts._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return dc.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return dc.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:v,oauthAccessToken:I,oauthTokenSecret:A,pendingToken:O,nonce:K,providerId:ae}=m;if(!I&&!A&&!v&&!O||!ae)return null;try{return new dc(ae)._credential({idToken:v,accessToken:I,nonce:K,pendingToken:O})}catch{return null}}}let Ul=(()=>{class E extends Ra{constructor(){super("facebook.com")}static credential(v){return Ts._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return E.credential(v.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),bi=(()=>{class E extends Ra{constructor(){super("google.com"),this.addScope("profile")}static credential(v,I){return Ts._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:I})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:I,oauthAccessToken:A}=v;if(!I&&!A)return null;try{return E.credential(I,A)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),VE=(()=>{class E extends Ra{constructor(){super("github.com")}static credential(v){return Ts._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return E.credential(v.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ss extends zs{constructor(m,v){super(m,m),this.pendingToken=v}_getIdTokenResponse(m){return ho(m,this.buildRequest())}_linkToIdToken(m,v){const I=this.buildRequest();return I.idToken=v,ho(m,I)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,ho(m,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:A,pendingToken:O}=v;return I&&A&&O&&I===A?new Ss(I,O):null}static _create(m,v){return new Ss(m,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bh extends bn{constructor(m){ie(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return bh.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return bh.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const v=Ss.fromJSON(m);return ie(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:v,providerId:I}=m;if(!v||!I)return null;try{return Ss._create(I,v)}catch{return null}}}let Pa=(()=>{class E extends Ra{constructor(){super("twitter.com")}static credential(v,I){return Ts._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:I})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:I,oauthTokenSecret:A}=v;if(!I||!A)return null;try{return E.credential(I,A)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function wh(E,m){return xs.apply(this,arguments)}function xs(){return(xs=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signUp",bt(E,m))})).apply(this,arguments)}class wi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,v,I,A=!1){return(0,f.Z)(function*(){const O=yield $n._fromIdTokenResponse(m,I,A),K=hc(I);return new wi({user:O,providerId:K,_tokenResponse:I,operationType:v})})()}static _forOperation(m,v,I){return(0,f.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const A=hc(I);return new wi({user:m,providerId:A,_tokenResponse:I,operationType:v})})()}}function hc(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Lt(E){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,f.Z)(function*(E){var m;const v=Vn(E);if(yield v._initializationPromise,null!==(m=v.currentUser)&&void 0!==m&&m.isAnonymous)return new wi({user:v.currentUser,providerId:null,operationType:"signIn"});const I=yield wh(v,{returnSecureToken:!0}),A=yield wi._fromIdTokenResponse(v,"signIn",I,!0);return yield v._updateCurrentUser(A.user),A})).apply(this,arguments)}class mg extends z.ZR{constructor(m,v,I,A){var O;super(v.code,v.message),this.operationType=I,this.user=A,Object.setPrototypeOf(this,mg.prototype),this.customData={appName:m.name,tenantId:null!==(O=m.tenantId)&&void 0!==O?O:void 0,_serverResponse:v.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,v,I,A){return new mg(m,v,I,A)}}function yg(E,m,v,I){return("reauthenticate"===m?v._getReauthenticationResolver(E):v._getIdTokenResponse(E)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?mg._fromErrorAndOperation(E,O,m,I):O})}function _g(E){return new Set(E.map(({providerId:m})=>m).filter(m=>!!m))}function N_(E,m){return Go.apply(this,arguments)}function Go(){return(Go=(0,f.Z)(function*(E,m){const v=(0,z.m9)(E);yield Ee(!0,v,m);const{providerUserInfo:I}=yield Xi(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[m]}),A=_g(I||[]);return v.providerData=v.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Ih(E,m){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,f.Z)(function*(E,m,v=!1){const I=yield Jt(E,m._linkToIdToken(E.auth,yield E.getIdToken()),v);return wi._forOperation(E,"link",I)})).apply(this,arguments)}function Ee(E,m,v){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(E,m,v){yield xr(m);const A=!1===E?"provider-already-linked":"no-such-provider";ie(_g(m.providerData).has(v)===E,m.auth,A)})).apply(this,arguments)}function vg(E,m){return fc.apply(this,arguments)}function fc(){return(fc=(0,f.Z)(function*(E,m,v=!1){const{auth:I}=E,A="reauthenticate";try{const O=yield Jt(E,yg(I,A,m,E),v);ie(O.idToken,I,"internal-error");const K=Pn(O.idToken);ie(K,I,"internal-error");const{sub:ae}=K;return ie(E.uid===ae,I,"user-mismatch"),wi._forOperation(E,A,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ae(I,"user-mismatch"),O}})).apply(this,arguments)}function cr(E,m){return pc.apply(this,arguments)}function pc(){return(pc=(0,f.Z)(function*(E,m,v=!1){const I="signIn",A=yield yg(E,I,m),O=yield wi._fromIdTokenResponse(E,I,A);return v||(yield E._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Wo(E,m){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(E,m){return cr(Vn(E),m)})).apply(this,arguments)}function Dh(E,m){return gc.apply(this,arguments)}function gc(){return(gc=(0,f.Z)(function*(E,m){const v=(0,z.m9)(E);return yield Ee(!1,v,m.providerId),Ih(v,m)})).apply(this,arguments)}function bg(E,m){return Th.apply(this,arguments)}function Th(){return(Th=(0,f.Z)(function*(E,m){return vg((0,z.m9)(E),m)})).apply(this,arguments)}function UE(E,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithCustomToken",bt(E,m))})).apply(this,arguments)}function dr(E,m){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,f.Z)(function*(E,m){const v=Vn(E),I=yield UE(v,{token:m,returnSecureToken:!0}),A=yield wi._fromIdTokenResponse(v,"signIn",I);return yield v._updateCurrentUser(A.user),A})).apply(this,arguments)}class qo{constructor(m,v){this.factorId=m,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(m,v){return"phoneInfo"in v?Zo._fromServerResponse(m,v):"totpInfo"in v?As._fromServerResponse(m,v):Ae(m,"internal-error")}}class Zo extends qo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,v){return new Zo(v)}}class As extends qo{constructor(m){super("totp",m)}static _fromServerResponse(m,v){return new As(v)}}function Bl(E,m,v){var I;ie((null===(I=v.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),ie(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),m.continueUrl=v.url,m.dynamicLinkDomain=v.dynamicLinkDomain,m.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(ie(v.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),m.iOSBundleId=v.iOS.bundleId),v.android&&(ie(v.android.packageName.length>0,E,"missing-android-pkg-name"),m.androidInstallApp=v.android.installApp,m.androidMinimumVersionCode=v.android.minimumVersion,m.androidPackageName=v.android.packageName)}function F_(E,m,v){return wg.apply(this,arguments)}function wg(){return wg=(0,f.Z)(function*(E,m,v){var I;const A=Vn(E),O={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const K=yield an(A,O,"getOobCode",!0);v&&Bl(A,K,v),yield ag(A,K)}else v&&Bl(A,O,v),yield ag(A,O).catch(function(){var K=(0,f.Z)(function*(ae){if("auth/missing-recaptcha-token"!==ae.code)return Promise.reject(ae);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const je=yield an(A,O,"getOobCode",!0);v&&Bl(A,je,v),yield ag(A,je)}});return function(ae){return K.apply(this,arguments)}}())}),wg.apply(this,arguments)}function BE(E,m,v){return mc.apply(this,arguments)}function mc(){return(mc=(0,f.Z)(function*(E,m,v){yield Fl((0,z.m9)(E),{oobCode:m,newPassword:v})})).apply(this,arguments)}function Sh(E,m){return xh.apply(this,arguments)}function xh(){return(xh=(0,f.Z)(function*(E,m){yield M_((0,z.m9)(E),{oobCode:m})})).apply(this,arguments)}function yc(E,m){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,f.Z)(function*(E,m){const v=(0,z.m9)(E),I=yield Fl(v,{oobCode:m}),A=I.requestType;switch(ie(A,v,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(I.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(I.mfaInfo,v,"internal-error");default:ie(I.email,v,"internal-error")}let O=null;return I.mfaInfo&&(O=qo._fromServerResponse(Vn(v),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function L_(E,m){return _c.apply(this,arguments)}function _c(){return(_c=(0,f.Z)(function*(E,m){const{data:v}=yield yc((0,z.m9)(E),m);return v.email})).apply(this,arguments)}function V_(E,m,v){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,f.Z)(function*(E,m,v){var I;const A=Vn(E),O={returnSecureToken:!0,email:m,password:v,clientType:"CLIENT_TYPE_WEB"};let K;if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Ye=yield an(A,O,"signUpPassword");K=wh(A,Ye)}else K=wh(A,O).catch(function(){var Ye=(0,f.Z)(function*(gt){if("auth/missing-recaptcha-token"===gt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Yt=yield an(A,O,"signUpPassword");return wh(A,Yt)}return Promise.reject(gt)});return function(gt){return Ye.apply(this,arguments)}}());const ae=yield K.catch(Ye=>Promise.reject(Ye)),je=yield wi._fromIdTokenResponse(A,"signIn",ae);return yield A._updateCurrentUser(je.user),je}),Mh.apply(this,arguments)}function U_(E,m,v){return Wo((0,z.m9)(E),O_.credential(m,v))}function Eg(E,m,v){return Ko.apply(this,arguments)}function Ko(){return Ko=(0,f.Z)(function*(E,m,v){var I;const A=Vn(E),O={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function K(ae,je){ie(je.handleCodeInApp,A,"argument-error"),je&&Bl(A,ae,je)}if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const ae=yield an(A,O,"getOobCode",!0);K(ae,v),yield ug(A,ae)}else K(O,v),yield ug(A,O).catch(function(){var ae=(0,f.Z)(function*(je){if("auth/missing-recaptcha-token"!==je.code)return Promise.reject(je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ye=yield an(A,O,"getOobCode",!0);K(Ye,v),yield ug(A,Ye)}});return function(je){return ae.apply(this,arguments)}}())}),Ko.apply(this,arguments)}function jl(E,m){return"EMAIL_SIGNIN"===po.parseLink(m)?.operation}function B_(E,m,v){return nr.apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E),A=O_.credentialWithLink(m,v||dt());return ie(A._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Wo(I,A)})).apply(this,arguments)}function go(E,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:createAuthUri",bt(E,m))})).apply(this,arguments)}function j_(E,m){return kh.apply(this,arguments)}function kh(){return(kh=(0,f.Z)(function*(E,m){const I={identifier:m,continueUri:Kt()?dt():"http://localhost"},{signinMethods:A}=yield go((0,z.m9)(E),I);return A||[]})).apply(this,arguments)}function H_(E,m){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,f.Z)(function*(E,m){const v=(0,z.m9)(E),A={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};m&&Bl(v.auth,A,m);const{email:O}=yield NE(v.auth,A);O!==E.email&&(yield E.reload())})).apply(this,arguments)}function vc(E,m,v){return Na.apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:m};v&&Bl(I.auth,O,v);const{email:K}=yield FE(I.auth,O);K!==E.email&&(yield E.reload())})).apply(this,arguments)}function Hl(E,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function mo(E,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,f.Z)(function*(E,{displayName:m,photoURL:v}){if(void 0===m&&void 0===v)return;const I=(0,z.m9)(E),O={idToken:yield I.getIdToken(),displayName:m,photoUrl:v,returnSecureToken:!0},K=yield Jt(I,Hl(I.auth,O));I.displayName=K.displayName||null,I.photoURL=K.photoUrl||null;const ae=I.providerData.find(({providerId:je})=>"password"===je);ae&&(ae.displayName=I.displayName,ae.photoURL=I.photoURL),yield I._updateTokensIfNecessary(K)})).apply(this,arguments)}function bc(E,m){return Ms((0,z.m9)(E),m,null)}function Ph(E,m){return Ms((0,z.m9)(E),null,m)}function Ms(E,m,v){return yo.apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(E,m,v){const{auth:I}=E,O={idToken:yield E.getIdToken(),returnSecureToken:!0};m&&(O.email=m),v&&(O.password=v);const K=yield Jt(E,dh(I,O));yield E._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class La{constructor(m,v,I={}){this.isNewUser=m,this.providerId=v,this.profile=I}}class Va extends La{constructor(m,v,I,A){super(m,v,I),this.username=A}}class Oh extends La{constructor(m,v){super(m,"facebook.com",v)}}class wc extends Va{constructor(m,v){super(m,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Ig extends La{constructor(m,v){super(m,"google.com",v)}}class nA extends Va{constructor(m,v,I){super(m,"twitter.com",v,I)}}function Nh(E){const{user:m,_tokenResponse:v}=E;return m.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function $_(E){var m,v;if(!E)return null;const{providerId:I}=E,A=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},O=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&E?.idToken){const K=null===(v=null===(m=Pn(E.idToken))||void 0===m?void 0:m.firebase)||void 0===v?void 0:v.sign_in_provider;if(K)return new La(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!I)return null;switch(I){case"facebook.com":return new Oh(O,A);case"github.com":return new wc(O,A);case"google.com":return new Ig(O,A);case"twitter.com":return new nA(O,A,E.screenName||null);case"custom":case"anonymous":return new La(O,null);default:return new La(O,I,A)}}(v)}class ks{constructor(m,v,I){this.type=m,this.credential=v,this.auth=I}static _fromIdtoken(m,v){return new ks("enroll",m,v)}static _fromMfaPendingCredential(m){return new ks("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var v,I;if(m?.multiFactorSession){if(null!==(v=m.multiFactorSession)&&void 0!==v&&v.pendingCredential)return ks._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return ks._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ec{constructor(m,v,I){this.session=m,this.hints=v,this.signInResolver=I}static _fromError(m,v){const I=Vn(m),A=v.customData._serverResponse,O=(A.mfaInfo||[]).map(ae=>qo._fromServerResponse(I,ae));ie(A.mfaPendingCredential,I,"internal-error");const K=ks._fromMfaPendingCredential(A.mfaPendingCredential);return new Ec(K,O,function(){var ae=(0,f.Z)(function*(je){const Ye=yield je._process(I,K);delete A.mfaInfo,delete A.mfaPendingCredential;const gt=Object.assign(Object.assign({},A),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(v.operationType){case"signIn":const Yt=yield wi._fromIdTokenResponse(I,v.operationType,gt);return yield I._updateCurrentUser(Yt.user),Yt;case"reauthenticate":return ie(v.user,I,"internal-error"),wi._forOperation(v.user,v.operationType,gt);default:Ae(I,"internal-error")}});return function(je){return ae.apply(this,arguments)}}())}resolveSignIn(m){var v=this;return(0,f.Z)(function*(){return v.signInResolver(m)})()}}function Z_(E,m){var v;const I=(0,z.m9)(E),A=m;return ie(m.customData.operationType,I,"argument-error"),ie(null===(v=A.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,I,"argument-error"),Ec._fromError(I,A)}function K_(E,m){return Rt(E,"POST","/v2/accounts/mfaEnrollment:start",bt(E,m))}class Kl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(I=>qo._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Kl(m)}getSession(){var m=this;return(0,f.Z)(function*(){return ks._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,v){var I=this;return(0,f.Z)(function*(){const A=m,O=yield I.getSession(),K=yield Jt(I.user,A._process(I.user.auth,O,v));return yield I.user._updateTokensIfNecessary(K),I.user.reload()})()}unenroll(m){var v=this;return(0,f.Z)(function*(){const I="string"==typeof m?m:m.uid,A=yield v.user.getIdToken();try{const O=yield Jt(v.user,function Zl(E,m){return Rt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",bt(E,m))}(v.user.auth,{idToken:A,mfaEnrollmentId:I}));v.enrolledFactors=v.enrolledFactors.filter(({uid:K})=>K!==I),yield v.user._updateTokensIfNecessary(O),yield v.user.reload()}catch(O){throw O}})()}}const Ua=new WeakMap;function Ic(E){const m=(0,z.m9)(E);return Ua.has(m)||Ua.set(m,Kl._fromUser(m)),Ua.get(m)}const vo="__sak";class Lh{constructor(m,v){this.storageRetriever=m,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(vo,"1"),this.storage.removeItem(vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,v){return this.storage.setItem(m,JSON.stringify(v)),Promise.resolve()}_get(m){const v=this.storage.getItem(m);return Promise.resolve(v?JSON.parse(v):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const J_=(()=>{class E extends Lh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,I)=>this.onStorageEvent(v,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vh(){const E=(0,z.z$)();return F(E)||me(E)}()&&function cn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Mt(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const I of Object.keys(this.listeners)){const A=this.storage.getItem(I),O=this.localCache[I];A!==O&&v(I,O,A)}}onStorageEvent(v,I=!1){if(!v.key)return void this.forAllChangedKeys((ae,je,Ye)=>{this.notifyListeners(ae,Ye)});const A=v.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(A);if(v.newValue!==ae)null!==v.newValue?this.storage.setItem(A,v.newValue):this.storage.removeItem(A);else if(this.localCache[A]===v.newValue&&!I)return}const O=()=>{const ae=this.storage.getItem(A);!I&&this.localCache[A]===ae||this.notifyListeners(A,ae)},K=this.storage.getItem(A);!function tn(){return(0,z.w1)()&&10===document.documentMode}()||K===v.newValue||v.newValue===v.oldValue?O():setTimeout(O,10)}notifyListeners(v,I){this.localCache[v]=I;const A=this.listeners[v];if(A)for(const O of Array.from(A))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,I,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:I,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(I)}_removeListener(v,I){this.listeners[v]&&(this.listeners[v].delete(I),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,I){var A=()=>super._set,O=this;return(0,f.Z)(function*(){yield A().call(O,v,I),O.localCache[v]=JSON.stringify(I)})()}_get(v){var I=()=>super._get,A=this;return(0,f.Z)(function*(){const O=yield I().call(A,v);return A.localCache[v]=JSON.stringify(O),O})()}_remove(v){var I=()=>super._remove,A=this;return(0,f.Z)(function*(){yield I().call(A,v),delete A.localCache[v]})()}}return E.type="LOCAL",E})(),bo=(()=>{class E extends Lh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,I){}_removeListener(v,I){}}return E.type="SESSION",E})();let Dg=(()=>{class E{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const I=this.receivers.find(O=>O.isListeningto(v));if(I)return I;const A=new E(v);return this.receivers.push(A),A}isListeningto(v){return this.eventTarget===v}handleEvent(v){var I=this;return(0,f.Z)(function*(){const A=v,{eventId:O,eventType:K,data:ae}=A.data,je=I.handlersMap[K];if(!je?.size)return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const Ye=Array.from(je).map(function(){var Yt=(0,f.Z)(function*(li){return li(A.origin,ae)});return function(li){return Yt.apply(this,arguments)}}()),gt=yield function ev(E){return Promise.all(E.map(function(){var m=(0,f.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(I){return{fulfilled:!1,reason:I}}});return function(v){return m.apply(this,arguments)}}()))}(Ye);A.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:gt})})()}_subscribe(v,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(I)}_unsubscribe(v,I){this.handlersMap[v]&&I&&this.handlersMap[v].delete(I),(!I||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Yl(E="",m=10){let v="";for(let I=0;I<m;I++)v+=Math.floor(10*Math.random());return E+v}class Ql{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,v,I=50){var A=this;return(0,f.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,ae;return new Promise((je,Ye)=>{const gt=Yl("",20);O.port1.start();const Yt=setTimeout(()=>{Ye(new Error("unsupported_event"))},I);ae={messageChannel:O,onMessage(li){const ui=li;if(ui.data.eventId===gt)switch(ui.data.status){case"ack":clearTimeout(Yt),K=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),je(ui.data.response);break;default:clearTimeout(Yt),clearTimeout(K),Ye(new Error("invalid_response"))}}},A.handlers.add(ae),O.port1.addEventListener("message",ae.onMessage),A.target.postMessage({eventType:m,eventId:gt,data:v},[O.port2])}).finally(()=>{ae&&A.removeMessageHandler(ae)})})()}}function zn(){return window}function Xl(){return typeof zn().WorkerGlobalScope<"u"&&"function"==typeof zn().importScripts}function Ba(){return(Ba=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ja="firebaseLocalStorageDb",tu="firebaseLocalStorage",jh="fbase_key";class Ws{constructor(m){this.request=m}toPromise(){return new Promise((m,v)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Tg(E,m){return E.transaction([tu],m?"readwrite":"readonly").objectStore(tu)}function vn(){const E=indexedDB.open(ja,1);return new Promise((m,v)=>{E.addEventListener("error",()=>{v(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(tu,{keyPath:jh})}catch(A){v(A)}}),E.addEventListener("success",(0,f.Z)(function*(){const I=E.result;I.objectStoreNames.contains(tu)?m(I):(I.close(),yield function jE(){const E=indexedDB.deleteDatabase(ja);return new Ws(E).toPromise()}(),m(yield vn()))}))})}function nv(E,m,v){return rv.apply(this,arguments)}function rv(){return(rv=(0,f.Z)(function*(E,m,v){const I=Tg(E,!0).put({[jh]:m,value:v});return new Ws(I).toPromise()})).apply(this,arguments)}function iv(){return(iv=(0,f.Z)(function*(E,m){const v=Tg(E,!1).get(m),I=yield new Ws(v).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function HE(E,m){const v=Tg(E,!0).delete(m);return new Ws(v).toPromise()}const $E=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,f.Z)(function*(){return v.db||(v.db=yield vn()),v.db})()}_withRetries(v){var I=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const O=yield I._openDb();return yield v(O)}catch(O){if(A++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,f.Z)(function*(){return Xl()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,f.Z)(function*(){v.receiver=Dg._getInstance(function Jl(){return Xl()?self:null}()),v.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(A,O){return{keyProcessed:(yield v._poll()).includes(O.key)}});return function(A,O){return I.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return I.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,f.Z)(function*(){var I,A;if(v.activeServiceWorker=yield function tv(){return Ba.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Ql(v.activeServiceWorker);const O=yield v.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Cc(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:v},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const v=yield vn();return yield nv(v,vo,"1"),yield HE(v,vo),!0}catch{}return!1})()}_withPendingWrite(v){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield v()}finally{I.pendingWrites--}})()}_set(v,I){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(O=>nv(O,v,I)),A.localCache[v]=I,A.notifyServiceWorker(v)}))})()}_get(v){var I=this;return(0,f.Z)(function*(){const A=yield I._withRetries(O=>function rA(E,m){return iv.apply(this,arguments)}(O,v));return I.localCache[v]=A,A})()}_remove(v){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(A=>HE(A,v)),delete I.localCache[v],I.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,f.Z)(function*(){const I=yield v._withRetries(K=>{const ae=Tg(K,!1).getAll();return new Ws(ae).toPromise()});if(!I)return[];if(0!==v.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:K,value:ae}of I)O.add(K),JSON.stringify(v.localCache[K])!==JSON.stringify(ae)&&(v.notifyListeners(K,ae),A.push(K));for(const K of Object.keys(v.localCache))v.localCache[K]&&!O.has(K)&&(v.notifyListeners(K,null),A.push(K));return A})()}notifyListeners(v,I){this.localCache[v]=I;const A=this.listeners[v];if(A)for(const O of Array.from(A))O(I)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(I)}_removeListener(v,I){this.listeners[v]&&(this.listeners[v].delete(I),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function zE(E,m){return Rt(E,"POST","/v2/accounts/mfaSignIn:start",bt(E,m))}const Qo=1e12;class hr{constructor(m){this.auth=m,this.counter=Qo,this._widgets=new Map}render(m,v){const I=this.counter;return this._widgets.set(I,new Eo(m,this.auth.name,v||{})),this.counter++,I}reset(m){var v;const I=m||Qo;null===(v=this._widgets.get(I))||void 0===v||v.delete(),this._widgets.delete(I)}getResponse(m){var v;return(null===(v=this._widgets.get(m||Qo))||void 0===v?void 0:v.getResponse())||""}execute(m){var v=this;return(0,f.Z)(function*(){var I;return null===(I=v._widgets.get(m||Qo))||void 0===I||I.execute(),""})()}}class Eo{constructor(m,v,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof m?document.getElementById(m):m;ie(A,"argument-error",{appName:v}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $h(E){const m=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<E;I++)m.push(v.charAt(Math.floor(Math.random()*v.length)));return m.join("")}(50);const{callback:m,"expired-callback":v}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fr=Wr("rcb"),ru=new be(3e4,6e4);class Xo{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=zn().grecaptcha)||void 0===m||!m.render)}load(m,v=""){return ie(function GE(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(v),m,"argument-error"),this.shouldResolveImmediately(v)&&St(zn().grecaptcha)?Promise.resolve(zn().grecaptcha):new Promise((I,A)=>{const O=zn().setTimeout(()=>{A(ye(m,"network-request-failed"))},ru.get());zn()[fr]=()=>{zn().clearTimeout(O),delete zn()[fr];const ae=zn().grecaptcha;if(!ae||!St(ae))return void A(ye(m,"internal-error"));const je=ae.render;ae.render=(Ye,gt)=>{const Yt=je(Ye,gt);return this.counter++,Yt},this.hostLanguage=v,I(ae)},Wt(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:fr,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(O),A(ye(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var v;return!(null===(v=zn().grecaptcha)||void 0===v||!v.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oA{load(m){return(0,f.Z)(function*(){return new hr(m)})()}clearedOneInstance(){}}const WE="recaptcha",ov={theme:"light",type:"image"};class Bi{constructor(m,v=Object.assign({},ov),I){this.parameters=v,this.type=WE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vn(I),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof m?document.getElementById(m):m;ie(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oA:new Xo,this.validateStartingState()}verify(){var m=this;return(0,f.Z)(function*(){m.assertNotDestroyed();const v=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(v)||new Promise(O=>{const K=ae=>{!ae||(m.tokenChangeListeners.delete(K),O(ae))};m.tokenChangeListeners.add(K),m.isInvisible&&I.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return v=>{if(this.tokenChangeListeners.forEach(I=>I(v)),"function"==typeof m)m(v);else if("string"==typeof m){const I=zn()[m];"function"==typeof I&&I(v)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,f.Z)(function*(){if(yield m.init(),!m.widgetId){let v=m.container;if(!m.isInvisible){const I=document.createElement("div");v.appendChild(I),v=I}m.widgetId=m.getAssertedRecaptcha().render(v,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,f.Z)(function*(){ie(Kt()&&!Xl(),m.auth,"internal-error"),yield function Tc(){let E=null;return new Promise(m=>{"complete"!==document.readyState?(E=()=>m(),window.addEventListener("load",E)):m()}).catch(m=>{throw E&&window.removeEventListener("load",E),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const v=yield function se(E){return ne.apply(this,arguments)}(m.auth);ie(v,m.auth,"internal-error"),m.parameters.sitekey=v})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ji{constructor(m,v){this.verificationId=m,this.onConfirmation=v}confirm(m){const v=br._fromVerification(this.verificationId,m);return this.onConfirmation(v)}}function av(E,m,v){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,f.Z)(function*(E,m,v){const I=Vn(E),A=yield xc(I,m,(0,z.m9)(v));return new ji(A,O=>Wo(I,O))})).apply(this,arguments)}function qE(E,m,v){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);yield Ee(!1,I,"phone");const A=yield xc(I.auth,m,(0,z.m9)(v));return new ji(A,O=>Dh(I,O))})).apply(this,arguments)}function lv(E,m,v){return zh.apply(this,arguments)}function zh(){return(zh=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E),A=yield xc(I.auth,m,(0,z.m9)(v));return new ji(A,O=>bg(I,O))})).apply(this,arguments)}function xc(E,m,v){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,f.Z)(function*(E,m,v){var I;const A=yield v.verify();try{let O;if(ie("string"==typeof A,E,"argument-error"),ie(v.type===WE,E,"argument-error"),O="string"==typeof m?{phoneNumber:m}:m,"session"in O){const K=O.session;if("phoneNumber"in O)return ie("enroll"===K.type,E,"internal-error"),(yield K_(E,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ie("signin"===K.type,E,"internal-error");const ae=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ie(ae,E,"missing-multi-factor-info"),(yield zE(E,{mfaPendingCredential:K.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield ph(E,{phoneNumber:O.phoneNumber,recaptchaToken:A});return K}}finally{v._reset()}})).apply(this,arguments)}function Wh(E,m){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(E,m){yield Ih((0,z.m9)(E),m)})).apply(this,arguments)}let ZE=(()=>{class E{constructor(v){this.providerId=E.PROVIDER_ID,this.auth=Vn(v)}verifyPhoneNumber(v,I){return xc(this.auth,v,(0,z.m9)(I))}static credential(v,I){return br._fromVerification(v,I)}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:I,temporaryProof:A}=v;return I&&A?br._fromTokenResponse(I,A):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function ns(E,m){return m?vr(m):(ie(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class iu extends zs{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return ho(m,this._buildIdpRequest())}_linkToIdToken(m,v){return ho(m,this._buildIdpRequest(v))}_getReauthenticationResolver(m){return ho(m,this._buildIdpRequest())}_buildIdpRequest(m){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(v.idToken=m),v}}function Ac(E){return cr(E.auth,new iu(E),E.bypassAuthState)}function KE(E){const{auth:m,user:v}=E;return ie(v,m,"internal-error"),vg(v,new iu(E),E.bypassAuthState)}function uv(E){return qh.apply(this,arguments)}function qh(){return(qh=(0,f.Z)(function*(E){const{auth:m,user:v}=E;return ie(v,m,"internal-error"),Ih(v,new iu(E),E.bypassAuthState)})).apply(this,arguments)}class Zh{constructor(m,v,I,A,O=!1){this.auth=m,this.resolver=I,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var m=this;return new Promise(function(){var v=(0,f.Z)(function*(I,A){m.pendingPromise={resolve:I,reject:A};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(O){m.reject(O)}});return function(I,A){return v.apply(this,arguments)}}())}onAuthEvent(m){var v=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:A,postBody:O,tenantId:K,error:ae,type:je}=m;if(ae)return void v.reject(ae);const Ye={auth:v.auth,requestUri:I,sessionId:A,tenantId:K||void 0,postBody:O||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(je)(Ye))}catch(gt){v.reject(gt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ac;case"linkViaPopup":case"linkViaRedirect":return uv;case"reauthViaPopup":case"reauthViaRedirect":return KE;default:Ae(this.auth,"internal-error")}}resolve(m){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const su=new be(2e3,1e4);function za(E,m,v){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,f.Z)(function*(E,m,v){const I=Vn(E);Ge(E,m,bn);const A=ns(I,v);return new Jo(I,"signInViaPopup",m,A).executeNotNull()})).apply(this,arguments)}function rr(E,m,v){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);Ge(I.auth,m,bn);const A=ns(I.auth,v);return new Jo(I.auth,"reauthViaPopup",m,A,I).executeNotNull()})).apply(this,arguments)}function Sg(E,m,v){return ou.apply(this,arguments)}function ou(){return(ou=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);Ge(I.auth,m,bn);const A=ns(I.auth,v);return new Jo(I.auth,"linkViaPopup",m,A,I).executeNotNull()})).apply(this,arguments)}let Jo=(()=>{class E extends Zh{constructor(v,I,A,O,K){super(v,I,O,K),this.provider=A,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var v=this;return(0,f.Z)(function*(){const I=yield v.execute();return ie(I,v.auth,"internal-error"),I})()}onExecution(){var v=this;return(0,f.Z)(function*(){At(1===v.filter.length,"Popup operations only handle one event");const I=Yl();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],I),v.authWindow.associatedEvent=I,v.resolver._originValidation(v.auth).catch(A=>{v.reject(A)}),v.resolver._isIframeWebStorageSupported(v.auth,A=>{A||v.reject(ye(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const v=()=>{var I,A;this.pollId=null!==(A=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,su.get())};v()}}return E.currentPopupAction=null,E})();const au=new Map;class dv extends Zh{constructor(m,v,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,v=this;return(0,f.Z)(function*(){let I=au.get(v.auth._key());if(!I){try{const O=(yield function Yh(E,m){return ea.apply(this,arguments)}(v.resolver,v.auth))?yield m().call(v):null;I=()=>Promise.resolve(O)}catch(A){I=()=>Promise.reject(A)}au.set(v.auth._key(),I)}return v.bypassAuthState||au.set(v.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var v=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===m.type)return v().call(I,m);if("unknown"!==m.type){if(m.eventId){const A=yield I.auth._redirectUserForId(m.eventId);if(A)return I.user=A,v().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ea(){return(ea=(0,f.Z)(function*(E,m){const v=lu(m),I=Ga(E);if(!(yield I._isAvailable()))return!1;const A="true"===(yield I._get(v));return yield I._remove(v),A})).apply(this,arguments)}function kc(E,m){return ta.apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(E,m){return Ga(E)._set(lu(m),"true")})).apply(this,arguments)}function hv(){au.clear()}function Qh(E,m){au.set(E._key(),m)}function Ga(E){return vr(E._redirectPersistence)}function lu(E){return _i("pendingRedirect",E.config.apiKey,E.name)}function fv(E,m,v){return function pv(E,m,v){return Xh.apply(this,arguments)}(E,m,v)}function Xh(){return(Xh=(0,f.Z)(function*(E,m,v){const I=Vn(E);Ge(E,m,bn),yield I._initializationPromise;const A=ns(I,v);return yield kc(A,I),A._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function Wa(E,m,v){return function na(E,m,v){return Rs.apply(this,arguments)}(E,m,v)}function Rs(){return(Rs=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);Ge(I.auth,m,bn),yield I.auth._initializationPromise;const A=ns(I.auth,v);yield kc(A,I.auth);const O=yield qa(I);return A._openRedirect(I.auth,m,"reauthViaRedirect",O)})).apply(this,arguments)}function gv(E,m,v){return function Rc(E,m,v){return uu.apply(this,arguments)}(E,m,v)}function uu(){return(uu=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);Ge(I.auth,m,bn),yield I.auth._initializationPromise;const A=ns(I.auth,v);yield Ee(!1,I,m.providerId),yield kc(A,I.auth);const O=yield qa(I);return A._openRedirect(I.auth,m,"linkViaRedirect",O)})).apply(this,arguments)}function xg(E,m){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(E,m){return yield Vn(E)._initializationPromise,Pc(E,m,!1)})).apply(this,arguments)}function Pc(E,m){return cu.apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(E,m,v=!1){const I=Vn(E),A=ns(I,m),K=yield new dv(I,A,v).execute();return K&&!v&&(delete K.user._redirectEventId,yield I._persistUserIfCurrent(K.user),yield I._setRedirectUser(null,m)),K})).apply(this,arguments)}function qa(E){return du.apply(this,arguments)}function du(){return(du=(0,f.Z)(function*(E){const m=Yl(`${E.uid}:::`);return E._redirectEventId=m,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),m})).apply(this,arguments)}class Ag{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let v=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(v=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function yv(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qs(E);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=m,v=!0)),v}sendToConsumer(m,v){var I;if(m.error&&!qs(m)){const A=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";v.onError(ye(this.auth,A))}else v.onAuthEvent(m)}isEventForConsumer(m,v){const I=null===v.eventId||!!m.eventId&&m.eventId===v.eventId;return v.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mv(m))}saveEventToCache(m){this.cachedEventUids.add(mv(m)),this.lastProcessedEventTime=Date.now()}}function mv(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(m=>m).join("-")}function qs({type:E,error:m}){return"unknown"===E&&"auth/no-auth-event"===m?.code}function Mg(E){return kg.apply(this,arguments)}function kg(){return(kg=(0,f.Z)(function*(E,m={}){return Rt(E,"GET","/v1/projects",m)})).apply(this,arguments)}const ef=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_v=/^https?/;function Oc(){return(Oc=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:m}=yield Mg(E);for(const v of m)try{if(bv(v))return}catch{}Ae(E,"unauthorized-domain")})).apply(this,arguments)}function bv(E){const m=dt(),{protocol:v,hostname:I}=new URL(m);if(E.startsWith("chrome-extension://")){const K=new URL(E);return""===K.hostname&&""===I?"chrome-extension:"===v&&E.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===v&&K.hostname===I}if(!_v.test(v))return!1;if(ef.test(E))return I===E;const A=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(I)}const Rg=new be(3e4,6e4);function wv(){const E=zn().___jsl;if(E?.H)for(const m of Object.keys(E.H))if(E.H[m].r=E.H[m].r||[],E.H[m].L=E.H[m].L||[],E.H[m].r=[...E.H[m].L],E.CP)for(let v=0;v<E.CP.length;v++)E.CP[v]=null}let tf=null;function nf(E){return tf=tf||function Ev(E){return new Promise((m,v)=>{var I,A,O;function K(){wv(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{wv(),v(ye(E,"network-request-failed"))},timeout:Rg.get()})}if(null!==(A=null===(I=zn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==A&&A.Iframe)m(gapi.iframes.getContext());else{if(null===(O=zn().gapi)||void 0===O||!O.load){const ae=Wr("iframefcb");return zn()[ae]=()=>{gapi.load?K():v(ye(E,"network-request-failed"))},Wt(`https://apis.google.com/js/api.js?onload=${ae}`).catch(je=>v(je))}K()}}).catch(m=>{throw tf=null,m})}(E),tf}const hu=new be(5e3,15e3),rf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Er(E){const m=E.config;ie(m.authDomain,E,"auth-domain-config-required");const v=m.emulator?Me(m,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,I={apiKey:m.apiKey,appName:E.name,v:U.SDK_VERSION},A=Nc.get(E.config.apiHost);A&&(I.eid=A);const O=E._getFrameworks();return O.length&&(I.fw=O.join(",")),`${v}?${(0,z.xO)(I).slice(1)}`}function Ka(){return Ka=(0,f.Z)(function*(E){const m=yield nf(E),v=zn().gapi;return ie(v,E,"internal-error"),m.open({where:document.body,url:Er(E),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rf,dontclear:!0},I=>new Promise(function(){var A=(0,f.Z)(function*(O,K){yield I.restyle({setHideOnLeave:!1});const ae=ye(E,"network-request-failed"),je=zn().setTimeout(()=>{K(ae)},hu.get());function Ye(){zn().clearTimeout(je),O(I)}I.ping(Ye).then(Ye,()=>{K(ae)})});return function(O,K){return A.apply(this,arguments)}}()))}),Ka.apply(this,arguments)}const Iv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zs{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ra=encodeURIComponent("fac");function Lc(E,m,v,I,A,O){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(E,m,v,I,A,O){ie(E.config.authDomain,E,"auth-domain-config-required"),ie(E.config.apiKey,E,"invalid-api-key");const K={apiKey:E.config.apiKey,appName:E.name,authType:v,redirectUrl:I,v:U.SDK_VERSION,eventId:A};if(m instanceof bn){m.setDefaultLanguage(E.languageCode),K.providerId=m.providerId||"",(0,z.xb)(m.getCustomParameters())||(K.customParameters=JSON.stringify(m.getCustomParameters()));for(const[gt,Yt]of Object.entries(O||{}))K[gt]=Yt}if(m instanceof Ra){const gt=m.getScopes().filter(Yt=>""!==Yt);gt.length>0&&(K.scopes=gt.join(","))}E.tenantId&&(K.tid=E.tenantId);const ae=K;for(const gt of Object.keys(ae))void 0===ae[gt]&&delete ae[gt];const je=yield E._getAppCheckToken(),Ye=je?`#${ra}=${encodeURIComponent(je)}`:"";return`${Ar(E)}?${(0,z.xO)(ae).slice(1)}${Ye}`})).apply(this,arguments)}function Ar({config:E}){return E.emulator?Me(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}const rs="webStorageSupport",Ng=class pu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bo,this._completeRedirectFn=Pc,this._overrideRedirectResult=Qh}_openPopup(m,v,I,A){var O=this;return(0,f.Z)(function*(){var K;At(null===(K=O.eventManagers[m._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ae=yield Lc(m,v,I,dt(),A);return function af(E,m,v,I=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),K=Math.max((window.screen.availWidth-I)/2,0).toString();let ae="";const je=Object.assign(Object.assign({},Iv),{width:I.toString(),height:A.toString(),top:O,left:K}),Ye=(0,z.z$)().toLowerCase();v&&(ae=P(Ye)?"_blank":v),L(Ye)&&(m=m||"http://localhost",je.scrollbars="yes");const gt=Object.entries(je).reduce((li,[ui,oa])=>`${li}${ui}=${oa},`,"");if(function it(E=(0,z.z$)()){var m;return me(E)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Ye)&&"_self"!==ae)return function Og(E,m){const v=document.createElement("a");v.href=E,v.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(I)}(m||"",ae),new Zs(null);const Yt=window.open(m||"",ae,gt);ie(Yt,E,"popup-blocked");try{Yt.focus()}catch{}return new Zs(Yt)}(m,ae,Yl())})()}_openRedirect(m,v,I,A){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(m),function Gs(E){zn().location.href=E}(yield Lc(m,v,I,dt(),A)),new Promise(()=>{})})()}_initialize(m){const v=m._key();if(this.eventManagers[v]){const{manager:A,promise:O}=this.eventManagers[v];return A?Promise.resolve(A):(At(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(m);return this.eventManagers[v]={promise:I},I.catch(()=>{delete this.eventManagers[v]}),I}initAndGetManager(m){var v=this;return(0,f.Z)(function*(){const I=yield function sf(E){return Ka.apply(this,arguments)}(m),A=new Ag(m);return I.register("authEvent",O=>(ie(O?.authEvent,m,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[m._key()]={manager:A},v.iframes[m._key()]=I,A})()}_isIframeWebStorageSupported(m,v){this.iframes[m._key()].send(rs,{type:rs},A=>{var O;const K=null===(O=A?.[0])||void 0===O?void 0:O[rs];void 0!==K&&v(!!K),Ae(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const v=m._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function vv(E){return Oc.apply(this,arguments)}(m)),this.originValidationPromises[v]}get _shouldInitProactively(){return Mt()||F()||me()}};class Vc extends class lf{constructor(m){this.factorId=m}_process(m,v,I){switch(v.type){case"enroll":return this._finalizeEnroll(m,v.credential,I);case"signin":return this._finalizeSignIn(m,v.credential);default:return Xe("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Vc(m)}_finalizeEnroll(m,v,I){return function Cg(E,m){return Rt(E,"POST","/v2/accounts/mfaEnrollment:finalize",bt(E,m))}(m,{idToken:v,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,v){return function wr(E,m){return Rt(E,"POST","/v2/accounts/mfaSignIn:finalize",bt(E,m))}(m,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dv=(()=>{class E{constructor(){}static assertion(v){return Vc._fromCredential(v)}}return E.FACTOR_ID="phone",E})();var gu="@firebase/auth";class uf{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var v=this;return(0,f.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const v=this.auth.onIdTokenChanged(I=>{m(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,v),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const v=this.internalListeners.get(m);!v||(this.internalListeners.delete(m),v(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,z.Pz)("authIdTokenMaxAge"),function xv(E){(0,U._registerComponent)(new Ce.wA("auth",(m,{options:v})=>{const I=m.getProvider("app").getImmediate(),A=m.getProvider("heartbeat"),O=m.getProvider("app-check-internal"),{apiKey:K,authDomain:ae}=I.options;ie(K&&!K.includes(":"),"invalid-api-key",{appName:I.name});const je={apiKey:K,authDomain:ae,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vi(E)},Ye=new Pl(I,A,O,je);return function zo(E,m){const v=m?.persistence||[],I=(Array.isArray(v)?v:[v]).map(vr);m?.errorMap&&E._updateErrorMap(m.errorMap),E._initializeWithPersistence(I,m?.popupRedirectResolver)}(Ye,v),Ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,v,I)=>{m.getProvider("auth-internal").initialize()})),(0,U._registerComponent)(new Ce.wA("auth-internal",m=>{const v=Vn(m.getProvider("auth").getImmediate());return new uf(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,U.registerVersion)(gu,"0.23.2",function Sv(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,U.registerVersion)(gu,"0.23.2","esm2017")}("Browser")},2090:(_t,ke,j)=>{j.d(ke,{$s:()=>vr,BH:()=>we,G6:()=>Me,L:()=>He,LL:()=>tt,P0:()=>Dt,Pz:()=>ye,Sg:()=>Ge,UG:()=>Xe,US:()=>Ce,ZB:()=>J,ZR:()=>Rt,aH:()=>Ae,b$:()=>Kt,eu:()=>ve,hl:()=>Le,jU:()=>At,m9:()=>_i,ne:()=>Jt,pd:()=>Pn,r3:()=>Xi,ru:()=>dt,tV:()=>Z,uI:()=>ie,vZ:()=>Ur,w1:()=>he,xO:()=>Ji,xb:()=>ka,z$:()=>Ke,zI:()=>Tt,zd:()=>Oi});const ce=function($){const H=[];let L=0;for(let F=0;F<$.length;F++){let P=$.charCodeAt(F);P<128?H[L++]=P:P<2048?(H[L++]=P>>6|192,H[L++]=63&P|128):55296==(64512&P)&&F+1<$.length&&56320==(64512&$.charCodeAt(F+1))?(P=65536+((1023&P)<<10)+(1023&$.charCodeAt(++F)),H[L++]=P>>18|240,H[L++]=P>>12&63|128,H[L++]=P>>6&63|128,H[L++]=63&P|128):(H[L++]=P>>12|224,H[L++]=P>>6&63|128,H[L++]=63&P|128)}return H},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,H){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let P=0;P<$.length;P+=3){const Y=$[P],ge=P+1<$.length,We=ge?$[P+1]:0,pt=P+2<$.length,me=pt?$[P+2]:0;let tn=(15&We)<<2|me>>6,Mt=63&me;pt||(Mt=64,ge||(tn=64)),F.push(L[Y>>2],L[(3&Y)<<4|We>>4],L[tn],L[Mt])}return F.join("")},encodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa($):this.encodeByteArray(ce($),H)},decodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?atob($):function($){const H=[];let L=0,F=0;for(;L<$.length;){const P=$[L++];if(P<128)H[F++]=String.fromCharCode(P);else if(P>191&&P<224){const Y=$[L++];H[F++]=String.fromCharCode((31&P)<<6|63&Y)}else if(P>239&&P<365){const pt=((7&P)<<18|(63&$[L++])<<12|(63&$[L++])<<6|63&$[L++])-65536;H[F++]=String.fromCharCode(55296+(pt>>10)),H[F++]=String.fromCharCode(56320+(1023&pt))}else{const Y=$[L++],ge=$[L++];H[F++]=String.fromCharCode((15&P)<<12|(63&Y)<<6|63&ge)}}return H.join("")}(this.decodeStringToByteArray($,H))},decodeStringToByteArray($,H){this.init_();const L=H?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let P=0;P<$.length;){const Y=L[$.charAt(P++)],We=P<$.length?L[$.charAt(P)]:0;++P;const me=P<$.length?L[$.charAt(P)]:64;++P;const it=P<$.length?L[$.charAt(P)]:64;if(++P,null==Y||null==We||null==me||null==it)throw new Pe;F.push(Y<<2|We>>4),64!==me&&(F.push(We<<4&240|me>>2),64!==it&&F.push(me<<6&192|it))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const He=function($){return function($){const H=ce($);return Ce.encodeByteArray(H,!0)}($).replace(/\./g,"")},Z=function($){try{return Ce.decodeString($,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function J($,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return H}for(const L in H)!H.hasOwnProperty(L)||!ze(L)||($[L]=J($[L],H[L]));return $}function ze($){return"__proto__"!==$}const _e=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=$&&Z($[1]);return H&&JSON.parse(H)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Dt=$=>{const H=($=>{var H,L;return null===(L=null===(H=_e())||void 0===H?void 0:H.emulatorHosts)||void 0===L?void 0:L[$]})($);if(!H)return;const L=H.lastIndexOf(":");if(L<=0||L+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const F=parseInt(H.substring(L+1),10);return"["===H[0]?[H.substring(1,L-1),F]:[H.substring(0,L),F]},Ae=()=>{var $;return null===($=_e())||void 0===$?void 0:$.config},ye=$=>{var H;return null===(H=_e())||void 0===H?void 0:H[`_${$}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,L)=>{this.resolve=H,this.reject=L})}wrapCallback(H){return(L,F)=>{L?this.reject(L):this.resolve(F),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(L):H(L,F))}}}function Ge($,H){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=H||"demo-project",P=$.iat||0,Y=$.sub||$.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ge=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:P,exp:P+3600,auth_time:P,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},$);return[He(JSON.stringify({alg:"none",type:"JWT"})),He(JSON.stringify(ge)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Xe(){var $;const H=null===($=_e())||void 0===$?void 0:$.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function At(){return"object"==typeof self&&self.self===self}function dt(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){const $=Ke();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Me(){return!Xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Le(){try{return"object"==typeof indexedDB}catch{return!1}}function ve(){return new Promise(($,H)=>{try{let L=!0;const F="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(F);P.onsuccess=()=>{P.result.close(),L||self.indexedDB.deleteDatabase(F),$(!0)},P.onupgradeneeded=()=>{L=!1},P.onerror=()=>{var Y;H((null===(Y=P.error)||void 0===Y?void 0:Y.message)||"")}}catch(L){H(L)}})}function Tt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Rt extends Error{constructor(H,L,F){super(L),this.code=H,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,Rt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(H,L,F){this.service=H,this.serviceName=L,this.errors=F}create(H,...L){const F=L[0]||{},P=`${this.service}/${H}`,Y=this.errors[H],ge=Y?function Xt($,H){return $.replace(zt,(L,F)=>{const P=H[F];return null!=P?String(P):`<${F}?>`})}(Y,F):"Error";return new Rt(P,`${this.serviceName}: ${ge} (${P}).`,F)}}const zt=/\{\$([^}]+)}/g;function Xi($,H){return Object.prototype.hasOwnProperty.call($,H)}function ka($){for(const H in $)if(Object.prototype.hasOwnProperty.call($,H))return!1;return!0}function Ur($,H){if($===H)return!0;const L=Object.keys($),F=Object.keys(H);for(const P of L){if(!F.includes(P))return!1;const Y=$[P],ge=H[P];if(lr(Y)&&lr(ge)){if(!Ur(Y,ge))return!1}else if(Y!==ge)return!1}for(const P of F)if(!L.includes(P))return!1;return!0}function lr($){return null!==$&&"object"==typeof $}function Ji($){const H=[];for(const[L,F]of Object.entries($))Array.isArray(F)?F.forEach(P=>{H.push(encodeURIComponent(L)+"="+encodeURIComponent(P))}):H.push(encodeURIComponent(L)+"="+encodeURIComponent(F));return H.length?"&"+H.join("&"):""}function Oi($){const H={};return $.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[P,Y]=F.split("=");H[decodeURIComponent(P)]=decodeURIComponent(Y)}}),H}function Pn($){const H=$.indexOf("?");if(!H)return"";const L=$.indexOf("#",H);return $.substring(H,L>0?L:void 0)}function Jt($,H){const L=new yt($,H);return L.subscribe.bind(L)}class yt{constructor(H,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{H(this)}).catch(F=>{this.error(F)})}next(H){this.forEachObserver(L=>{L.next(H)})}error(H){this.forEachObserver(L=>{L.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,L,F){let P;if(void 0===H&&void 0===L&&void 0===F)throw new Error("Missing Observer.");P=function en($,H){if("object"!=typeof $||null===$)return!1;for(const L of H)if(L in $&&"function"==typeof $[L])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:L,complete:F},void 0===P.next&&(P.next=si),void 0===P.error&&(P.error=si),void 0===P.complete&&(P.complete=si);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,H)}sendOne(H,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{L(this.observers[H])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function si(){}function vr($,H=1e3,L=2){const F=H*Math.pow(L,$),P=Math.round(.5*F*(Math.random()-.5)*2);return Math.min(144e5,F+P)}function _i($){return $&&$._delegate?$._delegate:$}},2598:(_t,ke,j)=>{var f=j(4650);let z=null;function U(){return z}const Pe=new f.OlP("DocumentToken");let Re=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function He(){return(0,f.LFG)(q)}()},providedIn:"platform"}),n})();const Z=new f.OlP("Location Initialized");let q=(()=>{class n extends Re{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ze(){return new q((0,f.LFG)(Pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(ht)},providedIn:"root"}),n})();const _e=new f.OlP("appBaseHref");let ht=(()=>{class n extends ue{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+rt(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+rt(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Re),f.LFG(_e,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dt=(()=>{class n extends ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+rt(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+rt(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Re),f.LFG(_e,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=xe(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rt(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Be,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ye(){return new Ae((0,f.LFG)(ue))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}var At=(()=>((At=At||{})[At.Format=0]="Format",At[At.Standalone=1]="Standalone",At))(),dt=(()=>((dt=dt||{})[dt.Narrow=0]="Narrow",dt[dt.Abbreviated=1]="Abbreviated",dt[dt.Wide=2]="Wide",dt[dt.Short=3]="Short",dt))(),Kt=(()=>((Kt=Kt||{})[Kt.Short=0]="Short",Kt[Kt.Medium=1]="Medium",Kt[Kt.Long=2]="Long",Kt[Kt.Full=3]="Full",Kt))(),ft=(()=>((ft=ft||{})[ft.Decimal=0]="Decimal",ft[ft.Group=1]="Group",ft[ft.List=2]="List",ft[ft.PercentSign=3]="PercentSign",ft[ft.PlusSign=4]="PlusSign",ft[ft.MinusSign=5]="MinusSign",ft[ft.Exponential=6]="Exponential",ft[ft.SuperscriptingExponent=7]="SuperscriptingExponent",ft[ft.PerMille=8]="PerMille",ft[ft.Infinity=9]="Infinity",ft[ft.NaN=10]="NaN",ft[ft.TimeSeparator=11]="TimeSeparator",ft[ft.CurrencyDecimal=12]="CurrencyDecimal",ft[ft.CurrencyGroup=13]="CurrencyGroup",ft))();function Rt(n,e){return ot((0,f.cg1)(n)[f.wAp.DateFormat],e)}function tt(n,e){return ot((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function Xt(n,e){return ot((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function zt(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ft.CurrencyDecimal)return t[f.wAp.NumberSymbols][ft.Decimal];if(e===ft.CurrencyGroup)return t[f.wAp.NumberSymbols][ft.Group]}return r}function ii(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ot(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Ur(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Oi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pn={},Tn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Jt=(()=>((Jt=Jt||{})[Jt.Short=0]="Short",Jt[Jt.ShortGMT=1]="ShortGMT",Jt[Jt.Long=2]="Long",Jt[Jt.Extended=3]="Extended",Jt))(),yt=(()=>((yt=yt||{})[yt.FullYear=0]="FullYear",yt[yt.Month=1]="Month",yt[yt.Date=2]="Date",yt[yt.Hours=3]="Hours",yt[yt.Minutes=4]="Minutes",yt[yt.Seconds=5]="Seconds",yt[yt.FractionalSeconds=6]="FractionalSeconds",yt[yt.Day=7]="Day",yt))(),It=(()=>((It=It||{})[It.DayPeriods=0]="DayPeriods",It[It.Days=1]="Days",It[It.Months=2]="Months",It[It.Eras=3]="Eras",It))();function en(n,e,t,r){let i=function P(n){if(ge(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(c=>+c);return si(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Oi))return function Y(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,c=Number(n[5]||0)-r,d=Number(n[6]||0),g=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,c,d,g),e}(r)}const e=new Date(n);if(!ge(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=xr(t,e)||e;let c,o=[];for(;e;){if(c=Tn.exec(e),!c){o.push(e);break}{o=o.concat(c.slice(1));const _=o.pop();if(!_)break;e=_}}let d=i.getTimezoneOffset();r&&(d=H(r,d),i=function F(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function L(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(H(e,i)-i))}(i,r,!0));let g="";return o.forEach(_=>{const w=function $(n){if(_i[n])return _i[n];let e;switch(n){case"G":case"GG":case"GGG":e=on(It.Eras,dt.Abbreviated);break;case"GGGG":e=on(It.Eras,dt.Wide);break;case"GGGGG":e=on(It.Eras,dt.Narrow);break;case"y":e=Gt(yt.FullYear,1,0,!1,!0);break;case"yy":e=Gt(yt.FullYear,2,0,!0,!0);break;case"yyy":e=Gt(yt.FullYear,3,0,!1,!0);break;case"yyyy":e=Gt(yt.FullYear,4,0,!1,!0);break;case"Y":e=oi(1);break;case"YY":e=oi(2,!0);break;case"YYY":e=oi(3);break;case"YYYY":e=oi(4);break;case"M":case"L":e=Gt(yt.Month,1,1);break;case"MM":case"LL":e=Gt(yt.Month,2,1);break;case"MMM":e=on(It.Months,dt.Abbreviated);break;case"MMMM":e=on(It.Months,dt.Wide);break;case"MMMMM":e=on(It.Months,dt.Narrow);break;case"LLL":e=on(It.Months,dt.Abbreviated,At.Standalone);break;case"LLLL":e=on(It.Months,dt.Wide,At.Standalone);break;case"LLLLL":e=on(It.Months,dt.Narrow,At.Standalone);break;case"w":e=Ds(1);break;case"ww":e=Ds(2);break;case"W":e=Ds(1,!0);break;case"d":e=Gt(yt.Date,1);break;case"dd":e=Gt(yt.Date,2);break;case"c":case"cc":e=Gt(yt.Day,1);break;case"ccc":e=on(It.Days,dt.Abbreviated,At.Standalone);break;case"cccc":e=on(It.Days,dt.Wide,At.Standalone);break;case"ccccc":e=on(It.Days,dt.Narrow,At.Standalone);break;case"cccccc":e=on(It.Days,dt.Short,At.Standalone);break;case"E":case"EE":case"EEE":e=on(It.Days,dt.Abbreviated);break;case"EEEE":e=on(It.Days,dt.Wide);break;case"EEEEE":e=on(It.Days,dt.Narrow);break;case"EEEEEE":e=on(It.Days,dt.Short);break;case"a":case"aa":case"aaa":e=on(It.DayPeriods,dt.Abbreviated);break;case"aaaa":e=on(It.DayPeriods,dt.Wide);break;case"aaaaa":e=on(It.DayPeriods,dt.Narrow);break;case"b":case"bb":case"bbb":e=on(It.DayPeriods,dt.Abbreviated,At.Standalone,!0);break;case"bbbb":e=on(It.DayPeriods,dt.Wide,At.Standalone,!0);break;case"bbbbb":e=on(It.DayPeriods,dt.Narrow,At.Standalone,!0);break;case"B":case"BB":case"BBB":e=on(It.DayPeriods,dt.Abbreviated,At.Format,!0);break;case"BBBB":e=on(It.DayPeriods,dt.Wide,At.Format,!0);break;case"BBBBB":e=on(It.DayPeriods,dt.Narrow,At.Format,!0);break;case"h":e=Gt(yt.Hours,1,-12);break;case"hh":e=Gt(yt.Hours,2,-12);break;case"H":e=Gt(yt.Hours,1);break;case"HH":e=Gt(yt.Hours,2);break;case"m":e=Gt(yt.Minutes,1);break;case"mm":e=Gt(yt.Minutes,2);break;case"s":e=Gt(yt.Seconds,1);break;case"ss":e=Gt(yt.Seconds,2);break;case"S":e=Gt(yt.FractionalSeconds,1);break;case"SS":e=Gt(yt.FractionalSeconds,2);break;case"SSS":e=Gt(yt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Cn(Jt.Short);break;case"ZZZZZ":e=Cn(Jt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Cn(Jt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Cn(Jt.Long);break;default:return null}return _i[n]=e,e}(_);g+=w?w(i,t,d):"''"===_?"'":_.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),g}function si(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function xr(n,e){const t=function fe(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(Pn[t]=Pn[t]||{},Pn[t][e])return Pn[t][e];let r="";switch(e){case"shortDate":r=Rt(n,Kt.Short);break;case"mediumDate":r=Rt(n,Kt.Medium);break;case"longDate":r=Rt(n,Kt.Long);break;case"fullDate":r=Rt(n,Kt.Full);break;case"shortTime":r=tt(n,Kt.Short);break;case"mediumTime":r=tt(n,Kt.Medium);break;case"longTime":r=tt(n,Kt.Long);break;case"fullTime":r=tt(n,Kt.Full);break;case"short":const i=xr(n,"shortTime"),s=xr(n,"shortDate");r=ur(Xt(n,Kt.Short),[i,s]);break;case"medium":const o=xr(n,"mediumTime"),c=xr(n,"mediumDate");r=ur(Xt(n,Kt.Medium),[o,c]);break;case"long":const d=xr(n,"longTime"),g=xr(n,"longDate");r=ur(Xt(n,Kt.Long),[d,g]);break;case"full":const _=xr(n,"fullTime"),w=xr(n,"fullDate");r=ur(Xt(n,Kt.Full),[_,w])}return r&&(Pn[t][e]=r),r}function ur(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Pt(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Gt(n,e,t=0,r=!1,i=!1){return function(s,o){let c=function Cs(n,e){switch(n){case yt.FullYear:return e.getFullYear();case yt.Month:return e.getMonth();case yt.Date:return e.getDate();case yt.Hours:return e.getHours();case yt.Minutes:return e.getMinutes();case yt.Seconds:return e.getSeconds();case yt.FractionalSeconds:return e.getMilliseconds();case yt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||c>-t)&&(c+=t),n===yt.Hours)0===c&&-12===t&&(c=12);else if(n===yt.FractionalSeconds)return function er(n,e){return Pt(n,3).substring(0,e)}(c,e);const d=zt(o,ft.MinusSign);return Pt(c,e,d,r,i)}}function on(n,e,t=At.Format,r=!1){return function(i,s){return function Br(n,e,t,r,i,s){switch(t){case It.Months:return function Le(n,e,t){const r=(0,f.cg1)(n),s=ot([r[f.wAp.MonthsFormat],r[f.wAp.MonthsStandalone]],e);return ot(s,t)}(e,i,r)[n.getMonth()];case It.Days:return function Me(n,e,t){const r=(0,f.cg1)(n),s=ot([r[f.wAp.DaysFormat],r[f.wAp.DaysStandalone]],e);return ot(s,t)}(e,i,r)[n.getDay()];case It.DayPeriods:const o=n.getHours(),c=n.getMinutes();if(s){const g=function Xi(n){const e=(0,f.cg1)(n);return ii(e),(e[f.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Ur(r):[Ur(r[0]),Ur(r[1])])}(e),_=function Is(n,e,t){const r=(0,f.cg1)(n);ii(r);const s=ot([r[f.wAp.ExtraData][0],r[f.wAp.ExtraData][1]],e)||[];return ot(s,t)||[]}(e,i,r),w=g.findIndex(T=>{if(Array.isArray(T)){const[S,M]=T,R=o>=S.hours&&c>=S.minutes,N=o<M.hours||o===M.hours&&c<M.minutes;if(S.hours<M.hours){if(R&&N)return!0}else if(R||N)return!0}else if(T.hours===o&&T.minutes===c)return!0;return!1});if(-1!==w)return _[w]}return function be(n,e,t){const r=(0,f.cg1)(n),s=ot([r[f.wAp.DayPeriodsFormat],r[f.wAp.DayPeriodsStandalone]],e);return ot(s,t)}(e,i,r)[o<12?0:1];case It.Eras:return function ve(n,e){return ot((0,f.cg1)(n)[f.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Cn(n){return function(e,t,r){const i=-1*r,s=zt(t,ft.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Jt.Short:return(i>=0?"+":"")+Pt(o,2,s)+Pt(Math.abs(i%60),2,s);case Jt.ShortGMT:return"GMT"+(i>=0?"+":"")+Pt(o,1,s);case Jt.Long:return"GMT"+(i>=0?"+":"")+Pt(o,2,s)+":"+Pt(Math.abs(i%60),2,s);case Jt.Extended:return 0===r?"Z":(i>=0?"+":"")+Pt(o,2,s)+":"+Pt(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function vr(n){return si(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Ds(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=vr(t),o=function Ni(n){const e=si(n,0,1).getDay();return si(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),c=s.getTime()-o.getTime();i=1+Math.round(c/6048e5)}return Pt(i,n,zt(r,ft.MinusSign))}}function oi(n,e=!1){return function(t,r){return Pt(vr(t).getFullYear(),n,zt(r,ft.MinusSign),e)}}const _i={};function H(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function ge(n){return n instanceof Date&&!isNaN(n.valueOf())}let an=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Vn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $s=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Vn(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,o),Ol(c,i)}});for(let i=0,s=r.length;i<s;i++){const c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ol(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ol(n,e){n.context.$implicit=e.item}let tr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new rg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class rg{constructor(){this.$implicit=null,this.ngIf=null}}function qr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}const dg=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let R_=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,s){if(null==t||""===t||t!=t)return null;try{return en(t,r,s||this.locale,i??this.defaultTimezone??void 0)}catch(o){throw function Li(n,e){return new f.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(dg,24))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),P_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function po(n){return"server"===n}let Ra=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new dc((0,f.LFG)(Pe),window)}),n})();class dc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function bi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ul(this.window.history)||Ul(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ul(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ko extends class Eg extends class Ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Se(n){z||(z=n)}(new Ko)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function B_(){return jl=jl||document.querySelector("base"),jl?jl.getAttribute("href"):null}();return null==t?null:function go(n){nr=nr||document.createElement("a"),nr.setAttribute("href",n);const e=nr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){jl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function uh(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let nr,jl=null;const Dn=new f.OlP("TRANSITION_ID"),kh=[{provide:f.ip1,useFactory:function j_(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=U(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Dn,Pe,f.zs3],multi:!0}];let Rh=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const vc=new f.OlP("EventManagerPlugins");let Na=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vc),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Hl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=U().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Yo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),mo=(()=>{class n extends Yo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Fa),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fa))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Fa(n){U().remove(n)}const bc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ph=/%COMP%/g;function wc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?wc(n,i,t):(i=i.replace(Ph,n),t.push(i))}return t}function Ig(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Nh=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new $l(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new G_(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new W_(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=wc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Na),f.LFG(mo),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class $l{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(zl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(zl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=bc[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=bc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ig(r)):this.eventManager.addEventListener(e,t,Ig(r))}}function zl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class G_ extends $l{constructor(e,t,r,i){super(e),this.component=r;const s=wc(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Va(n){return"_ngcontent-%COMP%".replace(Ph,n)}(i+"-"+r.id),this.hostAttr=function Oh(n){return"_nghost-%COMP%".replace(Ph,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class W_ extends $l{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=wc(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const c=document.createElement("style");c.textContent=s[o],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Gl=(()=>{class n extends Hl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const q_=["alt","control","meta","shift"],Wl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ql={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ks=(()=>{class n extends Hl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),q_.forEach(g=>{const _=r.indexOf(g);_>-1&&(r.splice(_,1),o+=g+".")}),o+=s,0!=r.length||0===s.length)return null;const d={};return d.domEventName=i,d.fullKey=o,d}static matchEventFullKeyCode(t,r){let i=Wl[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),q_.forEach(o=>{o!==i&&(0,ql[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ic=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Y_(){Ko.makeCurrent()},multi:!0},{provide:Pe,useFactory:function Kl(){return(0,f.RDi)(document),document},deps:[]}]),vo=new f.OlP(""),Lh=[{provide:f.rWj,useClass:class H_{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let s=i.length,o=!1;const c=function(d){o=o||d,s--,0==s&&r(o)};i.forEach(function(d){d.whenStable(c)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Vh=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Zl(){return new f.qLn},deps:[]},{provide:vc,useClass:Gl,multi:!0,deps:[Pe,f.R0b,f.Lbi]},{provide:vc,useClass:ks,multi:!0,deps:[Pe]},{provide:Nh,useClass:Nh,deps:[Na,mo,f.AFp]},{provide:f.FYo,useExisting:Nh},{provide:Yo,useExisting:mo},{provide:mo,useClass:mo,deps:[Pe]},{provide:Na,useClass:Na,deps:[vc,f.R0b]},{provide:class vh{},useClass:Rh,deps:[]},[]];let Uh=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Dn,useExisting:f.AFp},kh]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vo,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Vh,...Lh],imports:[P_,f.hGG]}),n})(),bo=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Bh(){return new bo((0,f.LFG)(Pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;class Dc{}const wo="*";function Qo(n,e){return{type:7,name:n,definitions:e,options:{}}}function hr(n,e=null){return{type:4,styles:e,timings:n}}function $h(n,e=null){return{type:2,steps:n,options:e}}function fr(n){return{type:6,styles:n,offset:null}}function Xo(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Tc(n){Promise.resolve().then(n)}class ji{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Tc(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class av{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?Tc(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,c)=>Math.max(o,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Sc(n){return new f.vHH(3e3,!1)}function Wa(){return typeof window<"u"&&typeof window.document<"u"}function na(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Rs(n){switch(n.length){case 0:return new ji;case 1:return n[0];default:return new av(n)}}function gv(n,e,t,r,i=new Map,s=new Map){const o=[],c=[];let d=-1,g=null;if(r.forEach(_=>{const w=_.get("offset"),T=w==d,S=T&&g||new Map;_.forEach((M,R)=>{let N=R,B=M;if("offset"!==R)switch(N=e.normalizePropertyName(N,o),B){case"!":B=i.get(R);break;case wo:B=s.get(R);break;default:B=e.normalizeStyleValue(R,N,B,o)}S.set(N,B)}),T||c.push(S),g=S,d=w}),o.length)throw function au(n){return new f.vHH(3502,!1)}();return c}function Rc(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&uu(t,"start",n)));break;case"done":n.onDone(()=>r(t&&uu(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&uu(t,"destroy",n)))}}function uu(n,e,t){const s=xg(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function xg(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Zr(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Pc(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let cu=(n,e)=>!1,qa=(n,e,t)=>[],du=null;function Jh(n){const e=n.parentNode||n.host;return e===du?null:e}(na()||typeof Element<"u")&&(Wa()?(du=(()=>document.documentElement)(),cu=(n,e)=>{for(;e;){if(e===n)return!0;e=Jh(e)}return!1}):cu=(n,e)=>n.contains(e),qa=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let qs=null,yv=!1;const _v=cu,vv=qa;let bv=(()=>{class n{validateStyleProperty(t){return function Mg(n){qs||(qs=function ef(){return typeof document<"u"?document.body:null}()||{},yv=!!qs.style&&"WebkitAppearance"in qs.style);let e=!0;return qs.style&&!function mv(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in qs.style,!e&&yv&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in qs.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return _v(t,r)}getParentElement(t){return Jh(t)}query(t,r,i){return vv(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,c=[],d){return new ji(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Rg=(()=>{class n{}return n.NOOP=new bv,n})();const nf="ng-enter",hu="ng-leave",Za="ng-trigger",fu=".ng-trigger",rf="ng-animating",Nc=".ng-animating";function Er(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sf(parseFloat(e[1]),e[2])}function sf(n,e){return"s"===e?1e3*n:n}function Ka(n,e,t){return n.hasOwnProperty("duration")?n:function Iv(n,e,t){let i,s=0,o="";if("string"==typeof n){const c=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return e.push(Sc()),{duration:0,delay:0,easing:""};i=sf(parseFloat(c[1]),c[2]);const d=c[3];null!=d&&(s=sf(parseFloat(d),c[4]));const g=c[5];g&&(o=g)}else i=n;if(!t){let c=!1,d=e.length;i<0&&(e.push(function lv(){return new f.vHH(3100,!1)}()),c=!0),s<0&&(e.push(function zh(){return new f.vHH(3101,!1)}()),c=!0),c&&e.splice(d,0,Sc())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Ya(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Fc(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Zs(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function af(n,e,t){return t?e+":"+t+";":""}function Og(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=af(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=af(0,Vc(t),n.style[t]));n.setAttribute("style",e)}function Ps(n,e,t){n.style&&(e.forEach((r,i)=>{const s=lf(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),na()&&Og(n))}function Gn(n,e){n.style&&(e.forEach((t,r)=>{const i=lf(r);n.style[i]=""}),na()&&Og(n))}function ra(n){return Array.isArray(n)?1==n.length?n[0]:$h(n):n}const ia=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ar(n){let e=[];if("string"==typeof n){let t;for(;t=ia.exec(n);)e.push(t[1]);ia.lastIndex=0}return e}function rs(n,e,t){const r=n.toString(),i=r.replace(ia,(s,o)=>{let c=e[o];return null==c&&(t.push(function Gh(n){return new f.vHH(3003,!1)}()),c=""),c.toString()});return i==r?n:i}function pu(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Ng=/-+([a-z0-9])/g;function lf(n){return n.replace(Ng,(...e)=>e[1].toUpperCase())}function Vc(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Kr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Wh(n){return new f.vHH(3004,!1)}()}}function Uc(n,e){return window.getComputedStyle(n)[e]}function Fg(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Av(n,e,t){if(":"==n[0]){const d=function Lg(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Sg(n){return new f.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof d)return void e.push(d);n=d}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Mc(n){return new f.vHH(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(v(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(v(o,i))}(r,t,e)):t.push(n),t}const E=new Set(["true","1"]),m=new Set(["false","0"]);function v(n,e){const t=E.has(n)||m.has(n),r=E.has(e)||m.has(e);return(i,s)=>{let o="*"==n||n==i,c="*"==e||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?E.has(n):m.has(n)),!c&&r&&"boolean"==typeof s&&(c=s?E.has(e):m.has(e)),o&&c}}const I=":self",A=new RegExp(`s*${I}s*,?`,"g");function O(n,e,t,r){return new ae(n).build(e,t,r)}class ae{constructor(e){this._driver=e}build(e,t,r){const i=new gt(t);return this._resetContextStyleTimingState(i),Kr(this,ra(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function ZE(){return new f.vHH(3006,!1)}()),e.definitions.forEach(c=>{if(this._resetContextStyleTimingState(t),0==c.type){const d=c,g=d.name;g.toString().split(/\s*,\s*/).forEach(_=>{d.name=_,s.push(this.visitState(d,t))}),d.name=g}else if(1==c.type){const d=this.visitTransition(c,t);r+=d.queryCount,i+=d.depCount,o.push(d)}else t.errors.push(function ns(){return new f.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(c=>{c instanceof Map&&c.forEach(d=>{Ar(d).forEach(g=>{o.hasOwnProperty(g)||s.add(g)})})}),s.size&&(pu(s.values()),t.errors.push(function iu(n,e){return new f.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Kr(this,ra(e.animation),t);return{type:1,matchers:Fg(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ui(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Kr(this,r,t)),options:ui(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const c=Kr(this,o,t);return i=Math.max(i,t.currentTime),c});return t.currentTime=i,{type:3,steps:s,options:ui(e.options)}}visitAnimate(e,t){const r=function li(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return oa(Ka(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=oa(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Ka(t,e);return oa(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:fr({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,c=!1;if(!o){c=!0;const g={};r.easing&&(g.easing=r.easing),o=fr(g)}t.currentTime+=r.duration+r.delay;const d=this.visitStyle(o,t);d.isEmptyStep=c,i=d}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let c of i)"string"==typeof c?c===wo?r.push(c):t.errors.push(new f.vHH(3002,!1)):r.push(Fc(c));let s=!1,o=null;return r.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(o=c.get("easing"),c.delete("easing")),!s))for(let d of c.values())if(d.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,d)=>{const g=t.collectedStyles.get(t.currentQuerySelector),_=g.get(d);let w=!0;_&&(s!=i&&s>=_.startTime&&i<=_.endTime&&(t.errors.push(function uv(n,e,t,r,i){return new f.vHH(3010,!1)}()),w=!1),s=_.startTime),w&&g.set(d,{startTime:s,endTime:i}),t.options&&function Lc(n,e,t){const r=e.params||{},i=Ar(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function xc(n){return new f.vHH(3001,!1)}())})}(c,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function qh(){return new f.vHH(3011,!1)}()),r;let s=0;const o=[];let c=!1,d=!1,g=0;const _=e.steps.map(B=>{const G=this._makeStyleAst(B,t);let X=null!=G.offset?G.offset:function Yt(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(G.styles),ee=0;return null!=X&&(s++,ee=G.offset=X),d=d||ee<0||ee>1,c=c||ee<g,g=ee,o.push(ee),G});d&&t.errors.push(function Zh(){return new f.vHH(3012,!1)}()),c&&t.errors.push(function su(){return new f.vHH(3200,!1)}());const w=e.steps.length;let T=0;s>0&&s<w?t.errors.push(function za(){return new f.vHH(3202,!1)}()):0==s&&(T=1/(w-1));const S=w-1,M=t.currentTime,R=t.currentAnimateTimings,N=R.duration;return _.forEach((B,G)=>{const X=T>0?G==S?1:T*G:o[G],ee=X*N;t.currentTime=M+R.delay+ee,R.duration=ee,this._validateStyleAst(B,t),B.offset=X,r.styles.push(B)}),r}visitReference(e,t){return{type:8,animation:Kr(this,ra(e.animation),t),options:ui(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ui(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ui(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function je(n){const e=!!n.split(/\s*,\s*/).find(t=>t==I);return e&&(n=n.replace(A,"")),n=n.replace(/@\*/g,fu).replace(/@\w+/g,t=>fu+"-"+t.slice(1)).replace(/:animating/g,Nc),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Zr(t.collectedStyles,t.currentQuerySelector,new Map);const c=Kr(this,ra(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:c,originalSelector:e.selector,options:ui(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Kh(){return new f.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ka(e.timings,t.errors,!0);return{type:12,animation:Kr(this,ra(e.animation),t),timings:r,options:null}}}class gt{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ui(n){return n?(n=Ya(n)).params&&(n.params=function Ye(n){return n?Ya(n):null}(n.params)):n={},n}function oa(n,e,t){return{duration:n,delay:e,easing:t}}function Qa(n,e,t,r,i,s,o=null,c=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:c}}class aa{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const cf=new RegExp(":enter","g"),hf=new RegExp(":leave","g");function is(n,e,t,r,i,s=new Map,o=new Map,c,d,g=[]){return(new ff).buildKeyframes(n,e,t,r,i,s,o,c,d,g)}class ff{buildKeyframes(e,t,r,i,s,o,c,d,g,_=[]){g=g||new aa;const w=new yu(e,t,g,i,s,_,[]);w.options=d;const T=d.delay?Er(d.delay):0;w.currentTimeline.delayNextStep(T),w.currentTimeline.setStyles([o],null,w.errors,d),Kr(this,r,w);const S=w.timelines.filter(M=>M.containsAnimation());if(S.length&&c.size){let M;for(let R=S.length-1;R>=0;R--){const N=S[R];if(N.element===t){M=N;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([c],null,w.errors,d)}return S.length?S.map(M=>M.buildKeyframes()):[Qa(t,[],[],[],0,T,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Er(rs(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Er(r.duration):null,c=null!=r.delay?Er(r.delay):null;return 0!==o&&e.forEach(d=>{const g=t.appendInstructionToTimeline(d,o,c);s=Math.max(s,g.duration+g.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Kr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=mu);const o=Er(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Kr(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Er(e.options.delay):0;e.steps.forEach(o=>{const c=t.createSubContext(e.options);s&&c.delayNextStep(s),Kr(this,o,c),i=Math.max(i,c.currentTimeline.currentTime),r.push(c.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Ka(t.params?rs(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,c=t.createSubContext().currentTimeline;c.easing=r.easing,e.styles.forEach(d=>{c.forwardTime((d.offset||0)*s),c.setStyles(d.styles,d.easing,t.errors,t.options),c.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(c),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Er(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mu);let o=r;const c=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=c.length;let d=null;c.forEach((g,_)=>{t.currentQueryIndex=_;const w=t.createSubContext(e.options,g);s&&w.delayNextStep(s),g===t.element&&(d=w.currentTimeline),Kr(this,e.animation,w),w.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,w.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),d&&(t.currentTimeline.mergeTimelineCollectedStyles(d),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),c=o*(t.currentQueryTotal-1);let d=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":d=c-d;break;case"full":d=r.currentStaggerTime}const _=t.currentTimeline;d&&_.delayNextStep(d);const w=_.currentTime;Kr(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-w+(i.startTime-r.currentTimeline.startTime)}}const mu={};class yu{constructor(e,t,r,i,s,o,c,d){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=d||new pf(this._driver,t,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Er(r.duration)),null!=r.delay&&(i.delay=Er(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(c=>{(!t||!o.hasOwnProperty(c))&&(o[c]=rs(s[c],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new yu(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=mu,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Ug(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let c=[];if(i&&c.push(this.element),e.length>0){e=(e=e.replace(cf,"."+this._enterClassName)).replace(hf,"."+this._leaveClassName);let g=this._driver.query(this.element,e,1!=r);0!==r&&(g=r<0?g.slice(g.length+r,g.length):g.slice(0,r)),c.push(...g)}return!s&&0==c.length&&o.push(function rr(n){return new f.vHH(3014,!1)}()),c}}class pf{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new pf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||wo),this._currentKeyframe.set(t,wo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function XE(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,wo)}else Zs(i,t)}),t}(e,this._globalTimelineStyles);for(let[c,d]of o){const g=rs(d,s,r);this._pendingStyles.set(c,g),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??wo),this._updateStyle(c,g)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((c,d)=>{const g=Zs(c,new Map,this._backFill);g.forEach((_,w)=>{"!"===_?e.add(w):_===wo&&t.add(w)}),r||g.set("offset",d/this.duration),i.push(g)});const s=e.size?pu(e.values()):[],o=t.size?pu(t.values()):[];if(r){const c=i[0],d=new Map(c);c.set("offset",0),d.set("offset",1),i=[c,d]}return Qa(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Ug extends pf{constructor(e,t,r,i,s,o,c=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,c=t/o,d=Zs(e[0]);d.set("offset",0),s.push(d);const g=Zs(e[0]);g.set("offset",QE(c)),s.push(g);const _=e.length-1;for(let w=1;w<=_;w++){let T=Zs(e[w]);const S=T.get("offset");T.set("offset",QE((t+S*r)/o)),s.push(T)}r=o,t=0,i="",e=s}return Qa(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function QE(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Bg{}const eI=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class jg extends Bg{normalizePropertyName(e,t){return lf(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(eI.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const c=r.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&i.push(function $a(n,e){return new f.vHH(3005,!1)}())}return o+s}}function gf(n,e,t,r,i,s,o,c,d,g,_,w,T){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:c,queriedElements:d,preStyleProps:g,postStyleProps:_,totalTime:w,errors:T}}const Hg={};class $g{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Mv(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,c,d,g,_){const w=[],T=this.ast.options&&this.ast.options.params||Hg,M=this.buildStyles(r,c&&c.params||Hg,w),R=d&&d.params||Hg,N=this.buildStyles(i,R,w),B=new Set,G=new Map,X=new Map,ee="void"===i,re={params:mf(R,T),delay:this.ast.options?.delay},pe=_?[]:is(e,t,this.ast.animation,s,o,M,N,re,g,w);let Ie=0;if(pe.forEach(ut=>{Ie=Math.max(ut.duration+ut.delay,Ie)}),w.length)return gf(t,this._triggerName,r,i,ee,M,N,[],[],G,X,Ie,w);pe.forEach(ut=>{const Ft=ut.element,Zt=Zr(G,Ft,new Set);ut.preStyleProps.forEach(Qn=>Zt.add(Qn));const sn=Zr(X,Ft,new Set);ut.postStyleProps.forEach(Qn=>sn.add(Qn)),Ft!==t&&B.add(Ft)});const Ve=pu(B.values());return gf(t,this._triggerName,r,i,ee,M,N,pe,Ve,G,X,Ie)}}function mf(n,e){const t=Ya(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class lA{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Ya(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,c)=>{o&&(o=rs(o,i,t));const d=this.normalizer.normalizePropertyName(c,t);o=this.normalizer.normalizeStyleValue(c,d,o,t),r.set(d,o)})}),r}}class uA{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new lA(i.style,i.options&&i.options.params||{},r))}),kv(this.states,"true","1"),kv(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new $g(e,i,this.states))}),this.fallbackTransition=function cA(n,e,t){return new $g(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,c)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function kv(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Rv=new aa;class zg{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=O(this._driver,t,r,[]);if(r.length)throw function dv(n){return new f.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=gv(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const c=new Map;if(s?(o=is(this._driver,t,s,nf,hu,new Map,new Map,r,Rv,i),o.forEach(_=>{const w=Zr(c,_.element,new Map);_.postStyleProps.forEach(T=>w.set(T,null))})):(i.push(function Yh(){return new f.vHH(3300,!1)}()),o=[]),i.length)throw function ea(n){return new f.vHH(3504,!1)}();c.forEach((_,w)=>{_.forEach((T,S)=>{_.set(S,this._driver.computeStyle(w,S,wo))})});const g=Rs(o.map(_=>{const w=c.get(_.element);return this._buildPlayer(_,new Map,w)}));return this._playersById.set(e,g),g.onDestroy(()=>this.destroy(e)),this.players.push(g),g}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function kc(n){return new f.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=xg(t,"","","");return Rc(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Gg="ng-animate-queued",Pv="ng-animate-disabled",Ov=[],rI={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},iI={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ei="__ng_removed";class yf{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function pA(n){return n??null}(r?e.value:e),r){const s=Ya(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Hc="void",Wg=new yf(Hc);class sI{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ks(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function ta(n,e){return new f.vHH(3302,!1)}();if(null==r||0==r.length)throw function hv(n){return new f.vHH(3303,!1)}();if(!function gA(n){return"start"==n||"done"==n}(r))throw function Qh(n,e){return new f.vHH(3400,!1)}();const s=Zr(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const c=Zr(this._engine.statesByElement,e,new Map);return c.has(t)||(Ks(e,Za),Ks(e,Za+"-"+t),c.set(t,Wg)),()=>{this._engine.afterFlush(()=>{const d=s.indexOf(o);d>=0&&s.splice(d,1),this._triggers.has(t)||c.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Ga(n){return new f.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new Nv(this.id,t,e);let c=this._engine.statesByElement.get(e);c||(Ks(e,Za),Ks(e,Za+"-"+t),this._engine.statesByElement.set(e,c=new Map));let d=c.get(t);const g=new yf(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&d&&g.absorbOptions(d.options),c.set(t,g),d||(d=Wg),g.value!==Hc&&d.value===g.value){if(!function lI(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(d.params,g.params)){const R=[],N=s.matchStyles(d.value,d.params,R),B=s.matchStyles(g.value,g.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{Gn(e,N),Ps(e,B)})}return}const T=Zr(this._engine.playersByElement,e,[]);T.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let S=s.matchTransition(d.value,g.value,e,g.params),M=!1;if(!S){if(!i)return;S=s.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:S,fromState:d,toState:g,player:o,isFallbackTransition:M}),M||(Ks(e,Gg),o.onStart(()=>{_f(e,Gg)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);const N=this._engine.playersByElement.get(e);if(N){let B=N.indexOf(o);B>=0&&N.splice(B,1)}}),this.players.push(o),T.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,fu,!0);r.forEach(i=>{if(i[Ei])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const c=[];if(s.forEach((d,g)=>{if(o.set(g,d.value),this._triggers.has(g)){const _=this.trigger(e,g,Hc,i);_&&c.push(_)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Rs(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const d=this._triggers.get(o).fallbackTransition,g=r.get(o)||Wg,_=new yf(Hc),w=new Nv(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:d,fromState:g,toState:_,player:w,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ei];(!s||s===rI)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ks(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(c=>{if(c.name==r.triggerName){const d=xg(s,r.triggerName,r.fromState.value,r.toState.value);d._data=e,Rc(r.player,c.phase,d,c.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class oI{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new sI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,c=this.driver.getParentElement(t);for(;c;){const d=i.get(c);if(d){const g=r.indexOf(d);r.splice(g+1,0,e),o=!0;break}c=this.driver.getParentElement(c)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(qg(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!qg(t))return;const s=t[Ei];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ks(e,Pv)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),_f(e,Pv))}removeNode(e,t,r,i){if(qg(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ei]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return qg(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,fu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Nc,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Rs(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ei];if(t&&t.setForRemoval){if(e[Ei]=rI,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Pv)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ks(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Rs(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function lu(n){return new f.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new aa,i=[],s=new Map,o=[],c=new Map,d=new Map,g=new Map,_=new Set;this.disabledNodes.forEach($e=>{_.add($e);const nt=this.driver.query($e,".ng-animate-queued",!0);for(let vt=0;vt<nt.length;vt++)_.add(nt[vt])});const w=this.bodyNode,T=Array.from(this.statesByElement.keys()),S=aI(T,this.collectedEnterElements),M=new Map;let R=0;S.forEach(($e,nt)=>{const vt=nf+R++;M.set(nt,vt),$e.forEach(Ot=>Ks(Ot,vt))});const N=[],B=new Set,G=new Set;for(let $e=0;$e<this.collectedLeaveElements.length;$e++){const nt=this.collectedLeaveElements[$e],vt=nt[Ei];vt&&vt.setForRemoval&&(N.push(nt),B.add(nt),vt.hasAnimation?this.driver.query(nt,".ng-star-inserted",!0).forEach(Ot=>B.add(Ot)):G.add(nt))}const X=new Map,ee=aI(T,Array.from(B));ee.forEach(($e,nt)=>{const vt=hu+R++;X.set(nt,vt),$e.forEach(Ot=>Ks(Ot,vt))}),e.push(()=>{S.forEach(($e,nt)=>{const vt=M.get(nt);$e.forEach(Ot=>_f(Ot,vt))}),ee.forEach(($e,nt)=>{const vt=X.get(nt);$e.forEach(Ot=>_f(Ot,vt))}),N.forEach($e=>{this.processLeaveNode($e)})});const re=[],pe=[];for(let $e=this._namespaceList.length-1;$e>=0;$e--)this._namespaceList[$e].drainQueuedTransitions(t).forEach(vt=>{const Ot=vt.player,Xn=vt.element;if(re.push(Ot),this.collectedEnterElements.length){const Qi=Xn[Ei];if(Qi&&Qi.setForMove){if(Qi.previousTriggersValues&&Qi.previousTriggersValues.has(vt.triggerName)){const tg=Qi.previousTriggersValues.get(vt.triggerName),$o=this.statesByElement.get(vt.element);if($o&&$o.has(vt.triggerName)){const eA=$o.get(vt.triggerName);eA.value=tg,$o.set(vt.triggerName,eA)}}return void Ot.destroy()}}const Es=!w||!this.driver.containsElement(w,Xn),Gr=X.get(Xn),Hs=M.get(Xn),Mn=this._buildInstruction(vt,r,Hs,Gr,Es);if(Mn.errors&&Mn.errors.length)return void pe.push(Mn);if(Es)return Ot.onStart(()=>Gn(Xn,Mn.fromStyles)),Ot.onDestroy(()=>Ps(Xn,Mn.toStyles)),void i.push(Ot);if(vt.isFallbackTransition)return Ot.onStart(()=>Gn(Xn,Mn.fromStyles)),Ot.onDestroy(()=>Ps(Xn,Mn.toStyles)),void i.push(Ot);const lh=[];Mn.timelines.forEach(Qi=>{Qi.stretchStartingKeyframe=!0,this.disabledNodes.has(Qi.element)||lh.push(Qi)}),Mn.timelines=lh,r.append(Xn,Mn.timelines),o.push({instruction:Mn,player:Ot,element:Xn}),Mn.queriedElements.forEach(Qi=>Zr(c,Qi,[]).push(Ot)),Mn.preStyleProps.forEach((Qi,tg)=>{if(Qi.size){let $o=d.get(tg);$o||d.set(tg,$o=new Set),Qi.forEach((eA,KL)=>$o.add(KL))}}),Mn.postStyleProps.forEach((Qi,tg)=>{let $o=g.get(tg);$o||g.set(tg,$o=new Set),Qi.forEach((eA,KL)=>$o.add(KL))})});if(pe.length){const $e=[];pe.forEach(nt=>{$e.push(function pv(n,e){return new f.vHH(3505,!1)}())}),re.forEach(nt=>nt.destroy()),this.reportError($e)}const Ie=new Map,Ve=new Map;o.forEach($e=>{const nt=$e.element;r.has(nt)&&(Ve.set(nt,nt),this._beforeAnimationBuild($e.player.namespaceId,$e.instruction,Ie))}),i.forEach($e=>{const nt=$e.element;this._getPreviousPlayers(nt,!1,$e.namespaceId,$e.triggerName,null).forEach(Ot=>{Zr(Ie,nt,[]).push(Ot),Ot.destroy()})});const ut=N.filter($e=>uI($e,d,g)),Ft=new Map;$c(Ft,this.driver,G,g,wo).forEach($e=>{uI($e,d,g)&&ut.push($e)});const sn=new Map;S.forEach(($e,nt)=>{$c(sn,this.driver,new Set($e),d,"!")}),ut.forEach($e=>{const nt=Ft.get($e),vt=sn.get($e);Ft.set($e,new Map([...Array.from(nt?.entries()??[]),...Array.from(vt?.entries()??[])]))});const Qn=[],Yi=[],In={};o.forEach($e=>{const{element:nt,player:vt,instruction:Ot}=$e;if(r.has(nt)){if(_.has(nt))return vt.onDestroy(()=>Ps(nt,Ot.toStyles)),vt.disabled=!0,vt.overrideTotalTime(Ot.totalTime),void i.push(vt);let Xn=In;if(Ve.size>1){let Gr=nt;const Hs=[];for(;Gr=Gr.parentNode;){const Mn=Ve.get(Gr);if(Mn){Xn=Mn;break}Hs.push(Gr)}Hs.forEach(Mn=>Ve.set(Mn,Xn))}const Es=this._buildAnimation(vt.namespaceId,Ot,Ie,s,sn,Ft);if(vt.setRealPlayer(Es),Xn===In)Qn.push(vt);else{const Gr=this.playersByElement.get(Xn);Gr&&Gr.length&&(vt.parentPlayer=Rs(Gr)),i.push(vt)}}else Gn(nt,Ot.fromStyles),vt.onDestroy(()=>Ps(nt,Ot.toStyles)),Yi.push(vt),_.has(nt)&&i.push(vt)}),Yi.forEach($e=>{const nt=s.get($e.element);if(nt&&nt.length){const vt=Rs(nt);$e.setRealPlayer(vt)}}),i.forEach($e=>{$e.parentPlayer?$e.syncPlayerEvents($e.parentPlayer):$e.destroy()});for(let $e=0;$e<N.length;$e++){const nt=N[$e],vt=nt[Ei];if(_f(nt,hu),vt&&vt.hasAnimation)continue;let Ot=[];if(c.size){let Es=c.get(nt);Es&&Es.length&&Ot.push(...Es);let Gr=this.driver.query(nt,Nc,!0);for(let Hs=0;Hs<Gr.length;Hs++){let Mn=c.get(Gr[Hs]);Mn&&Mn.length&&Ot.push(...Mn)}}const Xn=Ot.filter(Es=>!Es.destroyed);Xn.length?QL(this,nt,Xn):this.processLeaveNode(nt)}return N.length=0,Qn.forEach($e=>{this.players.push($e),$e.onDone(()=>{$e.destroy();const nt=this.players.indexOf($e);this.players.splice(nt,1)}),$e.play()}),Qn}elementContainsData(e,t){let r=!1;const i=t[Ei];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const c=this.playersByQueriedElement.get(e);c&&(o=c)}else{const c=this.playersByElement.get(e);if(c){const d=!s||s==Hc;c.forEach(g=>{g.queued||!d&&g.triggerName!=i||o.push(g)})}}return(r||i)&&(o=o.filter(c=>!(r&&r!=c.namespaceId||i&&i!=c.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,c=t.isRemovalTransition?void 0:t.triggerName;for(const d of t.timelines){const g=d.element,_=g!==s,w=Zr(r,g,[]);this._getPreviousPlayers(g,_,o,c,t.toState).forEach(S=>{const M=S.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),S.destroy(),w.push(S)})}Gn(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const c=t.triggerName,d=t.element,g=[],_=new Set,w=new Set,T=t.timelines.map(M=>{const R=M.element;_.add(R);const N=R[Ei];if(N&&N.removedBeforeQueried)return new ji(M.duration,M.delay);const B=R!==d,G=function XL(n){const e=[];return mA(n,e),e}((r.get(R)||Ov).map(Ie=>Ie.getRealPlayer())).filter(Ie=>!!Ie.element&&Ie.element===R),X=s.get(R),ee=o.get(R),re=gv(0,this._normalizer,0,M.keyframes,X,ee),pe=this._buildPlayer(M,re,G);if(M.subTimeline&&i&&w.add(R),B){const Ie=new Nv(e,c,R);Ie.setRealPlayer(pe),g.push(Ie)}return pe});g.forEach(M=>{Zr(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>function fA(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,M.element,M))}),_.forEach(M=>Ks(M,rf));const S=Rs(T);return S.onDestroy(()=>{_.forEach(M=>_f(M,rf)),Ps(d,t.toStyles)}),w.forEach(M=>{Zr(i,M,[]).push(S)}),S}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ji(e.duration,e.delay)}}class Nv{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ji,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Rc(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Zr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function qg(n){return n&&1===n.nodeType}function la(n,e){const t=n.style.display;return n.style.display=e??"none",t}function $c(n,e,t,r,i){const s=[];t.forEach(d=>s.push(la(d)));const o=[];r.forEach((d,g)=>{const _=new Map;d.forEach(w=>{const T=e.computeStyle(g,w,i);_.set(w,T),(!T||0==T.length)&&(g[Ei]=iI,o.push(g))}),n.set(g,_)});let c=0;return t.forEach(d=>la(d,s[c++])),o}function aI(n,e){const t=new Map;if(n.forEach(c=>t.set(c,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(c){if(!c)return 1;let d=s.get(c);if(d)return d;const g=c.parentNode;return d=t.has(g)?g:i.has(g)?1:o(g),s.set(c,d),d}return e.forEach(c=>{const d=o(c);1!==d&&t.get(d).push(c)}),t}function Ks(n,e){n.classList?.add(e)}function _f(n,e){n.classList?.remove(e)}function QL(n,e,t){Rs(t).onDone(()=>n.processLeaveNode(e))}function mA(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof av?mA(r.players,e):e.push(r)}}function uI(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Zg{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new oI(e,t,r),this._timelineEngine=new zg(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let c=this._triggerCache[o];if(!c){const d=[],_=O(this._driver,s,d,[]);if(d.length)throw function cv(n,e){return new f.vHH(3404,!1)}();c=function nI(n,e,t){return new uA(n,e,t)}(i,_,this._normalizer),this._triggerCache[o]=c}this._transitionEngine.registerTrigger(t,i,c)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=Pc(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,c]=Pc(r);return this._timelineEngine.listen(o,t,c,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let _A=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ps(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ps(this._element,this._initialStyles),this._endStyles&&(Ps(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Gn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gn(this._element,this._endStyles),this._endStyles=null),Ps(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function vf(n){let e=null;return n.forEach((t,r)=>{(function ua(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class zc{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Uc(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class cI{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return _v(e,t)}getParentElement(e){return Jh(e)}query(e,t,r){return vv(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const d={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(d.easing=s);const g=new Map,_=o.filter(S=>S instanceof zc);(function Dv(n,e){return 0===n||0===e})(r,i)&&_.forEach(S=>{S.currentSnapshot.forEach((M,R)=>g.set(R,M))});let w=function Cv(n){return n.length?n[0]instanceof Map?n:n.map(e=>Fc(e)):[]}(t).map(S=>Zs(S));w=function Tv(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(c=>o.set(c,Uc(n,c)))}}return e}(e,w,g);const T=function yA(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=vf(e[0]),e.length>1&&(r=vf(e[e.length-1]))):e instanceof Map&&(t=vf(e)),t||r?new _A(n,t,r):null}(e,w);return new zc(e,w,d,T)}}let dI=(()=>{class n extends Dc{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?$h(t):t;return vA(this._renderer,null,r,"register",[i]),new hI(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class hI extends class nu{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new JL(this._id,e,t||{},this._renderer)}}class JL{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return vA(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function vA(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Kg="@.disabled";let Lv=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const c=o?.parentNode(s);c&&o.removeChild(c,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let _=this._rendererCache.get(s);return _||(_=new bA("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,_)),_}const o=r.id,c=r.id+"-"+this._currentId;this._currentId++,this.engine.register(c,t);const d=_=>{Array.isArray(_)?_.forEach(d):this.engine.registerTrigger(o,c,t,_.name,_)};return r.data.animation.forEach(d),new e2(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,c]=s;o(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(Zg),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class bA{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Kg?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class e2 extends bA{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Kg?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function fI(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function wA(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,c=>{this.factory.scheduleListenerCallback(c._data||-1,r,c)})}return this.delegate.listen(e,t,r)}}let EA=(()=>{class n extends Zg{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe),f.LFG(Rg),f.LFG(Bg),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Vv=[{provide:Dc,useClass:dI},{provide:Bg,useFactory:function IA(){return new jg}},{provide:Zg,useClass:EA},{provide:f.FYo,useFactory:function CA(n,e,t){return new Lv(n,e,t)},deps:[Nh,Zg,f.R0b]}],Gc=[{provide:Rg,useFactory:()=>new cI},{provide:f.QbO,useValue:"BrowserAnimations"},...Vv],pI=[{provide:Rg,useClass:bv},{provide:f.QbO,useValue:"NoopAnimations"},...Vv];let Uv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?pI:Gc}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Gc,imports:[Uh]}),n})();var wn=j(8996),Xa=j(7669);function mt(...n){const e=(0,Xa.yG)(n);return(0,wn.D)(n,e)}var ca=j(7579);class Ii extends ca.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Yg=(0,j(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Os=j(9751);const{isArray:r2}=Array,{getPrototypeOf:i2,prototype:bf,keys:Bv}=Object;function jv(n){if(1===n.length){const e=n[0];if(r2(e))return{args:e,keys:null};if(function gI(n){return n&&"object"==typeof n&&i2(n)===bf}(e)){const t=Bv(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var vu=j(4671),Nt=j(4004);const{isArray:mI}=Array;function Qg(n){return(0,Nt.U)(e=>function yI(n,e){return mI(e)?n(...e):n(e)}(n,e))}function TA(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var jr=j(5403),Hv=j(9672);function $v(...n){const e=(0,Xa.yG)(n),t=(0,Xa.jO)(n),{args:r,keys:i}=jv(n);if(0===r.length)return(0,wn.D)([],e);const s=new Os.y(function _I(n,e,t=vu.y){return r=>{Ja(e,()=>{const{length:i}=n,s=new Array(i);let o=i,c=i;for(let d=0;d<i;d++)Ja(e,()=>{const g=(0,wn.D)(n[d],e);let _=!1;g.subscribe((0,jr.x)(r,w=>{s[d]=w,_||(_=!0,c--),c||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>TA(i,o):vu.y));return t?s.pipe(Qg(t)):s}function Ja(n,e,t){n?(0,Hv.f)(t,n,e):e()}var wf=j(8189);function Wc(...n){return function zv(){return(0,wf.J)(1)}()((0,wn.D)(n,(0,Xa.yG)(n)))}var Xg=j(8421);function Jg(n){return new Os.y(e=>{(0,Xg.Xf)(n()).subscribe(e)})}var em=j(9635),Co=j(576);function qc(n,e){const t=(0,Co.m)(n)?n:()=>n,r=i=>i.error(t());return new Os.y(e?i=>e.schedule(r,0,i):r)}var da=j(515),Gv=j(727),Yr=j(4482);function tm(){return(0,Yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,jr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class bu extends Os.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Gv.w0;const t=this.getSubject();e.add(this.source.subscribe((0,jr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Gv.w0.EMPTY)}return e}refCount(){return tm()(this)}}function Ir(n,e){return(0,Yr.e)((t,r)=>{let i=null,s=0,o=!1;const c=()=>o&&!i&&r.complete();t.subscribe((0,jr.x)(r,d=>{i?.unsubscribe();let g=0;const _=s++;(0,Xg.Xf)(n(d,_)).subscribe(i=(0,jr.x)(r,w=>r.next(e?e(d,w,_,g++):w),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function Ef(n){return n<=0?()=>da.E:(0,Yr.e)((e,t)=>{let r=0;e.subscribe((0,jr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function nm(...n){const e=(0,Xa.yG)(n);return(0,Yr.e)((t,r)=>{(e?Wc(n,t,e):Wc(n,t)).subscribe(r)})}function Ys(n,e){return(0,Yr.e)((t,r)=>{let i=0;t.subscribe((0,jr.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Qr=j(5577);function rm(n){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wv(n=SA){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function SA(){return new Yg}function Do(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((i,s)=>n(i,s,r)):vu.y,Ef(1),t?rm(e):Wv(()=>new Yg))}function Zc(n,e){return(0,Co.m)(e)?(0,Qr.z)(n,e,1):(0,Qr.z)(n,1)}function Xr(n,e,t){const r=(0,Co.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Yr.e)((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let c=!0;i.subscribe((0,jr.x)(s,d=>{var g;null===(g=r.next)||void 0===g||g.call(r,d),s.next(d)},()=>{var d;c=!1,null===(d=r.complete)||void 0===d||d.call(r),s.complete()},d=>{var g;c=!1,null===(g=r.error)||void 0===g||g.call(r,d),s.error(d)},()=>{var d,g;c&&(null===(d=r.unsubscribe)||void 0===d||d.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):vu.y}function Ns(n){return(0,Yr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,jr.x)(t,void 0,void 0,o=>{s=(0,Xg.Xf)(n(o,Ns(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function xA(n,e,t,r,i){return(s,o)=>{let c=t,d=e,g=0;s.subscribe((0,jr.x)(o,_=>{const w=g++;d=c?n(d,_,w):(c=!0,_),r&&o.next(d)},i&&(()=>{c&&o.next(d),o.complete()})))}}function To(n,e){return(0,Yr.e)(xA(n,e,arguments.length>=2,!0))}function wu(n){return n<=0?()=>da.E:(0,Yr.e)((e,t)=>{let r=[];e.subscribe((0,jr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function vI(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((i,s)=>n(i,s,r)):vu.y,wu(1),t?rm(e):Wv(()=>new Yg))}function qv(n){return(0,Yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",If=Symbol("RouteTitle");class wI{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Eu(n){return new wI(n)}function Zv(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],c=n[s];if(o.startsWith(":"))i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function So(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!im(n[i],e[i]))return!1;return!0}function im(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Kc(n){return Array.prototype.concat.apply([],n)}function EI(n){return n.length>0?n[n.length-1]:null}function Jr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function el(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,wn.D)(Promise.resolve(n)):mt(n)}const AA={exact:function CI(n,e,t){if(!nl(n.segments,e.segments)||!Qv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!CI(n.children[r],e.children[r],t))return!1;return!0},subset:kA},Iu={exact:function MA(n,e){return So(n,e)},subset:function a2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>im(n[t],e[t]))},ignored:()=>!0};function xo(n,e,t){return AA[t.paths](n.root,e.root,t.matrixParams)&&Iu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kA(n,e,t){return Yv(n,e,e.segments,t)}function Yv(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!nl(i,t)||e.hasChildren()||!Qv(i,t,r))}if(n.segments.length===t.length){if(!nl(n.segments,t)||!Qv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!kA(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(nl(n.segments,i)&&Qv(n.segments,i,r)&&n.children[Qt])&&Yv(n.children[Qt],e,s,r)}}function Qv(n,e,t){return e.every((r,i)=>Iu[t](n[i].parameters,r.parameters))}class tl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eu(this.queryParams)),this._queryParamMap}toString(){return OA.serialize(this)}}class ln{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cf(this)}}class Yc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Eu(this.parameters)),this._parameterMap}toString(){return xI(this)}}function nl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let DI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new ss},providedIn:"root"}),n})();class ss{parse(e){const t=new RI(e);return new tl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Df(e.root,!0)}`,r=function AI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${om(t)}=${om(i)}`).join("&"):`${om(t)}=${om(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function NA(n){return encodeURI(n)}(e.fragment)}`:""}`}}const OA=new ss;function Cf(n){return n.segments.map(e=>xI(e)).join("/")}function Df(n,e){if(!n.hasChildren())return Cf(n);if(e){const t=n.children[Qt]?Df(n.children[Qt],!1):"",r=[];return Jr(n.children,(i,s)=>{s!==Qt&&r.push(`${s}:${Df(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function PA(n,e){let t=[];return Jr(n.children,(r,i)=>{i===Qt&&(t=t.concat(e(r,i)))}),Jr(n.children,(r,i)=>{i!==Qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Qt?[Df(n.children[Qt],!1)]:[`${i}:${Df(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${Cf(n)}/${t[0]}`:`${Cf(n)}/(${t.join("//")})`}}function TI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function om(n){return TI(n).replace(/%3B/gi,";")}function am(n){return TI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lm(n){return decodeURIComponent(n)}function SI(n){return lm(n.replace(/\+/g,"%20"))}function xI(n){return`${am(n.path)}${function Bt(n){return Object.keys(n).map(e=>`;${am(e)}=${am(n[e])}`).join("")}(n.parameters)}`}const MI=/^[^\/()?;=#]+/;function Tf(n){const e=n.match(MI);return e?e[0]:""}const FA=/^[^=?&#]+/,kI=/^[^&#]+/;class RI{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ln([],{}):new ln([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new ln(e,t)),r}parseSegment(){const e=Tf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new Yc(lm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Tf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Tf(this.remaining);i&&(r=i,this.capture(r))}e[lm(t)]=lm(r)}parseQueryParam(e){const t=function LA(n){const e=n.match(FA);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function VA(n){const e=n.match(kI);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=SI(t),s=SI(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Tf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Qt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Qt]:new ln([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function Xv(n){return n.segments.length>0?new ln([],{[Qt]:n}):n}function um(n){const e={};for(const r of Object.keys(n.children)){const s=um(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function l2(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new ln(n.segments.concat(e.segments),e.children)}return n}(new ln(n.segments,e))}function rl(n){return n instanceof tl}function e0(n,e,t,r,i){if(0===t.length)return xf(e.root,e.root,e.root,r,i);const s=function t0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new PI(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return Jr(s.outlets,(d,g)=>{c[g]="string"==typeof d?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((c,d)=>{0==d&&"."===c||(0==d&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,s]},[]);return new PI(t,e,r)}(t);return s.toRoot()?xf(e.root,e.root,new ln([],{}),r,i):function o(d){const g=function Xc(n,e,t,r){if(n.isAbsolute)return new Af(e.root,!0,0);if(-1===r)return new Af(t,t===e.root,0);return function OI(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new Af(r,!1,i-s)}(t,r+(Sf(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,d),_=g.processChildren?Mf(g.segmentGroup,g.index,s.commands):Jc(g.segmentGroup,g.index,s.commands);return xf(e.root,g.segmentGroup,_,r,i)}(n.snapshot?._lastPathIndex)}function Sf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dm(n){return"object"==typeof n&&null!=n&&n.outlets}function xf(n,e,t,r,i){let o,s={};r&&Jr(r,(d,g)=>{s[g]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),o=n===e?t:BA(n,e,t);const c=Xv(um(o));return new tl(c,s,i)}function BA(n,e,t){const r={};return Jr(n.children,(i,s)=>{r[s]=i===e?t:BA(i,e,t)}),new ln(n.segments,r)}class PI{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Sf(r[0]))throw new f.vHH(4003,!1);const i=r.find(dm);if(i&&i!==EI(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Af{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Jc(n,e,t){if(n||(n=new ln([],{})),0===n.segments.length&&n.hasChildren())return Mf(n,e,t);const r=function FI(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],c=t[r];if(dm(c))break;const d=`${c}`,g=r<t.length-1?t[r+1]:null;if(i>0&&void 0===d)break;if(d&&g&&"object"==typeof g&&void 0===g.outlets){if(!VI(d,g,o))return s;r+=2}else{if(!VI(d,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new ln(n.segments.slice(0,r.pathIndex),{});return s.children[Qt]=new ln(n.segments.slice(r.pathIndex),n.children),Mf(s,0,i)}return r.match&&0===i.length?new ln(n.segments,{}):r.match&&!n.hasChildren()?n0(n,e,t):r.match?Mf(n,0,i):n0(n,e,t)}function Mf(n,e,t){if(0===t.length)return new ln(n.segments,{});{const r=function NI(n){return dm(n[0])?n[0].outlets:{[Qt]:n}}(t),i={};return Jr(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Jc(n.children[o],e,s))}),Jr(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new ln(n.segments,i)}}function n0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(dm(s)){const d=HA(s.outlets);return new ln(r,d)}if(0===i&&Sf(t[0])){r.push(new Yc(n.segments[e].path,LI(t[0]))),i++;continue}const o=dm(s)?s.outlets[Qt]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Sf(c)?(r.push(new Yc(o,LI(c))),i+=2):(r.push(new Yc(o,{})),i++)}return new ln(r,{})}function HA(n){const e={};return Jr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=n0(new ln([],{}),0,t))}),e}function LI(n){const e={};return Jr(n,(t,r)=>e[r]=`${t}`),e}function VI(n,e,t){return n==t.path&&So(e,t.parameters)}class ha{constructor(e,t){this.id=e,this.url=t}}class hm extends ha{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cu extends ha{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kf extends ha{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class r0 extends ha{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class s0 extends ha{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u2 extends ha{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o0 extends ha{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $A extends ha{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class c2 extends ha{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ed{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class UI{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class BI{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fm{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qs{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jI{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HI{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ao{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Rf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Rf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pm(e,this._root).map(t=>t.value)}}function Rf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Rf(n,t);if(r)return r}return null}function pm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pm(n,t);if(r.length)return r.unshift(e),r}return[]}class Xs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Pf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class l0 extends Ao{constructor(e,t){super(e),this.snapshot=t,c0(this,e)}toString(){return this.snapshot.toString()}}function zA(n,e){const t=function gm(n,e){const o=new td([],{},{},"",{},Qt,e,null,n.root,-1,{});return new GA("",new Xs(o,[]))}(n,e),r=new Ii([new Yc("",{})]),i=new Ii({}),s=new Ii({}),o=new Ii({}),c=new Ii(""),d=new Js(r,i,o,c,s,Qt,e,t.root);return d.snapshot=t.root,new l0(new Xs(d,[]),t)}class Js{constructor(e,t,r,i,s,o,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.title=this.data?.pipe((0,Nt.U)(g=>g[If]))??mt(void 0),this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Nt.U)(e=>Eu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Nt.U)(e=>Eu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mm(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function u0(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class td{constructor(e,t,r,i,s,o,c,d,g,_,w,T){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.title=this.data?.[If],this.routeConfig=d,this._urlSegment=g,this._lastPathIndex=_,this._correctedLastPathIndex=T??_,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Eu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class GA extends Ao{constructor(e,t){super(t),this.url=e,c0(this,t)}toString(){return $I(this._root)}}function c0(n,e){e.value._routerState=n,e.children.forEach(t=>c0(n,t))}function $I(n){const e=n.children.length>0?` { ${n.children.map($I).join(", ")} } `:"";return`${n.value}${e}`}function d0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,So(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),So(e.params,t.params)||n.params.next(t.params),function Kv(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!So(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),So(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function h0(n,e){const t=So(n.params,e.params)&&function RA(n,e){return nl(n,e)&&n.every((t,r)=>So(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||h0(n.parent,e.parent))}function ym(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function WA(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ym(n,r,i);return ym(n,r)})}(n,e,t);return new Xs(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ym(n,c)),o}}const r=function d2(n){return new Js(new Ii(n.url),new Ii(n.params),new Ii(n.queryParams),new Ii(n.fragment),new Ii(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>ym(n,s));return new Xs(r,i)}}const _m="ngNavigationCancelingError";function f0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=rl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=GI(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function GI(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[_m]=!0,r.cancellationCode=e,t&&(r.url=t),r}function vm(n){return qA(n)&&rl(n.url)}function qA(n){return n&&n[_m]}class h2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new bm,this.attachRef=null}}let bm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new h2,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const p0=!1;let WI=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||Qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,p0);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,p0);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,p0);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,p0);this._activatedRoute=t;const i=this.location,o=t._futureSnapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,d=new f2(t,c,i.injector);if(r&&function p2(n){return!!n.resolveComponentFactory}(r)){const g=r.resolveComponentFactory(o);this.activated=i.createComponent(g,i.length,d)}else this.activated=i.createComponent(o,{index:i.length,injector:d,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(bm),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class f2{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Js?this.route:e===bm?this.childContexts:this.parent.get(e,t)}}let qI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[WI],encapsulation:2}),n})();function ZA(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function y0(n){const e=n.children&&n.children.map(y0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=qI),t}function kr(n){return n.outlet||Qt}function _0(n,e){const t=n.filter(r=>kr(r)===e);return t.push(...n.filter(r=>kr(r)!==e)),t}function Of(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class YI{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),d0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Pf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Jr(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Pf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Pf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Pf(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new jI(s.value.snapshot))}),e.children.length&&this.forwardEvent(new fm(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(d0(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),d0(c.route.value),this.activateChildRoutes(e,null,o.children)}else{const c=Of(i.snapshot),d=c?.get(f._Vd)??null;o.attachRef=null,o.route=i,o.resolver=d,o.injector=c,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class QI{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Em{constructor(e,t){this.component=e,this.route=t}}function Im(n,e,t){const r=n._root;return Mo(r,e?e._root:null,t,[r.value])}function il(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Mo(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Pf(e);return n.children.forEach(o=>{(function v0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const d=function Cm(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!nl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!nl(n.url,e.url)||!So(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!h0(n,e)||!So(n.queryParams,e.queryParams);default:return!h0(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new QI(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Mo(n,e,s.component?c?c.children:null:t,r,i),d&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Em(c.outlet.component,o))}else o&&rd(e,c,i),i.canActivateChecks.push(new QI(r)),Mo(n,null,s.component?c?c.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Jr(s,(o,c)=>rd(o,t.getContext(c),i)),i}function rd(n,e,t){const r=Pf(n),i=n.value;Jr(r,(s,o)=>{rd(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Em(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function id(n){return"function"==typeof n}function I0(n){return n instanceof Yg||"EmptyError"===n?.name}const Nf=Symbol("INITIAL_VALUE");function Tu(){return Ir(n=>$v(n.map(e=>e.pipe(Ef(1),nm(Nf)))).pipe((0,Nt.U)(e=>{for(const t of e)if(!0!==t){if(t===Nf)return Nf;if(!1===t||t instanceof tl)return t}return!0}),Ys(e=>e!==Nf),Ef(1)))}function nC(n){return(0,em.z)(Xr(e=>{if(rl(e))throw f0(0,e)}),(0,Nt.U)(e=>!0===e))}const Dm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rC(n,e,t,r,i){const s=Tm(n,e,t);return s.matched?function tM(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?mt(i.map(o=>{const c=il(o,n);return el(function m2(n){return n&&id(n.canMatch)}(c)?c.canMatch(e,t):n.runInContext(()=>c(e,t)))})).pipe(Tu(),nC()):mt(!0)}(r=ZA(e,r),e,t).pipe((0,Nt.U)(o=>!0===o?s:{...Dm})):mt(s)}function Tm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Dm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Zv)(t,n,e);if(!i)return{...Dm};const s={};Jr(i.posParams,(c,d)=>{s[d]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Sm(n,e,t,r,i="corrected"){if(t.length>0&&function sC(n,e,t){return t.some(r=>as(n,e,r)&&kr(r)!==Qt)}(n,t,r)){const o=new ln(e,function iC(n,e,t,r){const i={};i[Qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&kr(s)!==Qt){const o=new ln([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[kr(s)]=o}return i}(n,e,r,new ln(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function rM(n,e,t){return t.some(r=>as(n,e,r))}(n,t,r)){const o=new ln(n.segments,function nM(n,e,t,r,i,s){const o={};for(const c of r)if(as(n,t,c)&&!i[kr(c)]){const d=new ln([],{});d._sourceSegment=n,d._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[kr(c)]=d}return{...i,...o}}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new ln(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function as(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function xm(n,e,t,r){return!!(kr(n)===r||r!==Qt&&as(e,t,n))&&("**"===n.path||Tm(e,n,t).matched)}function oC(n,e,t){return 0===e.length&&!n.children[t]}const Am=!1;class D0{constructor(e){this.segmentGroup=e||null}}class T0{constructor(e){this.urlTree=e}}function Ff(n){return qc(new D0(n))}function aC(n){return qc(new T0(n))}class oM{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Sm(this.urlTree.root,[],[],this.config).segmentGroup,t=new ln(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Qt).pipe((0,Nt.U)(s=>this.createUrlTree(um(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ns(s=>{if(s instanceof T0)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof D0?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Qt).pipe((0,Nt.U)(i=>this.createUrlTree(um(i),e.queryParams,e.fragment))).pipe(Ns(i=>{throw i instanceof D0?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,Am)}createUrlTree(e,t,r){const i=Xv(e);return new tl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Nt.U)(s=>new ln([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,wn.D)(i).pipe(Zc(s=>{const o=r.children[s],c=_0(t,s);return this.expandSegmentGroup(e,c,o,s).pipe((0,Nt.U)(d=>({segment:d,outlet:s})))}),To((s,o)=>(s[o.outlet]=o.segment,s),{}),vI())}expandSegment(e,t,r,i,s,o){return(0,wn.D)(r).pipe(Zc(c=>this.expandSegmentAgainstRoute(e,t,r,c,i,s,o).pipe(Ns(g=>{if(g instanceof D0)return mt(null);throw g}))),Do(c=>!!c),Ns((c,d)=>{if(I0(c))return oC(t,i,s)?mt(new ln([],{})):Ff(t);throw c}))}expandSegmentAgainstRoute(e,t,r,i,s,o,c){return xm(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):Ff(t):Ff(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?aC(s):this.lineralizeSegments(r,s).pipe((0,Qr.z)(o=>{const c=new ln(o,{});return this.expandSegment(e,c,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:c,consumedSegments:d,remainingSegments:g,positionalParamSegments:_}=Tm(t,i,s);if(!c)return Ff(t);const w=this.applyRedirectCommands(d,i.redirectTo,_);return i.redirectTo.startsWith("/")?aC(w):this.lineralizeSegments(i,w).pipe((0,Qr.z)(T=>this.expandSegment(e,t,r,T.concat(g),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=ZA(r,e),r.loadChildren?(r._loadedRoutes?mt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Nt.U)(c=>(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,new ln(i,{})))):mt(new ln(i,{}))):rC(t,r,i,e).pipe(Ir(({matched:o,consumedSegments:c,remainingSegments:d})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Qr.z)(_=>{const w=_.injector??e,T=_.routes,{segmentGroup:S,slicedSegments:M}=Sm(t,c,d,T),R=new ln(S.segments,S.children);if(0===M.length&&R.hasChildren())return this.expandChildren(w,T,R).pipe((0,Nt.U)(X=>new ln(c,X)));if(0===T.length&&0===M.length)return mt(new ln(c,{}));const N=kr(r)===s;return this.expandSegment(w,R,T,M,N?Qt:s,!0).pipe((0,Nt.U)(G=>new ln(c.concat(G.segments),G.children)))})):Ff(t)))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function eM(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?mt(!0):mt(i.map(o=>{const c=il(o,n);return el(function w0(n){return n&&id(n.canLoad)}(c)?c.canLoad(e,t):n.runInContext(()=>c(e,t)))})).pipe(Tu(),nC())}(e,t,r).pipe((0,Qr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Xr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function S0(n){return qc(GI(Am,3))}())):mt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Qt])return qc(new f.vHH(4e3,Am));i=i.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new tl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Jr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[s]=t[c]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Jr(t.children,(c,d)=>{o[d]=this.createSegmentGroup(e,c,r,i)}),new ln(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,Am);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class km{}class b2{constructor(e,t,r,i,s,o,c,d){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=c,this.urlSerializer=d}recognize(){const e=Sm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe((0,Nt.U)(t=>{if(null===t)return null;const r=new td([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Xs(r,t),s=new GA(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=mm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,wn.D)(Object.keys(r.children)).pipe(Zc(i=>{const s=r.children[i],o=_0(t,i);return this.processSegmentGroup(e,o,s,i)}),To((i,s)=>i&&s?(i.push(...s),i):null),function s2(n,e=!1){return(0,Yr.e)((t,r)=>{let i=0;t.subscribe((0,jr.x)(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),rm(null),vI(),(0,Nt.U)(i=>{if(null===i)return null;const s=A0(i);return function lC(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,wn.D)(t).pipe(Zc(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),Do(o=>!!o),Ns(o=>{if(I0(o))return oC(r,i,s)?mt([]):mt(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!xm(t,r,i,s))return mt(null);let o;if("**"===t.path){const c=i.length>0?EI(i).parameters:{},d=Lf(r)+i.length;o=mt({snapshot:new td(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,od(t),kr(t),t.component??t._loadedComponent??null,t,ko(r),d,dC(t),d),consumedSegments:[],remainingSegments:[]})}else o=rC(r,t,i,e).pipe((0,Nt.U)(({matched:c,consumedSegments:d,remainingSegments:g,parameters:_})=>{if(!c)return null;const w=Lf(r)+d.length;return{snapshot:new td(d,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,od(t),kr(t),t.component??t._loadedComponent??null,t,ko(r),w,dC(t),w),consumedSegments:d,remainingSegments:g}}));return o.pipe(Ir(c=>{if(null===c)return mt(null);const{snapshot:d,consumedSegments:g,remainingSegments:_}=c;e=t._injector??e;const w=t._loadedInjector??e,T=function uC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:S,slicedSegments:M}=Sm(r,g,_,T.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===M.length&&S.hasChildren())return this.processChildren(w,T,S).pipe((0,Nt.U)(N=>null===N?null:[new Xs(d,N)]));if(0===T.length&&0===M.length)return mt([new Xs(d,[])]);const R=kr(t)===s;return this.processSegment(w,T,S,M,R?Qt:s).pipe((0,Nt.U)(N=>null===N?null:[new Xs(d,N)]))}))}}function cC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function A0(n){const e=[],t=new Set;for(const r of n){if(!cC(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=A0(r.children);e.push(new Xs(r.value,i))}return e.filter(r=>!t.has(r))}function ko(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Lf(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function od(n){return n.data||{}}function dC(n){return n.resolve||{}}function cM(n){return"string"==typeof n.title||null===n.title}function R0(n){return Ir(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,Nt.U)(()=>e)):mt(e)})}let dM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[If]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(fC)},providedIn:"root"}),n})(),fC=(()=>{class n extends dM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bo))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hM{}class P0 extends class pC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ad=new f.OlP("",{providedIn:"root",factory:()=>({})}),O0=new f.OlP("ROUTES");let N0=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=el(t.loadComponent()).pipe(Xr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),qv(()=>{this.componentLoaders.delete(t)})),i=new bu(r,()=>new ca.x).pipe(tm());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Nt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,g,_=!1;Array.isArray(c)?g=c:(d=c.create(t).injector,g=Kc(d.get(O0,[],f.XFs.Self|f.XFs.Optional)));return{routes:g.map(y0),injector:d}}),qv(()=>{this.childrenLoaders.delete(r)})),o=new bu(s,()=>new ca.x).pipe(tm());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return el(t()).pipe((0,Qr.z)(r=>r instanceof f.YKP||Array.isArray(r)?mt(r):(0,wn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class pM{}class gM{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Pm(n){throw n}function Su(n,e,t){return e.parse("/")}const E2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function mC(){const n=(0,f.f3M)(DI),e=(0,f.f3M)(bm),t=(0,f.f3M)(Ae),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),s=(0,f.f3M)(O0,{optional:!0})??[],o=(0,f.f3M)(ad,{optional:!0})??{},c=(0,f.f3M)(fC),d=(0,f.f3M)(dM,{optional:!0}),g=(0,f.f3M)(pM,{optional:!0}),_=(0,f.f3M)(hM,{optional:!0}),w=new Un(null,n,e,t,r,i,Kc(s));return g&&(w.urlHandlingStrategy=g),_&&(w.routeReuseStrategy=_),w.titleStrategy=d??c,function mM(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,w),w}let Un=(()=>{class n{constructor(t,r,i,s,o,c,d){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ca.x,this.errorHandler=Pm,this.malformedUriErrorHandler=Su,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>mt(void 0),this.urlHandlingStrategy=new gM,this.routeReuseStrategy=new P0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(N0),this.configLoader.onLoadEndListener=T=>this.triggerEvent(new UI(T)),this.configLoader.onLoadStartListener=T=>this.triggerEvent(new ed(T)),this.ngModule=o.get(f.h0i),this.console=o.get(f.c2e);const w=o.get(f.R0b);this.isNgZoneEnabled=w instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=function II(){return new tl(new ln([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zA(this.currentUrlTree,this.rootComponentType),this.transitions=new Ii({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ys(i=>0!==i.id),(0,Nt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ir(i=>{let s=!1,o=!1;return mt(i).pipe(Xr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ir(c=>{const d=this.browserUrlTree.toString(),g=!this.navigated||c.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return eo(c.source)&&(this.browserUrlTree=c.extractedUrl),mt(c).pipe(Ir(w=>{const T=this.transitions.getValue();return r.next(new hm(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),T!==this.transitions.getValue()?da.E:Promise.resolve(w)}),function Mm(n,e,t,r){return Ir(i=>function sM(n,e,t,r,i){return new oM(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Nt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Xr(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},i.urlAfterRedirects=w.urlAfterRedirects}),function k0(n,e,t,r,i,s){return(0,Qr.z)(o=>function x0(n,e,t,r,i,s,o="emptyOnly",c="legacy"){return new b2(n,e,t,r,i,o,c,s).recognize().pipe(Ir(d=>null===d?function v2(n){return new Os.y(e=>e.error(n))}(new km):mt(d)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i,s).pipe((0,Nt.U)(c=>({...o,targetSnapshot:c}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Xr(w=>{if(i.targetSnapshot=w.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const S=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(S,w)}this.browserUrlTree=w.urlAfterRedirects}const T=new s0(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);r.next(T)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:T,extractedUrl:S,source:M,restoredState:R,extras:N}=c,B=new hm(T,this.serializeUrl(S),M,R);r.next(B);const G=zA(S,this.rootComponentType).snapshot;return mt(i={...c,targetSnapshot:G,urlAfterRedirects:S,extras:{...N,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=c.rawUrl,c.resolve(null),da.E}),Xr(c=>{const d=new u2(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),(0,Nt.U)(c=>i={...c,guards:Im(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function QA(n,e){return(0,Qr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?mt({...t,guardsResult:!0}):function os(n,e,t,r){return(0,wn.D)(n).pipe((0,Qr.z)(i=>function tC(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?mt(s.map(c=>{const d=Of(e)??i,g=il(c,d);return el(function YA(n){return n&&id(n.canDeactivate)}(g)?g.canDeactivate(n,e,t,r):d.runInContext(()=>g(n,e,t,r))).pipe(Do())})).pipe(Tu()):mt(!0)}(i.component,i.route,t,e,r)),Do(i=>!0!==i,!0))}(o,r,i,n).pipe((0,Qr.z)(c=>c&&function b0(n){return"boolean"==typeof n}(c)?function eC(n,e,t,r){return(0,wn.D)(e).pipe(Zc(i=>Wc(function _2(n,e){return null!==n&&e&&e(new BI(n)),mt(!0)}(i.route.parent,r),function XA(n,e){return null!==n&&e&&e(new Qs(n)),mt(!0)}(i.route,r),function C0(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function nd(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Jg(()=>mt(o.guards.map(d=>{const g=Of(o.node)??t,_=il(d,g);return el(function E0(n){return n&&id(n.canActivateChild)}(_)?_.canActivateChild(r,n):g.runInContext(()=>_(r,n))).pipe(Do())})).pipe(Tu())));return mt(s).pipe(Tu())}(n,i.path,t),function JA(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(s=>Jg(()=>{const o=Of(e)??t,c=il(s,o);return el(function XI(n){return n&&id(n.canActivate)}(c)?c.canActivate(e,n):o.runInContext(()=>c(e,n))).pipe(Do())}));return mt(i).pipe(Tu())}(n,i.route,t))),Do(i=>!0!==i,!0))}(r,s,n,e):mt(c)),(0,Nt.U)(c=>({...t,guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),Xr(c=>{if(i.guardsResult=c.guardsResult,rl(c.guardsResult))throw f0(0,c.guardsResult);const d=new o0(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(d)}),Ys(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),R0(c=>{if(c.guards.canActivateChecks.length)return mt(c).pipe(Xr(d=>{const g=new $A(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),Ir(d=>{let g=!1;return mt(d).pipe(function hC(n,e){return(0,Qr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let s=0;return(0,wn.D)(i).pipe(Zc(o=>function aM(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!cM(i)&&(s[If]=i.title),function lM(n,e,t,r){const i=function Uf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return mt({});const s={};return(0,wn.D)(i).pipe((0,Qr.z)(o=>function uM(n,e,t,r){const i=Of(e)??r,s=il(n,i);return el(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Do(),Xr(c=>{s[o]=c}))),wu(1),function bI(n){return(0,Nt.U)(()=>n)}(s),Ns(o=>I0(o)?da.E:qc(o)))}(s,n,e,r).pipe((0,Nt.U)(o=>(n._resolvedData=o,n.data=mm(n,t).resolve,i&&cM(i)&&(n.data[If]=i.title),null)))}(o.route,r,n,e)),Xr(()=>s++),wu(1),(0,Qr.z)(o=>s===i.length?mt(t):da.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Xr({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),Xr(d=>{const g=new c2(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}))}),R0(c=>{const d=g=>{const _=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(g.routeConfig).pipe(Xr(w=>{g.component=w}),(0,Nt.U)(()=>{})));for(const w of g.children)_.push(...d(w));return _};return $v(d(c.targetSnapshot.root)).pipe(rm(),Ef(1))}),R0(()=>this.afterPreactivation()),(0,Nt.U)(c=>{const d=function zI(n,e,t){const r=ym(n,e._root,t?t._root:void 0);return new l0(r,e)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return i={...c,targetRouterState:d}}),Xr(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,Nt.U)(r=>(new YI(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),Xr({next(){s=!0},complete(){s=!0}}),qv(()=>{s||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ns(c=>{if(o=!0,qA(c)){vm(c)||(this.navigated=!0,this.restoreHistory(i,!0));const d=new kf(i.id,this.serializeUrl(i.extractedUrl),c.message,c.cancellationCode);if(r.next(d),vm(c)){const g=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eo(i.source)};this.scheduleNavigation(g,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new r0(i.id,this.serializeUrl(i.extractedUrl),c,i.targetSnapshot??void 0);r.next(d);try{i.resolve(this.errorHandler(c))}catch(g){i.reject(g)}}return da.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const c={...s};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(y0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:d}=r,g=i||this.routerState.root,_=d?this.currentUrlTree.fragment:o;let w=null;switch(c){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),e0(g,this.currentUrlTree,t,w,_??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=rl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function yM(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...E2}:!1===r?{...Bf}:r,rl(t))return xo(this.currentUrlTree,t,i);const s=this.parseUrl(t);return xo(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Cu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,d,g;o?(c=o.resolve,d=o.reject,g=o.promise):g=new Promise((T,S)=>{c=T,d=S});const _=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),w=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):w=0,this.setTransition({id:_,targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:d,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new kf(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return mC()},providedIn:"root"}),n})();function eo(n){return"imperative"!==n}class ls{}let ld=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ys(t=>t instanceof Cu),Zc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,f.MMx)(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,c=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return(0,wn.D)(i).pipe((0,wf.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):mt(null);const s=i.pipe((0,Qr.z)(o=>null===o?mt(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){const o=this.loader.loadComponent(r);return(0,wn.D)([s,o]).pipe((0,wf.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Un),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(ls),f.LFG(N0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sl=new f.OlP("");let Mu=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof HI&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new HI(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function to(n,e){return{\u0275kind:n,\u0275providers:e}}function ol(n){return[{provide:O0,multi:!0,useValue:n}]}function F0(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Un),i=n.get(L0);1===n.get(Nm)&&r.initialNavigation(),n.get(V0,null,f.XFs.Optional)?.setUpPreloading(),n.get(sl,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const L0=new f.OlP("",{factory:()=>new ca.x}),Nm=new f.OlP("",{providedIn:"root",factory:()=>1});const V0=new f.OlP("");function wC(n){return to(0,[{provide:V0,useExisting:ld},{provide:ls,useExisting:n}])}const EC=new f.OlP("ROUTER_FORROOT_GUARD"),bM=[Ae,{provide:DI,useClass:ss},{provide:Un,useFactory:mC},bm,{provide:Js,useFactory:function ku(n){return n.routerState.root},deps:[Un]},N0];function U0(){return new f.PXZ("Router",Un)}let Lm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[bM,[],ol(t),{provide:EC,useFactory:B0,deps:[[Un,new f.FiY,new f.tp0]]},{provide:ad,useValue:r||{}},r?.useHash?{provide:ue,useClass:Dt}:{provide:ue,useClass:ht},{provide:sl,useFactory:()=>{const n=(0,f.f3M)(Un),e=(0,f.f3M)(Ra),t=(0,f.f3M)(ad);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Mu(n,e,t)}},r?.preloadingStrategy?wC(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:U0},r?.initialNavigation?EM(r):[],[{provide:Bm,useFactory:F0},{provide:f.tb,multi:!0,useExisting:Bm}]]}}static forChild(t){return{ngModule:n,providers:[ol(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(EC,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[qI]}),n})();function B0(n){return"guarded"}function EM(n){return["disabled"===n.initialNavigation?to(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Un);return()=>{e.setUpLocationChangeListener()}}},{provide:Nm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?to(2,[{provide:Nm,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(Z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(Un),c=e.get(L0);(function i(s){e.get(Un).events.pipe(Ys(c=>c instanceof Cu||c instanceof kf||c instanceof r0),(0,Nt.U)(c=>c instanceof Cu||c instanceof kf&&(0===c.code||1===c.code)&&null),Ys(c=>null!==c),Ef(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),o.afterPreactivation=()=>(s(!0),r||c.closed?mt(void 0):c),o.initialNavigation()}))}}]).\u0275providers:[]]}const Bm=new f.OlP(""),H0=Qo("fadeInAnimation",[Xo(":enter",[fr({opacity:0}),hr("1000ms",fr({opacity:1}))]),Xo(":leave",[hr("500ms",fr({opacity:0}))])]),$f=Qo("menuFadeInAnimation",[Xo(":enter",[fr({opacity:0}),hr("400ms",fr({opacity:1}))]),Xo(":leave",[fr({opacity:1}),hr("3000ms",fr({opacity:0}))])]),IC=Qo("videoFadeInAnimation",[Xo(":enter",[fr({opacity:0}),hr("500ms",fr({opacity:1}))]),Xo(":leave",[fr({opacity:1}),hr("500ms",fr({opacity:0}))])]),CC=Qo("textFadeInOutAnimation",[function ru(n,e,t){return{type:0,name:n,styles:e,options:t}}("void",fr({opacity:0})),Xo("void <=> *",hr(1e3))]);function al(n){return n+.5|0}const Ro=(n,e,t)=>Math.max(Math.min(n,t),e);function zf(n){return Ro(al(2.55*n),0,255)}function pa(n){return Ro(al(255*n),0,255)}function Po(n){return Ro(al(n/2.55)/100,0,1)}function $0(n){return Ro(al(100*n),0,100)}const Fs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},z0=[..."0123456789ABCDEF"],DM=n=>z0[15&n],DC=n=>z0[(240&n)>>4]+z0[15&n],ud=n=>(240&n)>>4==(15&n);const MC=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function G0(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function kC(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function RC(n,e,t){const r=G0(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function W0(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),c=(s+o)/2;let d,g,_;return s!==o&&(_=s-o,g=c>.5?_/(2-s-o):_/(s+o),d=function C2(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}(t,r,i,_,s),d=60*d+.5),[0|d,g||0,c]}function q0(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(pa)}function jm(n,e,t){return q0(G0,n,e,t)}function Z0(n){return(n%360+360)%360}const OC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},K0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ga;const MM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Hm=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,Gf=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function cd(n,e,t){if(n){let r=W0(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,0===e?360:1)),r=jm(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function no(n,e){return n&&Object.assign(e||{},n)}function VC(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=pa(n[3]))):(e=no(n,{r:0,g:0,b:0,a:1})).a=pa(e.a),e}function RM(n){return"r"===n.charAt(0)?function FC(n){const e=MM.exec(n);let r,i,s,t=255;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?zf(o):Ro(255*o,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?zf(r):Ro(r,0,255)),i=255&(e[4]?zf(i):Ro(i,0,255)),s=255&(e[6]?zf(s):Ro(s,0,255)),{r,g:i,b:s,a:t}}}(n):function SM(n){const e=MC.exec(n);let r,t=255;if(!e)return;e[5]!==r&&(t=e[6]?zf(+e[5]):pa(+e[5]));const i=Z0(+e[2]),s=+e[3]/100,o=+e[4]/100;return r="hwb"===e[1]?function TM(n,e,t){return q0(RC,n,e,t)}(i,s,o):"hsv"===e[1]?function Rr(n,e,t){return q0(kC,n,e,t)}(i,s,o):jm(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}(n)}class Ci{constructor(e){if(e instanceof Ci)return e;const t=typeof e;let r;"object"===t?r=VC(e):"string"===t&&(r=function SC(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*Fs[n[1]],g:255&17*Fs[n[2]],b:255&17*Fs[n[3]],a:5===e?17*Fs[n[4]]:255}:(7===e||9===e)&&(t={r:Fs[n[1]]<<4|Fs[n[2]],g:Fs[n[3]]<<4|Fs[n[4]],b:Fs[n[5]]<<4|Fs[n[6]],a:9===e?Fs[n[7]]<<4|Fs[n[8]]:255})),t}(e)||function AM(n){ga||(ga=function NC(){const n={},e=Object.keys(K0),t=Object.keys(OC);let r,i,s,o,c;for(r=0;r<e.length;r++){for(o=c=e[r],i=0;i<t.length;i++)s=t[i],c=c.replace(s,OC[s]);s=parseInt(K0[o],16),n[c]=[s>>16&255,s>>8&255,255&s]}return n}(),ga.transparent=[0,0,0,0]);const e=ga[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||RM(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=no(this._rgb);return e&&(e.a=Po(e.a)),e}set rgb(e){this._rgb=VC(e)}rgbString(){return this._valid?function kM(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Po(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function AC(n){var e=(n=>ud(n.r)&&ud(n.g)&&ud(n.b)&&ud(n.a))(n)?DM:DC;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function PC(n){if(!n)return;const e=W0(n),t=e[0],r=$0(e[1]),i=$0(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Po(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,c=2*o-1,d=r.a-i.a,g=((c*d==-1?c:(c+d)/(1+c*d))+1)/2;s=1-g,r.r=255&g*r.r+s*i.r+.5,r.g=255&g*r.g+s*i.g+.5,r.b=255&g*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function LC(n,e,t){const r=Gf(Po(n.r)),i=Gf(Po(n.g)),s=Gf(Po(n.b));return{r:pa(Hm(r+t*(Gf(Po(e.r))-r))),g:pa(Hm(i+t*(Gf(Po(e.g))-i))),b:pa(Hm(s+t*(Gf(Po(e.b))-s))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ci(this.rgb)}alpha(e){return this._rgb.a=pa(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=al(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return cd(this._rgb,2,e),this}darken(e){return cd(this._rgb,2,-e),this}saturate(e){return cd(this._rgb,1,e),this}desaturate(e){return cd(this._rgb,1,-e),this}rotate(e){return function xM(n,e){var t=W0(n);t[0]=Z0(t[0]+e),t=jm(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function Pr(){}const UC=(()=>{let n=0;return()=>n++})();function dn(n){return null===n||typeof n>"u"}function On(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function un(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function ir(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function us(n,e){return ir(n)?n:e}function jt(n,e){return typeof n>"u"?e:n}const BC=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Sn(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function En(n,e,t,r){let i,s,o;if(On(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(un(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function qf(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Zf(n){if(On(n))return n.map(Zf);if(un(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=Zf(n[t[i]]);return e}return n}function Kf(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function PM(n,e,t,r){if(!Kf(n))return;const i=e[n],s=t[n];un(i)&&un(s)?dd(i,s,r):e[n]=Zf(s)}function dd(n,e,t){const r=On(e)?e:[e],i=r.length;if(!un(n))return n;const s=(t=t||{}).merger||PM;let o;for(let c=0;c<i;++c){if(o=r[c],!un(o))continue;const d=Object.keys(o);for(let g=0,_=d.length;g<_;++g)s(d[g],n,o,t)}return n}function hd(n,e){return dd(n,e,{merger:Y0})}function Y0(n,e,t){if(!Kf(n))return;const r=e[n],i=t[n];un(r)&&un(i)?hd(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Zf(i))}const X0={"":n=>n,x:n=>n.x,y:n=>n.y};function ma(n,e){return(X0[e]||(X0[e]=function HC(n){const e=function jC(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}(n);return t=>{for(const r of e){if(""===r)break;t=t&&t[r]}return t}}(e)))(n)}function $m(n){return n.charAt(0).toUpperCase()+n.slice(1)}const fd=n=>typeof n<"u",ya=n=>"function"==typeof n,J0=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},Nn=Math.PI,Fn=2*Nn,NM=Fn+Nn,zm=Number.POSITIVE_INFINITY,FM=Nn/180,pr=Nn/2,Ru=Nn/4,$C=2*Nn/3,ll=Math.log10,No=Math.sign;function Yf(n,e,t){return Math.abs(n-e)<t}function zC(n){const e=Math.round(n);n=Yf(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(ll(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function pd(n){return!isNaN(parseFloat(n))&&isFinite(n)}function GC(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ro(n){return n*(Nn/180)}function Gm(n){return n*(180/Nn)}function eb(n){if(!ir(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function tb(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*Nn&&(s+=Fn),{angle:s,distance:i}}function Wm(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function WC(n,e){return(n-e+NM)%Fn-Nn}function Hi(n){return(n%Fn+Fn)%Fn}function gd(n,e,t,r){const i=Hi(n),s=Hi(e),o=Hi(t),c=Hi(s-i),d=Hi(o-i),g=Hi(i-s),_=Hi(i-o);return i===s||i===o||r&&s===o||c>d&&g<_}function Or(n,e,t){return Math.max(e,Math.min(t,n))}function Fo(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function qm(n,e,t){t=t||(o=>n[o]<e);let s,r=n.length-1,i=0;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const Di=(n,e,t,r)=>qm(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),UM=(n,e,t)=>qm(n,t,r=>n[r][e]>=t),Pu=["push","pop","shift","splice","unshift"];function Zm(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),!(r.length>0)&&(Pu.forEach(s=>{delete n[s]}),delete n._chartjs)}function jM(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const nb=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function $M(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,nb.call(window,()=>{r=!1,n.apply(e,t)}))}}const rb=n=>"start"===n?"left":"end"===n?"right":"center",ci=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function Ou(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,_parsed:c}=n,d=o.axis,{min:g,max:_,minDefined:w,maxDefined:T}=o.getUserBounds();w&&(i=Or(Math.min(Di(c,d,g).lo,t?r:Di(e,d,o.getPixelForValue(g)).lo),0,r-1)),s=T?Or(Math.max(Di(c,o.axis,_,!0).hi+1,t?0:Di(e,d,o.getPixelForValue(_),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function ZC(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const Nu=n=>0===n||1===n,Qf=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*Fn/t),Wn=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Fn/t)+1,Km={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*pr),easeOutSine:n=>Math.sin(n*pr),easeInOutSine:n=>-.5*(Math.cos(Nn*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>Nu(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Nu(n)?n:Qf(n,.075,.3),easeOutElastic:n=>Nu(n)?n:Wn(n,.075,.3),easeInOutElastic:n=>Nu(n)?n:n<.5?.5*Qf(2*n,.1125,.45):.5+.5*Wn(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-Km.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*Km.easeInBounce(2*n):.5*Km.easeOutBounce(2*n-1)+.5};function Ym(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function ib(n){return Ym(n)?n:new Ci(n)}function sb(n){return Ym(n)?n:new Ci(n).saturate(.5).darken(.1).hexString()}const KC=["x","y","borderWidth","radius","tension"],YC=["color","borderColor","backgroundColor"],JC=new Map;function Xf(n,e,t){return function GM(n,e){e=e||{};const t=n+JSON.stringify(e);let r=JC.get(t);return r||(r=new Intl.NumberFormat(n,e),JC.set(t,r)),r}(e,t).format(n)}const md={values:n=>On(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const g=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(g<1e-4||g>1e15)&&(i="scientific"),s=function WM(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const o=ll(Math.abs(s)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),Xf(n,r,d)},logarithmic(n,e,t){if(0===n)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(ll(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?md.numeric.call(this,n,e,t):""}};var Qm={formatters:md};const Lo=Object.create(null),Xm=Object.create(null);function yd(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function Jm(n,e,t){return"string"==typeof e?dd(yd(n,e),t):dd(yd(n,""),e)}class ZM{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>sb(i.backgroundColor),this.hoverBorderColor=(r,i)=>sb(i.borderColor),this.hoverColor=(r,i)=>sb(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Jm(this,e,t)}get(e){return yd(this,e)}describe(e,t){return Jm(Xm,e,t)}override(e,t){return Jm(Lo,e,t)}route(e,t,r,i){const s=yd(this,e),o=yd(this,r),c="_"+t;Object.defineProperties(s,{[c]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const d=this[c],g=o[i];return un(d)?Object.assign({},g,d):jt(d,g)},set(d){this[c]=d}}})}apply(e){e.forEach(t=>t(this))}}var kn=new ZM({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function QC(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),n.set("animations",{colors:{type:"color",properties:YC},numbers:{type:"number",properties:KC}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function XC(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function qM(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ey(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function KM(n,e,t,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0;const c=t.length;let d,g,_,w,T;for(d=0;d<c;d++)if(w=t[d],null==w||On(w)){if(On(w))for(g=0,_=w.length;g<_;g++)T=w[g],null!=T&&!On(T)&&(o=ey(n,i,s,o,T))}else o=ey(n,i,s,o,w);n.restore();const S=s.length/2;if(S>t.length){for(d=0;d<S;d++)delete i[s[d]];s.splice(0,S)}return o}function Fu(n,e,t){const r=n.currentDevicePixelRatio,i=0!==t?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function ob(n,e){(e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function ty(n,e,t,r){ab(n,e,t,r,null)}function ab(n,e,t,r,i){let s,o,c,d,g,_,w,T;const S=e.pointStyle,M=e.rotation,R=e.radius;let N=(M||0)*FM;if(S&&"object"==typeof S&&(s=S.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(t,r),n.rotate(N),n.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),void n.restore();if(!(isNaN(R)||R<=0)){switch(n.beginPath(),S){default:i?n.ellipse(t,r,i/2,R,0,0,Fn):n.arc(t,r,R,0,Fn),n.closePath();break;case"triangle":_=i?i/2:R,n.moveTo(t+Math.sin(N)*_,r-Math.cos(N)*R),N+=$C,n.lineTo(t+Math.sin(N)*_,r-Math.cos(N)*R),N+=$C,n.lineTo(t+Math.sin(N)*_,r-Math.cos(N)*R),n.closePath();break;case"rectRounded":g=.516*R,d=R-g,o=Math.cos(N+Ru)*d,w=Math.cos(N+Ru)*(i?i/2-g:d),c=Math.sin(N+Ru)*d,T=Math.sin(N+Ru)*(i?i/2-g:d),n.arc(t-w,r-c,g,N-Nn,N-pr),n.arc(t+T,r-o,g,N-pr,N),n.arc(t+w,r+c,g,N,N+pr),n.arc(t-T,r+o,g,N+pr,N+Nn),n.closePath();break;case"rect":if(!M){d=Math.SQRT1_2*R,_=i?i/2:d,n.rect(t-_,r-d,2*_,2*d);break}N+=Ru;case"rectRot":w=Math.cos(N)*(i?i/2:R),o=Math.cos(N)*R,c=Math.sin(N)*R,T=Math.sin(N)*(i?i/2:R),n.moveTo(t-w,r-c),n.lineTo(t+T,r-o),n.lineTo(t+w,r+c),n.lineTo(t-T,r+o),n.closePath();break;case"crossRot":N+=Ru;case"cross":w=Math.cos(N)*(i?i/2:R),o=Math.cos(N)*R,c=Math.sin(N)*R,T=Math.sin(N)*(i?i/2:R),n.moveTo(t-w,r-c),n.lineTo(t+w,r+c),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o);break;case"star":w=Math.cos(N)*(i?i/2:R),o=Math.cos(N)*R,c=Math.sin(N)*R,T=Math.sin(N)*(i?i/2:R),n.moveTo(t-w,r-c),n.lineTo(t+w,r+c),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o),N+=Ru,w=Math.cos(N)*(i?i/2:R),o=Math.cos(N)*R,c=Math.sin(N)*R,T=Math.sin(N)*(i?i/2:R),n.moveTo(t-w,r-c),n.lineTo(t+w,r+c),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o);break;case"line":o=i?i/2:Math.cos(N)*R,c=Math.sin(N)*R,n.moveTo(t-o,r-c),n.lineTo(t+o,r+c);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(N)*(i?i/2:R),r+Math.sin(N)*R);break;case!1:n.closePath()}n.fill(),e.borderWidth>0&&n.stroke()}}function _a(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function ep(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function ny(n){n.restore()}function YM(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if("middle"===i){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else"after"===i!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function T2(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function x2(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,c=e+s.actualBoundingBoxRight,d=t-s.actualBoundingBoxAscent,g=t+s.actualBoundingBoxDescent,_=i.strikethrough?(d+g)/2:g;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,_),n.lineTo(c,_),n.stroke()}}function A2(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function ul(n,e,t,r,i,s={}){const o=On(e)?e:[e],c=s.strokeWidth>0&&""!==s.strokeColor;let d,g;for(n.save(),n.font=i.string,function S2(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),dn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,s),d=0;d<o.length;++d)g=o[d],s.backdrop&&A2(n,s.backdrop),c&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),dn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(g,t,r,s.maxWidth)),n.fillText(g,t,r,s.maxWidth),x2(n,t,r,g,s),r+=Number(i.lineHeight);n.restore()}function cl(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Nn,Nn,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Nn,pr,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,pr,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-pr,!0),n.lineTo(t+o.topLeft,r)}const QM=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,XM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function eD(n,e){const t=(""+n).match(QM);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const tp=n=>+n||0;function lb(n,e){const t={},r=un(e),i=r?Object.keys(e):e,s=un(n)?r?o=>jt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=tp(s(o));return t}function tD(n){return lb(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Lu(n){return lb(n,["topLeft","topRight","bottomLeft","bottomRight"])}function di(n){const e=tD(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Nr(n,e){let t=jt((n=n||{}).size,(e=e||kn.font).size);"string"==typeof t&&(t=parseInt(t,10));let r=jt(n.style,e.style);r&&!(""+r).match(XM)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:jt(n.family,e.family),lineHeight:eD(jt(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:jt(n.weight,e.weight),string:""};return i.string=function Jf(n){return!n||dn(n.size)||dn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(i),i}function _d(n,e,t,r){let s,o,c,i=!0;for(s=0,o=n.length;s<o;++s)if(c=n[s],void 0!==c&&(void 0!==e&&"function"==typeof c&&(c=c(e),i=!1),void 0!==t&&On(c)&&(c=c[t%c.length],i=!1),void 0!==c))return r&&!i&&(r.cacheable=!1),c}function dl(n,e){return Object.assign(Object.create(n),e)}function Vu(n,e=[""],t,r,i=(()=>n[0])){const s=t||n;typeof r>"u"&&(r=lD("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:c=>Vu([c,...n],e,s,r)};return new Proxy(o,{deleteProperty:(c,d)=>(delete c[d],delete c._keys,delete n[0][d],!0),get:(c,d)=>nD(c,d,()=>function hb(n,e,t,r){let i;for(const s of e)if(i=lD(e1(s,n),t),typeof i<"u")return ry(n,i)?db(t,r,n,i):i}(d,e,n,c)),getOwnPropertyDescriptor:(c,d)=>Reflect.getOwnPropertyDescriptor(c._scopes[0],d),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(c,d)=>fb(c).includes(d),ownKeys:c=>fb(c),set(c,d,g){const _=c._storage||(c._storage=i());return c[d]=_[d]=g,delete c._keys,!0}})}function vd(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:ub(n,r),setContext:s=>vd(n,s,t,r),override:s=>vd(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,c)=>nD(s,o,()=>function rD(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let c=r[e];return ya(c)&&o.isScriptable(e)&&(c=function t1(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let d=e(s,o||r);return c.delete(n),ry(n,d)&&(d=db(i._scopes,i,n,d)),d}(e,c,n,t)),On(c)&&c.length&&(c=function cb(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:c}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(un(e[0])){const d=e,g=i._scopes.filter(_=>_!==d);e=[];for(const _ of d){const w=db(g,i,n,_);e.push(vd(w,s,o&&o[n],c))}}return e}(e,c,n,o.isIndexable)),ry(e,c)&&(c=vd(c,i,s&&s[e],o)),c}(s,o,c)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,c)=>(n[o]=c,delete s[o],!0)})}function ub(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:ya(t)?t:()=>t,isIndexable:ya(r)?r:()=>r}}const e1=(n,e)=>n?n+$m(e):e,ry=(n,e)=>un(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function nD(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const r=t();return n[e]=r,r}function iD(n,e,t){return ya(n)?n(e,t):n}const sD=(n,e)=>!0===n?e:"string"==typeof n?ma(e,n):void 0;function oD(n,e,t,r,i){for(const s of e){const o=sD(t,s);if(o){n.add(o);const c=iD(o._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==r)return c}else if(!1===o&&typeof r<"u"&&t!==r)return null}return!1}function db(n,e,t,r){const i=e._rootScopes,s=iD(e._fallback,t,r),o=[...n,...i],c=new Set;c.add(r);let d=aD(c,o,t,s||t,r);return!(null===d||typeof s<"u"&&s!==t&&(d=aD(c,o,s,d,r),null===d))&&Vu(Array.from(c),[""],i,s,()=>function n1(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return On(i)&&un(t)?t:i||{}}(e,t,r))}function aD(n,e,t,r,i){for(;t;)t=oD(n,e,t,r,i);return t}function lD(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function fb(n){let e=n._keys;return e||(e=n._keys=function r1(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}(n._scopes)),e}function uD(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r);let c,d,g,_;for(c=0,d=r;c<d;++c)g=c+t,_=e[g],o[c]={r:i.parse(ma(_,s),g)};return o}const i1=Number.EPSILON||1e-14,bd=(n,e)=>e<n.length&&!n[e].skip&&n[e],cD=n=>"x"===n?"y":"x";function s1(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,c=Wm(s,i),d=Wm(o,s);let g=c/(c+d),_=d/(c+d);g=isNaN(g)?0:g,_=isNaN(_)?0:_;const w=r*g,T=r*_;return{previous:{x:s.x-w*(o.x-i.x),y:s.y-w*(o.y-i.y)},next:{x:s.x+T*(o.x-i.x),y:s.y+T*(o.y-i.y)}}}function np(n,e,t){return Math.max(Math.min(n,t),e)}function u1(n,e,t,r,i){let s,o,c,d;if(e.spanGaps&&(n=n.filter(g=>!g.skip)),"monotone"===e.cubicInterpolationMode)!function dD(n,e="x"){const t=cD(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,c,d,g=bd(n,0);for(o=0;o<r;++o)if(c=d,d=g,g=bd(n,o+1),d){if(g){const _=g[e]-d[e];i[o]=0!==_?(g[t]-d[t])/_:0}s[o]=c?g?No(i[o-1])!==No(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}(function o1(n,e,t){const r=n.length;let i,s,o,c,d,g=bd(n,0);for(let _=0;_<r-1;++_)if(d=g,g=bd(n,_+1),d&&g){if(Yf(e[_],0,i1)){t[_]=t[_+1]=0;continue}i=t[_]/e[_],s=t[_+1]/e[_],c=Math.pow(i,2)+Math.pow(s,2),!(c<=9)&&(o=3/Math.sqrt(c),t[_]=i*o*e[_],t[_+1]=s*o*e[_])}})(n,i,s),function a1(n,e,t="x"){const r=cD(t),i=n.length;let s,o,c,d=bd(n,0);for(let g=0;g<i;++g){if(o=c,c=d,d=bd(n,g+1),!c)continue;const _=c[t],w=c[r];o&&(s=(_-o[t])/3,c[`cp1${t}`]=_-s,c[`cp1${r}`]=w-s*e[g]),d&&(s=(d[t]-_)/3,c[`cp2${t}`]=_+s,c[`cp2${r}`]=w+s*e[g])}}(n,s,e)}(n,i);else{let g=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)c=n[s],d=s1(g,c,n[Math.min(s+1,o-(r?0:1))%o],e.tension),c.cp1x=d.previous.x,c.cp1y=d.previous.y,c.cp2x=d.next.x,c.cp2y=d.next.y,g=c}e.capBezierPoints&&function l1(n,e){let t,r,i,s,o,c=_a(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=c,c=t<r-1&&_a(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=np(i.cp1x,e.left,e.right),i.cp1y=np(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=np(i.cp2x,e.left,e.right),i.cp2y=np(i.cp2y,e.top,e.bottom)))}(n,t)}function pb(){return typeof window<"u"&&typeof document<"u"}function gb(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function iy(n,e,t){let r;return"string"==typeof n?(r=parseInt(n,10),-1!==n.indexOf("%")&&(r=r/100*e.parentNode[t])):r=n,r}const sy=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),yb=["top","right","bottom","left"];function hl(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=yb[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Uu(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=sy(t),s="border-box"===i.boxSizing,o=hl(i,"padding"),c=hl(i,"border","width"),{x:d,y:g,box:_}=function c1(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let c,d,o=!1;if(((n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot))(i,s,n.target))c=i,d=s;else{const g=e.getBoundingClientRect();c=r.clientX-g.left,d=r.clientY-g.top,o=!0}return{x:c,y:d,box:o}}(n,t),w=o.left+(_&&c.left),T=o.top+(_&&c.top);let{width:S,height:M}=e;return s&&(S-=o.width+c.width,M-=o.height+c.height),{x:Math.round((d-w)/S*t.width/r),y:Math.round((g-T)/M*t.height/r)}}const oy=n=>Math.round(10*n)/10;function Bu(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0)}const fD=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function pD(n,e){const t=function mb(n,e){return sy(n).getPropertyValue(e)}(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function wd(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function gD(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:"middle"===r?t<.5?n.y:e.y:"after"===r?t<1?n.y:e.y:t>0?e.y:n.y}}function bb(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=wd(n,i,t),c=wd(i,s,t),d=wd(s,e,t),g=wd(o,c,t),_=wd(c,d,t);return wd(g,_,t)}function Ed(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,r)=>t-r,leftForLtr:(t,r)=>t-r}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function Eb(n,e){let t,r;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function ay(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Ib(n){return"angle"===n?{between:gd,compare:WC,normalize:Hi}:{between:Fo,compare:(e,t)=>e-t,normalize:e=>e}}function Cb({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t==0,style:i}}function Db(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:c,between:d,normalize:g}=Ib(r),{start:_,end:w,loop:T,style:S}=function mD(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:c}=Ib(r),d=e.length;let T,S,{start:g,end:_,loop:w}=n;if(w){for(g+=d,_+=d,T=0,S=d;T<S&&o(c(e[g%d][r]),i,s);++T)g--,_--;g%=d,_%=d}return _<g&&(_+=d),{start:g,end:_,loop:w,style:n.style}}(n,e,t),M=[];let B,G,X,R=!1,N=null;for(let Ve=_,ut=_;Ve<=w;++Ve)G=e[Ve%o],!G.skip&&(B=g(G[r]),B!==X&&(R=d(B,i,s),null===N&&(R||d(i,X,B)&&0!==c(i,X))&&(N=0===c(B,i)?Ve:ut),null!==N&&(!R||0===c(s,B)||d(s,X,B))&&(M.push(Cb({start:N,end:Ve,loop:T,count:o,style:S})),N=null),ut=Ve,X=B));return null!==N&&M.push(Cb({start:N,end:w,loop:T,count:o,style:S})),M}function yD(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=Db(r[i],n.points,e);s.length&&t.push(...s)}return t}function Sb(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function g1(n,e){if(!e)return!1;const t=[],r=function(i,s){return Ym(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}class m1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.duration;t.listeners[i].forEach(c=>c({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=nb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let d,o=s.length-1,c=!1;for(;o>=0;--o)d=s[o],d._active?(d._total>r.duration&&(r.duration=d._total),d.tick(e),c=!0):(s[o]=s[s.length-1],s.pop());c&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);!t||(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var fl=new m1;const y1="transparent",_1={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const r=ib(n||y1),i=r.valid&&ib(e||y1);return i&&i.valid?i.mix(r,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class v1{constructor(e,t,r,i){const s=t[r];i=_d([e.to,i,s,e.from]);const o=_d([e.from,s,i]);this._active=!0,this._fn=e.fn||_1[e.type||typeof o],this._easing=Km[e.easing]||Km.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=_d([e.to,t,i,e.from]),this._from=_d([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,c=this._to;let d;if(this._active=s!==c&&(o||t<r),!this._active)return this._target[i]=c,void this._notify(!0);t<0?this._target[i]=s:(d=t/r%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[i]=this._fn(s,c,d))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class _D{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!un(e))return;const t=Object.keys(kn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!un(s))return;const o={};for(const c of t)o[c]=s[c];(On(s.properties)&&s.properties||[i]).forEach(c=>{(c===i||!r.has(c))&&r.set(c,o)})})}_animateOptions(e,t){const r=t.options,i=function bD(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&function vD(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),c=Date.now();let d;for(d=o.length-1;d>=0;--d){const g=o[d];if("$"===g.charAt(0))continue;if("options"===g){i.push(...this._animateOptions(e,t));continue}const _=t[g];let w=s[g];const T=r.get(g);if(w){if(T&&w.active()){w.update(T,_,c);continue}w.cancel()}T&&T.duration?(s[g]=w=new v1(T,e,g,_),i.push(w)):e[g]=_}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(fl.add(this._chart,r),!0):void 0}}function wD(n,e){const t=n&&n.options||{},r=t.reverse,i=void 0===t.min?e:0,s=void 0===t.max?e:0;return{start:r?s:i,end:r?i:s}}function ED(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function ID(n,e,t,r={}){const i=n.keys,s="single"===r.mode;let o,c,d,g;if(null!==e){for(o=0,c=i.length;o<c;++o){if(d=+i[o],d===t){if(r.all)continue;break}g=n.values[d],ir(g)&&(s||0===e||No(e)===No(g))&&(e+=g)}return e}}function CD(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function TD(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function xb(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function Ab(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:c}=r,d=s.axis,g=o.axis,_=function rp(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(s,o,r),w=e.length;let T;for(let S=0;S<w;++S){const M=e[S],{[d]:R,[g]:N}=M;T=(M._stacks||(M._stacks={}))[g]=TD(i,_,R),T[c]=N,T._top=xb(T,o,!0,r.type),T._bottom=xb(T,o,!1,r.type),(T._visualValues||(T._visualValues={}))[c]=N}}function ly(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function uy(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||void 0===s[r]||void 0===s[r][t])return;delete s[r][t],void 0!==s[r]._visualValues&&void 0!==s[r]._visualValues[t]&&delete s[r]._visualValues[t]}}}const cy=n=>"reset"===n||"none"===n,Mb=(n,e)=>e?n:Object.assign({},n);class io{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=CD(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&uy(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(w,T,S,M)=>"x"===w?T:"r"===w?M:S,s=t.xAxisID=jt(r.xAxisID,ly(e,"x")),o=t.yAxisID=jt(r.yAxisID,ly(e,"y")),c=t.rAxisID=jt(r.rAxisID,ly(e,"r")),d=t.indexAxis,g=t.iAxisID=i(d,s,o,c),_=t.vAxisID=i(d,o,s,c);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(g),t.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Zm(this._data,this),e._stacked&&uy(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(un(t))this._data=function E1(n){const e=Object.keys(n),t=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],t[r]={x:s,y:n[s]};return t}(t);else if(r!==t){if(r){Zm(r,this);const i=this._cachedMeta;uy(i),i._parsed=[]}t&&Object.isExtensible(t)&&function D2(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Pu.forEach(t=>{const r="_onData"+$m(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(c=>{"function"==typeof c[r]&&c[r](...s)}),o}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=CD(t.vScale,t),t.stack!==r.stack&&(i=!0,uy(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&Ab(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,c=s.axis;let _,w,T,d=0===e&&t===i.length||r._sorted,g=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=i,r._sorted=!0,T=i;else{T=On(i[e])?this.parseArrayData(r,i,e,t):un(i[e])?this.parseObjectData(r,i,e,t):this.parsePrimitiveData(r,i,e,t);const S=()=>null===w[c]||g&&w[c]<g[c];for(_=0;_<t;++_)r._parsed[_+e]=w=T[_],d&&(S()&&(d=!1),g=w);r._sorted=d}o&&Ab(this,T)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:o}=e,c=s.axis,d=o.axis,g=s.getLabels(),_=s===o,w=new Array(i);let T,S,M;for(T=0,S=i;T<S;++T)M=T+r,w[T]={[c]:_||s.parse(g[M],M),[d]:o.parse(t[M],M)};return w}parseArrayData(e,t,r,i){const{xScale:s,yScale:o}=e,c=new Array(i);let d,g,_,w;for(d=0,g=i;d<g;++d)_=d+r,w=t[_],c[d]={x:s.parse(w[0],_),y:o.parse(w[1],_)};return c}parseObjectData(e,t,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,g=new Array(i);let _,w,T,S;for(_=0,w=i;_<w;++_)T=_+r,S=t[T],g[_]={x:s.parse(ma(S,c),T),y:o.parse(ma(S,d),T)};return g}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const s=this._cachedMeta,o=t[e.axis];return ID({keys:ED(this.chart,!0),values:t._stacks[e.axis]._visualValues},o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let o=null===s?NaN:s;const c=i&&r._stacks[t.axis];i&&c&&(i.values=c,o=ID(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,c=this._getOtherScale(e),d=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:ED(this.chart,!0),values:null})(t,r),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:w}=function DD(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}(c);let T,S;function M(){S=i[T];const R=S[c.axis];return!ir(S[e.axis])||_>R||w<R}for(T=0;T<o&&(M()||(this.updateRangeFromParsed(g,e,S,d),!s));++T);if(s)for(T=o-1;T>=0;--T)if(!M()){this.updateRangeFromParsed(g,e,S,d);break}return g}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],ir(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function w1(n){let e,t,r,i;return un(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:!1===n}}(jt(this.options.clip,function b1(n,e,t){if(!1===t)return!1;const r=wD(n,t),i=wD(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,i=r.data||[],s=this.chart.chartArea,o=[],c=this._drawStart||0,d=this._drawCount||i.length-c,g=this.options.drawActiveElementsOnTop;let _;for(r.dataset&&r.dataset.draw(e,s,c,d),_=c;_<c+d;++_){const w=i[_];w.hidden||(w.active&&g?o.push(w):w.draw(e,s))}for(_=0;_<o.length;++_)o[_].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=function I1(n,e,t){return dl(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function SD(n,e){return dl(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i="active"===t,s=this._cachedDataOpts,o=e+"-"+t,c=s[o],d=this.enableOptionSharing&&fd(r);if(c)return Mb(c,d);const g=this.chart.config,_=g.datasetElementScopeKeys(this._type,e),w=i?[`${e}Hover`,"hover",e,""]:[e,""],T=g.getOptionScopes(this.getDataset(),_),S=Object.keys(kn.elements[e]),R=g.resolveNamedOptions(T,S,()=>this.getContext(r,i,t),w);return R.$shared&&(R.$shared=d,s[o]=Object.freeze(Mb(R,d))),R}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,c=s[o];if(c)return c;let d;if(!1!==i.options.animation){const _=this.chart.config,w=_.datasetAnimationScopeKeys(this._type,t),T=_.getOptionScopes(this.getDataset(),w);d=_.createResolver(T,this.getContext(e,r,t))}const g=new _D(i,d&&d.animations);return d&&d._cacheable&&(s[o]=Object.freeze(g)),g}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||cy(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,i){cy(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!cy(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[c,d,g]of this._syncList)this[c](d,g);this._syncList=[];const i=r.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,o=e+t;let c;const d=g=>{for(g.length+=t,c=g.length-1;c>=o;c--)g[c]=g[c-t]};for(d(s),c=e;c<o;++c)s[c]=new this.dataElementType;this._parsing&&d(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&uy(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ip(n){const e=n.iScale,t=function D1(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=jM(r.sort((i,s)=>i-s))}return n._cache.$bar}(e,n.type);let i,s,o,c,r=e._length;const d=()=>{32767===o||-32768===o||(fd(c)&&(r=Math.min(r,Math.abs(o-c)||r)),c=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),d();for(c=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),d();return r}function xD(n,e,t,r){return On(n)?function Vo(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),c=Math.max(i,s);let d=o,g=c;Math.abs(o)>Math.abs(c)&&(d=c,g=o),e[t.axis]=g,e._custom={barStart:d,barEnd:g,start:i,end:s,min:o,max:c}}(n,e,t,r):e[t.axis]=t.parse(n,r),e}function dy(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),c=i===s,d=[];let g,_,w,T;for(g=t,_=t+r;g<_;++g)T=e[g],w={},w[i.axis]=c||i.parse(o[g],g),d.push(xD(T,w,s,g));return d}function ju(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function A1(n,e,t,r){let i=e.borderSkipped;const s={};if(!i)return void(n.borderSkipped=s);if(!0===i)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:c,reverse:d,top:g,bottom:_}=function x1(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}(n);"middle"===i&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=g:(t._bottom||0)===r?i=_:(s[sp(_,o,c,d)]=!0,i=g)),s[sp(i,o,c,d)]=!0,n.borderSkipped=s}function sp(n,e,t,r){return r?(n=function hy(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=AD(n,t,e)):n=AD(n,e,t),n}function AD(n,e,t){return"start"===n?e:"end"===n?t:n}function M1(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}Ze(io,"defaults",{}),Ze(io,"datasetElementType",null),Ze(io,"dataElementType",null);class op extends io{parsePrimitiveData(e,t,r,i){return dy(e,t,r,i)}parseArrayData(e,t,r,i){return dy(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,g="x"===s.axis?c:d,_="x"===o.axis?c:d,w=[];let T,S,M,R;for(T=r,S=r+i;T<S;++T)R=t[T],M={},M[s.axis]=s.parse(ma(R,g),T),w.push(xD(ma(R,_),M,o,T));return w}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,s=this.getParsed(e),o=s._custom,c=ju(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const s="reset"===i,{index:o,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),g=c.isHorizontal(),_=this._getRuler(),{sharedOptions:w,includeOptions:T}=this._getSharedOptions(t,i);for(let S=t;S<t+r;S++){const M=this.getParsed(S),R=s||dn(M[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(S),N=this._calculateBarIndexPixels(S,_),B=(M._stacks||{})[c.axis],G={horizontal:g,base:R.base,enableBorderRadius:!B||ju(M._custom)||o===B._top||o===B._bottom,x:g?R.head:N.center,y:g?N.center:R.head,height:g?N.size:Math.abs(R.size),width:g?Math.abs(R.size):N.size};T&&(G.options=w||this.resolveDataElementOptions(S,e[S].active?"active":i));const X=G.options||e[S].options;A1(G,X,B,o),M1(G,X,_.ratio),this.updateElement(e[S],S,G,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,o=[],c=d=>{const g=d.controller.getParsed(t),_=g&&g[d.vScale.axis];if(dn(_)||isNaN(_))return!0};for(const d of i)if((void 0===t||!c(d))&&((!1===s||-1===o.indexOf(d.stack)||void 0===s&&void 0===d.stack)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,r){const i=this._getStacks(e,r),s=void 0!==t?i.indexOf(t):-1;return-1===s?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let s,o;for(s=0,o=t.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const c=e.barThickness;return{min:c||ip(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,c=s||0,d=this.getParsed(e),g=d._custom,_=ju(g);let M,R,w=d[t.axis],T=0,S=r?this.applyStack(t,d,r):w;S!==w&&(T=S-w,S=w),_&&(w=g.barStart,S=g.barEnd-g.barStart,0!==w&&No(w)!==No(g.barEnd)&&(T=0),T+=w);const N=dn(s)||_?T:s;let B=t.getPixelForValue(N);if(M=this.chart.getDataVisibility(e)?t.getPixelForValue(T+S):B,R=M-B,Math.abs(R)<o){R=function S1(n,e,t){return 0!==n?No(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(R,t,c)*o,w===c&&(B-=R/2);const G=t.getPixelForDecimal(0),X=t.getPixelForDecimal(1),ee=Math.min(G,X),re=Math.max(G,X);B=Math.max(Math.min(B,re),ee),M=B+R,r&&!_&&(d._stacks[t.axis]._visualValues[i]=t.getValueForPixel(M)-t.getValueForPixel(B))}if(B===t.getPixelForValue(c)){const G=No(R)*t.getLineWidthForValue(c)/2;B+=G,R-=G}return{size:R,base:B,head:M,center:M+R/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,s=i.skipNull,o=jt(i.maxBarThickness,1/0);let c,d;if(t.grouped){const g=s?this._getStackCount(e):t.stackCount,_="flex"===i.barThickness?function kb(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,c=n<i.length-1?i[n+1]:null;const d=t.categoryPercentage;null===o&&(o=s-(null===c?e.end-e.start:c-s)),null===c&&(c=s+s-o);const g=s-(s-Math.min(o,c))/2*d;return{chunk:Math.abs(c-o)/2*d/r,ratio:t.barPercentage,start:g}}(e,t,i,g):function T1(n,e,t,r){const i=t.barThickness;let s,o;return dn(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}(e,t,i,g),w=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);c=_.start+_.chunk*w+_.chunk/2,d=Math.min(o,_.chunk*_.ratio)}else c=r.getPixelForValue(this.getParsed(e)[r.axis],e),d=Math.min(o,t.min*t.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)null!==this.getParsed(s)[t.axis]&&r[s].draw(this._ctx)}}Ze(op,"id","bar"),Ze(op,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ze(op,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ap extends io{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,i){const s=super.parsePrimitiveData(e,t,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,t,r,i){const s=super.parseArrayData(e,t,r,i);for(let o=0;o<s.length;o++)s[o]._custom=jt(t[r+o][2],this.resolveDataElementOptions(o+r).radius);return s}parseObjectData(e,t,r,i){const s=super.parseObjectData(e,t,r,i);for(let o=0;o<s.length;o++){const c=t[r+o];s[o]._custom=jt(c&&c.r&&+c.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),c=i.getLabelForValue(o.x),d=s.getLabelForValue(o.y),g=o._custom;return{label:r[e]||"",value:"("+c+", "+d+(g?", "+g:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:c}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(t,i),_=o.axis,w=c.axis;for(let T=t;T<t+r;T++){const S=e[T],M=!s&&this.getParsed(T),R={},N=R[_]=s?o.getPixelForDecimal(.5):o.getPixelForValue(M[_]),B=R[w]=s?c.getBasePixel():c.getPixelForValue(M[w]);R.skip=isNaN(N)||isNaN(B),g&&(R.options=d||this.resolveDataElementOptions(T,S.active?"active":i),s&&(R.options.radius=0)),this.updateElement(S,T,R,i)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return"active"!==t&&(i.radius=0),i.radius+=jt(r&&r._custom,s),i}}Ze(ap,"id","bubble"),Ze(ap,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ze(ap,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class pl extends io{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=r;else{let o,c,s=d=>+r[d];if(un(r[e])){const{key:d="value"}=this._parsing;s=g=>+ma(r[g],d)}for(o=e,c=e+t;o<c;++o)i._parsed[o]=s(o)}}_getRotation(){return ro(this.options.rotation-90)}_getCircumference(){return ro(this.options.circumference)}_getRotationExtents(){let e=Fn,t=-Fn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-o)/2,0),d=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/e)(this.options.cutout,c),1),g=this._getRingWeight(this.index),{circumference:_,rotation:w}=this._getRotationExtents(),{ratioX:T,ratioY:S,offsetX:M,offsetY:R}=function Rb(n,e,t){let r=1,i=1,s=0,o=0;if(e<Fn){const c=n,d=c+e,g=Math.cos(c),_=Math.sin(c),w=Math.cos(d),T=Math.sin(d),S=(X,ee,re)=>gd(X,c,d,!0)?1:Math.max(ee,ee*t,re,re*t),M=(X,ee,re)=>gd(X,c,d,!0)?-1:Math.min(ee,ee*t,re,re*t),R=S(0,g,w),N=S(pr,_,T),B=M(Nn,g,w),G=M(Nn+pr,_,T);r=(R-B)/2,i=(N-G)/2,s=-(R+B)/2,o=-(N+G)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(w,_,d),G=Math.max(Math.min((r.width-o)/T,(r.height-o)/S)/2,0),X=BC(this.options.radius,G),re=(X-Math.max(X*d,0))/this._getVisibleDatasetWeightTotal();this.offsetX=M*X,this.offsetY=R*X,i.total=this.calculateTotal(),this.outerRadius=X-re*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-re*g,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Fn)}updateElements(e,t,r,i){const s="reset"===i,o=this.chart,c=o.chartArea,_=(c.left+c.right)/2,w=(c.top+c.bottom)/2,T=s&&o.options.animation.animateScale,S=T?0:this.innerRadius,M=T?0:this.outerRadius,{sharedOptions:R,includeOptions:N}=this._getSharedOptions(t,i);let G,B=this._getRotation();for(G=0;G<t;++G)B+=this._circumference(G,s);for(G=t;G<t+r;++G){const X=this._circumference(G,s),ee=e[G],re={x:_+this.offsetX,y:w+this.offsetY,startAngle:B,endAngle:B+X,circumference:X,outerRadius:M,innerRadius:S};N&&(re.options=R||this.resolveDataElementOptions(G,ee.active?"active":i)),B+=X,this.updateElement(ee,G,re,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,r=0;for(i=0;i<t.length;i++){const s=e._parsed[i];null!==s&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Fn*(Math.abs(e)/t):0}getLabelAndValue(e){const r=this.chart,i=r.data.labels||[],s=Xf(this._cachedMeta._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,s,o,c,d;if(!e)for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,c=o.controller;break}if(!e)return 0;for(i=0,s=e.length;i<s;++i)d=c.resolveDataElementOptions(i),"inner"!==d.borderAlign&&(t=Math.max(t,d.borderWidth||0,d.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(jt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ze(pl,"id","doughnut"),Ze(pl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ze(pl,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ze(pl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,o)=>{const d=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class fy extends io{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:c,count:d}=Ou(t,i,o);this._drawStart=c,this._drawCount=d,ZC(t)&&(c=0,d=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const g=this.resolveDatasetElementOptions(e);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:g},e),this.updateElements(i,c,d,e)}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:c,_stacked:d,_dataset:g}=this._cachedMeta,{sharedOptions:_,includeOptions:w}=this._getSharedOptions(t,i),T=o.axis,S=c.axis,{spanGaps:M,segment:R}=this.options,N=pd(M)?M:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||s||"none"===i,G=t+r,X=e.length;let ee=t>0&&this.getParsed(t-1);for(let re=0;re<X;++re){const pe=e[re],Ie=B?pe:{};if(re<t||re>=G){Ie.skip=!0;continue}const Ve=this.getParsed(re),ut=dn(Ve[S]),Ft=Ie[T]=o.getPixelForValue(Ve[T],re),Zt=Ie[S]=s||ut?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,Ve,d):Ve[S],re);Ie.skip=isNaN(Ft)||isNaN(Zt)||ut,Ie.stop=re>0&&Math.abs(Ve[T]-ee[T])>N,R&&(Ie.parsed=Ve,Ie.raw=g.data[re]),w&&(Ie.options=_||this.resolveDataElementOptions(re,pe.active?"active":i)),B||this.updateElement(pe,re,Ie,i),ee=Ve}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ze(fy,"id","line"),Ze(fy,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ze(fy,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class lp extends io{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,i=r.data.labels||[],s=Xf(this._cachedMeta._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,t,r,i){return uD.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(i/2,0),c=(s-Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(e,t,r,i){const s="reset"===i,o=this.chart,d=o.options.animation,g=this._cachedMeta.rScale,_=g.xCenter,w=g.yCenter,T=g.getIndexAngle(0)-.5*Nn;let M,S=T;const R=360/this.countVisibleElements();for(M=0;M<t;++M)S+=this._computeAngle(M,i,R);for(M=t;M<t+r;M++){const N=e[M];let B=S,G=S+this._computeAngle(M,i,R),X=o.getDataVisibility(M)?g.getDistanceFromCenterForValue(this.getParsed(M).r):0;S=G,s&&(d.animateScale&&(X=0),d.animateRotate&&(B=G=T));const ee={x:_,y:w,innerRadius:0,outerRadius:X,startAngle:B,endAngle:G,options:this.resolveDataElementOptions(M,N.active?"active":i)};this.updateElement(N,M,ee,i)}}countVisibleElements(){let t=0;return this._cachedMeta.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?ro(this.resolveDataElementOptions(e,t).angle||r):0}}Ze(lp,"id","polarArea"),Ze(lp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ze(lp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,o)=>{const d=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class MD extends pl{}Ze(MD,"id","pie"),Ze(MD,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Id extends io{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,i){return uD.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta,r=t.dataset,i=t.data||[],s=t.iScale.getLabels();if(r.points=i,"resize"!==e){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:s.length===i.length,options:o},e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,r,i){const s=this._cachedMeta.rScale,o="reset"===i;for(let c=t;c<t+r;c++){const d=e[c],g=this.resolveDataElementOptions(c,d.active?"active":i),_=s.getPointPositionForValue(c,this.getParsed(c).r),w=o?s.xCenter:_.x,T=o?s.yCenter:_.y,S={x:w,y:T,angle:_.angle,skip:isNaN(w)||isNaN(T),options:g};this.updateElement(d,c,S,i)}}}Ze(Id,"id","radar"),Ze(Id,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ze(Id,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Cd extends io{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),c=i.getLabelForValue(o.x),d=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+c+", "+d+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,i=this.chart._animationsDisabled;let{start:s,count:o}=Ou(t,r,i);if(this._drawStart=s,this._drawCount=o,ZC(t)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:c,_dataset:d}=t;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!d._decimated,c.points=r;const g=this.resolveDatasetElementOptions(e);g.segment=this.options.segment,this.updateElement(c,void 0,{animated:!i,options:g},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:c,_stacked:d,_dataset:g}=this._cachedMeta,_=this.resolveDataElementOptions(t,i),w=this.getSharedOptions(_),T=this.includeOptions(i,w),S=o.axis,M=c.axis,{spanGaps:R,segment:N}=this.options,B=pd(R)?R:Number.POSITIVE_INFINITY,G=this.chart._animationsDisabled||s||"none"===i;let X=t>0&&this.getParsed(t-1);for(let ee=t;ee<t+r;++ee){const re=e[ee],pe=this.getParsed(ee),Ie=G?re:{},Ve=dn(pe[M]),ut=Ie[S]=o.getPixelForValue(pe[S],ee),Ft=Ie[M]=s||Ve?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,pe,d):pe[M],ee);Ie.skip=isNaN(ut)||isNaN(Ft)||Ve,Ie.stop=ee>0&&Math.abs(pe[S]-X[S])>B,N&&(Ie.parsed=pe,Ie.raw=g.data[ee]),T&&(Ie.options=w||this.resolveDataElementOptions(ee,re.active?"active":i)),G||this.updateElement(re,ee,Ie,i),X=pe}this.updateSharedOptions(w,i,_)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let c=0;for(let d=t.length-1;d>=0;--d)c=Math.max(c,t[d].size(this.resolveDataElementOptions(d))/2);return c>0&&c}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!t.length)return i;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,s,o)/2}}Ze(Cd,"id","scatter"),Ze(Cd,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ze(Cd,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var kD=Object.freeze({__proto__:null,BarController:op,BubbleController:ap,DoughnutController:pl,LineController:fy,PieController:MD,PolarAreaController:lp,RadarController:Id,ScatterController:Cd});function va(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class up{constructor(e){Ze(this,"options"),this.options=e||{}}static override(e){Object.assign(up.prototype,e)}init(){}formats(){return va()}parse(){return va()}format(){return va()}add(){return va()}diff(){return va()}startOf(){return va()}endOf(){return va()}}var k1__date=up;function R1(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,c=i._cachedMeta.iScale;if(c&&e===c.axis&&"r"!==e&&o&&s.length){const d=c._reversePixels?UM:Di;if(!r)return d(s,e,t);if(i._sharedOptions){const g=s[0],_="function"==typeof g.getRange&&g.getRange(e);if(_){const w=d(s,e,t-_),T=d(s,e,t+_);return{lo:w.lo,hi:T.hi}}}}return{lo:0,hi:s.length-1}}function cp(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let c=0,d=s.length;c<d;++c){const{index:g,data:_}=s[c],{lo:w,hi:T}=R1(s[c],e,o,i);for(let S=w;S<=T;++S){const M=_[S];M.skip||r(M,g,S)}}}function py(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||cp(n,t,e,function(c,d,g){!i&&!_a(c,n.chartArea,0)||c.inRange(e.x,e.y,r)&&s.push({element:c,datasetIndex:d,index:g})},!0),s}function gy(n,e,t,r,i,s){return s||n.isPointInArea(e)?"r"!==t||r?function RD(n,e,t,r,i,s){let o=[];const c=function P1(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(t);let d=Number.POSITIVE_INFINITY;return cp(n,t,e,function g(_,w,T){const S=_.inRange(e.x,e.y,i);if(r&&!S)return;const M=_.getCenterPoint(i);if(!s&&!n.isPointInArea(M)&&!S)return;const N=c(e,M);N<d?(o=[{element:_,datasetIndex:w,index:T}],d=N):N===d&&o.push({element:_,datasetIndex:w,index:T})}),o}(n,e,t,r,i,s):function Pb(n,e,t,r){let i=[];return cp(n,t,e,function s(o,c,d){const{startAngle:g,endAngle:_}=o.getProps(["startAngle","endAngle"],r),{angle:w}=tb(o,{x:e.x,y:e.y});gd(w,g,_)&&i.push({element:o,datasetIndex:c,index:d})}),i}(n,e,t,i):[]}function Ob(n,e,t,r,i){const s=[],o="x"===t?"inXRange":"inYRange";let c=!1;return cp(n,t,e,(d,g,_)=>{d[o](e[t],i)&&(s.push({element:d,datasetIndex:g,index:_}),c=c||d.inRange(e.x,e.y,i))}),r&&!c?[]:s}var PD={evaluateInteractionItems:cp,modes:{index(n,e,t,r){const i=Uu(e,n),s=t.axis||"x",o=t.includeInvisible||!1,c=t.intersect?py(n,i,s,r,o):gy(n,i,s,!1,r,o),d=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(g=>{const _=c[0].index,w=g.data[_];w&&!w.skip&&d.push({element:w,datasetIndex:g.index,index:_})}),d):[]},dataset(n,e,t,r){const i=Uu(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let c=t.intersect?py(n,i,s,r,o):gy(n,i,s,!1,r,o);if(c.length>0){const d=c[0].datasetIndex,g=n.getDatasetMeta(d).data;c=[];for(let _=0;_<g.length;++_)c.push({element:g[_],datasetIndex:d,index:_})}return c},point:(n,e,t,r)=>py(n,Uu(e,n),t.axis||"xy",r,t.includeInvisible||!1),nearest:(n,e,t,r)=>gy(n,Uu(e,n),t.axis||"xy",t.intersect,r,t.includeInvisible||!1),x:(n,e,t,r)=>Ob(n,Uu(e,n),"x",t.intersect,r),y:(n,e,t,r)=>Ob(n,Uu(e,n),"y",t.intersect,r)}};const OD=["left","top","right","bottom"];function Dd(n,e){return n.filter(t=>t.pos===e)}function Nb(n,e){return n.filter(t=>-1===OD.indexOf(t.pos)&&t.box.axis===e)}function dp(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function FD(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function LD(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function k2(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!un(i)){t.size&&(n[i]-=t.size);const w=r[t.stack]||{size:0,count:1};w.size=Math.max(w.size,t.horizontal?s.height:s.width),t.size=w.size/w.count,n[i]+=t.size}s.getPadding&&LD(o,s.getPadding());const c=Math.max(0,e.outerWidth-FD(o,n,"left","right")),d=Math.max(0,e.outerHeight-FD(o,n,"top","bottom")),g=c!==n.w,_=d!==n.h;return n.w=c,n.h=d,t.horizontal?{same:g,other:_}:{same:_,other:g}}function VD(n,e){const t=e.maxPadding;return function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}(n?["left","right"]:["top","bottom"])}function Sd(n,e,t,r){const i=[];let s,o,c,d,g,_;for(s=0,o=n.length,g=0;s<o;++s){c=n[s],d=c.box,d.update(c.width||e.w,c.height||e.h,VD(c.horizontal,e));const{same:w,other:T}=k2(e,t,c,r);g|=w&&i.length,_=_||T,d.fullSize||i.push(c)}return g&&Sd(i,e,t,r)||_}function gl(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function UD(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const c of n){const d=c.box,g=r[c.stack]||{count:1,placed:0,weight:1},_=c.stackWeight/g.weight||1;if(c.horizontal){const w=e.w*_,T=g.size||d.height;fd(g.start)&&(o=g.start),d.fullSize?gl(d,i.left,o,t.outerWidth-i.right-i.left,T):gl(d,e.left+g.placed,o,w,T),g.start=o,g.placed+=w,o=d.bottom}else{const w=e.h*_,T=g.size||d.width;fd(g.start)&&(s=g.start),d.fullSize?gl(d,s,i.top,T,t.outerHeight-i.bottom-i.top):gl(d,s,e.top+g.placed,T,w),g.start=s,g.placed+=w,s=d.right}}e.x=s,e.y=o}var $r={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=di(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),c=function Td(n){const e=function ND(n){const e=[];let t,r,i,s,o,c;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],({position:s,options:{stack:o,stackWeight:c=1}}=i),e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:c});return e}(n),t=dp(e.filter(g=>g.box.fullSize),!0),r=dp(Dd(e,"left"),!0),i=dp(Dd(e,"right")),s=dp(Dd(e,"top"),!0),o=dp(Dd(e,"bottom")),c=Nb(e,"x"),d=Nb(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(d).concat(o).concat(c),chartArea:Dd(e,"chartArea"),vertical:r.concat(i).concat(d),horizontal:s.concat(o).concat(c)}}(n.boxes),d=c.vertical,g=c.horizontal;En(n.boxes,R=>{"function"==typeof R.beforeLayout&&R.beforeLayout()});const _=d.reduce((R,N)=>N.box.options&&!1===N.box.options.display?R:R+1,0)||1,w=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/_,hBoxMaxHeight:o/2}),T=Object.assign({},i);LD(T,di(r));const S=Object.assign({maxPadding:T,w:s,h:o,x:i.left,y:i.top},i),M=function Ti(n,e){const t=function O1(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!OD.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,c;for(s=0,o=n.length;s<o;++s){c=n[s];const{fullSize:d}=c.box,g=t[c.stack],_=g&&c.stackWeight/g.weight;c.horizontal?(c.width=_?_*r:d&&e.availableWidth,c.height=i):(c.width=r,c.height=_?_*i:d&&e.availableHeight)}return t}(d.concat(g),w);Sd(c.fullSize,S,w,M),Sd(d,S,w,M),Sd(g,S,w,M)&&Sd(d,S,w,M),function R2(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(S),UD(c.leftAndTop,S,w,M),S.x+=S.w,S.y+=S.h,UD(c.rightAndBottom,S,w,M),n.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},En(c.chartArea,R=>{const N=R.box;Object.assign(N,n.chartArea),N.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class BD{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class jD extends BD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const my="$chartjs",N1={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},HD=n=>null===n||""===n,Lb=!!fD&&{passive:!0};function yy(n,e,t){n.canvas.removeEventListener(e,t,Lb)}function Ub(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function zD(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const c of s)o=o||Ub(c.addedNodes,r),o=o&&!Ub(c.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function F1(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const c of s)o=o||Ub(c.removedNodes,r),o=o&&!Ub(c.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const xd=new Map;let Hu=0;function GD(){const n=window.devicePixelRatio;n!==Hu&&(Hu=n,xd.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function P2(n,e,t){const r=n.canvas,i=r&&gb(r);if(!i)return;const s=$M((c,d)=>{const g=i.clientWidth;t(c,d),g<i.clientWidth&&t()},window),o=new ResizeObserver(c=>{const d=c[0],g=d.contentRect.width,_=d.contentRect.height;0===g&&0===_||s(g,_)});return o.observe(i),function WD(n,e){xd.size||window.addEventListener("resize",GD),xd.set(n,e)}(n,s),o}function jb(n,e,t){t&&t.disconnect(),"resize"===e&&function Bb(n){xd.delete(n),xd.size||window.removeEventListener("resize",GD)}(n)}function O2(n,e,t){const r=n.canvas,i=$M(s=>{null!==n.ctx&&t(function Vb(n,e){const t=N1[n.type]||n.type,{x:r,y:i}=Uu(n,e);return{type:t,chart:e,native:n,x:void 0!==r?r:null,y:void 0!==i?i:null}}(s,n))},n);return function $D(n,e,t){n.addEventListener(e,t,Lb)}(r,e,i),i}class L1 extends BD{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function Fb(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[my]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",HD(i)){const s=pD(n,"width");void 0!==s&&(n.width=s)}if(HD(r))if(""===n.style.height)n.height=n.width/(e||2);else{const s=pD(n,"height");void 0!==s&&(n.height=s)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[my])return!1;const r=t[my].initial;["height","width"].forEach(s=>{const o=r[s];dn(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[my],!0}addEventListener(e,t,r){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:zD,detach:F1,resize:P2}[t]||O2)(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];i&&(({attach:jb,detach:jb,resize:jb}[t]||yy)(e,t,i),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return function hD(n,e,t,r){const i=sy(n),s=hl(i,"margin"),o=iy(i.maxWidth,n,"clientWidth")||zm,c=iy(i.maxHeight,n,"clientHeight")||zm,d=function vb(n,e,t){let r,i;if(void 0===e||void 0===t){const s=gb(n);if(s){const o=s.getBoundingClientRect(),c=sy(s),d=hl(c,"border","width"),g=hl(c,"padding");e=o.width-g.width-d.width,t=o.height-g.height-d.height,r=iy(c.maxWidth,s,"clientWidth"),i=iy(c.maxHeight,s,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:r||zm,maxHeight:i||zm}}(n,e,t);let{width:g,height:_}=d;if("content-box"===i.boxSizing){const T=hl(i,"border","width"),S=hl(i,"padding");g-=S.width+T.width,_-=S.height+T.height}return g=Math.max(0,g-s.width),_=Math.max(0,r?g/r:_-s.height),g=oy(Math.min(g,o,d.maxWidth)),_=oy(Math.min(_,c,d.maxHeight)),g&&!_&&(_=oy(g/2)),(void 0!==e||void 0!==t)&&r&&d.height&&_>d.height&&(_=d.height,g=oy(Math.floor(_*r))),{width:g,height:_}}(e,t,r,i)}isAttached(e){const t=gb(e);return!(!t||!t.isConnected)}}class so{constructor(){Ze(this,"x"),Ze(this,"y"),Ze(this,"active",!1),Ze(this,"options"),Ze(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return pd(this.x)&&pd(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function _y(n,e,t,r,i){const s=jt(r,0),o=Math.min(jt(i,n.length),n.length);let d,g,_,c=0;for(t=Math.ceil(t),i&&(d=i-r,t=d/Math.floor(d/t)),_=s;_<0;)c++,_=Math.round(s+c*t);for(g=Math.max(s,0);g<o;g++)g===_&&(e.push(n[g]),c++,_=Math.round(s+c*t))}Ze(so,"defaults",{}),Ze(so,"defaultRoutes");const XD=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t,Hb=(n,e)=>Math.min(e||n,n);function $b(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function JD(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,c=1e-6;let g,d=n.getPixelForTick(i);if(!(t&&(g=1===r?Math.max(d-s,o-d):0===e?(n.getPixelForTick(1)-d)/2:(d-n.getPixelForTick(i-1))/2,d+=i<e?g:-g,d<s-c||d>o+c)))return d}function hp(n){return n.drawTicks?n.tickLength:0}function tT(n,e){if(!n.display)return 0;const t=Nr(n.font,e),r=di(n.padding);return(On(n.text)?n.text.length:1)*t.lineHeight+r.height}function F2(n,e,t){let r=rb(n);return(t&&"right"!==e||!t&&"right"===e)&&(r=(n=>"left"===n?"right":"right"===n?"left":n)(r)),r}class Ad extends so{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=us(e,Number.POSITIVE_INFINITY),t=us(t,Number.NEGATIVE_INFINITY),r=us(r,Number.POSITIVE_INFINITY),i=us(i,Number.NEGATIVE_INFINITY),{min:us(e,r),max:us(t,i),minDefined:ir(e),maxDefined:ir(t)}}getMinMax(e){let o,{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:t,max:r};const c=this.getMatchingVisibleMetas();for(let d=0,g=c.length;d<g;++d)o=c[d].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:us(t,us(r,t)),max:us(r,us(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Sn(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function JM(n,e,t){const{min:r,max:i}=n,s=BC(e,(i-r)/2),o=(c,d)=>t&&0===c?0:c+d;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?$b(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function qD(n,e){const t=n.options.ticks,r=function ZD(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?function KD(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}(e):[],o=s.length,c=s[0],d=s[o-1],g=[];if(o>i)return function YD(n,e,t,r){let o,i=0,s=t[0];for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}(e,g,s,o/i),g;const _=function U1(n,e,t){const r=function B1(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}(n),i=e.length/t;if(!r)return Math.max(i,1);const s=function LM(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r==0&&(e.push(r),e.push(n/r));return t===(0|t)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}(r);for(let o=0,c=s.length-1;o<c;o++){const d=s[o];if(d>i)return d}return Math.max(i,1)}(s,e,i);if(o>0){let w,T;const S=o>1?Math.round((d-c)/(o-1)):null;for(_y(e,g,_,dn(S)?0:c-S,c),w=0,T=o-1;w<T;w++)_y(e,g,_,s[w],s[w+1]);return _y(e,g,_,d,dn(S)?e.length:d+S),g}return _y(e,g,_),g}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,r,e=this.options.reverse;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Sn(this.options.afterUpdate,[this])}beforeSetDimensions(){Sn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Sn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Sn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Sn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Sn(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Sn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Sn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=Hb(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let c,d,g,o=i;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal())return void(this.labelRotation=i);const _=this._getLabelSizes(),w=_.widest.width,T=_.highest.height,S=Or(this.chart.width-w,0,this.maxWidth);c=e.offset?this.maxWidth/r:S/(r-1),w+6>c&&(c=S/(r-(e.offset?.5:1)),d=this.maxHeight-hp(e.grid)-t.padding-tT(e.title,this.chart.options.font),g=Math.sqrt(w*w+T*T),o=Gm(Math.min(Math.asin(Or((_.highest.height+6)/c,-1,1)),Math.asin(Or(d/g,-1,1))-Math.asin(Or(T/g,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Sn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Sn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const d=tT(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=hp(s)+d):(e.height=this.maxHeight,e.width=hp(s)+d),r.display&&this.ticks.length){const{first:g,last:_,widest:w,highest:T}=this._getLabelSizes(),S=2*r.padding,M=ro(this.labelRotation),R=Math.cos(M),N=Math.sin(M);c?e.height=Math.min(this.maxHeight,e.height+(r.mirror?0:N*w.width+R*T.height)+S):e.width=Math.min(this.maxWidth,e.width+(r.mirror?0:R*w.width+N*T.height)+S),this._calculatePadding(g,_,N,R)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:c}=this.options,d=0!==this.labelRotation,g="top"!==c&&"x"===this.axis;if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,S=0;d?g?(T=i*e.width,S=r*t.height):(T=r*e.height,S=i*t.width):"start"===s?S=t.width:"end"===s?T=e.width:"inner"!==s&&(T=e.width/2,S=t.width/2),this.paddingLeft=Math.max((T-_+o)*this.width/(this.width-_),0),this.paddingRight=Math.max((S-w+o)*this.width/(this.width-w),0)}else{let _=t.height/2,w=e.height/2;"start"===s?(_=0,w=e.height):"end"===s&&(_=t.height,w=0),this.paddingTop=_+o,this.paddingBottom=w+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Sn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)dn(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=$b(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],c=[],d=Math.floor(t/Hb(t,r));let w,T,S,M,R,N,B,G,X,ee,re,g=0,_=0;for(w=0;w<t;w+=d){if(M=e[w].label,R=this._resolveTickFontOptions(w),i.font=N=R.string,B=s[N]=s[N]||{data:{},gc:[]},G=R.lineHeight,X=ee=0,dn(M)||On(M)){if(On(M))for(T=0,S=M.length;T<S;++T)re=M[T],!dn(re)&&!On(re)&&(X=ey(i,B.data,B.gc,X,re),ee+=G)}else X=ey(i,B.data,B.gc,X,M),ee=G;o.push(X),c.push(ee),g=Math.max(X,g),_=Math.max(ee,_)}!function eT(n,e){En(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}(s,t);const pe=o.indexOf(g),Ie=c.indexOf(_),Ve=ut=>({width:o[ut]||0,height:c[ut]||0});return{first:Ve(0),last:Ve(t-1),widest:Ve(pe),highest:Ve(Ie),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function qC(n){return Or(n,-32768,32767)}(this._alignToPixels?Fu(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function nT(n,e,t){return dl(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=function N2(n,e){return dl(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ro(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,c=s?s.widest.width+o:0,d=s?s.highest.height+o:0;return this.isHorizontal()?d*r>c*i?c/r:d/i:d*i<c*r?d/r:c/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:c}=i,d=s.offset,g=this.isHorizontal(),w=this.ticks.length+(d?1:0),T=hp(s),S=[],M=c.setContext(this.getContext()),R=M.display?M.width:0,N=R/2,B=function($e){return Fu(r,$e,R)};let G,X,ee,re,pe,Ie,Ve,ut,Ft,Zt,sn,Qn;if("top"===o)G=B(this.bottom),Ie=this.bottom-T,ut=G-N,Zt=B(e.top)+N,Qn=e.bottom;else if("bottom"===o)G=B(this.top),Zt=e.top,Qn=B(e.bottom)-N,Ie=G+N,ut=this.top+T;else if("left"===o)G=B(this.right),pe=this.right-T,Ve=G-N,Ft=B(e.left)+N,sn=e.right;else if("right"===o)G=B(this.left),Ft=e.left,sn=B(e.right)-N,pe=G+N,Ve=this.left+T;else if("x"===t){if("center"===o)G=B((e.top+e.bottom)/2+.5);else if(un(o)){const $e=Object.keys(o)[0];G=B(this.chart.scales[$e].getPixelForValue(o[$e]))}Zt=e.top,Qn=e.bottom,Ie=G+N,ut=Ie+T}else if("y"===t){if("center"===o)G=B((e.left+e.right)/2);else if(un(o)){const $e=Object.keys(o)[0];G=B(this.chart.scales[$e].getPixelForValue(o[$e]))}pe=G-N,Ve=pe-T,Ft=e.left,sn=e.right}const Yi=jt(i.ticks.maxTicksLimit,w),In=Math.max(1,Math.ceil(w/Yi));for(X=0;X<w;X+=In){const $e=this.getContext(X),nt=s.setContext($e),vt=c.setContext($e),Ot=nt.lineWidth,Xn=nt.color,Es=vt.dash||[],Gr=vt.dashOffset,Hs=nt.tickWidth,Mn=nt.tickColor,lh=nt.tickBorderDash||[],eg=nt.tickBorderDashOffset;ee=JD(this,X,d),void 0!==ee&&(re=Fu(r,ee,Ot),g?pe=Ve=Ft=sn=re:Ie=ut=Zt=Qn=re,S.push({tx1:pe,ty1:Ie,tx2:Ve,ty2:ut,x1:Ft,y1:Zt,x2:sn,y2:Qn,width:Ot,color:Xn,borderDash:Es,borderDashOffset:Gr,tickWidth:Hs,tickColor:Mn,tickBorderDash:lh,tickBorderDashOffset:eg}))}return this._ticksLength=w,this._borderValue=G,S}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:g,padding:_,mirror:w}=s,T=hp(r.grid),S=T+_,M=w?-_:S,R=-ro(this.labelRotation),N=[];let B,G,X,ee,re,pe,Ie,Ve,ut,Ft,Zt,sn,Qn="middle";if("top"===i)pe=this.bottom-M,Ie=this._getXAxisLabelAlignment();else if("bottom"===i)pe=this.top+M,Ie=this._getXAxisLabelAlignment();else if("left"===i){const In=this._getYAxisLabelAlignment(T);Ie=In.textAlign,re=In.x}else if("right"===i){const In=this._getYAxisLabelAlignment(T);Ie=In.textAlign,re=In.x}else if("x"===t){if("center"===i)pe=(e.top+e.bottom)/2+S;else if(un(i)){const In=Object.keys(i)[0];pe=this.chart.scales[In].getPixelForValue(i[In])+S}Ie=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)re=(e.left+e.right)/2-S;else if(un(i)){const In=Object.keys(i)[0];re=this.chart.scales[In].getPixelForValue(i[In])}Ie=this._getYAxisLabelAlignment(T).textAlign}"y"===t&&("start"===d?Qn="top":"end"===d&&(Qn="bottom"));const Yi=this._getLabelSizes();for(B=0,G=c.length;B<G;++B){X=c[B],ee=X.label;const In=s.setContext(this.getContext(B));Ve=this.getPixelForTick(B)+s.labelOffset,ut=this._resolveTickFontOptions(B),Ft=ut.lineHeight,Zt=On(ee)?ee.length:1;const $e=Zt/2,nt=In.color,vt=In.textStrokeColor,Ot=In.textStrokeWidth;let Es,Xn=Ie;if(o?(re=Ve,"inner"===Ie&&(Xn=B===G-1?this.options.reverse?"left":"right":0===B?this.options.reverse?"right":"left":"center"),sn="top"===i?"near"===g||0!==R?-Zt*Ft+Ft/2:"center"===g?-Yi.highest.height/2-$e*Ft+Ft:Ft/2-Yi.highest.height:"near"===g||0!==R?Ft/2:"center"===g?Yi.highest.height/2-$e*Ft:Yi.highest.height-Zt*Ft,w&&(sn*=-1),0!==R&&!In.showLabelBackdrop&&(re+=Ft/2*Math.sin(R))):(pe=Ve,sn=(1-Zt)*Ft/2),In.showLabelBackdrop){const Gr=di(In.backdropPadding),Hs=Yi.heights[B],Mn=Yi.widths[B];let lh=sn-Gr.top,eg=0-Gr.left;switch(Qn){case"middle":lh-=Hs/2;break;case"bottom":lh-=Hs}switch(Ie){case"center":eg-=Mn/2;break;case"right":eg-=Mn}Es={left:eg,top:lh,width:Mn+Gr.width,height:Hs+Gr.height,color:In.backdropColor}}N.push({label:ee,font:ut,textOffset:sn,options:{rotation:R,color:nt,strokeColor:vt,strokeWidth:Ot,textAlign:Xn,textBaseline:Qn,translation:[re,pe],backdrop:Es}})}return N}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ro(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,c=e+s,d=this._getLabelSizes().widest.width;let g,_;return"left"===t?i?(_=this.right+s,"near"===r?g="left":"center"===r?(g="center",_+=d/2):(g="right",_+=d)):(_=this.right-c,"near"===r?g="right":"center"===r?(g="center",_-=d/2):(g="left",_=this.left)):"right"===t?i?(_=this.left+s,"near"===r?g="right":"center"===r?(g="center",_-=d/2):(g="left",_-=d)):(_=this.left+c,"near"===r?g="left":"center"===r?(g="center",_+=d/2):(g="right",_=this.right)):g="right",{textAlign:g,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const c=(d,g,_)=>{!_.width||!_.color||(r.save(),r.lineWidth=_.width,r.strokeStyle=_.color,r.setLineDash(_.borderDash||[]),r.lineDashOffset=_.borderDashOffset,r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(g.x,g.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const d=i[s];t.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const c=i.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let g,_,w,T;this.isHorizontal()?(g=Fu(e,this.left,o)-o/2,_=Fu(e,this.right,c)+c/2,w=T=d):(w=Fu(e,this.top,o)-o/2,T=Fu(e,this.bottom,c)+c/2,g=_=d),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(g,w),t.lineTo(_,T),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&ep(r,i);const s=this.getLabelItems(e);for(const o of s)ul(r,o.label,0,o.textOffset,o.font,o.options);i&&ny(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=Nr(r.font),o=di(r.padding),c=r.align;let d=s.lineHeight/2;"bottom"===t||"center"===t||un(t)?(d+=o.bottom,On(r.text)&&(d+=s.lineHeight*(r.text.length-1))):d+=o.top;const{titleX:g,titleY:_,maxWidth:w,rotation:T}=function L2(n,e,t,r){const{top:i,left:s,bottom:o,right:c,chart:d}=n,{chartArea:g,scales:_}=d;let T,S,M,w=0;const R=o-i,N=c-s;if(n.isHorizontal()){if(S=ci(r,s,c),un(t)){const B=Object.keys(t)[0];M=_[B].getPixelForValue(t[B])+R-e}else M="center"===t?(g.bottom+g.top)/2+R-e:XD(n,t,e);T=c-s}else{if(un(t)){const B=Object.keys(t)[0];S=_[B].getPixelForValue(t[B])-N+e}else S="center"===t?(g.left+g.right)/2-N+e:XD(n,t,e);M=ci(r,o,i),w="left"===t?-pr:pr}return{titleX:S,titleY:M,maxWidth:T,rotation:w}}(this,d,t,c);ul(e,r.text,0,0,s,{color:r.color,maxWidth:w,rotation:T,textAlign:F2(c,t,i),textBaseline:"middle",translation:[g,_]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=jt(e.grid&&e.grid.z,-1),i=jt(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Ad.prototype.draw?[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const c=t[s];c[r]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){return Nr(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class zb{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function B2(n){return"id"in n&&"defaults"in n})(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,function V2(n,e,t){const r=dd(Object.create(null),[t?kn.get(t):{},kn.get(e),n.defaults]);kn.set(e,r),n.defaultRoutes&&function U2(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),c=o.pop(),d=o.join(".");kn.route(s,i,d,c)})}(e,n.defaultRoutes),n.descriptors&&kn.describe(e,n.descriptors)}(e,o,r),this.override&&kn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in kn[i]&&(delete kn[i][r],this.override&&delete Lo[r])}}class j2{constructor(){this.controllers=new zb(io,"datasets",!0),this.elements=new zb(so,"elements"),this.plugins=new zb(Object,"plugins"),this.scales=new zb(Ad,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):En(i,o=>{const c=r||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,t,r){const i=$m(e);Sn(r["before"+i],[],r),t[e](r),Sn(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var cs=new j2;class H2{constructor(){this._init=[]}notify(e,t,r,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin;if(!1===Sn(o[r],[t,i,s.options],o)&&i.cancelable)return!1}return!0}invalidate(){dn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=jt(r.options&&r.options.plugins,{}),s=function rT(n){const e={},t=[],r=Object.keys(cs.plugins.items);for(let s=0;s<r.length;s++)t.push(cs.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];-1===t.indexOf(o)&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}(r);return!1!==i||t?function iT(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const c of e){const d=c.id,g=vy(r[d],i);null!==g&&s.push({plugin:c,options:sT(n.config,{plugin:c,local:t[d]},g,o)})}return s}(e,s,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(c=>!o.some(d=>c.plugin.id===d.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function vy(n,e){return e||!1!==n?!0===n?{}:n:null}function sT(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function oT(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(kn.datasets[n]||{}).indexAxis||"x"}function lT(n){if("x"===n||"y"===n||"r"===n)return n}function uT(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function cT(n,...e){if(lT(n))return n;for(const t of e){const r=t.axis||uT(t.position)||n.length>1&&lT(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function dT(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function fp(n){const e=n.options||(n.options={});e.plugins=jt(e.plugins,{}),e.scales=function H1(n,e){const t=Lo[n.type]||{scales:{}},r=e.scales||{},i=oT(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const c=r[o];if(!un(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=cT(o,c,function j1(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return dT(n,"x",t[0])||dT(n,"y",t[0])}return{}}(o,n),kn.scales[c.type]),g=function aT(n,e){return n===e?"_index_":"_value_"}(d,i),_=t.scales||{};s[o]=hd(Object.create(null),[{axis:d},c,_[d],_[g]])}),n.data.datasets.forEach(o=>{const c=o.type||n.type,d=o.indexAxis||oT(c,e),_=(Lo[c]||{}).scales||{};Object.keys(_).forEach(w=>{const T=function Gb(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(w,d),S=o[T+"AxisID"]||T;s[S]=s[S]||Object.create(null),hd(s[S],[{axis:T},r[S],_[w]])})}),Object.keys(s).forEach(o=>{const c=s[o];hd(c,[kn.scales[c.type],kn.scale])}),s}(n,e)}function hT(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const $1=new Map,z1=new Set;function by(n,e){let t=$1.get(n);return t||(t=e(),$1.set(n,t),z1.add(t)),t}const pp=(n,e,t)=>{const r=ma(e,t);void 0!==r&&n.add(r)};class G1{constructor(e){this._config=function $2(n){return(n=n||{}).data=hT(n.data),fp(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),fp(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return by(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return by(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return by(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return by(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),c=o.get(t);if(c)return c;const d=new Set;t.forEach(_=>{e&&(d.add(e),_.forEach(w=>pp(d,e,w))),_.forEach(w=>pp(d,i,w)),_.forEach(w=>pp(d,Lo[s]||{},w)),_.forEach(w=>pp(d,kn,w)),_.forEach(w=>pp(d,Xm,w))});const g=Array.from(d);return 0===g.length&&g.push(Object.create(null)),z1.has(t)&&o.set(t,g),g}chartOptionScopes(){const{options:e,type:t}=this;return[e,Lo[t]||{},kn.datasets[t]||{},{type:t},kn,Xm]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:c}=W1(this._resolverCache,e,i);let d=o;(function fT(n,e){const{isScriptable:t,isIndexable:r}=ub(n);for(const i of e){const s=t(i),o=r(i),c=(o||s)&&n[i];if(s&&(ya(c)||q1(c))||o&&On(c))return!0}return!1})(o,t)&&(s.$shared=!1,d=vd(o,r=ya(r)?r():r,this.createResolver(e,r,c)));for(const g of t)s[g]=d[g];return s}createResolver(e,t,r=[""],i){const{resolver:s}=W1(this._resolverCache,e,r);return un(t)?vd(s,t,void 0,i):s}}function W1(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:Vu(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},r.set(i,s)),s}const q1=n=>un(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||ya(n[t]),!1),z2=["top","bottom","left","right","chartArea"];function Ls(n,e){return"top"===n||"bottom"===n||-1===z2.indexOf(n)&&"x"===e}function gT(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function wy(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Sn(t&&t.onComplete,[n],e)}function Z1(n){const e=n.chart,t=e.options.animation;Sn(t&&t.onProgress,[n],e)}function ds(n){return pb()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Ey={},Iy=n=>{const e=ds(n);return Object.values(Ey).filter(t=>t.canvas===e).pop()};function K1(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function Md(n,e,t){return n.options.clip?n[t]:e[t]}class Uo{static register(...e){cs.add(...e),yT()}static unregister(...e){cs.remove(...e),yT()}constructor(e,t){const r=this.config=new G1(t),i=ds(e),s=Iy(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function V1(n){return!pb()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?jD:L1}(i)),this.platform.updateConfig(r);const c=this.platform.acquireContext(i,o.aspectRatio),d=c&&c.canvas,g=d&&d.height,_=d&&d.width;this.id=UC(),this.ctx=c,this.canvas=d,this.width=_,this.height=g,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new H2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function xt(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}(w=>this.update(w),o.resizeDelay||0),this._dataChanges=[],Ey[this.id]=this,c&&d?(fl.listen(this,"complete",wy),fl.listen(this,"progress",Z1),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return dn(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return cs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Bu(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ob(this.canvas,this.ctx),this}stop(){return fl.stop(this),this}resize(e,t){fl.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,o=this.platform.getMaximumSize(this.canvas,e,t,r.maintainAspectRatio&&this.aspectRatio),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Bu(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),Sn(r.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){En(this.options.scales||{},(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,c)=>(o[c]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const c=t[o],d=cT(o,c),g="r"===d,_="x"===d;return{options:c,dposition:g?"chartArea":_?"bottom":"left",dtype:g?"radialLinear":_?"category":"linear"}}))),En(s,o=>{const c=o.options,d=c.id,g=cT(d,c),_=jt(c.type,o.dtype);(void 0===c.position||Ls(c.position,g)!==Ls(o.dposition))&&(c.position=o.dposition),i[d]=!0;let w=null;d in r&&r[d].type===_?w=r[d]:(w=new(cs.getScale(_))({id:d,type:_,ctx:this.ctx,chart:this}),r[w.id]=w),w.init(c,e)}),En(i,(o,c)=>{o||delete r[c]}),En(r,o=>{$r.configure(this,o,o.options),$r.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(gT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{0===t.filter(s=>s===r._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const c=s.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=c,o.indexAxis=s.indexAxis||oT(c,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const d=cs.getController(c),{datasetElementType:g,dataElementType:_}=kn.datasets[c];Object.assign(d,{dataElementType:cs.getElement(_),datasetElementType:g&&cs.getElement(g)}),o.controller=new d(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){En(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let g=0,_=this.data.datasets.length;g<_;g++){const{controller:w}=this.getDatasetMeta(g),T=!i&&-1===s.indexOf(w);w.buildOrUpdateElements(T),o=Math.max(+w.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||En(s,g=>{g.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(gT("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){En(this.scales,e=>{$r.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!J0(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t)K1(e,i,"_removeElements"===r?-s:s)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,c)=>c+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!J0(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;$r.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],En(this.boxes,i=>{r&&"chartArea"===i.position||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,ya(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(fl.has(this)?this.attached&&!fl.running(this)&&fl.start(this):(this.draw(),wy({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,i=!r.disabled,s=function mT(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:Md(t,e,"left"),right:Md(t,e,"right"),top:Md(r,e,"top"),bottom:Md(r,e,"bottom")}:e}(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&ep(t,{left:!1===r.left?0:s.left-r.left,right:!1===r.right?this.width:s.right+r.right,top:!1===r.top?0:s.top-r.top,bottom:!1===r.bottom?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&ny(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return _a(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=PD.modes[t];return"function"==typeof s?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=dl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);fd(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),fl.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ob(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ey[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,c)=>{s.offsetX=o,s.offsetY=c,this._eventHandler(s)};En(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(d,g)=>{t.addEventListener(this,d,g),e[d]=g},i=(d,g)=>{e[d]&&(t.removeEventListener(this,d,g),delete e[d])},s=(d,g)=>{this.canvas&&this.resize(d,g)};let o;const c=()=>{i("attach",c),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",c)},t.isAttached(this.canvas)?c():o()}unbindEvents(){En(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},En(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,c,d;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),c=0,d=e.length;c<d;++c){o=e[c];const g=o&&this.getDatasetMeta(o.datasetIndex).controller;g&&g[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[o],index:o}});!qf(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(d,g)=>d.filter(_=>!g.some(w=>_.datasetIndex===w.datasetIndex&&_.index===w.index)),o=s(t,e),c=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,i))return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,c=this._getActiveElements(e,i,r,t),d=function OM(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),g=function Y1(n,e,t,r){return t&&"mouseout"!==n.type?r?e:n:null}(e,this._lastEvent,r,d);r&&(this._lastEvent=null,Sn(s.onHover,[e,c,this],this),d&&Sn(s.onClick,[e,c,this],this));const _=!qf(c,i);return(_||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=g,_}_getActiveElements(e,t,r,i){if("mouseout"===e.type)return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}function yT(){return En(Uo.instances,n=>n._plugins.invalidate())}function $u(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function Cy(n,e,t,r,i,s){const{x:o,y:c,startAngle:d,pixelMargin:g,innerRadius:_}=e,w=Math.max(e.outerRadius+r+t-g,0),T=_>0?_+r+t+g:0;let S=0;const M=i-d;if(r){const nt=((_>0?_-r:0)+(w>0?w-r:0))/2;S=(M-(0!==nt?M*nt/(nt+r):M))/2}const N=(M-Math.max(.001,M*w-t/Nn)/w)/2,B=d+N+S,G=i-N-S,{outerStart:X,outerEnd:ee,innerStart:re,innerEnd:pe}=function Q1(n,e,t,r){const i=function vT(n){return lb(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),c=d=>{const g=(t-Math.min(s,d))*r/2;return Or(d,0,Math.min(s,g))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:Or(i.innerStart,0,o),innerEnd:Or(i.innerEnd,0,o)}}(e,T,w,G-B),Ie=w-X,Ve=w-ee,ut=B+X/Ie,Ft=G-ee/Ve,Zt=T+re,sn=T+pe,Qn=B+re/Zt,Yi=G-pe/sn;if(n.beginPath(),s){const In=(ut+Ft)/2;if(n.arc(o,c,w,ut,In),n.arc(o,c,w,In,Ft),ee>0){const Ot=$u(Ve,Ft,o,c);n.arc(Ot.x,Ot.y,ee,Ft,G+pr)}const $e=$u(sn,G,o,c);if(n.lineTo($e.x,$e.y),pe>0){const Ot=$u(sn,Yi,o,c);n.arc(Ot.x,Ot.y,pe,G+pr,Yi+Math.PI)}const nt=(G-pe/T+(B+re/T))/2;if(n.arc(o,c,T,G-pe/T,nt,!0),n.arc(o,c,T,nt,B+re/T,!0),re>0){const Ot=$u(Zt,Qn,o,c);n.arc(Ot.x,Ot.y,re,Qn+Math.PI,B-pr)}const vt=$u(Ie,B,o,c);if(n.lineTo(vt.x,vt.y),X>0){const Ot=$u(Ie,ut,o,c);n.arc(Ot.x,Ot.y,X,B-pr,ut)}}else{n.moveTo(o,c);const In=Math.cos(ut)*w+o,$e=Math.sin(ut)*w+c;n.lineTo(In,$e);const nt=Math.cos(Ft)*w+o,vt=Math.sin(Ft)*w+c;n.lineTo(nt,vt)}n.closePath()}Ze(Uo,"defaults",kn),Ze(Uo,"instances",Ey),Ze(Uo,"overrides",Lo),Ze(Uo,"registry",cs),Ze(Uo,"version","4.4.0"),Ze(Uo,"getChart",Iy);class kd extends so{constructor(t){super(),Ze(this,"circumference"),Ze(this,"endAngle"),Ze(this,"fullCircles"),Ze(this,"innerRadius"),Ze(this,"outerRadius"),Ze(this,"pixelMargin"),Ze(this,"startAngle"),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:c}=tb(s,{x:t,y:r}),{startAngle:d,endAngle:g,innerRadius:_,outerRadius:w,circumference:T}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),S=(this.options.spacing+this.options.borderWidth)/2,R=jt(T,g-d)>=Fn||gd(o,d,g),N=Fo(c,_+S,w+S);return R&&N}getCenterPoint(t){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:c,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:g,spacing:_}=this.options,w=(s+o)/2,T=(c+d+_+g)/2;return{x:r+Math.cos(w)*T,y:i+Math.sin(w)*T}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,c=r.circular;if(this.pixelMargin="inner"===r.borderAlign?.33:0,this.fullCircles=i>Fn?Math.floor(i/Fn):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const d=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(d)*s,Math.sin(d)*s);const _=s*(1-Math.sin(Math.min(Nn,i||0)));t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,function Wb(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:c}=e;let d=e.endAngle;if(s){Cy(n,e,t,r,d,i);for(let g=0;g<s;++g)n.fill();isNaN(c)||(d=o+(c%Fn||Fn))}Cy(n,e,t,r,d,i),n.fill()}(t,this,_,o,c),function ml(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:c,options:d}=e,{borderWidth:g,borderJoinStyle:_,borderDash:w,borderDashOffset:T}=d,S="inner"===d.borderAlign;if(!g)return;n.setLineDash(w||[]),n.lineDashOffset=T,S?(n.lineWidth=2*g,n.lineJoin=_||"round"):(n.lineWidth=g,n.lineJoin=_||"bevel");let M=e.endAngle;if(s){Cy(n,e,t,r,M,i);for(let R=0;R<s;++R)n.stroke();isNaN(c)||(M=o+(c%Fn||Fn))}S&&function _T(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:c,innerRadius:d}=e;let g=i/c;n.beginPath(),n.arc(s,o,c,r-g,t+g),d>i?(g=i/d,n.arc(s,o,d,t+g,r-g,!0)):n.arc(s,o,i,t+pr,r-pr),n.closePath(),n.clip()}(n,e,M),s||(Cy(n,e,t,r,M,i),n.stroke())}(t,this,_,o,c),t.restore()}}function Dy(n,e,t=e){n.lineCap=jt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(jt(t.borderDash,e.borderDash)),n.lineDashOffset=jt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=jt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=jt(t.borderWidth,e.borderWidth),n.strokeStyle=jt(t.borderColor,e.borderColor)}function ba(n,e,t){n.lineTo(t.x,t.y)}function J1(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:c}=e,d=Math.max(i,o),g=Math.min(s,c);return{count:r,start:d,loop:e.loop,ilen:g<d&&!(i<o&&s<o||i>c&&s>c)?r+g-d:g-d}}function ek(n,e,t,r){const{points:i,options:s}=e,{count:o,start:c,loop:d,ilen:g}=J1(i,t,r),_=function X1(n){return n.stepped?YM:n.tension||"monotone"===n.cubicInterpolationMode?T2:ba}(s);let S,M,R,{move:w=!0,reverse:T}=r||{};for(S=0;S<=g;++S)M=i[(c+(T?g-S:S))%o],!M.skip&&(w?(n.moveTo(M.x,M.y),w=!1):_(n,R,M,T,s.stepped),R=M);return d&&(M=i[(c+(T?g:0))%o],_(n,R,M,T,s.stepped)),!!d}function tk(n,e,t,r){const i=e.points,{count:s,start:o,ilen:c}=J1(i,t,r),{move:d=!0,reverse:g}=r||{};let T,S,M,R,N,B,_=0,w=0;const G=ee=>(o+(g?c-ee:ee))%s,X=()=>{R!==N&&(n.lineTo(_,N),n.lineTo(_,R),n.lineTo(_,B))};for(d&&(S=i[G(0)],n.moveTo(S.x,S.y)),T=0;T<=c;++T){if(S=i[G(T)],S.skip)continue;const ee=S.x,re=S.y,pe=0|ee;pe===M?(re<R?R=re:re>N&&(N=re),_=(w*_+ee)/++w):(X(),n.lineTo(ee,re),M=pe,w=0,R=N=re),B=re}X()}function qb(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?ek:tk}Ze(kd,"id","arc"),Ze(kd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ze(kd,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ze(kd,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const wT="function"==typeof Path2D;class wa extends so{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(u1(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,t),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function p1(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:c}=function h1(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}(t,i,s,r);return function Tb(n,e,t,r){return r&&r.setContext&&t?function M2(n,e,t,r){const i=n._chart.getContext(),s=Sb(n.options),{_datasetIndex:o,options:{spanGaps:c}}=n,d=t.length,g=[];let _=s,w=e[0].start,T=w;function S(M,R,N,B){const G=c?-1:1;if(M!==R){for(M+=d;t[M%d].skip;)M-=G;for(;t[R%d].skip;)R+=G;M%d!=R%d&&(g.push({start:M%d,end:R%d,loop:N,style:B}),_=B,w=R%d)}}for(const M of e){w=c?w:M.start;let N,R=t[w%d];for(T=w+1;T<=M.end;T++){const B=t[T%d];N=Sb(r.setContext(dl(i,{type:"segment",p0:R,p1:B,p0DataIndex:(T-1)%d,p1DataIndex:T%d,datasetIndex:o}))),g1(N,_)&&S(w,T-1,M.loop,_),R=B,_=N}w<T-1&&S(w,T-1,M.loop,_)}return g}(n,e,t,r):e}(n,!0===r?[{start:o,end:c,loop:s}]:function f1(n,e,t,r){const i=n.length,s=[];let d,o=e,c=n[e];for(d=e+1;d<=t;++d){const g=n[d%i];g.skip||g.stop?c.skip||(s.push({start:e%i,end:(d-1)%i,loop:r=!1}),e=o=g.stop?d:null):(o=d,c.skip&&(e=d)),c=g}return null!==o&&s.push({start:e%i,end:o%i,loop:r}),s}(t,o,c<o?c+i:c,!!n._fullLoop&&0===o&&c===i-1),t,e)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,o=yD(this,{property:t,start:i,end:i});if(!o.length)return;const c=[],d=function nk(n){return n.stepped?gD:n.tension||"monotone"===n.cubicInterpolationMode?bb:wd}(r);let g,_;for(g=0,_=o.length;g<_;++g){const{start:w,end:T}=o[g],S=s[w],M=s[T];if(S===M){c.push(S);continue}const N=d(S,M,Math.abs((i-S[t])/(M[t]-S[t])),r.stepped);N[t]=e[t],c.push(N)}return 1===c.length?c[0]:c}pathSegment(e,t,r){return qb(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=qb(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const c of i)o&=s(e,this,c,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function rk(n,e,t,r){wT&&!e.options.segment?function bT(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),Dy(n,e.options),n.stroke(i)}(n,e,t,r):function G2(n,e,t,r){const{segments:i,options:s}=e,o=qb(e);for(const c of i)Dy(n,s,c.style),n.beginPath(),o(n,e,c,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}(n,e,t,r)}(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ik(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}Ze(wa,"id","line"),Ze(wa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ze(wa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ze(wa,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Rd extends so{constructor(t){super(),Ze(this,"parsed"),Ze(this,"skip"),Ze(this,"stop"),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-c,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return ik(this,t,"x",r)}inYRange(t,r){return ik(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){let r=(t=t||this.options||{}).radius||0;return r=Math.max(r,r&&t.hoverRadius||0),2*(r+(r&&t.borderWidth||0))}draw(t,r){const i=this.options;this.skip||i.radius<.1||!_a(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,ty(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Zb(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let c,d,g,_,w;return n.horizontal?(w=o/2,c=Math.min(t,i),d=Math.max(t,i),g=r-w,_=r+w):(w=s/2,c=t-w,d=t+w,g=Math.min(r,i),_=Math.max(r,i)),{left:c,top:g,right:d,bottom:_}}function Ea(n,e,t,r){return n?0:Or(e,t,r)}function Pd(n,e,t,r){const i=null===e,s=null===t,c=n&&!(i&&s)&&Zb(n,r);return c&&(i||Fo(e,c.left,c.right))&&(s||Fo(t,c.top,c.bottom))}function DT(n,e){n.rect(e.x,e.y,e.w,e.h)}function Kb(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0;return{x:n.x+r,y:n.y+i,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-r),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-i),radius:n.radius}}Ze(Rd,"id","point"),Ze(Rd,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ze(Rd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class gp extends so{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=function CT(n){const e=Zb(n),t=e.right-e.left,r=e.bottom-e.top,i=function ET(n,e,t){const i=n.borderSkipped,s=tD(n.options.borderWidth);return{t:Ea(i.top,s.top,0,t),r:Ea(i.right,s.right,0,e),b:Ea(i.bottom,s.bottom,0,t),l:Ea(i.left,s.left,0,e)}}(n,t/2,r/2),s=function IT(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Lu(i),o=Math.min(e,t),c=n.borderSkipped,d=r||un(i);return{topLeft:Ea(!d||c.top||c.left,s.topLeft,0,o),topRight:Ea(!d||c.top||c.right,s.topRight,0,o),bottomLeft:Ea(!d||c.bottom||c.left,s.bottomLeft,0,o),bottomRight:Ea(!d||c.bottom||c.right,s.bottomRight,0,o)}}(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}(this),c=function Ty(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?cl:DT;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),c(e,Kb(o,t,s)),e.clip(),c(e,Kb(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),c(e,Kb(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return Pd(this,e,t,r)}inXRange(e,t){return Pd(this,e,null,t)}inYRange(e,t){return Pd(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Ze(gp,"id","bar"),Ze(gp,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ze(gp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var TT=Object.freeze({__proto__:null,ArcElement:kd,BarElement:gp,LineElement:wa,PointElement:Rd});const Yb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ST=Yb.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function sk(n){return Yb[n%Yb.length]}function ok(n){return ST[n%ST.length]}function ck(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}var q2={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=n.config,{elements:s}=i;if(!t.forceOverride&&(ck(r)||function W2(n){return n&&(n.borderColor||n.backgroundColor)}(i)||s&&ck(s)))return;const o=function uk(n){let e=0;return(t,r)=>{const i=n.getDatasetMeta(r).controller;i instanceof pl?e=function ak(n,e){return n.backgroundColor=n.data.map(()=>sk(e++)),e}(t,e):i instanceof lp?e=function lk(n,e){return n.backgroundColor=n.data.map(()=>ok(e++)),e}(t,e):i&&(e=function xT(n,e){return n.borderColor=sk(e),n.backgroundColor=ok(e),++e}(t,e))}}(n);r.forEach(o)}};function AT(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function mp(n){n.data.datasets.forEach(e=>{AT(e)})}var hk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void mp(n);const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:c}=i,d=n.getDatasetMeta(s),g=o||i.data;if("y"===_d([c,n.options.indexAxis])||!d.controller.supportsDecimation)return;const _=n.scales[d.xAxisID];if("linear"!==_.type&&"time"!==_.type||n.options.parsing)return;let M,{start:w,count:T}=function dk(n,e){const t=e.length;let i,r=0;const{iScale:s}=n,{min:o,max:c,minDefined:d,maxDefined:g}=s.getUserBounds();return d&&(r=Or(Di(e,s.axis,o).lo,0,t-1)),i=g?Or(Di(e,s.axis,c).hi+1,r,t)-r:t-r,{start:r,count:i}}(d,g);if(T<=(t.threshold||4*r))AT(i);else{switch(dn(o)&&(i._data=g,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(R){this._data=R}})),t.algorithm){case"lttb":M=function Z2(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const o=[],c=(t-2)/(s-2);let d=0;const g=e+t-1;let w,T,S,M,R,_=e;for(o[d++]=n[_],w=0;w<s-2;w++){let G,N=0,B=0;const X=Math.floor((w+1)*c)+1+e,ee=Math.min(Math.floor((w+2)*c)+1,t)+e,re=ee-X;for(G=X;G<ee;G++)N+=n[G].x,B+=n[G].y;N/=re,B/=re;const pe=Math.floor(w*c)+1+e,Ie=Math.min(Math.floor((w+1)*c)+1,t)+e,{x:Ve,y:ut}=n[_];for(S=M=-1,G=pe;G<Ie;G++)M=.5*Math.abs((Ve-N)*(n[G].y-ut)-(Ve-n[G].x)*(B-ut)),M>S&&(S=M,T=n[G],R=G);o[d++]=T,_=R}return o[d++]=n[g],o}(g,w,T,r,t);break;case"min-max":M=function K2(n,e,t,r){let o,c,d,g,_,w,T,S,M,R,i=0,s=0;const N=[],G=n[e].x,ee=n[e+t-1].x-G;for(o=e;o<e+t;++o){c=n[o],d=(c.x-G)/ee*r,g=c.y;const re=0|d;if(re===_)g<M?(M=g,w=o):g>R&&(R=g,T=o),i=(s*i+c.x)/++s;else{const pe=o-1;if(!dn(w)&&!dn(T)){const Ie=Math.min(w,T),Ve=Math.max(w,T);Ie!==S&&Ie!==pe&&N.push({...n[Ie],x:i}),Ve!==S&&Ve!==pe&&N.push({...n[Ve],x:i})}o>0&&pe!==S&&N.push(n[pe]),N.push(c),_=re,s=0,M=R=g,w=T=S=o}}return N}(g,w,T,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=M}})},destroy(n){mp(n)}};function Ia(n,e,t,r){if(r)return;let i=e[n],s=t[n];return"angle"===n&&(i=Hi(i),s=Hi(s)),{property:n,start:i,end:s}}function yp(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Sy(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function RT(n,e){let t=[],r=!1;return On(n)?(r=!0,t=n):t=function kT(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:c})=>{c=yp(o,c,i);const d=i[o],g=i[c];null!==r?(s.push({x:d.x,y:r}),s.push({x:g.x,y:r})):null!==t&&(s.push({x:t,y:d.y}),s.push({x:t,y:g.y}))}),s}(n,e),t.length?new wa({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function xy(n){return n&&!1!==n.fill}function Qb(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!ir(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Ay(n,e,t){const r=function J2(n){const e=n.options,t=e.fill;let r=jt(t&&t.target,t);return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(n);if(un(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return ir(i)&&Math.floor(i)===i?function Y2(n,e,t,r){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=r)&&t}(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function pk(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:c,point:d}=gk(s,e,"x");if(!(!d||o&&c))if(o)r.unshift(d);else if(n.push(d),!c)break}n.push(...r)}function gk(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let c=!1,d=!1;for(let g=0;g<s.length;g++){const _=s[g],w=o[_.start][t],T=o[_.end][t];if(Fo(i,w,T)){c=i===w,d=i===T;break}}return{first:c,last:d,point:r}}class OT{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return e.arc(i,s,o,(t=t||{start:0,end:Fn}).end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function My(n,e,t){const r=function NT(n){const{chart:e,fill:t,line:r}=n;if(ir(t))return function FT(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function PT(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,c=function fk(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}(e,t);c.push(RT({x:null,y:e.bottom},r));for(let d=0;d<s.length;d++){const g=s[d];for(let _=g.start;_<=g.end;_++)pk(i,o[_],c)}return new wa({points:i,options:{}})}(n);if("shape"===t)return!0;const i=function LT(n){return(n.scale||{}).getPointPositionForValue?function yk(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=function X2(n,e,t){let r;return r="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:un(n)?n.value:e.getBaseValue(),r}(t,e,s),c=[];if(r.grid.circular){const d=e.getPointPositionForValue(0,s);return new OT({x:d.x,y:d.y,radius:e.getDistanceFromCenterForValue(o)})}for(let d=0;d<i;++d)c.push(e.getPointPositionForValue(d,o));return c}(n):function mk(n){const{scale:e={},fill:t}=n,r=function Q2(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:un(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(ir(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}(n)}(n);return i instanceof OT?i:RT(i,r)}(e),{line:i,scale:s,axis:o}=e,c=i.options,d=c.fill,g=c.backgroundColor,{above:_=g,below:w=g}=d||{};r&&i.points.length&&(ep(n,t),function Xb(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:c}=e,d=t._loop?"angle":e.axis;n.save(),"x"===d&&s!==i&&(_k(n,r,o.top),Jb(n,{line:t,target:r,color:i,scale:c,property:d}),n.restore(),n.save(),_k(n,r,o.bottom)),Jb(n,{line:t,target:r,color:s,scale:c,property:d}),n.restore()}(n,{line:i,target:r,above:_,below:w,area:t,scale:s,axis:o}),ny(n))}function _k(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const c of r){const{start:d,end:g}=c,_=i[d],w=i[yp(d,g,i)];s?(n.moveTo(_.x,_.y),s=!1):(n.lineTo(_.x,t),n.lineTo(_.x,_.y)),o=!!e.pathSegment(n,c,{move:o}),o?n.closePath():n.lineTo(w.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function Jb(n,e){const{line:t,target:r,property:i,color:s,scale:o}=e,c=function MT(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const c of r){let{start:d,end:g}=c;g=yp(d,g,i);const _=Ia(t,i[d],i[g],c.loop);if(!e.segments){o.push({source:c,target:_,start:i[d],end:i[g]});continue}const w=yD(e,_);for(const T of w){const S=Ia(t,s[T.start],s[T.end],T.loop),M=Db(c,i,S);for(const R of M)o.push({source:R,target:T,start:{[t]:Sy(_,S,"start",Math.max)},end:{[t]:Sy(_,S,"end",Math.min)}})}}return o}(t,r,i);for(const{source:d,target:g,start:_,end:w}of c){const{style:{backgroundColor:T=s}={}}=d,S=!0!==r;n.save(),n.fillStyle=T,ew(n,o,S&&Ia(i,_,w)),n.beginPath();const M=!!t.pathSegment(n,d);let R;if(S){M?n.closePath():VT(n,r,w,i);const N=!!r.pathSegment(n,g,{move:M,reverse:!0});R=M&&N,R||VT(n,r,_,i)}n.closePath(),n.fill(R?"evenodd":"nonzero"),n.restore()}}function ew(n,e,t){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:c}=t||{};"x"===s&&(n.beginPath(),n.rect(o,r,c-o,i-r),n.clip())}function VT(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var vk={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,c,d;for(o=0;o<r;++o)s=n.getDatasetMeta(o),c=s.dataset,d=null,c&&c.options&&c instanceof wa&&(d={visible:n.isDatasetVisible(o),index:o,fill:Ay(c,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:c}),s.$filler=d,i.push(d);for(o=0;o<r;++o)d=i[o],d&&!1!==d.fill&&(d.fill=Qb(i,o,t.propagate))},beforeDraw(n,e,t){const r="beforeDraw"===t.drawTime,i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const c=i[o].$filler;!c||(c.line.updateControlPoints(s,c.axis),r&&c.fill&&My(n.ctx,c,s))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;xy(s)&&My(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!xy(r)||"beforeDatasetDraw"!==t.drawTime||My(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const bk=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}};class UT extends so{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Sn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,i=Nr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=bk(r,s);let g,_;t.font=i.string,this.isHorizontal()?(g=this.maxWidth,_=this._fitRows(o,s,c,d)+10):(_=this.maxHeight,g=this._fitCols(o,i,c,d)+10),this.width=Math.min(g,e.maxWidth||this.maxWidth),this.height=Math.min(_,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],g=this.lineWidths=[0],_=i+c;let w=e;s.textAlign="left",s.textBaseline="middle";let T=-1,S=-_;return this.legendItems.forEach((M,R)=>{const N=r+t/2+s.measureText(M.text).width;(0===R||g[g.length-1]+N+2*c>o)&&(w+=_,g[g.length-(R>0?0:1)]=0,S+=_,T++),d[R]={left:0,top:S,row:T,width:N,height:i},g[g.length-1]+=N+c}),w}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],g=this.columnSizes=[],_=o-e;let w=c,T=0,S=0,M=0,R=0;return this.legendItems.forEach((N,B)=>{const{itemWidth:G,itemHeight:X}=function wk(n,e,t,r,i){const s=function Ek(n,e,t,r){let i=n.text;return i&&"string"!=typeof i&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}(r,n,e,t),o=function tV(n,e,t){let r=n;return"string"!=typeof e.text&&(r=Ik(e,t)),r}(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}(r,t,s,N,i);B>0&&S+X+2*c>_&&(w+=T+c,g.push({width:T,height:S}),M+=T+c,R++,T=S=0),d[B]={left:M,top:S,col:R,width:G,height:X},T=Math.max(T,G),S+=X+c}),w+=T,g.push({width:T,height:S}),w}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Ed(s,this.left,this.width);if(this.isHorizontal()){let c=0,d=ci(r,this.left+i,this.right-this.lineWidths[c]);for(const g of t)c!==g.row&&(c=g.row,d=ci(r,this.left+i,this.right-this.lineWidths[c])),g.top+=this.top+e+i,g.left=o.leftForLtr(o.x(d),g.width),d+=g.width+i}else{let c=0,d=ci(r,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const g of t)g.col!==c&&(c=g.col,d=ci(r,this.top+e+i,this.bottom-this.columnSizes[c].height)),g.top=d,g.left+=this.left+i,g.left=o.leftForLtr(o.x(g.left),g.width),d+=g.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;ep(e,this),this._draw(),ny(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,c=kn.color,d=Ed(e.rtl,this.left,this.width),g=Nr(o.font),{padding:_}=o,w=g.size,T=w/2;let S;this.drawTitle(),i.textAlign=d.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=g.string;const{boxWidth:M,boxHeight:R,itemHeight:N}=bk(o,w),X=this.isHorizontal(),ee=this._computeTitleHeight();S=X?{x:ci(s,this.left+_,this.right-r[0]),y:this.top+_+ee,line:0}:{x:this.left+_,y:ci(s,this.top+ee+_,this.bottom-t[0].height),line:0},Eb(this.ctx,e.textDirection);const re=N+_;this.legendItems.forEach((pe,Ie)=>{i.strokeStyle=pe.fontColor,i.fillStyle=pe.fontColor;const Ve=i.measureText(pe.text).width,ut=d.textAlign(pe.textAlign||(pe.textAlign=o.textAlign)),Ft=M+T+Ve;let Zt=S.x,sn=S.y;d.setWidth(this.width),X?Ie>0&&Zt+Ft+_>this.right&&(sn=S.y+=re,S.line++,Zt=S.x=ci(s,this.left+_,this.right-r[S.line])):Ie>0&&sn+re>this.bottom&&(Zt=S.x=Zt+t[S.line].width+_,S.line++,sn=S.y=ci(s,this.top+ee+_,this.bottom-t[S.line].height)),function(pe,Ie,Ve){if(isNaN(M)||M<=0||isNaN(R)||R<0)return;i.save();const ut=jt(Ve.lineWidth,1);if(i.fillStyle=jt(Ve.fillStyle,c),i.lineCap=jt(Ve.lineCap,"butt"),i.lineDashOffset=jt(Ve.lineDashOffset,0),i.lineJoin=jt(Ve.lineJoin,"miter"),i.lineWidth=ut,i.strokeStyle=jt(Ve.strokeStyle,c),i.setLineDash(jt(Ve.lineDash,[])),o.usePointStyle){const Ft={radius:R*Math.SQRT2/2,pointStyle:Ve.pointStyle,rotation:Ve.rotation,borderWidth:ut},Zt=d.xPlus(pe,M/2);ab(i,Ft,Zt,Ie+T,o.pointStyleWidth&&M)}else{const Ft=Ie+Math.max((w-R)/2,0),Zt=d.leftForLtr(pe,M),sn=Lu(Ve.borderRadius);i.beginPath(),Object.values(sn).some(Qn=>0!==Qn)?cl(i,{x:Zt,y:Ft,w:M,h:R,radius:sn}):i.rect(Zt,Ft,M,R),i.fill(),0!==ut&&i.stroke()}i.restore()}(d.x(Zt),sn,pe),Zt=((n,e,t,r)=>n===(r?"left":"right")?t:"center"===n?(e+t)/2:e)(ut,Zt+M+T,X?Zt+Ft:this.right,e.rtl),function(pe,Ie,Ve){ul(i,Ve.text,pe,Ie+N/2,g,{strikethrough:Ve.hidden,textAlign:d.textAlign(Ve.textAlign)})}(d.x(Zt),sn,pe),X?S.x+=Ft+_:S.y+="string"!=typeof pe.text?Ik(pe,g.lineHeight)+_:re}),ay(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Nr(t.font),i=di(t.padding);if(!t.display)return;const s=Ed(e.rtl,this.left,this.width),o=this.ctx,c=t.position,g=i.top+r.size/2;let _,w=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),_=this.top+g,w=ci(e.align,w,this.right-T);else{const M=this.columnSizes.reduce((R,N)=>Math.max(R,N.height),0);_=g+ci(e.align,this.top,this.bottom-M-e.labels.padding-this._computeTitleHeight())}const S=ci(c,w,w+T);o.textAlign=s.textAlign(rb(c)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,ul(o,t.text,S,_,r)}_computeTitleHeight(){const e=this.options.title,t=Nr(e.font),r=di(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Fo(e,this.left,this.right)&&Fo(t,this.top,this.bottom))for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Fo(e,i.left,i.left+i.width)&&Fo(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function nV(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,s=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(i,r);i&&!s&&Sn(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Sn(t.onHover,[e,r,this],this)}else r&&Sn(t.onClick,[e,r,this],this)}}function Ik(n,e){return e*(n.text?n.text.length:0)}var rV={id:"legend",_element:UT,start(n,e,t){const r=n.legend=new UT({ctx:n.ctx,options:t,chart:n});$r.configure(n,r,t),$r.addBox(n,r)},stop(n){$r.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;$r.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const g=d.controller.getStyle(t?0:void 0),_=di(g.borderWidth);return{text:e[d.index].label,fillStyle:g.backgroundColor,fontColor:s,hidden:!d.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:g.borderColor,pointStyle:r||g.pointStyle,rotation:g.rotation,textAlign:i||g.textAlign,borderRadius:o&&(c||g.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class BT extends so{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=On(r.text)?r.text.length:1;this._padding=di(r.padding);const s=i*Nr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,c=o.align;let g,_,w,d=0;return this.isHorizontal()?(_=ci(c,r,s),w=t+e,g=s-r):("left"===o.position?(_=r+e,w=ci(c,i,t),d=-.5*Nn):(_=s-e,w=ci(c,t,i),d=.5*Nn),g=i-t),{titleX:_,titleY:w,maxWidth:g,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Nr(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:d,rotation:g}=this._drawArgs(s);ul(e,t.text,0,0,r,{color:t.color,maxWidth:d,rotation:g,textAlign:rb(t.align),textBaseline:"middle",translation:[o,c]})}}var iV={id:"title",_element:BT,start(n,e,t){!function Ck(n,e){const t=new BT({ctx:n.ctx,options:e,chart:n});$r.configure(n,t,e),$r.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){$r.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;$r.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const tw=new WeakMap;var sV={id:"subtitle",start(n,e,t){const r=new BT({ctx:n.ctx,options:t,chart:n});$r.configure(n,r,t),$r.addBox(n,r),tw.set(n,r)},stop(n){$r.removeBox(n,tw.get(n)),tw.delete(n)},beforeUpdate(n,e,t){const r=tw.get(n);$r.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ky={average(n){if(!n.length)return!1;let e,t,r=0,i=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();r+=c.x,i+=c.y,++s}}return{x:r/s,y:i/s}},nearest(n,e){if(!n.length)return!1;let s,o,c,t=e.x,r=e.y,i=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const d=n[s].element;if(d&&d.hasValue()){const _=Wm(e,d.getCenterPoint());_<i&&(i=_,c=d)}}if(c){const d=c.tooltipPosition();t=d.x,r=d.y}return{x:t,y:r}}};function Ca(n,e){return e&&(On(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function yl(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function a(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:c}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:c,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function l(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:c}=e,d=Nr(e.bodyFont),g=Nr(e.titleFont),_=Nr(e.footerFont),w=s.length,T=i.length,S=r.length,M=di(e.padding);let R=M.height,N=0,B=r.reduce((ee,re)=>ee+re.before.length+re.lines.length+re.after.length,0);B+=n.beforeBody.length+n.afterBody.length,w&&(R+=w*g.lineHeight+(w-1)*e.titleSpacing+e.titleMarginBottom),B&&(R+=S*(e.displayColors?Math.max(c,d.lineHeight):d.lineHeight)+(B-S)*d.lineHeight+(B-1)*e.bodySpacing),T&&(R+=e.footerMarginTop+T*_.lineHeight+(T-1)*e.footerSpacing);let G=0;const X=function(ee){N=Math.max(N,t.measureText(ee).width+G)};return t.save(),t.font=g.string,En(n.title,X),t.font=d.string,En(n.beforeBody.concat(n.afterBody),X),G=e.displayColors?o+2+e.boxPadding:0,En(r,ee=>{En(ee.before,X),En(ee.lines,X),En(ee.after,X)}),G=0,t.font=_.string,En(n.footer,X),t.restore(),N+=M.width,{width:N,height:R}}function p(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:c,right:d}}=n;let g="center";return"center"===r?g=i<=(c+d)/2?"left":"right":i<=s/2?g="left":i>=o-s/2&&(g="right"),function h(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if("left"===n&&i+s+o>e.width||"right"===n&&i-s-o<0)return!0}(g,n,e,t)&&(g="center"),g}function y(n,e,t){const r=t.yAlign||e.yAlign||function u(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||p(n,e,t,r),yAlign:r}}function D(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:c,yAlign:d}=t,g=i+s,{topLeft:_,topRight:w,bottomLeft:T,bottomRight:S}=Lu(o);let M=function b(n,e){let{x:t,width:r}=n;return"right"===e?t-=r:"center"===e&&(t-=r/2),t}(e,c);const R=function C(n,e,t){let{y:r,height:i}=n;return"top"===e?r+=t:r-="bottom"===e?i+t:i/2,r}(e,d,g);return"center"===d?"left"===c?M+=g:"right"===c&&(M-=g):"left"===c?M-=Math.max(_,T)+i:"right"===c&&(M+=Math.max(w,S)+i),{x:Or(M,0,r.width-e.width),y:Or(R,0,r.height-e.height)}}function x(n,e,t){const r=di(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-r.right:n.x+r.left}function k(n){return Ca([],yl(n))}function W(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const te={beforeTitle:Pr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Pr,beforeBody:Pr,beforeLabel:Pr,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return dn(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Pr,afterBody:Pr,beforeFooter:Pr,footer:Pr,afterFooter:Pr};function de(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?te[e].call(t,r):i}class Ue extends so{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new _D(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=function V(n,e,t){return dl(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=de(r,"beforeTitle",this,e),s=de(r,"title",this,e),o=de(r,"afterTitle",this,e);let c=[];return c=Ca(c,yl(i)),c=Ca(c,yl(s)),c=Ca(c,yl(o)),c}getBeforeBody(e,t){return k(de(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return En(e,s=>{const o={before:[],lines:[],after:[]},c=W(r,s);Ca(o.before,yl(de(c,"beforeLabel",this,s))),Ca(o.lines,de(c,"label",this,s)),Ca(o.after,yl(de(c,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,t){return k(de(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=de(r,"beforeFooter",this,e),s=de(r,"footer",this,e),o=de(r,"afterFooter",this,e);let c=[];return c=Ca(c,yl(i)),c=Ca(c,yl(s)),c=Ca(c,yl(o)),c}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],o=[];let d,g,c=[];for(d=0,g=t.length;d<g;++d)c.push(a(this.chart,t[d]));return e.filter&&(c=c.filter((_,w,T)=>e.filter(_,w,T,r))),e.itemSort&&(c=c.sort((_,w)=>e.itemSort(_,w,r))),En(c,_=>{const w=W(e.callbacks,_);i.push(de(w,"labelColor",this,_)),s.push(de(w,"labelPointStyle",this,_)),o.push(de(w,"labelTextColor",this,_))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=c,c}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(i.length){const c=ky[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const d=this._size=l(this,r),g=Object.assign({},c,d),_=y(this.chart,r,g),w=D(r,g,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,s={opacity:1,x:w.x,y:w.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:c}=r,{topLeft:d,topRight:g,bottomLeft:_,bottomRight:w}=Lu(c),{x:T,y:S}=e,{width:M,height:R}=t;let N,B,G,X,ee,re;return"center"===s?(ee=S+R/2,"left"===i?(N=T,B=N-o,X=ee+o,re=ee-o):(N=T+M,B=N+o,X=ee-o,re=ee+o),G=N):(B="left"===i?T+Math.max(d,_)+o:"right"===i?T+M-Math.max(g,w)-o:this.caretX,"top"===s?(X=S,ee=X-o,N=B-o,G=B+o):(X=S+R,ee=X+o,N=B+o,G=B-o),re=X),{x1:N,x2:B,x3:G,y1:X,y2:ee,y3:re}}drawTitle(e,t,r){const i=this.title,s=i.length;let o,c,d;if(s){const g=Ed(r.rtl,this.x,this.width);for(e.x=x(this,r.titleAlign,r),t.textAlign=g.textAlign(r.titleAlign),t.textBaseline="middle",o=Nr(r.titleFont),c=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,d=0;d<s;++d)t.fillText(i[d],g.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,d+1===s&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,t,r,i,s){const o=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:d,boxWidth:g}=s,_=Nr(s.bodyFont),w=x(this,"left",s),T=i.x(w),M=t.y+(d<_.lineHeight?(_.lineHeight-d)/2:0);if(s.usePointStyle){const R={radius:Math.min(g,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},N=i.leftForLtr(T,g)+g/2,B=M+d/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,ty(e,R,N,B),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ty(e,R,N,B)}else{e.lineWidth=un(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const R=i.leftForLtr(T,g),N=i.leftForLtr(i.xPlus(T,1),g-2),B=Lu(o.borderRadius);Object.values(B).some(G=>0!==G)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,cl(e,{x:R,y:M,w:g,h:d,radius:B}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),cl(e,{x:N,y:M+1,w:g-2,h:d-2,radius:B}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(R,M,g,d),e.strokeRect(R,M,g,d),e.fillStyle=o.backgroundColor,e.fillRect(N,M+1,g-2,d-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:c,boxHeight:d,boxWidth:g,boxPadding:_}=r,w=Nr(r.bodyFont);let T=w.lineHeight,S=0;const M=Ed(r.rtl,this.x,this.width),R=function(Ve){t.fillText(Ve,M.x(e.x+S),e.y+T/2),e.y+=T+s},N=M.textAlign(o);let B,G,X,ee,re,pe,Ie;for(t.textAlign=o,t.textBaseline="middle",t.font=w.string,e.x=x(this,N,r),t.fillStyle=r.bodyColor,En(this.beforeBody,R),S=c&&"right"!==N?"center"===o?g/2+_:g+2+_:0,ee=0,pe=i.length;ee<pe;++ee){for(B=i[ee],G=this.labelTextColors[ee],t.fillStyle=G,En(B.before,R),X=B.lines,c&&X.length&&(this._drawColorBox(t,e,ee,M,r),T=Math.max(w.lineHeight,d)),re=0,Ie=X.length;re<Ie;++re)R(X[re]),T=w.lineHeight;En(B.after,R)}S=0,T=w.lineHeight,En(this.afterBody,R),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let o,c;if(s){const d=Ed(r.rtl,this.x,this.width);for(e.x=x(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=d.textAlign(r.footerAlign),t.textBaseline="middle",o=Nr(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,c=0;c<s;++c)t.fillText(i[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:o}=this,{x:c,y:d}=e,{width:g,height:_}=r,{topLeft:w,topRight:T,bottomLeft:S,bottomRight:M}=Lu(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+w,d),"top"===o&&this.drawCaret(e,t,r,i),t.lineTo(c+g-T,d),t.quadraticCurveTo(c+g,d,c+g,d+T),"center"===o&&"right"===s&&this.drawCaret(e,t,r,i),t.lineTo(c+g,d+_-M),t.quadraticCurveTo(c+g,d+_,c+g-M,d+_),"bottom"===o&&this.drawCaret(e,t,r,i),t.lineTo(c+S,d+_),t.quadraticCurveTo(c,d+_,c,d+_-S),"center"===o&&"left"===s&&this.drawCaret(e,t,r,i),t.lineTo(c,d+w),t.quadraticCurveTo(c,d,c+w,d),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=ky[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=l(this,e),d=Object.assign({},o,this._size),g=y(t,e,d),_=D(e,d,g,t);(i._to!==_.x||s._to!==_.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=di(t.padding);t.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),Eb(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),ay(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:c,index:d})=>{const g=this.chart.getDatasetMeta(c);if(!g)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:g.data[d],index:d}}),s=!qf(r,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),c=this._positionChanged(o,e),d=t||!qf(o,s)||c;return d&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),d}_getActiveElements(e,t,r,i){const s=this.options;if("mouseout"===e.type)return[];if(!i)return t;const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,o=ky[s.position].call(this,e,t);return!1!==o&&(r!==o.x||i!==o.y)}}Ze(Ue,"positioners",ky);var qe={id:"tooltip",_element:Ue,positioners:ky,afterInit(n,e,t){t&&(n.tooltip=new Ue({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:te},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ct=Object.freeze({__proto__:null,Colors:q2,Decimation:hk,Filler:vk,Legend:rV,SubTitle:sV,Title:iV,Tooltip:qe});function gn(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class Rn extends Ad{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(dn(e))return null;const r=this.getLabels();return((n,e)=>null===n?null:Or(Math.round(n),0,e))(t=isFinite(t)&&r[t]===e?t:function Te(n,e,t,r){const i=n.indexOf(e);return-1===i?((n,e,t,r)=>("string"==typeof e?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,r):i!==n.lastIndexOf(e)?t:i}(r,e,jt(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return gn.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Ry(n,e,{horizontal:t,minRotation:r}){const i=ro(r),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.min(e/s,.75*e*(""+n).length)}Ze(Rn,"id","category"),Ze(Rn,"defaults",{ticks:{callback:gn}});class Od extends Ad{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return dn(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=d=>i=t?i:d,c=d=>s=r?s:d;if(e){const d=No(i),g=No(s);d<0&&g<0?c(0):d>0&&g>0&&o(0)}if(i===s){let d=0===s?1:Math.abs(.05*s);c(s+d),e||o(i-d)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let i,{maxTicksLimit:t,stepSize:r}=e;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const o=function zu(n,e){const t=[],{bounds:i,step:s,min:o,max:c,precision:d,count:g,maxTicks:_,maxDigits:w,includeBounds:T}=n,S=s||1,M=_-1,{min:R,max:N}=e,B=!dn(o),G=!dn(c),X=!dn(g),ee=(N-R)/(w+1);let pe,Ie,Ve,ut,re=zC((N-R)/M/S)*S;if(re<1e-14&&!B&&!G)return[{value:R},{value:N}];ut=Math.ceil(N/re)-Math.floor(R/re),ut>M&&(re=zC(ut*re/M/S)*S),dn(d)||(pe=Math.pow(10,d),re=Math.ceil(re*pe)/pe),"ticks"===i?(Ie=Math.floor(R/re)*re,Ve=Math.ceil(N/re)*re):(Ie=R,Ve=N),B&&G&&s&&function VM(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((c-o)/s,re/1e3)?(ut=Math.round(Math.min((c-o)/re,_)),re=(c-o)/ut,Ie=o,Ve=c):X?(Ie=B?o:Ie,Ve=G?c:Ve,ut=g-1,re=(Ve-Ie)/ut):(ut=(Ve-Ie)/re,ut=Yf(ut,Math.round(ut),re/1e3)?Math.round(ut):Math.ceil(ut));const Ft=Math.max(eb(re),eb(Ie));pe=Math.pow(10,dn(d)?Ft:d),Ie=Math.round(Ie*pe)/pe,Ve=Math.round(Ve*pe)/pe;let Zt=0;for(B&&(T&&Ie!==o?(t.push({value:o}),Ie<o&&Zt++,Yf(Math.round((Ie+Zt*re)*pe)/pe,o,Ry(o,ee,n))&&Zt++):Ie<o&&Zt++);Zt<ut;++Zt){const sn=Math.round((Ie+Zt*re)*pe)/pe;if(G&&sn>c)break;t.push({value:sn})}return G&&T&&Ve!==c?t.length&&Yf(t[t.length-1].value,c,Ry(c,ee,n))?t[t.length-1].value=c:t.push({value:c}):(!G||Ve===c)&&t.push({value:Ve}),t}({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&GC(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Xf(e,this.chart.options.locale,this.options.ticks.format)}}class _p extends Od{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ir(e)?e:0,this.max=ir(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=ro(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ze(_p,"id","linear"),Ze(_p,"defaults",{ticks:{callback:Qm.formatters.numeric}});const Gu=n=>Math.floor(ll(n)),Da=(n,e)=>Math.pow(10,Gu(n)+e);function Py(n){return n/Math.pow(10,Gu(n))==1}function Oy(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}class Dk extends Ad{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=Od.prototype.parse.apply(this,[e,t]);if(0!==r)return ir(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ir(e)?Math.max(0,e):null,this.max=ir(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ir(this._userMin)&&(this.min=e===Da(this.min,0)?Da(this.min,-1):Da(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=c=>r=e?r:c,o=c=>i=t?i:c;r===i&&(r<=0?(s(1),o(10)):(s(Da(r,-1)),o(Da(i,1)))),r<=0&&s(Da(i,-1)),i<=0&&o(Da(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,r=function rw(n,{min:e,max:t}){e=us(n.min,e);const r=[],i=Gu(e);let s=function nw(n,e){let r=Gu(e-n);for(;Oy(n,e,r)>10;)r++;for(;Oy(n,e,r)<10;)r--;return Math.min(r,Gu(n))}(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const c=Math.pow(10,s),d=i>s?Math.pow(10,i):0,g=Math.round((e-d)*o)/o,_=Math.floor((e-d)/c/10)*c*10;let w=Math.floor((g-_)/Math.pow(10,s)),T=us(n.min,Math.round((d+_+w*Math.pow(10,s))*o)/o);for(;T<t;)r.push({value:T,major:Py(T),significand:w}),w>=10?w=w<15?15:20:w++,w>=20&&(s++,w=2,o=s>=0?1:o),T=Math.round((d+_+w*Math.pow(10,s))*o)/o;const S=us(n.max,T);return r.push({value:S,major:Py(S),significand:w}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&GC(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return void 0===e?"0":Xf(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ll(e),this._valueRange=ll(this.max)-ll(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ll(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Tk(n){const e=n.ticks;if(e.display&&n.display){const t=di(e.backdropPadding);return jt(e.font&&e.font.size,kn.font.size)+t.height}return 0}function t3(n,e,t){return t=On(t)?t:[t],{w:KM(n,e.string,t),h:t.length*e.lineHeight}}function oV(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function r3(n,e,t,r,i){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let c=0,d=0;r.start<e.l?(c=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-c)):r.end>e.r&&(c=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+c)),i.start<e.t?(d=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-d)):i.end>e.b&&(d=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+d))}function i3(n,e,t){const r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:c}=t,d=n.getPointPosition(e,r+i+o,s),g=Math.round(Gm(Hi(d.angle+pr))),_=function u3(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}(d.y,c.h,g),w=function a3(n){return 0===n||180===n?"center":n<180?"left":"right"}(g),T=function l3(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}(d.x,c.w,w);return{visible:!0,x:d.x,y:_,textAlign:w,left:T,top:_,right:T+c.w,bottom:_+c.h}}function s3(n,e){if(!e)return!0;const{left:t,top:r,right:i,bottom:s}=n;return!(_a({x:t,y:r},e)||_a({x:t,y:s},e)||_a({x:i,y:r},e)||_a({x:i,y:s},e))}function c3(n,e,t){const{left:r,top:i,right:s,bottom:o}=t,{backdropColor:c}=e;if(!dn(c)){const d=Lu(e.borderRadius),g=di(e.backdropPadding);n.fillStyle=c;const _=r-g.left,w=i-g.top,T=s-r+g.width,S=o-i+g.height;Object.values(d).some(M=>0!==M)?(n.beginPath(),cl(n,{x:_,y:w,w:T,h:S,radius:d}),n.fill()):n.fillRect(_,w,T,S)}}function aV(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Fn);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}Ze(Dk,"id","logarithmic"),Ze(Dk,"defaults",{ticks:{callback:Qm.formatters.logarithmic,major:{enabled:!0}}});class iw extends Od{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=di(Tk(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ir(e)&&!isNaN(e)?e:0,this.max=ir(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Tk(this.options))}generateTickLabels(e){Od.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=Sn(this.options.pointLabels.callback,[t,r],this);return i||0===i?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?function n3(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,c=o.centerPointLabels?Nn/s:0;for(let d=0;d<s;d++){const g=o.setContext(n.getPointLabelContext(d));i[d]=g.padding;const _=n.getPointPosition(d,n.drawingArea+i[d],c),w=Nr(g.font),T=t3(n.ctx,w,n._pointLabels[d]);r[d]=T;const S=Hi(n.getIndexAngle(d)+c),M=Math.round(Gm(S));r3(t,e,S,oV(M,_.x,T.w,0,180),oV(M,_.y,T.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function o3(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:c}=s.pointLabels,d={extra:Tk(s)/2,additionalAngle:o?Nn/i:0};let g;for(let _=0;_<i;_++){d.padding=t[_],d.size=e[_];const w=i3(n,_,d);r.push(w),"auto"===c&&(w.visible=s3(w,g),w.visible&&(g=w))}return r}(n,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){return Hi(e*(Fn/(this._pointLabels.length||1))+ro(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(dn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(dn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function f3(n,e,t){return dl(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-pr+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),aV(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length;let c,d,g;if(t.pointLabels.display&&function d3(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=n._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(n.getPointLabelContext(i));c3(t,o,s);const c=Nr(o.font),{x:d,y:g,textAlign:_}=s;ul(t,n._pointLabels[i],d,g+c.lineHeight/2,c,{color:o.color,textAlign:_,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach((_,w)=>{if(0!==w){d=this.getDistanceFromCenterForValue(_.value);const T=this.getContext(w),S=i.setContext(T),M=s.setContext(T);!function h3(n,e,t,r,i){const s=n.ctx,o=e.circular,{color:c,lineWidth:d}=e;!o&&!r||!c||!d||t<0||(s.save(),s.strokeStyle=c,s.lineWidth=d,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),aV(n,t,o,r),s.closePath(),s.stroke(),s.restore())}(this,S,d,o,M)}}),r.display){for(e.save(),c=o-1;c>=0;c--){const _=r.setContext(this.getPointLabelContext(c)),{color:w,lineWidth:T}=_;!T||!w||(e.lineWidth=T,e.strokeStyle=w,e.setLineDash(_.borderDash),e.lineDashOffset=_.borderDashOffset,d=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),g=this.getPointPosition(c,d),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(g.x,g.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((c,d)=>{if(0===d&&!t.reverse)return;const g=r.setContext(this.getContext(d)),_=Nr(g.font);if(s=this.getDistanceFromCenterForValue(this.ticks[d].value),g.showLabelBackdrop){e.font=_.string,o=e.measureText(c.label).width,e.fillStyle=g.backdropColor;const w=di(g.backdropPadding);e.fillRect(-o/2-w.left,-s-_.size/2-w.top,o+w.width,_.size+w.height)}ul(e,c.label,0,-s,_,{color:g.color,strokeColor:g.textStrokeColor,strokeWidth:g.textStrokeWidth})}),e.restore()}drawTitle(){}}Ze(iw,"id","radialLinear"),Ze(iw,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Qm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Ze(iw,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ze(iw,"descriptors",{angleLines:{_fallback:"grid"}});const jT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vs=Object.keys(jT);function lV(n,e){return n-e}function uV(n,e){if(dn(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return"function"==typeof r&&(o=r(o)),ir(o)||(o="string"==typeof r?t.parse(o,r):t.parse(o)),null===o?null:(i&&(o="week"!==i||!pd(s)&&!0!==s?t.startOf(o,i):t.startOf(o,"isoWeek",s)),+o)}function cV(n,e,t,r){const i=Vs.length;for(let s=Vs.indexOf(n);s<i-1;++s){const o=jT[Vs[s]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(c*o.size))<=r)return Vs[s]}return Vs[i-1]}function dV(n,e,t){if(t){if(t.length){const{lo:r,hi:i}=qm(t,e);n[t[r]>=e?t[r]:t[i]]=!0}}else n[e]=!0}function hV(n,e,t){const r=[],i={},s=e.length;let o,c;for(o=0;o<s;++o)c=e[o],i[c]=o,r.push({value:c,major:!1});return 0!==s&&t?function m3(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let c,d;for(c=s;c<=o;c=+i.add(c,1,r))d=t[c],d>=0&&(e[d].major=!0);return e}(n,r,i,t):r}class sw extends Ad{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new k1__date(e.adapters.date);i.init(t),hd(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:uV(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:c}=this.getUserBounds();function d(g){!o&&!isNaN(g.min)&&(i=Math.min(i,g.min)),!c&&!isNaN(g.max)&&(s=Math.max(s,g.max))}(!o||!c)&&(d(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&d(this.getMinMax(!1))),i=ir(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=ir(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,c=function BM(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}(i,s,this.max);return this._unit=t.unit||(r.autoSkip?cV(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function p3(n,e,t,r,i){for(let s=Vs.length-1;s>=Vs.indexOf(t);s--){const o=Vs[s];if(jT[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return Vs[t?Vs.indexOf(t):0]}(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function g3(n){for(let e=Vs.indexOf(n)+1,t=Vs.length;e<t;++e)if(jT[Vs[e]].common)return Vs[e]}(this._unit):void 0,this.initOffsets(i),e.reverse&&c.reverse(),hV(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i,s,t=0,r=0;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),t=1===e.length?1-i:(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),r=1===e.length?s:(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Or(t,0,o),r=Or(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||cV(s.minUnit,t,r,this._getLabelCapacity(t)),c=jt(i.ticks.stepSize,1),d="week"===o&&s.isoWeekday,g=pd(d)||!0===d,_={};let T,S,w=t;if(g&&(w=+e.startOf(w,"isoWeek",d)),w=+e.startOf(w,g?"day":o),e.diff(r,t,o)>1e5*c)throw new Error(t+" and "+r+" are too far apart with stepSize of "+c+" "+o);const M="data"===i.ticks.source&&this.getDataTimestamps();for(T=w,S=0;T<r;T=+e.add(T,c,o),S++)dV(_,T,M);return(T===r||"ticks"===i.bounds||1===S)&&dV(_,T,M),Object.keys(_).sort(lV).map(R=>+R)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}format(e,t){return this._adapter.format(e,t||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,t,r,i){const s=this.options,o=s.ticks.callback;if(o)return Sn(o,[e,t,r],this);const c=s.time.displayFormats,d=this._unit,g=this._majorUnit,w=g&&c[g],T=r[t];return this._adapter.format(e,i||(g&&w&&T&&T.major?w:d&&c[d]))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=ro(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:r*s+c*o,h:r*o+c*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,hV(this,[e],this._majorUnit),i),o=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let t,r,e=this._cache.data||[];if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(uV(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jM(e.sort(lV))}}function HT(n,e,t){let s,o,c,d,r=0,i=n.length-1;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Di(n,"pos",e)),({pos:s,time:c}=n[r]),({pos:o,time:d}=n[i])):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Di(n,"time",e)),({time:s,pos:c}=n[r]),({time:o,pos:d}=n[i]));const g=o-s;return g?c+(d-c)*(e-s)/g:c}Ze(sw,"id","time"),Ze(sw,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Sk extends sw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=HT(t,this.min),this._tableRange=HT(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,c,d,g,_;for(o=0,c=e.length;o<c;++o)g=e[o],g>=t&&g<=r&&i.push(g);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,c=i.length;o<c;++o)_=i[o+1],d=i[o-1],g=i[o],Math.round((_+d)/2)!==g&&s.push({time:g,pos:o/(c-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||1===r.length)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(HT(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return HT(this._table,r*this._tableRange+this._minPos,!0)}}Ze(Sk,"id","timeseries"),Ze(Sk,"defaults",sw.defaults);const _3=[kD,TT,ct,Object.freeze({__proto__:null,CategoryScale:Rn,LinearScale:_p,LogarithmicScale:Dk,RadialLinearScale:iw,TimeScale:sw,TimeSeriesScale:Sk})];let xk=(()=>{class n{constructor(){this.isMenuOpenHeader=new Ii(!1),this.isMenuOpenHeader$=this.isMenuOpenHeader.asObservable(),this.isMenuOpenFooter=new Ii(!1),this.isMenuOpenFooter$=this.isMenuOpenFooter.asObservable(),this.isHeaderBorder=new Ii(!1),this.isHeaderBorder$=this.isHeaderBorder.asObservable(),this.isSM=new Ii(!1),this.isSM$=this.isSM.asObservable()}setIsMenuOpenHeader(t){this.isMenuOpenHeader.next(t)}setIsMenuOpenFooter(t){this.isMenuOpenFooter.next(t)}setIsHeaderBorder(t){this.isHeaderBorder.next(t)}setIsSM(t){this.isSM.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class v3 extends Gv.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const $T={setInterval(n,e,...t){const{delegate:r}=$T;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=$T;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var b3=j(8737);class fV extends v3{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return $T.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&$T.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,b3.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Ak={now:()=>(Ak.delegate||Date).now(),delegate:void 0};class ow{constructor(e,t=ow.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}ow.now=Ak.now;class pV extends ow{constructor(e,t=ow.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Mk=new pV(fV);var rn=j(6881);(0,rn.registerVersion)("firebase","9.22.0","app");var Q=j(5861),at=j(2090),oo=j(4859),Ta=j(1877);let gV,mV;const yV=new WeakMap,kk=new WeakMap,_V=new WeakMap,Rk=new WeakMap,Pk=new WeakMap;let Ok={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return kk.get(n);if("objectStoreNames"===e)return n.objectStoreNames||_V.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nd(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function k3(n){return"function"==typeof n?function M3(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function T3(){return mV||(mV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Nk(this),e),Nd(yV.get(this))}:function(...e){return Nd(n.apply(Nk(this),e))}:function(e,...t){const r=n.call(Nk(this),e,...t);return _V.set(r,e.sort?e.sort():[e]),Nd(r)}}(n):(n instanceof IDBTransaction&&function x3(n){if(kk.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});kk.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function D3(){return gV||(gV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Ok):n)}function Nd(n){if(n instanceof IDBRequest)return function S3(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Nd(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&yV.set(t,n)}).catch(()=>{}),Pk.set(e,n),e}(n);if(Rk.has(n))return Rk.get(n);const e=k3(n);return e!==n&&(Rk.set(n,e),Pk.set(e,n)),e}const Nk=n=>Pk.get(n),P3=["get","getKey","getAll","getAllKeys","count"],O3=["put","add","delete","clear"],Fk=new Map;function vV(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Fk.get(e))return Fk.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=O3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!P3.includes(t))return;const s=function(){var o=(0,Q.Z)(function*(c,...d){const g=this.transaction(c,i?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(d.shift())),(yield Promise.all([_[t](...d),i&&g.done]))[0]});return function(d){return o.apply(this,arguments)}}();return Fk.set(e,s),s}!function A3(n){Ok=n(Ok)}(n=>({...n,get:(e,t,r)=>vV(e,t)||n.get(e,t,r),has:(e,t)=>!!vV(e,t)||n.has(e,t)}));const bV="@firebase/installations",EV="w:0.6.4",IV="FIS_v2",Wu=new at.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function CV(n){return n instanceof at.ZR&&n.code.includes("request-failed")}function Vk({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function DV(n){return{token:n.token,requestStatus:2,expiresIn:B3(n.expiresIn),creationTime:Date.now()}}function Uk(n,e){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,Q.Z)(function*(n,e){const r=(yield e.json()).error;return Wu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function TV({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function SV(n,{refreshToken:e}){const t=TV(n);return t.append("Authorization",function j3(n){return`${IV} ${n}`}(e)),t}function jk(n){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,Q.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function B3(n){return Number(n.replace("s","000"))}function H3(n,e){return $k.apply(this,arguments)}function $k(){return($k=(0,Q.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Vk(n),i=TV(n),s=e.getImmediate({optional:!0});if(s){const g=yield s.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:IV,appId:n.appId,sdkVersion:EV})},d=yield jk(()=>fetch(r,c));if(d.ok){const g=yield d.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:DV(g.authToken)}}throw yield Uk("Create Installation",d)})).apply(this,arguments)}function xV(n){return new Promise(e=>{setTimeout(e,n)})}const z3=/^[cdef][\w-]{21}$/;function G3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function W3(n){return function $3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return z3.test(t)?t:""}catch{return""}}function Ny(n){return`${n.appName}!${n.appId}`}const Fy=new Map;function AV(n,e){const t=Ny(n);MV(t,e),function K3(n,e){const t=function kV(){return!vp&&"BroadcastChannel"in self&&(vp=new BroadcastChannel("[Firebase] FID Change"),vp.onmessage=n=>{MV(n.data.key,n.data.fid)}),vp}();t&&t.postMessage({key:n,fid:e}),function RV(){0===Fy.size&&vp&&(vp.close(),vp=null)}()}(t,e)}function MV(n,e){const t=Fy.get(n);if(t)for(const r of t)r(e)}let vp=null;const bp="firebase-installations-store";let Gk=null;function Wk(){return Gk||(Gk=function R3(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),c=Nd(o);return r&&o.addEventListener("upgradeneeded",d=>{r(Nd(o.result),d.oldVersion,d.newVersion,Nd(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",()=>i())}).catch(()=>{}),c}("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(bp)}})),Gk}function zT(n,e){return qk.apply(this,arguments)}function qk(){return(qk=(0,Q.Z)(function*(n,e){const t=Ny(n),i=(yield Wk()).transaction(bp,"readwrite"),s=i.objectStore(bp),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&AV(n,e.fid),e})).apply(this,arguments)}function Zk(n){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,Q.Z)(function*(n){const e=Ny(n),r=(yield Wk()).transaction(bp,"readwrite");yield r.objectStore(bp).delete(e),yield r.done})).apply(this,arguments)}function aw(n,e){return Yk.apply(this,arguments)}function Yk(){return(Yk=(0,Q.Z)(function*(n,e){const t=Ny(n),i=(yield Wk()).transaction(bp,"readwrite"),s=i.objectStore(bp),o=yield s.get(t),c=e(o);return void 0===c?yield s.delete(t):yield s.put(c,t),yield i.done,c&&(!o||o.fid!==c.fid)&&AV(n,c.fid),c})).apply(this,arguments)}function Qk(n){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,Q.Z)(function*(n){let e;const t=yield aw(n.appConfig,r=>{const i=X3(r),s=J3(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function X3(n){return OV(n||{fid:G3(),registrationStatus:0})}function J3(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Wu.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function e5(n,e){return Jk.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:t5(n)}:{installationEntry:e}}function Jk(){return(Jk=(0,Q.Z)(function*(n,e){try{const t=yield H3(n,e);return zT(n.appConfig,t)}catch(t){throw CV(t)&&409===t.customData.serverCode?yield Zk(n.appConfig):yield zT(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function t5(n){return eR.apply(this,arguments)}function eR(){return(eR=(0,Q.Z)(function*(n){let e=yield PV(n.appConfig);for(;1===e.registrationStatus;)yield xV(100),e=yield PV(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Qk(n);return r||t}return e})).apply(this,arguments)}function PV(n){return aw(n,e=>{if(!e)throw Wu.create("installation-not-found");return OV(e)})}function OV(n){return function n5(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function r5(n,e){return tR.apply(this,arguments)}function tR(){return(tR=(0,Q.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=i5(n,t),i=SV(n,t),s=e.getImmediate({optional:!0});if(s){const g=yield s.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:EV,appId:n.appId}})},d=yield jk(()=>fetch(r,c));if(d.ok)return DV(yield d.json());throw yield Uk("Generate Auth Token",d)})).apply(this,arguments)}function i5(n,{fid:e}){return`${Vk(n)}/${e}/authTokens:generate`}function nR(n){return rR.apply(this,arguments)}function rR(){return(rR=(0,Q.Z)(function*(n,e=!1){let t;const r=yield aw(n.appConfig,s=>{if(!FV(s))throw Wu.create("not-registered");const o=s.authToken;if(!e&&a5(o))return s;if(1===o.requestStatus)return t=s5(n,e),s;{if(!navigator.onLine)throw Wu.create("app-offline");const c=u5(s);return t=o5(n,c),c}});return t?yield t:r.authToken})).apply(this,arguments)}function s5(n,e){return iR.apply(this,arguments)}function iR(){return(iR=(0,Q.Z)(function*(n,e){let t=yield NV(n.appConfig);for(;1===t.authToken.requestStatus;)yield xV(100),t=yield NV(n.appConfig);const r=t.authToken;return 0===r.requestStatus?nR(n,e):r})).apply(this,arguments)}function NV(n){return aw(n,e=>{if(!FV(e))throw Wu.create("not-registered");return function c5(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function o5(n,e){return sR.apply(this,arguments)}function sR(){return(sR=(0,Q.Z)(function*(n,e){try{const t=yield r5(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield zT(n.appConfig,r),t}catch(t){if(!CV(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield zT(n.appConfig,r)}else yield Zk(n.appConfig);throw t}})).apply(this,arguments)}function FV(n){return void 0!==n&&2===n.registrationStatus}function a5(n){return 2===n.requestStatus&&!function l5(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function u5(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function oR(){return(oR=(0,Q.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Qk(e);return r?r.catch(console.error):nR(e).catch(console.error),t.fid})).apply(this,arguments)}function aR(){return(aR=(0,Q.Z)(function*(n,e=!1){const t=n;return yield f5(t),(yield nR(t,e)).token})).apply(this,arguments)}function f5(n){return lR.apply(this,arguments)}function lR(){return(lR=(0,Q.Z)(function*(n){const{registrationPromise:e}=yield Qk(n);e&&(yield e)})).apply(this,arguments)}function dR(n){return Wu.create("missing-app-config-values",{valueName:n})}const LV="installations",_5=n=>{const e=n.getProvider("app").getImmediate(),t=function m5(n){if(!n||!n.options)throw dR("App Configuration");if(!n.name)throw dR("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw dR(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,rn._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},v5=n=>{const e=n.getProvider("app").getImmediate(),t=(0,rn._getProvider)(e,LV).getImmediate();return{getId:()=>function d5(n){return oR.apply(this,arguments)}(t),getToken:i=>function h5(n){return aR.apply(this,arguments)}(t,i)}};(function b5(){(0,rn._registerComponent)(new oo.wA(LV,_5,"PUBLIC")),(0,rn._registerComponent)(new oo.wA("installations-internal",v5,"PRIVATE"))})(),(0,rn.registerVersion)(bV,"0.6.4"),(0,rn.registerVersion)(bV,"0.6.4","esm2017");const hR="@firebase/remote-config",Us=new at.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class k5{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,Q.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function R5(n=navigator){return n.languages&&n.languages[0]||n.language}class P5{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return(0,Q.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:R5()},g={method:"POST",headers:c,body:JSON.stringify(d)},_=fetch(o,g),w=new Promise((B,G)=>{e.signal.addEventListener(()=>{const X=new Error("The operation was aborted.");X.name="AbortError",G(X)})});let T;try{yield Promise.race([_,w]),T=yield _}catch(B){let G="fetch-client-network";throw"AbortError"===B?.name&&(G="fetch-timeout"),Us.create(G,{originalErrorMessage:B?.message})}let S=T.status;const M=T.headers.get("ETag")||void 0;let R,N;if(200===T.status){let B;try{B=yield T.json()}catch(G){throw Us.create("fetch-client-parse",{originalErrorMessage:G?.message})}R=B.entries,N=B.state}if("INSTANCE_STATE_UNSPECIFIED"===N?S=500:"NO_CHANGE"===N?S=304:("NO_TEMPLATE"===N||"EMPTY_CONFIG"===N)&&(R={}),304!==S&&200!==S)throw Us.create("fetch-status",{httpStatus:S});return{status:S,eTag:M,config:R}})()}}class F5{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,Q.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,Q.Z)(function*(){yield function O5(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Us.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function N5(n){if(!(n instanceof at.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+(0,at.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class U5{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function WT(n,e){const t=n.target.error||void 0;return Us.create(e,{originalErrorMessage:t&&t?.message})}const wp="app_namespace_store";class $5{constructor(e,t,r,i=function H5(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(WT(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(wp,{keyPath:"compositeKey"})}}catch(t){e(Us.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,Q.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const c=r.transaction([wp],"readonly").objectStore(wp),d=t.createCompositeKey(e);try{const g=c.get(d);g.onerror=_=>{s(WT(_,"storage-get"))},g.onsuccess=_=>{const w=_.target.result;i(w?w.value:void 0)}}catch(g){s(Us.create("storage-get",{originalErrorMessage:g?.message}))}})})()}set(e,t){var r=this;return(0,Q.Z)(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const d=i.transaction([wp],"readwrite").objectStore(wp),g=r.createCompositeKey(e);try{const _=d.put({compositeKey:g,value:t});_.onerror=w=>{o(WT(w,"storage-set"))},_.onsuccess=()=>{s()}}catch(_){o(Us.create("storage-set",{originalErrorMessage:_?.message}))}})})()}delete(e){var t=this;return(0,Q.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const c=r.transaction([wp],"readwrite").objectStore(wp),d=t.createCompositeKey(e);try{const g=c.delete(d);g.onerror=_=>{s(WT(_,"storage-delete"))},g.onsuccess=()=>{i()}}catch(g){s(Us.create("storage-delete",{originalErrorMessage:g?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class z5{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,Q.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const c=yield i;c&&(e.activeConfig=c)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function W5(){return yR.apply(this,arguments)}function yR(){return(yR=(0,Q.Z)(function*(){if(!(0,at.hl)())return!1;try{return yield(0,at.eu)()}catch{return!1}})).apply(this,arguments)}let jV,HV;!function G5(){(0,rn._registerComponent)(new oo.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Us.create("registration-window");if(!(0,at.hl)())throw Us.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:c}=r.options;if(!s)throw Us.create("registration-project-id");if(!o)throw Us.create("registration-api-key");if(!c)throw Us.create("registration-app-id");const d=new $5(c,r.name,t=t||"firebase"),g=new z5(d),_=new Ta.Yd(hR);_.logLevel=Ta.in.ERROR;const w=new P5(i,rn.SDK_VERSION,t,s,o,c),T=new F5(w,d),S=new k5(T,d,g,_),M=new U5(r,S,g,d,_);return function x5(n){const e=(0,at.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(M),M},"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(hR,"0.4.4"),(0,rn.registerVersion)(hR,"0.4.4","esm2017")}();const $V=new WeakMap,_R=new WeakMap,zV=new WeakMap,vR=new WeakMap,bR=new WeakMap;let wR={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return _R.get(n);if("objectStoreNames"===e)return n.objectStoreNames||zV.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qu(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function eG(n){return"function"==typeof n?function J5(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K5(){return HV||(HV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(ER(this),e),qu($V.get(this))}:function(...e){return qu(n.apply(ER(this),e))}:function(e,...t){const r=n.call(ER(this),e,...t);return zV.set(r,e.sort?e.sort():[e]),qu(r)}}(n):(n instanceof IDBTransaction&&function Q5(n){if(_R.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});_R.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function Z5(){return jV||(jV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,wR):n)}function qu(n){if(n instanceof IDBRequest)return function Y5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(qu(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&$V.set(t,n)}).catch(()=>{}),bR.set(e,n),e}(n);if(vR.has(n))return vR.get(n);const e=eG(n);return e!==n&&(vR.set(n,e),bR.set(e,n)),e}const ER=n=>bR.get(n);function GV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),c=qu(o);return r&&o.addEventListener("upgradeneeded",d=>{r(qu(o.result),d.oldVersion,d.newVersion,qu(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",()=>i())}).catch(()=>{}),c}function IR(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),qu(t).then(()=>{})}const tG=["get","getKey","getAll","getAllKeys","count"],nG=["put","add","delete","clear"],CR=new Map;function WV(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(CR.get(e))return CR.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=nG.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tG.includes(t))return;const s=function(){var o=(0,Q.Z)(function*(c,...d){const g=this.transaction(c,i?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(d.shift())),(yield Promise.all([_[t](...d),i&&g.done]))[0]});return function(d){return o.apply(this,arguments)}}();return CR.set(e,s),s}!function X5(n){wR=n(wR)}(n=>({...n,get:(e,t,r)=>WV(e,t)||n.get(e,t,r),has:(e,t)=>!!WV(e,t)||n.has(e,t)}));const rG="/firebase-messaging-sw.js",iG="/firebase-cloud-messaging-push-scope",qV="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ZV="google.c.a.c_id",oG="google.c.a.c_l",aG="google.c.a.ts",lG="google.c.a.e";var Ly=(()=>{return(n=Ly||(Ly={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",Ly;var n})();function Zu(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uG(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const DR="fcm_token_details_db",KV="fcm_token_object_Store";function dG(n){return TR.apply(this,arguments)}function TR(){return TR=(0,Q.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(DR))return null;let e=null;return(yield GV(DR,5,{upgrade:(r=(0,Q.Z)(function*(i,s,o,c){var d;if(s<2||!i.objectStoreNames.contains(KV))return;const g=c.objectStore(KV),_=yield g.index("fcmSenderId").get(n);if(yield g.clear(),_)if(2===s){const w=_;if(!w.auth||!w.p256dh||!w.endpoint)return;e={token:w.fcmToken,createTime:null!==(d=w.createTime)&&void 0!==d?d:Date.now(),subscriptionOptions:{auth:w.auth,p256dh:w.p256dh,endpoint:w.endpoint,swScope:w.swScope,vapidKey:"string"==typeof w.vapidKey?w.vapidKey:Zu(w.vapidKey)}}}else if(3===s){const w=_;e={token:w.fcmToken,createTime:w.createTime,subscriptionOptions:{auth:Zu(w.auth),p256dh:Zu(w.p256dh),endpoint:w.endpoint,swScope:w.swScope,vapidKey:Zu(w.vapidKey)}}}else if(4===s){const w=_;e={token:w.fcmToken,createTime:w.createTime,subscriptionOptions:{auth:Zu(w.auth),p256dh:Zu(w.p256dh),endpoint:w.endpoint,swScope:w.swScope,vapidKey:Zu(w.vapidKey)}}}}),function(s,o,c,d){return r.apply(this,arguments)})})).close(),yield IR(DR),yield IR("fcm_vapid_details_db"),yield IR("undefined"),hG(e)?e:null;var r}),TR.apply(this,arguments)}function hG(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Ep="firebase-messaging-store";let SR=null;function xR(){return SR||(SR=GV("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ep)}})),SR}function YV(n){return AR.apply(this,arguments)}function AR(){return(AR=(0,Q.Z)(function*(n){const e=PR(n),r=yield(yield xR()).transaction(Ep).objectStore(Ep).get(e);if(r)return r;{const i=yield dG(n.appConfig.senderId);if(i)return yield MR(n,i),i}})).apply(this,arguments)}function MR(n,e){return kR.apply(this,arguments)}function kR(){return(kR=(0,Q.Z)(function*(n,e){const t=PR(n),i=(yield xR()).transaction(Ep,"readwrite");return yield i.objectStore(Ep).put(e,t),yield i.done,e})).apply(this,arguments)}function gG(n){return RR.apply(this,arguments)}function RR(){return(RR=(0,Q.Z)(function*(n){const e=PR(n),r=(yield xR()).transaction(Ep,"readwrite");yield r.objectStore(Ep).delete(e),yield r.done})).apply(this,arguments)}function PR({appConfig:n}){return n.appId}const Si=new at.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yG(n,e){return OR.apply(this,arguments)}function OR(){return(OR=(0,Q.Z)(function*(n,e){const t=yield VR(n),r=XV(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(LR(n.appConfig),i)).json()}catch(o){throw Si.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Si.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Si.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function _G(n,e){return NR.apply(this,arguments)}function NR(){return(NR=(0,Q.Z)(function*(n,e){const t=yield VR(n),r=XV(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${LR(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Si.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Si.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Si.create("token-update-no-token");return s.token})).apply(this,arguments)}function QV(n,e){return FR.apply(this,arguments)}function FR(){return(FR=(0,Q.Z)(function*(n,e){const r={method:"DELETE",headers:yield VR(n)};try{const s=yield(yield fetch(`${LR(n.appConfig)}/${e}`,r)).json();if(s.error)throw Si.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Si.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function LR({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function VR(n){return UR.apply(this,arguments)}function UR(){return(UR=(0,Q.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function XV({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==qV&&(i.web.applicationPubKey=r),i}const vG=6048e5;function bG(n){return BR.apply(this,arguments)}function BR(){return(BR=(0,Q.Z)(function*(n){const e=yield EG(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Zu(e.getKey("auth")),p256dh:Zu(e.getKey("p256dh"))},r=yield YV(n.firebaseDependencies);if(r){if(IG(r.subscriptionOptions,t))return Date.now()>=r.createTime+vG?wG(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield QV(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return eU(n.firebaseDependencies,t)}return eU(n.firebaseDependencies,t)})).apply(this,arguments)}function JV(n){return jR.apply(this,arguments)}function jR(){return(jR=(0,Q.Z)(function*(n){const e=yield YV(n.firebaseDependencies);e&&(yield QV(n.firebaseDependencies,e.token),yield gG(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function wG(n,e){return HR.apply(this,arguments)}function HR(){return(HR=(0,Q.Z)(function*(n,e){try{const t=yield _G(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield MR(n.firebaseDependencies,r),t}catch(t){throw yield JV(n),t}})).apply(this,arguments)}function eU(n,e){return $R.apply(this,arguments)}function $R(){return($R=(0,Q.Z)(function*(n,e){const r={token:yield yG(n,e),createTime:Date.now(),subscriptionOptions:e};return yield MR(n,r),r.token})).apply(this,arguments)}function EG(n,e){return zR.apply(this,arguments)}function zR(){return(zR=(0,Q.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:uG(e)})})).apply(this,arguments)}function IG(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function tU(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function CG(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function DG(n,e){!e.data||(n.data=e.data)}(e,n),function TG(n,e){var t,r,i,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const c=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;c&&(n.fcmOptions.link=c);const d=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;d&&(n.fcmOptions.analyticsLabel=d)}(e,n),e}function SG(n){return"object"==typeof n&&!!n&&ZV in n}function nU(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function GR(n){return Si.create("missing-app-config-values",{valueName:n})}nU("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nU("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class AG{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function xG(n){if(!n||!n.options)throw GR("App Configuration Object");if(!n.name)throw GR("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw GR(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function rU(n){return WR.apply(this,arguments)}function WR(){return(WR=(0,Q.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(rG,{scope:iG}),n.swRegistration.update().catch(()=>{})}catch(e){throw Si.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function MG(n,e){return qR.apply(this,arguments)}function qR(){return(qR=(0,Q.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield rU(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Si.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function kG(n,e){return ZR.apply(this,arguments)}function ZR(){return(ZR=(0,Q.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=qV)})).apply(this,arguments)}function KR(){return(KR=(0,Q.Z)(function*(n,e){if(!navigator)throw Si.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Si.create("permission-blocked");return yield kG(n,e?.vapidKey),yield MG(n,e?.serviceWorkerRegistration),bG(n)})).apply(this,arguments)}function RG(n,e,t){return YR.apply(this,arguments)}function YR(){return(YR=(0,Q.Z)(function*(n,e,t){const r=PG(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[ZV],message_name:t[oG],message_time:t[aG],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function PG(n){switch(n){case Ly.NOTIFICATION_CLICKED:return"notification_open";case Ly.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function QR(){return(QR=(0,Q.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Ly.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(tU(t)):n.onMessageHandler.next(tU(t)));const r=t.data;SG(r)&&"1"===r[lG]&&(yield RG(n,t.messageType,r))})).apply(this,arguments)}const sU="@firebase/messaging",NG=n=>{const e=new AG(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function OG(n,e){return QR.apply(this,arguments)}(e,t)),e},FG=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function iU(n,e){return KR.apply(this,arguments)}(e,r)}};function aU(){return XR.apply(this,arguments)}function XR(){return(XR=(0,Q.Z)(function*(){try{yield(0,at.eu)()}catch{return!1}return typeof window<"u"&&(0,at.hl)()&&(0,at.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function LG(){(0,rn._registerComponent)(new oo.wA("messaging",NG,"PUBLIC")),(0,rn._registerComponent)(new oo.wA("messaging-internal",FG,"PRIVATE")),(0,rn.registerVersion)(sU,"0.12.4"),(0,rn.registerVersion)(sU,"0.12.4","esm2017")}();const qT="analytics",BG="firebase_id",$G="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tP="https://www.googletagmanager.com/gtag/js",hi=new Ta.Yd("@firebase/analytics"),hs=new at.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function GG(n){if(!n.startsWith(tP)){const e=hs.create("invalid-gtag-resource",{gtagURL:n});return hi.warn(e.message),""}return n}function lU(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function qG(n,e){const t=function WG(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:GG}),r=document.createElement("script"),i=`${tP}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function KG(n,e,t,r,i,s){return nP.apply(this,arguments)}function nP(){return(nP=(0,Q.Z)(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const d=(yield lU(t)).find(g=>g.measurementId===i);d&&(yield e[d.appId])}}catch(c){hi.error(c)}n("config",i,s)})).apply(this,arguments)}function YG(n,e,t,r,i){return rP.apply(this,arguments)}function rP(){return(rP=(0,Q.Z)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const c=yield lU(t);for(const d of o){const g=c.find(w=>w.measurementId===d),_=g&&e[g.appId];if(!_){s=[];break}s.push(_)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){hi.error(s)}})).apply(this,arguments)}function JG(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(tP)&&t.src.includes(n))return t;return null}const uU=new class nW{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function rW(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function iW(n){return iP.apply(this,arguments)}function iP(){return(iP=(0,Q.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:rW(r)},s=$G.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let c="";try{const d=yield o.json();null!==(e=d.error)&&void 0!==e&&e.message&&(c=d.error.message)}catch{}throw hs.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()})).apply(this,arguments)}function sW(n){return sP.apply(this,arguments)}function sP(){return(sP=(0,Q.Z)(function*(n,e=uU,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw hs.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw hs.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new lW;return setTimeout((0,Q.Z)(function*(){c.abort()}),void 0!==t?t:6e4),cU({appId:r,apiKey:i,measurementId:s},o,c,e)})).apply(this,arguments)}function cU(n,e,t){return oP.apply(this,arguments)}function oP(){return(oP=(0,Q.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=uU){var s;const{appId:o,measurementId:c}=n;try{yield oW(r,e)}catch(d){if(c)return hi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:o,measurementId:c};throw d}try{const d=yield iW(n);return i.deleteThrottleMetadata(o),d}catch(d){const g=d;if(!aW(g)){if(i.deleteThrottleMetadata(o),c)return hi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:o,measurementId:c};throw d}const _=503===Number(null===(s=g?.customData)||void 0===s?void 0:s.httpStatus)?(0,at.$s)(t,i.intervalMillis,30):(0,at.$s)(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return i.setThrottleMetadata(o,w),hi.debug(`Calling attemptFetch again in ${_} millis`),cU(n,w,r,i)}})).apply(this,arguments)}function oW(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(hs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function aW(n){if(!(n instanceof at.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class lW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let aP,pP;function lP(){return(lP=(0,Q.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function dU(n){pP=n}function hU(n){aP=n}function gW(){return gP.apply(this,arguments)}function gP(){return(gP=(0,Q.Z)(function*(){if(!(0,at.hl)())return hi.warn(hs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,at.eu)()}catch(n){return hi.warn(hs.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function mP(){return(mP=(0,Q.Z)(function*(n,e,t,r,i,s,o){var c;const d=sW(n);d.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&hi.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>hi.error(S)),e.push(d);const g=gW().then(S=>{if(S)return r.getId()}),[_,w]=yield Promise.all([d,g]);JG(s)||qG(s,_.measurementId),pP&&(i("consent","default",pP),dU(void 0)),i("js",new Date);const T=null!==(c=o?.config)&&void 0!==c?c:{};return T.origin="firebase",T.update=!0,null!=w&&(T[BG]=w),i("config",_.measurementId,T),aP&&(i("set",aP),hU(void 0)),_.measurementId})).apply(this,arguments)}class yW{constructor(e){this.app=e}_delete(){return delete _l[this.app.options.appId],Promise.resolve()}}let _l={},fU=[];const pU={};let mU,vl,ZT="dataLayer",yP=!1;function vW(n,e,t){!function _W(){const n=[];if((0,at.ru)()&&n.push("This is a browser extension environment."),(0,at.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=hs.create("invalid-analytics-context",{errorInfo:e});hi.warn(t.message)}}();const r=n.options.appId;if(!r)throw hs.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw hs.create("no-api-key");hi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_l[r])throw hs.create("already-exists",{id:r});if(!yP){!function ZG(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(ZT);const{wrappedGtag:s,gtagCore:o}=function XG(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function QG(n,e,t,r){function s(){return(s=(0,Q.Z)(function*(o,...c){try{if("event"===o){const[d,g]=c;yield YG(n,e,t,d,g)}else if("config"===o){const[d,g]=c;yield KG(n,e,t,r,d,g)}else if("consent"===o){const[d]=c;n("consent","update",d)}else if("get"===o){const[d,g,_]=c;n("get",d,g,_)}else if("set"===o){const[d]=c;n("set",d)}else n(o,...c)}catch(d){hi.error(d)}})).apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(_l,fU,pU,ZT,"gtag");vl=s,mU=o,yP=!0}return _l[r]=function mW(n,e,t,r,i,s,o){return mP.apply(this,arguments)}(n,fU,pU,e,mU,ZT,t),new yW(n)}function wW(){return _P.apply(this,arguments)}function _P(){return(_P=(0,Q.Z)(function*(){if((0,at.ru)()||!(0,at.zI)()||!(0,at.hl)())return!1;try{return yield(0,at.eu)()}catch{return!1}})).apply(this,arguments)}const yU="@firebase/analytics";!function IW(){(0,rn._registerComponent)(new oo.wA(qT,(e,{options:t})=>vW(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,rn._registerComponent)(new oo.wA("analytics-internal",function n(e){try{const t=e.getProvider(qT).getImmediate();return{logEvent:(r,i,s)=>function EW(n,e,t,r){n=(0,at.m9)(n),function uW(n,e,t,r,i){return lP.apply(this,arguments)}(vl,_l[n.app.options.appId],e,t,r).catch(i=>hi.error(i))}(t,r,i,s)}}catch(t){throw hs.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,rn.registerVersion)(yU,"0.10.0"),(0,rn.registerVersion)(yU,"0.10.0","esm2017")}();const TW=new class DW extends pV{}(class CW extends fV{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var Ip=j(5363),lw=j(9468);const KT=new f.GfV("7.5.0"),bP="__angularfire_symbol__analyticsIsSupportedValue",wP="__angularfire_symbol__analyticsIsSupported",EP="__angularfire_symbol__remoteConfigIsSupportedValue",IP="__angularfire_symbol__remoteConfigIsSupported",CP="__angularfire_symbol__messagingIsSupportedValue",DP="__angularfire_symbol__messagingIsSupported";globalThis[wP]||(globalThis[wP]=wW().then(n=>globalThis[bP]=n).catch(()=>globalThis[bP]=!1)),globalThis[DP]||(globalThis[DP]=aU().then(n=>globalThis[CP]=n).catch(()=>globalThis[CP]=!1)),globalThis[IP]||(globalThis[IP]=W5().then(n=>globalThis[EP]=n).catch(()=>globalThis[EP]=!1));const xP=(n,e)=>{const t=e?[e]:(0,rn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Vy(){}class vU{constructor(e,t=TW){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class SW{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vy,{},Vy,Vy)),t.pipe(Xr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let uw=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new vU(Zone.current)),this.insideAngular=t.run(()=>new vU(Zone.current,Mk)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cp(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function xW(n){return Cp().ngZone.runOutsideAngular(()=>n())}function Dp(n){return Cp().ngZone.run(()=>n())}function bU(n){return n.pipe((0,Ip.Q)(Cp().outsideAngular))}function fs(n){return Cp(),function AW(n){return function(t){return(t=t.lift(new SW(n.ngZone))).pipe((0,lw.R)(n.outsideAngular),(0,Ip.Q)(n.insideAngular))}}(Cp())(n)}const MW=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Dp(()=>n.apply(void 0,r))},Uy=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=Dp(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vy,{},Vy,Vy)))),r[s]=MW(r[s],t));const i=xW(()=>n.apply(this,r));if(!e){if(i instanceof Os.y){const s=Cp();return i.pipe((0,lw.R)(s.outsideAngular),(0,Ip.Q)(s.insideAngular))}return Dp(()=>i)}return i instanceof Os.y?i.pipe(fs):i instanceof Promise?Dp(()=>new Promise((s,o)=>i.then(c=>Dp(()=>s(c)),c=>Dp(()=>o(c))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Dp(()=>i)};var ps=j(2011),wU=j(3942);const EU="firebasestorage.googleapis.com",IU="storageBucket";class gr extends at.ZR{constructor(e,t,r=0){super(AP(e),`Firebase Storage: ${t} (${AP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return AP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Bn=(()=>{return(n=Bn||(Bn={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Bn;var n})();function AP(n){return"storage/"+n}function MP(){return new gr(Bn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function CU(){return new gr(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DU(){return new gr(Bn.CANCELED,"User canceled the upload/download.")}function TU(){return new gr(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function By(n){return new gr(Bn.INVALID_ARGUMENT,n)}function SU(){return new gr(Bn.APP_DELETED,"The Firebase app was deleted.")}function xU(n){return new gr(Bn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cw(n,e){return new gr(Bn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function dw(n){throw new gr(Bn.INTERNAL_ERROR,"Internal error: "+n)}class $i{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$i.makeFromUrl(e,t)}catch{return new $i(e,"")}if(""===r.path)return r;throw function BW(n){return new gr(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function g(ee){ee.path_=decodeURIComponent(ee.path)}const w=t.replace(/[.]/g,"\\."),X=[{regex:c,indices:{bucket:1,path:3},postModify:function s(ee){"/"===ee.path.charAt(ee.path.length-1)&&(ee.path_=ee.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${w}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:g},{regex:new RegExp(`^https?://${t===EU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let ee=0;ee<X.length;ee++){const re=X[ee],pe=re.regex.exec(e);if(pe){let Ve=pe[re.indices.path];Ve||(Ve=""),r=new $i(pe[re.indices.bucket],Ve),re.postModify(r);break}}if(null==r)throw function UW(n){return new gr(Bn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class GW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function YT(n){return"string"==typeof n||n instanceof String}function AU(n){return kP()&&n instanceof Blob}function kP(){return typeof Blob<"u"&&!(0,at.UG)()}function RP(n,e,t,r){if(r<e)throw By(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw By(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ku(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function MU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Fd=(()=>{return(n=Fd||(Fd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Fd;var n})();function kU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class QW{constructor(e,t,r,i,s,o,c,d,g,_,w,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=w,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,M)=>{this.resolve_=S,this.reject_=M,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());!function ZW(n){return void 0!==n}(d)?s():s(d)}catch(d){o(d)}else if(null!==c){const d=MP();d.serverResponse=c.getErrorText(),o(this.errorCallback_?this.errorCallback_(c,d):d)}else o(i.canceled?this.appDelete_?SU():DU():CU())};this.canceled_?t(0,new QT(!1,null,!0)):this.backoffId_=function WW(n,e,t){let r=1,i=null,s=null,o=!1,c=0;function d(){return 2===c}let g=!1;function _(...N){g||(g=!0,e.apply(null,N))}function w(N){i=setTimeout(()=>{i=null,n(S,d())},N)}function T(){s&&clearTimeout(s)}function S(N,...B){if(g)return void T();if(N)return T(),void _.call(null,N,...B);if(d()||o)return T(),void _.call(null,N,...B);let X;r<64&&(r*=2),1===c?(c=2,X=0):X=1e3*(r+Math.random()),w(X)}let M=!1;function R(N){M||(M=!0,T(),!g&&(null!==i?(N||(c=2),clearTimeout(i),w(0)):N||(c=1)))}return w(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new QT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Fd.NO_ERROR,d=s.getStatus();if(!c||kU(d,this.additionalRetryCodes_)&&this.retry){const _=s.getErrorCode()===Fd.ABORT;return void r(!1,new QT(!1,null,_))}const g=-1!==this.successCodes_.indexOf(d);r(!0,new QT(g,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function qW(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class QT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function iq(...n){const e=function rq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(kP())return new Blob(n);throw new gr(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ao={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class PP{constructor(e,t){this.data=e,this.contentType=t||null}}function OP(n,e){switch(n){case ao.RAW:return new PP(RU(e));case ao.BASE64:case ao.BASE64URL:return new PP(PU(n,e));case ao.DATA_URL:return new PP(function lq(n){const e=new OU(n);return e.base64?PU(ao.BASE64,e.rest):function aq(n){let e;try{e=decodeURIComponent(n)}catch{throw cw(ao.DATA_URL,"Malformed data URL.")}return RU(e)}(e.rest)}(e),function uq(n){return new OU(n).contentType}(e))}throw MP()}function RU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function PU(n,e){switch(n){case ao.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw cw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ao.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw cw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function oq(n){if(typeof atob>"u")throw function zW(n){return new gr(Bn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:cw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class OU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw cw(ao.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function cq(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class bl{constructor(e,t){let r=0,i="";AU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(AU(this.data_)){const i=function sq(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new bl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new bl(r,!0)}}static getBlob(...e){if(kP()){const t=e.map(r=>r instanceof bl?r.data_:r);return new bl(iq.apply(null,t))}{const t=e.map(o=>YT(o)?OP(ao.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new bl(i,!0)}}uploadData(){return this.data_}}function NP(n){let e;try{e=JSON.parse(n)}catch{return null}return function YW(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function NU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function fq(n,e){return e}class gs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||fq}}let XT=null;function hw(){if(XT)return XT;const n=[];n.push(new gs("bucket")),n.push(new gs("generation")),n.push(new gs("metageneration")),n.push(new gs("name","fullPath",!0));const t=new gs("name");t.xform=function e(s,o){return function pq(n){return!YT(n)||n.length<2?n:NU(n)}(o)},n.push(t);const i=new gs("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new gs("timeCreated")),n.push(new gs("updated")),n.push(new gs("md5Hash",null,!0)),n.push(new gs("cacheControl",null,!0)),n.push(new gs("contentDisposition",null,!0)),n.push(new gs("contentEncoding",null,!0)),n.push(new gs("contentLanguage",null,!0)),n.push(new gs("contentType",null,!0)),n.push(new gs("metadata","customMetadata",!0)),XT=n,XT}function FU(n,e,t){const r=NP(e);return null===r?null:function mq(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function gq(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new $i(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function FP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const LU="prefixes";class wl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function El(n){if(!n)throw MP()}function JT(n,e){return function t(r,i){const s=FU(n,i,e);return El(null!==s),s}}function jy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function LW(){return new gr(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function FW(){return new gr(Bn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function NW(n){return new gr(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function VW(n){return new gr(Bn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function fw(n){const e=jy(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function OW(n){return new gr(Bn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function UU(n,e,t){const i=Ku(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,c=new wl(i,"GET",JT(n,t),o);return c.errorHandler=fw(e),c}function Eq(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const c=Ku(e.bucketOnlyServerUrl(),n.host,n._protocol),g=n.maxOperationRetryTime,_=new wl(c,"GET",function bq(n,e){return function t(r,i){const s=function vq(n,e,t){const r=NP(t);return null===r?null:function _q(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[LU])for(const i of t[LU]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new $i(e,s));r.prefixes.push(o)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new $i(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return El(null!==s),s}}(n,e.bucket),g);return _.urlParams=s,_.errorHandler=jy(e),_}function jU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Tq(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class eS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function LP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{El(!1)}return El(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Mq={STATE_CHANGED:"state_changed"},ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function VP(n){switch(n){case"running":case"pausing":case"canceling":return ms.RUNNING;case"paused":return ms.PAUSED;case"success":return ms.SUCCESS;case"canceled":return ms.CANCELED;default:return ms.ERROR}}class kq{constructor(e,t,r){if(function KW(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Hy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Pq extends class Rq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw dw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Sa(){return new Pq}class GU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=hw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Bn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(kU(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=CU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Bn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Sq(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=jU(e,r,i),c={name:o.fullPath},d=Ku(s,n.host,n._protocol),_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},w=FP(o,t),M=new wl(d,"POST",function S(R){let N;LP(R);try{N=R.getResponseHeader("X-Goog-Upload-URL")}catch{El(!1)}return El(YT(N)),N},n.maxUploadRetryTime);return M.urlParams=c,M.headers=_,M.body=w,M.errorHandler=jy(e),M}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Sa,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function xq(n,e,t,r){const d=new wl(t,"POST",function s(g){const _=LP(g,["active","final"]);let w=null;try{w=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{El(!1)}w||El(!1);const T=Number(w);return El(!isNaN(T)),new eS(T,r.size(),"final"===_)},n.maxUploadRetryTime);return d.headers={"X-Goog-Upload-Command":"query"},d.errorHandler=jy(e),d}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Sa,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new eS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Aq(n,e,t,r,i,s,o,c){const d=new eS(0,0);if(o?(d.current=o.current,d.total=o.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw function HW(){return new gr(Bn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const g=d.total-d.current;let _=g;i>0&&(_=Math.min(_,i));const w=d.current;let S="";S=0===_?"finalize":g===_?"upload, finalize":"upload";const M={"X-Goog-Upload-Command":S,"X-Goog-Upload-Offset":`${d.current}`},R=r.slice(w,w+_);if(null===R)throw TU();const X=new wl(t,"POST",function N(ee,re){const pe=LP(ee,["active","final"]),Ie=d.current+_,Ve=r.size();let ut;return ut="final"===pe?JT(e,s)(ee,re):null,new eS(Ie,Ve,"final"===pe,ut)},e.maxUploadRetryTime);return X.headers=M,X.body=R.uploadData(),X.progressCallback=c||null,X.errorHandler=jy(n),X}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(d){return this._error=d,void this._transition("error")}const c=this._ref.storage._makeRequest(o,Sa,i,s,!1);this._request=c,c.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=UU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Sa,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function HU(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},d=function c(){let X="";for(let ee=0;ee<2;ee++)X+=Math.random().toString().slice(2);return X}();o["Content-Type"]="multipart/related; boundary="+d;const g=jU(e,r,i),_=FP(g,t),S=bl.getBlob("--"+d+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_+"\r\n--"+d+"\r\nContent-Type: "+g.contentType+"\r\n\r\n",r,"\r\n--"+d+"--");if(null===S)throw TU();const M={name:g.fullPath},R=Ku(s,n.host,n._protocol),B=n.maxUploadRetryTime,G=new wl(R,"POST",JT(n,t),B);return G.urlParams=M,G.headers=o,G.body=S.uploadData(),G.errorHandler=jy(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Sa,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=DU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=VP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new kq(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(VP(this._state)){case ms.SUCCESS:Hy(this._resolve.bind(null,this.snapshot))();break;case ms.CANCELED:case ms.ERROR:Hy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(VP(this._state)){case ms.RUNNING:case ms.PAUSED:e.next&&Hy(e.next.bind(e,this.snapshot))();break;case ms.SUCCESS:e.complete&&Hy(e.complete.bind(e))();break;default:e.error&&Hy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Tp{constructor(e,t){this._service=e,this._location=t instanceof $i?t:$i.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tp(e,t)}get root(){const e=new $i(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NU(this._location.path)}get storage(){return this._service}get parent(){const e=function dq(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new $i(this._location.bucket,e);return new Tp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw xU(e)}}function qU(n,e,t){return UP.apply(this,arguments)}function UP(){return(UP=(0,Q.Z)(function*(n,e,t){const i=yield ZU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield qU(n,e,i.nextPageToken))})).apply(this,arguments)}function ZU(n,e){null!=e&&"number"==typeof e.maxResults&&RP("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Eq(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Sa)}function Gq(n){n._throwIfRoot("getDownloadURL");const e=function Iq(n,e,t){const i=Ku(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,c=new wl(i,"GET",function wq(n,e){return function t(r,i){const s=FU(n,i,e);return El(null!==s),function yq(n,e,t,r){const i=NP(e);if(null===i||!YT(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(g=>{const w=n.fullPath;return Ku("/b/"+o(n.bucket)+"/o/"+o(w),t,r)+MU({alt:"media",token:g})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return c.errorHandler=fw(e),c}(n.storage,n._location,hw());return n.storage.makeRequestWithTokens(e,Sa).then(t=>{if(null===t)throw function $W(){return new gr(Bn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function KU(n,e){const t=function hq(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new $i(n._location.bucket,t);return new Tp(n.storage,r)}function YU(n,e){if(n instanceof BP){const t=n;if(null==t._bucket)throw function jW(){return new gr(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IU+"' property when initializing the app?")}();const r=new Tp(t,t._bucket);return null!=e?YU(r,e):r}return void 0!==e?KU(n,e):n}function Kq(n,e){if(e&&function qq(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BP)return function Zq(n,e){return new Tp(n,e)}(n,e);throw By("To use ref(service, url), the first argument must be a Storage instance.")}return YU(n,e)}function QU(n,e){const t=e?.[IU];return null==t?null:$i.makeFromBucketSpec(t,n)}class BP{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=EU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?$i.makeFromBucketSpec(i,this._host):QU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?$i.makeFromBucketSpec(this._url,e):QU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Q.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Q.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tp(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new GW(SU());{const o=function nq(n,e,t,r,i,s,o=!0){const c=MU(n.urlParams),d=n.url+c,g=Object.assign({},n.headers);return function eq(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function XW(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function JW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(g,s),function tq(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new QW(d,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,Q.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const XU="@firebase/storage",eB="storage";function tB(n,e,t){return function Bq(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new GU(n,new bl(e),t)}(n=(0,at.m9)(n),e,t)}function nB(n){return Gq(n=(0,at.m9)(n))}function rB(n){return function Wq(n){n._throwIfRoot("deleteObject");const e=function Dq(n,e){const r=Ku(e.fullServerUrl(),n.host,n._protocol),c=new wl(r,"DELETE",function o(d,g){},n.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=fw(e),c}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Sa)}(n=(0,at.m9)(n))}function jP(n,e){return Kq(n=(0,at.m9)(n),e)}function n9(n=(0,rn.getApp)(),e){n=(0,at.m9)(n);const r=(0,rn._getProvider)(n,eB).getImmediate({identifier:e}),i=(0,at.P0)("storage");return i&&iB(r,...i),r}function iB(n,e,t,r={}){!function Yq(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,at.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function r9(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new BP(t,r,i,e,rn.SDK_VERSION)}!function i9(){(0,rn._registerComponent)(new oo.wA(eB,r9,"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(XU,"0.11.2",""),(0,rn.registerVersion)(XU,"0.11.2","esm2017")}();class tS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new tS(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new tS(o,this,this._ref)):{next:t.next?o=>t.next(new tS(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class oB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Yu(e,this._service))}get items(){return this._delegate.items.map(e=>new Yu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Yu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function t9(n,e){return KU(n,e)}(this._delegate,e);return new Yu(t,this.storage)}get root(){return new Yu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Yu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new sB(tB(this._delegate,e,t),this)}putString(e,t=ao.RAW,r){this._throwIfRoot("putString");const i=OP(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new sB(new GU(this._delegate,new bl(i.data,!0),s),this)}listAll(){return function e9(n){return function Hq(n){const e={prefixes:[],items:[]};return qU(n,e).then(()=>e)}(n=(0,at.m9)(n))}(this._delegate).then(e=>new oB(e,this.storage))}list(e){return function Jq(n,e){return ZU(n=(0,at.m9)(n),e)}(this._delegate,e||void 0).then(t=>new oB(t,this.storage))}getMetadata(){return function Qq(n){return function $q(n){n._throwIfRoot("getMetadata");const e=UU(n.storage,n._location,hw());return n.storage.makeRequestWithTokens(e,Sa)}(n=(0,at.m9)(n))}(this._delegate)}updateMetadata(e){return function Xq(n,e){return function zq(n,e){n._throwIfRoot("updateMetadata");const t=function Cq(n,e,t,r){const s=Ku(e.fullServerUrl(),n.host,n._protocol),c=FP(t,r),g=n.maxOperationRetryTime,_=new wl(s,"PATCH",JT(n,r),g);return _.headers={"Content-Type":"application/json; charset=utf-8"},_.body=c,_.errorHandler=fw(e),_}(n.storage,n._location,e,hw());return n.storage.makeRequestWithTokens(t,Sa)}(n=(0,at.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return nB(this._delegate)}delete(){return this._throwIfRoot("delete"),rB(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xU(e)}}class aB{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(lB(e))throw By("ref() expected a child path but got a URL, use refFromURL instead.");return new Yu(jP(this._delegate,e),this)}refFromURL(e){if(!lB(e))throw By("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$i.makeFromUrl(e,this._delegate.host)}catch{throw By("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yu(jP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){iB(this._delegate,e,t,r)}}function lB(n){return/^[A-Za-z]+:\/\//.test(n)}function l9(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new aB(t,r)}!function u9(n){const e={TaskState:ms,TaskEvent:Mq,StringFormat:ao,Storage:aB,Reference:Yu};n.INTERNAL.registerComponent(new oo.wA("storage-compat",l9,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(wU.Z);class $y{constructor(e){return e}}class uB{constructor(){return(0,rn.getApps)()}}const HP=new f.OlP("angularfire2._apps"),d9={provide:$y,useFactory:function c9(n){return n&&1===n.length?n[0]:new $y((0,rn.getApp)())},deps:[[new f.FiY,HP]]},h9={provide:uB,deps:[[new f.FiY,HP]]};function f9(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $y(r)}}let p9=(()=>{class n{constructor(t){(0,rn.registerVersion)("angularfire",KT.full,"core"),(0,rn.registerVersion)("angularfire",KT.full,"app"),(0,rn.registerVersion)("angular",f.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[d9,h9]}),n})();function g9(n,...e){return{ngModule:p9,providers:[{provide:HP,useFactory:f9(n),multi:!0,deps:[f.R0b,f.zs3,uw,...e]}]}}const m9=Uy(rn.initializeApp,!0),$P=new Map,cB={activated:!1,tokenObservers:[]},y9={initialized:!1,enabled:!1};function Cr(n){return $P.get(n)||Object.assign({},cB)}function nS(){return y9}class I9{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Q.Z)(function*(){t.stop();try{t.pending=new at.BH,yield function C9(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new at.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const xi=new at.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function GP(n){if(!Cr(n).activated)throw xi.create("use-before-activation",{appName:n.name})}function sS(n,e){return qP.apply(this,arguments)}function qP(){return(qP=(0,Q.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const w=yield i.getHeartbeatsHeader();w&&(r["X-Firebase-Client"]=w)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,c;try{o=yield fetch(n,s)}catch(w){throw xi.create("fetch-network-error",{originalErrorMessage:w?.message})}if(200!==o.status)throw xi.create("fetch-status-error",{httpStatus:o.status});try{c=yield o.json()}catch(w){throw xi.create("fetch-parse-error",{originalErrorMessage:w?.message})}const d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const g=1e3*Number(d[1]),_=Date.now();return{token:c.token,expireTimeMillis:_+g,issuedAtTimeMillis:_}})).apply(this,arguments)}function hB(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const pw="firebase-app-check-store";let oS=null;function pB(){return oS||(oS=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(xi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(pw,{keyPath:"compositeKey"})}}catch(t){e(xi.create("storage-open",{originalErrorMessage:t?.message}))}}),oS)}function ZP(){return(ZP=(0,Q.Z)(function*(n,e){const r=(yield pB()).transaction(pw,"readwrite"),s=r.objectStore(pw).put({compositeKey:n,value:e});return new Promise((o,c)=>{s.onsuccess=d=>{o()},r.onerror=d=>{var g;c(xi.create("storage-set",{originalErrorMessage:null===(g=d.target.error)||void 0===g?void 0:g.message}))}})})).apply(this,arguments)}const gw=new Ta.Yd("@firebase/app-check");function QP(n,e){return(0,at.hl)()?function k9(n,e){return function gB(n,e){return ZP.apply(this,arguments)}(function yB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{gw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function JP(){return nS().enabled}function eO(){return tO.apply(this,arguments)}function tO(){return(tO=(0,Q.Z)(function*(){const n=nS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const L9={error:"UNKNOWN_ERROR"};function V9(n){return at.US.encodeString(JSON.stringify(n),!1)}function aS(n){return nO.apply(this,arguments)}function nO(){return(nO=(0,Q.Z)(function*(n,e=!1){const t=n.app;GP(t);const r=Cr(t);let s,i=r.token;if(i&&!zy(i)&&(r.token=void 0,i=void 0),!i){const d=yield r.cachedTokenPromise;d&&(zy(d)?i=d:yield QP(t,void 0))}if(!e&&i&&zy(i))return{token:i.token};let c,o=!1;if(JP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sS(hB(t,yield eO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const d=yield r.exchangeTokenPromise;return yield QP(t,d),r.token=d,{token:d.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Cr(t).exchangeTokenPromise}catch(d){"appCheck/throttled"===d.code?gw.warn(d.message):gw.error(d),s=d}return i?s?c=zy(i)?{token:i.token,internalError:s}:bB(s):(c={token:i.token},r.token=i,yield QP(t,i)):c=bB(s),o&&vB(t,c),c})).apply(this,arguments)}function sO(n,e){const t=Cr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _B(n){const{app:e}=n,t=Cr(e);let r=t.tokenRefresher;r||(r=function B9(n){const{app:e}=n;return new I9((0,Q.Z)(function*(){let r;if(r=Cr(e).token?yield aS(n,!0):yield aS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Cr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vB(n,e){const t=Cr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function zy(n){return n.expireTimeMillis-Date.now()>0}function bB(n){return{token:V9(L9),error:n}}class j9{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Cr(this.app);for(const t of e)sO(this.app,t.next);return Promise.resolve()}}const xB="app-check-internal";!function t8(){(0,rn._registerComponent)(new oo.wA("app-check",n=>function H9(n,e){return new j9(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xB).initialize()})),(0,rn._registerComponent)(new oo.wA(xB,n=>function $9(n){return{getToken:e=>aS(n,e),addTokenListener:e=>function iO(n,e,t,r){const{app:i}=n,s=Cr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&zy(s.token)){const c=s.token;Promise.resolve().then(()=>{t({token:c.token}),_B(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>_B(n))}(n,"INTERNAL",e),removeTokenListener:e=>sO(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rn.registerVersion)("@firebase/app-check","0.7.0")}();class mw{constructor(){return xP("app-check")}}typeof window<"u"&&window;var o8=j(9260);function MB(n){const e=function a8(n){return new Os.y(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function w3(n,e=Mk){return(0,Yr.e)((t,r)=>{let i=null,s=null,o=null;const c=()=>{if(i){i.unsubscribe(),i=null;const g=s;s=null,r.next(g)}};function d(){const g=o+n,_=e.now();if(_<g)return i=this.schedule(void 0,g-_),void r.add(i);c()}t.subscribe((0,jr.x)(r,g=>{s=g,o=e.now(),i||(i=e.schedule(d,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Nt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function uS(n){return{getDownloadURL:()=>mt(void 0).pipe(bU,Ir(()=>n.getDownloadURL()),fs),getMetadata:()=>mt(void 0).pipe(bU,Ir(()=>n.getMetadata()),fs),delete:()=>(0,wn.D)(n.delete()),child:e=>uS(n.child(e)),updateMetadata:e=>(0,wn.D)(n.updateMetadata(e)),put:(e,t)=>MB(n.put(e,t)),putString:(e,t,r)=>MB(n.putString(e,t,r)),list:e=>(0,wn.D)(n.list(e)),listAll:()=>(0,wn.D)(n.listAll())}}const l8=new f.OlP("angularfire2.storageBucket"),u8=new f.OlP("angularfire2.storage.maxUploadRetryTime"),c8=new f.OlP("angularfire2.storage.maxOperationRetryTime"),d8=new f.OlP("angularfire2.storage.use-emulator");let h8=(()=>{class n{constructor(t,r,i,s,o,c,d,g,_,w){const T=(0,ps.on)(t,o,r);this.storage=(0,ps.cc)(`${T.name}.storage.${i}`,"AngularFireStorage",T.name,()=>{const S=o.runOutsideAngular(()=>T.storage(i||void 0)),M=_;return M&&S.useEmulator(...M),d&&S.setMaxUploadRetryTime(d),g&&S.setMaxOperationRetryTime(g),S},[d,g])}ref(t){return uS(this.storage.ref(t))}refFromURL(t){return uS(this.storage.refFromURL(t))}upload(t,r,i){return uS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ps.Dh),f.LFG(ps.xv,8),f.LFG(l8,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(uw),f.LFG(u8,8),f.LFG(c8,8),f.LFG(d8,8),f.LFG(mw,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function cO(){return(0,Yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,jr.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function p8(n,e){return n===e}j(9568);var st,g8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xa={},dO=dO||{},$t=g8||self;function cS(){}function dS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function yw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hO="closure_uid_"+(1e9*Math.random()>>>0),y8=0;function _8(n,e,t){return n.call.apply(n.bind,arguments)}function v8(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function zi(n,e,t){return(zi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_8:v8).apply(null,arguments)}function hS(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function fi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),c=2;c<arguments.length;c++)o[c-2]=arguments[c];return e.prototype[i].apply(r,o)}}function Ld(){this.s=this.s,this.o=this.o}Ld.prototype.s=!1,Ld.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function m8(n){Object.prototype.hasOwnProperty.call(n,hO)&&n[hO]||(n[hO]=++y8)}(this)},Ld.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kB=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function fO(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function RB(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(dS(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Gi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Gi.prototype.h=function(){this.defaultPrevented=!0};var w8=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",cS,e),$t.removeEventListener("test",cS,e)}catch{}return n}();function fS(n){return/^[\s\xa0]*$/.test(n)}var PB=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pO(n,e){return n<e?-1:n>e?1:0}function pS(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function Il(n){return-1!=pS().indexOf(n)}function gO(n){return gO[" "](n),n}function OB(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}gO[" "]=cS;var gS,n,E8=Il("Opera"),Gy=Il("Trident")||Il("MSIE"),NB=Il("Edge"),mO=NB||Gy,FB=Il("Gecko")&&!(-1!=pS().toLowerCase().indexOf("webkit")&&!Il("Edge"))&&!(Il("Trident")||Il("MSIE"))&&!Il("Edge"),I8=-1!=pS().toLowerCase().indexOf("webkit")&&!Il("Edge");function LB(){var n=$t.document;return n?n.documentMode:void 0}e:{var yO="",_O=(n=pS(),FB?/rv:([^\);]+)(\)|;)/.exec(n):NB?/Edge\/([\d\.]+)/.exec(n):Gy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):I8?/WebKit\/(\S+)/.exec(n):E8?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_O&&(yO=_O?_O[1]:""),Gy){var vO=LB();if(null!=vO&&vO>parseFloat(yO)){gS=String(vO);break e}}gS=yO}var C8={},T8=$t.document&&Gy&&(LB()||parseInt(gS,10))||void 0;function _w(n,e){if(Gi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(FB){e:{try{gO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:S8[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&_w.$.h.call(this)}}fi(_w,Gi);var S8={2:"touch",3:"pen",4:"mouse"};_w.prototype.h=function(){_w.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var vw="closure_listenable_"+(1e6*Math.random()|0),x8=0;function A8(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++x8,this.fa=this.ia=!1}function mS(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function wO(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function UB(n){const e={};for(const t in n)e[t]=n[t];return e}const BB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jB(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<BB.length;s++)t=BB[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function yS(n){this.src=n,this.g={},this.h=0}function EO(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=kB(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(mS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function IO(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}yS.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=IO(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new A8(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var CO="closure_lm_"+(1e6*Math.random()|0),DO={};function HB(n,e,t,r,i){if(r&&r.once)return zB(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)HB(n,e[s],t,r,i);return null}return t=AO(t),n&&n[vw]?n.O(e,t,yw(r)?!!r.capture:!!r,i):$B(n,e,t,!1,r,i)}function $B(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=yw(i)?!!i.capture:!!i,c=SO(n);if(c||(n[CO]=c=new yS(n)),(t=c.add(e,t,r,o,s)).proxy)return t;if(r=function M8(){const e=k8;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)w8||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(WB(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function zB(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)zB(n,e[s],t,r,i);return null}return t=AO(t),n&&n[vw]?n.P(e,t,yw(r)?!!r.capture:!!r,i):$B(n,e,t,!0,r,i)}function GB(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)GB(n,e[s],t,r,i);else r=yw(r)?!!r.capture:!!r,t=AO(t),n&&n[vw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=IO(s=n.g[e],t,r,i))&&(mS(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=SO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=IO(e,t,r,i)),(t=-1<n?e[n]:null)&&TO(t))}function TO(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[vw])EO(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(WB(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=SO(e))?(EO(t,n),0==t.h&&(t.src=null,e[CO]=null)):mS(n)}}}function WB(n){return n in DO?DO[n]:DO[n]="on"+n}function k8(n,e){if(n.fa)n=!0;else{e=new _w(e,this);var t=n.listener,r=n.la||n.src;n.ia&&TO(n),n=t.call(r,e)}return n}function SO(n){return(n=n[CO])instanceof yS?n:null}var xO="__closure_events_fn_"+(1e9*Math.random()>>>0);function AO(n){return"function"==typeof n?n:(n[xO]||(n[xO]=function(e){return n.handleEvent(e)}),n[xO])}function pi(){Ld.call(this),this.i=new yS(this),this.S=this,this.J=null}function Ai(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Gi(e,n);else if(e instanceof Gi)e.target=e.target||n;else{var i=e;jB(e=new Gi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=_S(o,r,!0,e)&&i}if(i=_S(o=e.g=n,r,!0,e)&&i,i=_S(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=_S(o=e.g=t[s],r,!1,e)&&i}function _S(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var c=o.listener,d=o.la||o.src;o.ia&&EO(n.i,o),i=!1!==c.call(d,r)&&i}}return i&&!r.defaultPrevented}fi(pi,Ld),pi.prototype[vw]=!0,pi.prototype.removeEventListener=function(n,e,t,r){GB(this,n,e,t,r)},pi.prototype.N=function(){if(pi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)mS(t[r]);delete n.g[e],n.h--}}this.J=null},pi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},pi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var MO=$t.JSON.stringify;function R8(){var n=KB;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kO,qB=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new O8,n=>n.reset());class O8{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function N8(n){$t.setTimeout(()=>{throw n},0)}function ZB(n,e){kO||function F8(){var n=$t.Promise.resolve(void 0);kO=function(){n.then(L8)}}(),RO||(kO(),RO=!0),KB.add(n,e)}var RO=!1,KB=new class P8{constructor(){this.h=this.g=null}add(e,t){const r=qB.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function L8(){for(var n;n=R8();){try{n.h.call(n.g)}catch(t){N8(t)}var e=qB;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}RO=!1}function vS(n,e){pi.call(this),this.h=n||1,this.g=e||$t,this.j=zi(this.qb,this),this.l=Date.now()}function PO(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function OO(n,e,t){if("function"==typeof n)t&&(n=zi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=zi(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function YB(n){n.g=OO(()=>{n.g=null,n.i&&(n.i=!1,YB(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}fi(vS,pi),(st=vS.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ai(this,"tick"),this.ga&&(PO(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){vS.$.N.call(this),PO(this),delete this.g};class V8 extends Ld{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:YB(this)}N(){super.N(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bw(n){Ld.call(this),this.h=n,this.g={}}fi(bw,Ld);var QB=[];function XB(n,e,t,r){Array.isArray(t)||(t&&(QB[0]=t.toString()),t=QB);for(var i=0;i<t.length;i++){var s=HB(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function JB(n){wO(n.g,function(e,t){this.g.hasOwnProperty(t)&&TO(e)},n),n.g={}}function bS(){this.g=!0}function Wy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function H8(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return MO(t)}catch{return e}}(n,t)+(r?" "+r:"")})}bw.prototype.N=function(){bw.$.N.call(this),JB(this)},bw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bS.prototype.Ea=function(){this.g=!1},bS.prototype.info=function(){};var Sp={},ej=null;function wS(){return ej=ej||new pi}function tj(n){Gi.call(this,Sp.Ta,n)}function ww(n){const e=wS();Ai(e,new tj(e))}function nj(n,e){Gi.call(this,Sp.STAT_EVENT,n),this.stat=e}function ys(n){const e=wS();Ai(e,new nj(e,n))}function rj(n,e){Gi.call(this,Sp.Ua,n),this.size=e}function Ew(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}Sp.Ta="serverreachability",fi(tj,Gi),Sp.STAT_EVENT="statevent",fi(nj,Gi),Sp.Ua="timingevent",fi(rj,Gi);var ES={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ij={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function NO(){}function oj(){}NO.prototype.h=null;var VO,Iw={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function FO(){Gi.call(this,"d")}function LO(){Gi.call(this,"c")}function IS(){}function Cw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new bw(this),this.P=$8,this.V=new vS(n=mO?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new aj}function aj(){this.i=null,this.g="",this.h=!1}fi(FO,Gi),fi(LO,Gi),fi(IS,NO),IS.prototype.g=function(){return new XMLHttpRequest},IS.prototype.i=function(){return{}},VO=new IS;var $8=45e3,UO={},CS={};function BO(n,e,t){n.L=1,n.v=xS(Qu(e)),n.s=t,n.S=!0,lj(n,null)}function lj(n,e){n.G=Date.now(),Dw(n),n.A=Qu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),_j(t.i,"t",r),n.C=0,t=n.l.I,n.h=new aj,n.g=Hj(n.l,t?e:null,!n.s),0<n.O&&(n.M=new V8(zi(n.Pa,n,n.g),n.O)),XB(n.U,n.g,"readystatechange",n.nb),e=n.I?UB(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),ww(),function U8(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",c=s.split("&"),d=0;d<c.length;d++){var g=c[d].split("=");if(1<g.length){var _=g[0];g=g[1];var w=_.split("_");o=2<=w.length&&"type"==w[1]?o+(_+"=")+g+"&":o+(_+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function uj(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function cj(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=z8(n,t),i==CS){4==e&&(n.o=4,ys(14),r=!1),Wy(n.j,n.m,null,"[Incomplete Response]");break}if(i==UO){n.o=4,ys(15),Wy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wy(n.j,n.m,i,null),jO(n,i)}uj(n)&&i!=CS&&i!=UO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ys(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),KO(e),e.L=!0,ys(11))):(Wy(n.j,n.m,t,"[Invalid Chunked Response]"),xp(n),Tw(n))}function z8(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?CS:(t=Number(e.substring(t,r)),isNaN(t)?UO:(r+=1)+t>e.length?CS:(e=e.substr(r,t),n.C=r+t,e))}function Dw(n){n.Y=Date.now()+n.P,dj(n,n.P)}function dj(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ew(zi(n.lb,n),e)}function DS(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function Tw(n){0==n.l.H||n.J||Vj(n.l,n)}function xp(n){DS(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,PO(n.V),JB(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function jO(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||HO(t.h,n)))if(!n.K&&HO(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;OS(t),RS(t)}ZO(t),ys(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=Ew(zi(t.ib,t),6e3));if(1>=wj(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Mp(t,11)}else if((n.K||t.g==n)&&OS(t),!fS(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(t.V=g[0],g=g[1],2==t.H)if("c"==g[0]){t.J=g[1],t.oa=g[2];const _=g[3];null!=_&&(t.qa=_,t.j.info("VER="+t.qa));const w=g[4];null!=w&&(t.Ga=w,t.j.info("SVER="+t.Ga));const T=g[5];null!=T&&"number"==typeof T&&0<T&&(t.K=r=1.5*T,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const S=n.g;if(S){const M=S.g?S.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(M){var s=r.h;s.g||-1==M.indexOf("spdy")&&-1==M.indexOf("quic")&&-1==M.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&($O(s,s.h),s.h=null))}if(r.F){const R=S.g?S.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(r.Da=R,sr(r.G,r.F,R))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=jj(r,r.I?r.oa:null,r.Y),o.K){Ej(r.h,o);var c=o,d=r.K;d&&c.setTimeout(d),c.B&&(DS(c),Dw(c)),r.g=o}else Fj(r);0<t.i.length&&PS(t)}else"stop"!=g[0]&&"close"!=g[0]||Mp(t,7);else 3==t.H&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?Mp(t,7):qO(t):"noop"!=g[0]&&t.l&&t.l.Aa(g),t.A=0)}ww()}catch{}}function hj(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dS(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function W8(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(dS(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function G8(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(dS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(st=Cw.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==Xu(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const _=Xu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>_)&&(3!=_||mO||this.g&&(this.h.h||this.g.ja()||Mj(this.g)))){this.J||4!=_||7==e||ww(),DS(this);var t=this.g.da();this.aa=t;t:if(uj(this)){var r=Mj(this.g);n="";var i=r.length,s=4==Xu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xp(this),Tw(this);var o="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function B8(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,_,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var c,d=this.g;if((c=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fS(c)){var g=c;break t}}g=null}if(!(t=g)){this.i=!1,this.o=3,ys(12),xp(this),Tw(this);break e}Wy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jO(this,t)}this.S?(cj(this,_,o),mO&&this.i&&3==_&&(XB(this.U,this.V,"tick",this.mb),this.V.start())):(Wy(this.j,this.m,o,null),jO(this,o)),4==_&&xp(this),this.i&&!this.J&&(4==_?Vj(this.l,this):(this.i=!1,Dw(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,ys(12)):(this.o=0,ys(13)),xp(this),Tw(this)}}}catch{}},st.mb=function(){if(this.g){var n=Xu(this.g),e=this.g.ja();this.C<e.length&&(DS(this),cj(this,n,e),this.i&&4!=n&&Dw(this))}},st.cancel=function(){this.J=!0,xp(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function j8(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ww(),ys(17)),xp(this),this.o=2,Tw(this)):dj(this,this.Y-n)};var fj=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ap(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ap){this.h=void 0!==e?e:n.h,TS(this,n.j),this.s=n.s,this.g=n.g,SS(this,n.m),this.l=n.l,e=n.i;var t=new Aw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),pj(this,t),this.o=n.o}else n&&(t=String(n).match(fj))?(this.h=!!e,TS(this,t[1]||"",!0),this.s=Sw(t[2]||""),this.g=Sw(t[3]||"",!0),SS(this,t[4]),this.l=Sw(t[5]||"",!0),pj(this,t[6]||"",!0),this.o=Sw(t[7]||"")):(this.h=!!e,this.i=new Aw(null,this.h))}function Qu(n){return new Ap(n)}function TS(n,e,t){n.j=t?Sw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function SS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function pj(n,e,t){e instanceof Aw?(n.i=e,function J8(n,e){e&&!n.j&&(Vd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(mj(this,r),_j(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=xw(e,Q8)),n.i=new Aw(e,n.h))}function sr(n,e,t){n.i.set(e,t)}function xS(n){return sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Sw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function xw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Z8),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Z8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ap.prototype.toString=function(){var n=[],e=this.j;e&&n.push(xw(e,gj,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(xw(e,gj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(xw(t,"/"==t.charAt(0)?Y8:K8,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",xw(t,X8)),n.join("")};var gj=/[#\/\?@]/g,K8=/[#\?:]/g,Y8=/[#\?]/g,Q8=/[#\?@]/g,X8=/#/g;function Aw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Vd(n){n.g||(n.g=new Map,n.h=0,n.i&&function q8(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function mj(n,e){Vd(n),e=qy(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function yj(n,e){return Vd(n),e=qy(n,e),n.g.has(e)}function _j(n,e,t){mj(n,e),0<t.length&&(n.i=null,n.g.set(qy(n,e),fO(t)),n.h+=t.length)}function qy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function vj(n){this.l=n||t7,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ka&&$t.g.Ka()&&$t.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=Aw.prototype).add=function(n,e){Vd(this),this.i=null,n=qy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){Vd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.sa=function(){Vd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},st.Z=function(n){Vd(this);let e=[];if("string"==typeof n)yj(this,n)&&(e=e.concat(this.g.get(qy(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return Vd(this),this.i=null,yj(this,n=qy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var t7=10;function bj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wj(n){return n.h?1:n.g?n.g.size:0}function HO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $O(n,e){n.g?n.g.add(e):n.h=e}function Ej(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ij(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return fO(n.i)}function zO(){}function n7(){this.g=new zO}function r7(n,e,t){const r=t||"";try{hj(n,function(i,s){let o=i;yw(i)&&(o=MO(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function AS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Mw(n){this.l=n.fc||null,this.j=n.ob||!1}function MS(n,e){pi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=GO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vj.prototype.cancel=function(){if(this.i=Ij(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},zO.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},zO.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},fi(Mw,NO),Mw.prototype.g=function(){return new MS(this.l,this.j)},Mw.prototype.i=function(n){return function(){return n}}({}),fi(MS,pi);var GO=0;function Cj(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function kw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Rw(n)}function Rw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=MS.prototype).open=function(n,e){if(this.readyState!=GO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Rw(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||$t).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kw(this)),this.readyState=GO},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Rw(this)),this.g&&(this.readyState=3,Rw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cj(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kw(this):Rw(this),3==this.readyState&&Cj(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,kw(this))},st.Ya=function(n){this.g&&(this.response=n,kw(this))},st.ka=function(){this.g&&kw(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(MS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var s7=$t.JSON.parse;function Dr(n){pi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Dj,this.L=this.M=!1}fi(Dr,pi);var Dj="",o7=/^https?$/i,a7=["POST","PUT"];function Tj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Sj(n),kS(n)}function Sj(n){n.F||(n.F=!0,Ai(n,"complete"),Ai(n,"error"))}function xj(n){if(n.h&&typeof dO<"u"&&(!n.C[1]||4!=Xu(n)||2!=n.da()))if(n.v&&4==Xu(n))OO(n.La,0,n);else if(Ai(n,"readystatechange"),4==Xu(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(fj)[1]||null;if(!i&&$t.self&&$t.self.location){var s=$t.self.location.protocol;i=s.substr(0,s.length-1)}r=!o7.test(i?i.toLowerCase():"")}t=r}if(t)Ai(n,"complete"),Ai(n,"success");else{n.m=6;try{var o=2<Xu(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",Sj(n)}}finally{kS(n)}}}function kS(n,e){if(n.g){Aj(n);const t=n.g,r=n.C[0]?cS:null;n.g=null,n.C=null,e||Ai(n,"ready");try{t.onreadystatechange=r}catch{}}}function Aj(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function Xu(n){return n.g?n.g.readyState:0}function Mj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Dj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function kj(n){let e="";return wO(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function WO(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=kj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):sr(n,e,t))}function Pw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Rj(n){this.Ga=0,this.i=[],this.j=new bS,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pw("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pw("baseRetryDelayMs",5e3,n),this.hb=Pw("retryDelaySeedMs",1e4,n),this.eb=Pw("forwardChannelMaxRetries",2,n),this.xa=Pw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new vj(n&&n.concurrentRequestLimit),this.Ja=new n7,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function qO(n){if(Pj(n),3==n.H){var e=n.W++,t=Qu(n.G);sr(t,"SID",n.J),sr(t,"RID",e),sr(t,"TYPE","terminate"),Ow(n,t),(e=new Cw(n,n.j,e,void 0)).L=2,e.v=xS(Qu(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=Hj(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Dw(e)}Bj(n)}function RS(n){n.g&&(KO(n),n.g.cancel(),n.g=null)}function Pj(n){RS(n),n.u&&($t.clearTimeout(n.u),n.u=null),OS(n),n.h.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function PS(n){bj(n.h)||n.m||(n.m=!0,ZB(n.Na,n),n.C=0)}function Oj(n,e){var t;t=e?e.m:n.W++;const r=Qu(n.G);sr(r,"SID",n.J),sr(r,"RID",t),sr(r,"AID",n.V),Ow(n,r),n.o&&n.s&&WO(r,n.o,n.s),t=new Cw(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=Nj(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),$O(n.h,t),BO(t,r,e)}function Ow(n,e){n.ma&&wO(n.ma,function(t,r){sr(e,r,t)}),n.l&&hj({},function(t,r){sr(e,r,t)})}function Nj(n,e,t){t=Math.min(n.i.length,t);var r=n.l?zi(n.l.Va,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let c=!0;for(let d=0;d<t;d++){let g=i[d].h;const _=i[d].g;if(g-=s,0>g)s=Math.max(0,i[d].h-100),c=!1;else try{r7(_,o,"req"+g+"_")}catch{r&&r(_)}}if(c){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function Fj(n){n.g||n.u||(n.ba=1,ZB(n.Ma,n),n.A=0)}function ZO(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ew(zi(n.Ma,n),Uj(n,n.A)),n.A++,0))}function KO(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function Lj(n){n.g=new Cw(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Qu(n.wa);sr(e,"RID","rpc"),sr(e,"SID",n.J),sr(e,"CI",n.M?"0":"1"),sr(e,"AID",n.V),sr(e,"TYPE","xmlhttp"),Ow(n,e),n.o&&n.s&&WO(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=xS(Qu(e)),t.s=null,t.S=!0,lj(t,n)}function OS(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function Vj(n,e){var t=null;if(n.g==e){OS(n),KO(n),n.g=null;var r=2}else{if(!HO(n.h,e))return;t=e.F,Ej(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ai(r=wS(),new rj(r,t)),PS(n)}else Fj(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function u7(n,e){return!(wj(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ew(zi(n.Na,n,e),Uj(n,n.C)),n.C++,0)))}(n,e)||2==r&&ZO(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Mp(n,5);break;case 4:Mp(n,10);break;case 3:Mp(n,6);break;default:Mp(n,2)}}function Uj(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Mp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=zi(n.pb,n);t||(t=new Ap("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||TS(t,"https"),xS(t)),function i7(n,e){const t=new bS;if($t.Image){const r=new Image;r.onload=hS(AS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hS(AS,t,r,"TestLoadImage: error",!1,e),r.onabort=hS(AS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hS(AS,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ys(2);n.H=0,n.l&&n.l.za(e),Bj(n),Pj(n)}function Bj(n){if(n.H=0,n.pa=[],n.l){const e=Ij(n.h);(0!=e.length||0!=n.i.length)&&(RB(n.pa,e),RB(n.pa,n.i),n.h.i.length=0,fO(n.i),n.i.length=0),n.l.ya()}}function jj(n,e,t){var r=t instanceof Ap?Qu(t):new Ap(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),SS(r,r.m);else{var i=$t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ap(null,void 0);r&&TS(s,r),e&&(s.g=e),i&&SS(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&sr(r,t,e),sr(r,"VER",n.qa),Ow(n,r),r}function Hj(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dr(t&&n.Ha&&!n.va?new Mw({ob:!0}):n.va)).Oa(n.I),e}function $j(){}function NS(){if(Gy&&!(10<=Number(T8)))throw Error("Environmental error: no available transport.")}function lo(n,e){pi.call(this),this.g=new Rj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!fS(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fS(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Zy(this)}function zj(n){FO.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Gj(){LO.call(this),this.status=1}function Zy(n){this.g=n}function Aa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function YO(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function xn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(st=Dr.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():VO.g(),this.C=function sj(n){return n.h||(n.h=n.i())}(this.u?this.u:VO),this.g.onreadystatechange=zi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void Tj(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=$t.FormData&&n instanceof $t.FormData,!(0<=kB(a7,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Aj(this),0<this.B&&((this.L=function l7(n){return Gy&&function D8(){return OB(C8,9,function(){let n=0;const e=PB(String(gS)).split("."),t=PB("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=pO(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||pO(0==i[2].length,0==s[2].length)||pO(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zi(this.ua,this)):this.A=OO(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Tj(this,s)}},st.ua=function(){typeof dO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ai(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ai(this,"complete"),Ai(this,"abort"),kS(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kS(this,!0)),Dr.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?xj(this):this.kb())},st.kb=function(){xj(this)},st.da=function(){try{return 2<Xu(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),s7(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=Rj.prototype).qa=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Cw(this,this.j,n,void 0);let s=this.s;if(this.U&&(s?(s=UB(s),jB(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Nj(this,i,e),sr(t=Qu(this.G),"RID",n),sr(t,"CVER",22),this.F&&sr(t,"X-HTTP-Session-Id",this.F),Ow(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(kj(s)))+"&"+e:this.o&&WO(t,this.o,s)),$O(this.h,i),this.bb&&sr(t,"TYPE","init"),this.P?(sr(t,"$req",e),sr(t,"SID","null"),i.ba=!0,BO(i,t,null)):BO(i,t,e),this.H=2}}else 3==this.H&&(n?Oj(this,n):0==this.i.length||bj(this.h)||Oj(this))},st.Ma=function(){if(this.u=null,Lj(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Ew(zi(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,ys(10),RS(this),Lj(this))},st.ib=function(){null!=this.v&&(this.v=null,RS(this),ZO(this),ys(19))},st.pb=function(n){n?(this.j.info("Successfully pinged google.com"),ys(2)):(this.j.info("Failed to ping google.com"),ys(1))},(st=$j.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.Va=function(){},NS.prototype.g=function(n,e){return new lo(n,e)},fi(lo,pi),lo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;ys(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=jj(n,null,n.Y),PS(n)},lo.prototype.close=function(){qO(this.g)},lo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=MO(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&PS(e)},lo.prototype.N=function(){this.g.l=null,delete this.j,qO(this.g),delete this.g,lo.$.N.call(this)},fi(zj,FO),fi(Gj,LO),fi(Zy,$j),Zy.prototype.Ba=function(){Ai(this.g,"a")},Zy.prototype.Aa=function(n){Ai(this.g,new zj(n))},Zy.prototype.za=function(n){Ai(this.g,new Gj)},Zy.prototype.ya=function(){Ai(this.g,"b")},fi(Aa,function c7(){this.blockSize=-1}),Aa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Aa.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)YO(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){YO(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){YO(this,r),i=0;break}}this.h=i,this.i+=e},Aa.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var d7={};function QO(n){return-128<=n&&128>n?OB(d7,n,function(e){return new xn([0|e],0>e?-1:0)}):new xn([0|n],0>n?-1:0)}function Cl(n){if(isNaN(n)||!isFinite(n))return Ky;if(0>n)return Mi(Cl(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=XO;return new xn(e,0)}var XO=4294967296,Ky=QO(0),JO=QO(1),qj=QO(16777216);function Ju(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Bo(n){return-1==n.h}function Mi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new xn(t,~n.h).add(JO)}function FS(n,e){return n.add(Mi(e))}function LS(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Nw(n,e){this.g=n,this.h=e}function VS(n,e){if(Ju(e))throw Error("division by zero");if(Ju(n))return new Nw(Ky,Ky);if(Bo(n))return e=VS(Mi(n),e),new Nw(Mi(e.g),Mi(e.h));if(Bo(e))return e=VS(n,Mi(e)),new Nw(Mi(e.g),e.h);if(30<n.g.length){if(Bo(n)||Bo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=JO,r=e;0>=r.X(n);)t=Zj(t),r=Zj(r);var i=Yy(t,1),s=Yy(r,1);for(r=Yy(r,2),t=Yy(t,2);!Ju(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Yy(r,1),t=Yy(t,1)}return e=FS(n,i.R(e)),new Nw(i,e)}for(i=Ky;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Cl(t)).R(e);Bo(o)||0<o.X(n);)o=(s=Cl(t-=r)).R(e);Ju(s)&&(s=JO),i=i.add(s),n=FS(n,o)}return new Nw(i,n)}function Zj(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new xn(t,n.h)}function Yy(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new xn(i,n.h)}(st=xn.prototype).ea=function(){if(Bo(this))return-Mi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:XO+r)*e,e*=XO}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ju(this))return"0";if(Bo(this))return"-"+Mi(this).toString(n);for(var e=Cl(Math.pow(n,6)),t=this,r="";;){var i=VS(t,e).g,s=((0<(t=FS(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ju(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return Bo(n=FS(this,n))?-1:Ju(n)?0:1},st.abs=function(){return Bo(this)?Mi(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new xn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(Ju(this)||Ju(n))return Ky;if(Bo(this))return Bo(n)?Mi(this).R(Mi(n)):Mi(Mi(this).R(n));if(Bo(n))return Mi(this.R(Mi(n)));if(0>this.X(qj)&&0>n.X(qj))return Cl(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),c=n.D(i)>>>16,d=65535&n.D(i);t[2*r+2*i]+=o*d,LS(t,2*r+2*i),t[2*r+2*i+1]+=s*d,LS(t,2*r+2*i+1),t[2*r+2*i+1]+=o*c,LS(t,2*r+2*i+1),t[2*r+2*i+2]+=s*c,LS(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new xn(t,0)},st.gb=function(n){return VS(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new xn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new xn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new xn(t,this.h^n.h)},NS.prototype.createWebChannel=NS.prototype.g,lo.prototype.send=lo.prototype.u,lo.prototype.open=lo.prototype.m,lo.prototype.close=lo.prototype.close,ES.NO_ERROR=0,ES.TIMEOUT=8,ES.HTTP_ERROR=6,ij.COMPLETE="complete",oj.EventType=Iw,Iw.OPEN="a",Iw.CLOSE="b",Iw.ERROR="c",Iw.MESSAGE="d",pi.prototype.listen=pi.prototype.O,Dr.prototype.listenOnce=Dr.prototype.P,Dr.prototype.getLastError=Dr.prototype.Sa,Dr.prototype.getLastErrorCode=Dr.prototype.Ia,Dr.prototype.getStatus=Dr.prototype.da,Dr.prototype.getResponseJson=Dr.prototype.Wa,Dr.prototype.getResponseText=Dr.prototype.ja,Dr.prototype.send=Dr.prototype.ha,Dr.prototype.setWithCredentials=Dr.prototype.Oa,Aa.prototype.digest=Aa.prototype.l,Aa.prototype.reset=Aa.prototype.reset,Aa.prototype.update=Aa.prototype.j,xn.prototype.add=xn.prototype.add,xn.prototype.multiply=xn.prototype.R,xn.prototype.modulo=xn.prototype.gb,xn.prototype.compare=xn.prototype.X,xn.prototype.toNumber=xn.prototype.ea,xn.prototype.toString=xn.prototype.toString,xn.prototype.getBits=xn.prototype.D,xn.fromNumber=Cl,xn.fromString=function Wj(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Mi(Wj(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Cl(Math.pow(e,8)),r=Ky,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=Cl(Math.pow(e,s)),r=r.R(s).add(Cl(o))):r=(r=r.R(t)).add(Cl(o))}return r};var h7=xa.createWebChannelTransport=function(){return new NS},f7=xa.getStatEventTarget=function(){return wS()},eN=xa.ErrorCode=ES,p7=xa.EventType=ij,g7=xa.Event=Sp,Kj=xa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},m7=xa.FetchXmlHttpFactory=Mw,US=xa.WebChannel=oj,y7=xa.XhrIo=Dr,_7=xa.Md5=Aa,Qy=xa.Integer=xn;const Yj="@firebase/firestore";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let Xy="9.22.0";const Ud=new Ta.Yd("@firebase/firestore");function tN(){return Ud.logLevel}function Fe(n,...e){if(Ud.logLevel<=Ta.in.DEBUG){const t=e.map(nN);Ud.debug(`Firestore (${Xy}): ${n}`,...t)}}function Fr(n,...e){if(Ud.logLevel<=Ta.in.ERROR){const t=e.map(nN);Ud.error(`Firestore (${Xy}): ${n}`,...t)}}function jo(n,...e){if(Ud.logLevel<=Ta.in.WARN){const t=e.map(nN);Ud.warn(`Firestore (${Xy}): ${n}`,...t)}}function nN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Xy}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function wt(n,e){n||lt()}function et(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends at.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ei{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Qj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class E7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class I7{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let o=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ei,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const g=o;e.enqueueRetryable((0,Q.Z)(function*(){yield g.promise,yield s(r.currentUser)}))},d=g=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ei)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new Qj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new gi(e)}}class C7{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class D7{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new C7(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T7{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new Xj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function S7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Jj{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=S7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Jy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function eH(n){return n+"\0"}class or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new or(0,0))}static max(){return new Et(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fw{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Fw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends Fw{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const x7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends Fw{construct(e,t,r){return new Tr(e,t,r)}static isValidIdentifier(e){return x7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new De(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new De(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if("\\"!==d&&"."!==d&&"`"!==d)throw new De(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else"`"===c?(o=!o,i++):"."!==c||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new De(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(t)}static emptyPath(){return new Tr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(mn.fromString(e))}static fromName(e){return new Qe(mn.fromString(e).popFirst(5))}static empty(){return new Qe(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new mn(e.slice()))}}class BS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rN(n){return n.fields.find(e=>2===e.kind)}function kp(n){return n.fields.filter(e=>2!==e.kind)}BS.UNKNOWN_ID=-1;class jS{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lw(0,uo.min())}}function tH(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(1e9===r?new or(t+1,0):new or(t,r));return new uo(i,Qe.empty(),e)}function nH(n){return new uo(n.readTime,n.key,-1)}class uo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new uo(Et.min(),Qe.empty(),-1)}static max(){return new uo(Et.max(),Qe.empty(),-1)}}function iN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}const rH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bd(n){return sN.apply(this,arguments)}function sN(){return sN=(0,Q.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==rH)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),sN.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},d=>r(d))}),o=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let d=0;d<s;d++){const g=d;t(e[g]).next(_=>{o[g]=_,++c,c===s&&r(o)},_=>i(_))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class HS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ei,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Vw(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=oN(r.target.error);this.v.reject(new Vw(e,i))}}static open(e,t,r,i){try{return new HS(t,e.transaction(i,r))}catch(s){throw new Vw(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new R7(t)}}class Ma{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Ma.S((0,at.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Rp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,at.hl)())return!1;if(Ma.C())return!0;const e=(0,at.z$)(),t=Ma.S(e),r=0<t&&t<10,i=Ma.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Q.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Vw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;i("VersionError"===c.name?new De(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new De(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new Vw(e,c))},s.onupgradeneeded=o=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.V.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Q.Z)(function*(){const o="readonly"===t;let c=0;for(;;){++c;try{s.db=yield s.$(e);const d=HS.open(s.db,e,o?"readonly":"readwrite",r),g=i(d).next(_=>(d.P(),_)).catch(_=>(d.abort(_),oe.reject(_))).toPromise();return g.catch(()=>{}),yield d.R,g}catch(d){const g=d,_="FirebaseError"!==g.name&&c<3;if(Fe("SimpleDb","Transaction failed with error:",g.message,"Retrying:",_),s.close(),!_)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class k7{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Rp(this.L.delete())}}class Vw extends De{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function jd(n){return"IndexedDbTransactionError"===n.name}class R7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rp(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Rp(this.store.add(e))}get(e){return Rp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Rp(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Rp(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(o,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new oe((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,o,c)=>c.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=s=>{const o=oN(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(c=>{c?o.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const d=new k7(c),g=t(c.primaryKey,c.value,d);if(g instanceof oe){const _=g.catch(w=>(d.done(),oe.reject(w)));r.push(_)}d.isDone?i():null===d.K?c.continue():c.continue(d.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rp(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=oN(r.target.error);t(i)}})}let sH=!1;function oN(n){const e=Ma.S((0,at.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sH||(sH=!0,setTimeout(()=>{throw r},0)),r}}return n}class P7{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Q.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){jd(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Bd(r)}yield t.et(6e4)}))}}class O7{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Q.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return oe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Fe("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,i).next(c=>{i-=c,r.add(o)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(i,s)).next(c=>(Fe("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>o.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=nH(s);iN(o,r)>0&&(r=o)}),new uo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let co=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Uw(n){return null==n}function Bw(n){return 0===n&&1/n==-1/0}function oH(n){return"number"==typeof n&&Number.isInteger(n)&&!Bw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Wi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aH(e)),e=N7(n.get(t),e);return aH(e)}function N7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function aH(n){return n+"\x01\x01"}function Dl(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&lt(),n.charAt(o+1)){case"\x01":const c=n.substring(s,o);let d;0===i.length?d=c:(i+=c,d=i,i=""),r.push(d);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:lt()}s=o+2}return new mn(r)}const lH=["userId","batchId"];function $S(n,e){return[n,Wi(e)]}function uH(n,e,t){return[n,Wi(e),t]}const F7={},L7=["prefixPath","collectionGroup","readTime","documentId"],V7=["prefixPath","collectionGroup","documentId"],U7=["collectionGroup","readTime","prefixPath","documentId"],B7=["canonicalId","targetId"],j7=["targetId","path"],H7=["path","targetId"],$7=["collectionId","parent"],z7=["indexId","uid"],G7=["uid","sequenceNumber"],W7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],q7=["indexId","uid","orderedDocumentKey"],Z7=["userId","collectionPath","documentId"],K7=["userId","collectionPath","largestBatchId"],Y7=["userId","collectionGroup","largestBatchId"],cH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Q7=[...cH,"documentOverlays"],dH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hH=dH,X7=[...hH,"indexConfiguration","indexState","indexEntries"];class aN extends iH{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function mi(n,e){const t=et(n);return Ma.M(t.ht,e)}function fH(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jn{constructor(e,t){this.comparator=e,this.root=t||ki.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zS(this.root,e,this.comparator,!1)}getReverseIterator(){return new zS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zS(this.root,e,this.comparator,!0)}}class zS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ki.RED,this.left=i??ki.EMPTY,this.right=s??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ki(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ki.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1,ki.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ki(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gH(this.data.getIterator())}getIteratorFrom(e){return new gH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class gH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function e_(n){return n.hasNext()?n.getNext():void 0}class Bs{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new Bs([])}unionWith(e){let t=new qn(Tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class mH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ti{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new mH("Invalid base64 string: "+i):i}}(e);return new ti(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ti(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ti.EMPTY_BYTE_STRING=new ti("");const eZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $d(n){if(wt(!!n),"string"==typeof n){let e=0;const t=eZ.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ec(n){return"string"==typeof n?ti.fromBase64String(n):ti.fromUint8Array(n)}function GS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function WS(n){const e=n.mapValue.fields.__previous_value__;return GS(e)?WS(e):e}function jw(n){const e=$d(n.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}class tZ{constructor(e,t,r,i,s,o,c,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=g}}class zd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zd&&e.projectId===this.projectId&&e.database===this.database}}const Gd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qS={nullValue:"NULL_VALUE"};function Wd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?GS(n)?4:bH(n)?9007199254740991:10:lt()}function Tl(n,e){if(n===e)return!0;const t=Wd(n);if(t!==Wd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jw(n).isEqual(jw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=$d(r.timestampValue),o=$d(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ec(n.bytesValue).isEqual(ec(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Sr(r.geoPointValue.latitude)===Sr(i.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Sr(r.integerValue)===Sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Sr(r.doubleValue),o=Sr(i.doubleValue);return s===o?Bw(s)===Bw(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Jy(n.arrayValue.values||[],e.arrayValue.values||[],Tl);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(fH(s)!==fH(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===o[c]||!Tl(s[c],o[c])))return!1;return!0}(n,e);default:return lt()}var i}function Hw(n,e){return void 0!==(n.values||[]).find(t=>Tl(t,e))}function qd(n,e){if(n===e)return 0;const t=Wd(n),r=Wd(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Sr(i.integerValue||i.doubleValue),c=Sr(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(n,e);case 3:return yH(n.timestampValue,e.timestampValue);case 4:return yH(jw(n),jw(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,s){const o=ec(i),c=ec(s);return o.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const g=Ht(o[d],c[d]);if(0!==g)return g}return Ht(o.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Ht(Sr(i.latitude),Sr(s.latitude));return 0!==o?o:Ht(Sr(i.longitude),Sr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],c=s.values||[];for(let d=0;d<o.length&&d<c.length;++d){const g=qd(o[d],c[d]);if(g)return g}return Ht(o.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Gd.mapValue&&s===Gd.mapValue)return 0;if(i===Gd.mapValue)return 1;if(s===Gd.mapValue)return-1;const o=i.fields||{},c=Object.keys(o),d=s.fields||{},g=Object.keys(d);c.sort(),g.sort();for(let _=0;_<c.length&&_<g.length;++_){const w=Ht(c[_],g[_]);if(0!==w)return w;const T=qd(o[c[_]],d[g[_]]);if(0!==T)return T}return Ht(c.length,g.length)}(n.mapValue,e.mapValue);default:throw lt()}}function yH(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=$d(n),r=$d(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function t_(n){return lN(n)}function lN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=$d(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ec(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=lN(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${lN(r.fields[c])}`;return s+"}"}(n.mapValue):lt();var e}function Pp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uN(n){return!!n&&"integerValue"in n}function $w(n){return!!n&&"arrayValue"in n}function _H(n){return!!n&&"nullValue"in n}function vH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function KS(n){return!!n&&"mapValue"in n}function zw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function nZ(n){return"nullValue"in n?qS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pp(zd.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function rZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pp(zd.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Gd:lt()}function wH(n,e){const t=qd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function EH(n,e){const t=qd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!KS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zw(t)}setAll(e){let t=Tr.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=zw(o):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());KS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];KS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ri(zw(this.value))}}function IH(n){const e=[];return Hd(n.fields,(t,r)=>{const i=new Tr([t]);if(KS(r)){const s=IH(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Bs(e)}class Zn{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Zn(e,0,Et.min(),Et.min(),Et.min(),Ri.empty(),0)}static newFoundDocument(e,t,r,i){return new Zn(e,1,t,Et.min(),r,i,0)}static newNoDocument(e,t){return new Zn(e,2,t,Et.min(),Et.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new Zn(e,3,t,Et.min(),Et.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zd{constructor(e,t){this.position=e,this.inclusive=t}}function CH(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Qe.comparator(Qe.fromName(o.referenceValue),t.key):qd(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function DH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tl(n.position[t],e.position[t]))return!1;return!0}class n_{constructor(e,t="asc"){this.field=e,this.dir=t}}function iZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class TH{}class hn extends TH{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new sZ(e,t,r):"array-contains"===t?new lZ(e,r):"in"===t?new RH(e,r):"not-in"===t?new uZ(e,r):"array-contains-any"===t?new cZ(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new oZ(e,r):new aZ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qd(t,this.value)):null!==t&&Wd(this.value)===Wd(t)&&this.matchesComparison(qd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class An extends TH{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new An(e,t)}matches(e){return r_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function r_(n){return"and"===n.op}function cN(n){return"or"===n.op}function dN(n){return SH(n)&&r_(n)}function SH(n){for(const e of n.filters)if(e instanceof An)return!1;return!0}function hN(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+t_(n.value);if(dN(n))return n.filters.map(e=>hN(e)).join(",");{const e=n.filters.map(t=>hN(t)).join(",");return`${n.op}(${e})`}}function xH(n,e){return n instanceof hn?(t=n,(r=e)instanceof hn&&t.op===r.op&&t.field.isEqual(r.field)&&Tl(t.value,r.value)):n instanceof An?function(t,r){return r instanceof An&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&xH(s,r.filters[o]),!0)}(n,e):void lt();var t,r}function AH(n,e){const t=n.filters.concat(e);return An.create(t,n.op)}function MH(n){return n instanceof hn?`${(e=n).field.canonicalString()} ${e.op} ${t_(e.value)}`:n instanceof An?function(e){return e.op.toString()+" {"+e.getFilters().map(MH).join(" ,")+"}"}(n):"Filter";var e}class sZ extends hn{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class oZ extends hn{constructor(e,t){super(e,"in",t),this.keys=kH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aZ extends hn{constructor(e,t){super(e,"not-in",t),this.keys=kH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class lZ extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $w(t)&&Hw(t.arrayValue,this.value)}}class RH extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hw(this.value.arrayValue,t)}}class uZ extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hw(this.value.arrayValue,t)}}class cZ extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$w(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hw(this.value.arrayValue,r))}}class dZ{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.dt=null}}function fN(n,e=null,t=[],r=[],i=null,s=null,o=null){return new dZ(n,e,t,r,i,s,o)}function Op(n){const e=et(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>hN(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Uw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>t_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>t_(r)).join(",")),e.dt=t}return e.dt}function Gw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DH(n.startAt,e.startAt)&&DH(n.endAt,e.endAt)}function YS(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function QS(n,e){return n.filters.filter(t=>t instanceof hn&&t.field.isEqual(e))}function PH(n,e,t){let r=qS,i=!0;for(const s of QS(n,e)){let o=qS,c=!0;switch(s.op){case"<":case"<=":o=nZ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,c=!1;break;case"!=":case"not-in":o=qS}wH({value:r,inclusive:i},{value:o,inclusive:c})<0&&(r=o,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];wH({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function OH(n,e,t){let r=Gd,i=!0;for(const s of QS(n,e)){let o=Gd,c=!0;switch(s.op){case">=":case">":o=rZ(s.value),c=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,c=!1;break;case"!=":case"not-in":o=Gd}EH({value:r,inclusive:i},{value:o,inclusive:c})>0&&(r=o,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];EH({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class tc{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=d,this.wt=null,this._t=null}}function NH(n,e,t,r,i,s,o,c){return new tc(n,e,t,r,i,s,o,c)}function i_(n){return new tc(n)}function FH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function XS(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function gN(n){return null!==n.collectionGroup}function Np(n){const e=et(n);if(null===e.wt){e.wt=[];const t=XS(e),r=pN(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new n_(t)),e.wt.push(new n_(Tr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new n_(Tr.keyField(),s))}}}return e.wt}function _s(n){const e=et(n);if(!e._t)if("F"===e.limitType)e._t=fN(e.path,e.collectionGroup,Np(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Np(e))t.push(new n_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Zd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Zd(e.startAt.position,e.startAt.inclusive):null;e._t=fN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function mN(n,e){e.getFirstInequalityField(),XS(n);const t=n.filters.concat([e]);return new tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function JS(n,e,t){return new tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ww(n,e){return Gw(_s(n),_s(e))&&n.limitType===e.limitType}function LH(n){return`${Op(_s(n))}|lt:${n.limitType}`}function yN(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>MH(r)).join(", ")}]`),Uw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>t_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>t_(r)).join(",")),`Target(${t})`}(_s(n))}; limitType=${n.limitType})`}function qw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Np(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const c=CH(i,s,o);return i.inclusive?c<=0:c<0}(t.startAt,Np(t),r)||t.endAt&&!function(i,s,o){const c=CH(i,s,o);return i.inclusive?c>=0:c>0}(t.endAt,Np(t),r)));var t,r}function VH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UH(n){return(e,t)=>{let r=!1;for(const i of Np(n)){const s=hZ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function hZ(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,s,o){const c=s.data.field(i),d=o.data.field(i);return null!==c&&null!==d?qd(c,d):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}class nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pH(this.inner)}size(){return this.innerSize}}const fZ=new jn(Qe.comparator);function js(){return fZ}const BH=new jn(Qe.comparator);function Zw(...n){let e=BH;for(const t of n)e=e.insert(t.key,t);return e}function jH(n){let e=BH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Sl(){return Kw()}function HH(){return Kw()}function Kw(){return new nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const pZ=new jn(Qe.comparator),gZ=new qn(Qe.comparator);function qt(...n){let e=gZ;for(const t of n)e=e.add(t);return e}const mZ=new qn(Ht);function _N(){return mZ}function $H(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bw(e)?"-0":e}}function zH(n){return{integerValue:""+n}}function GH(n,e){return oH(e)?zH(e):$H(n,e)}class ex{constructor(){this._=void 0}}function yZ(n,e,t){return n instanceof s_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&GS(i)&&(i=WS(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Fp?qH(n,e):n instanceof Lp?ZH(n,e):function(r,i){const s=WH(r,i),o=KH(s)+KH(r.gt);return uN(s)&&uN(r.gt)?zH(o):$H(r.serializer,o)}(n,e)}function _Z(n,e,t){return n instanceof Fp?qH(n,e):n instanceof Lp?ZH(n,e):t}function WH(n,e){return n instanceof o_?uN(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class s_ extends ex{}class Fp extends ex{constructor(e){super(),this.elements=e}}function qH(n,e){const t=YH(e);for(const r of n.elements)t.some(i=>Tl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Lp extends ex{constructor(e){super(),this.elements=e}}function ZH(n,e){let t=YH(e);for(const r of n.elements)t=t.filter(i=>!Tl(i,r));return{arrayValue:{values:t}}}class o_ extends ex{constructor(e,t){super(),this.serializer=e,this.gt=t}}function KH(n){return Sr(n.integerValue||n.doubleValue)}function YH(n){return $w(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Yw{constructor(e,t){this.field=e,this.transform=t}}class bZ{constructor(e,t){this.version=e,this.transformResults=t}}class ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tx(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class nx{}function QH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new l_(n.key,ar.none()):new a_(n.key,n.data,ar.none());{const t=n.data,r=Ri.empty();let i=new qn(Tr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new rc(n.key,r,new Bs(i.toArray()),ar.none())}}function wZ(n,e,t){n instanceof a_?function(r,i,s){const o=r.value.clone(),c=e$(r.fieldTransforms,i,s.transformResults);o.setAll(c),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof rc?function(r,i,s){if(!tx(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=e$(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(JH(r)),c.setAll(o),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qw(n,e,t,r){return n instanceof a_?function(i,s,o,c){if(!tx(i.precondition,s))return o;const d=i.value.clone(),g=t$(i.fieldTransforms,c,s);return d.setAll(g),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof rc?function(i,s,o,c){if(!tx(i.precondition,s))return o;const d=t$(i.fieldTransforms,c,s),g=s.data;return g.setAll(JH(i)),g.setAll(d),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(_=>_.field))}(n,e,t,r):(o=t,tx(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function EZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=WH(r.transform,i||null);null!=s&&(null===t&&(t=Ri.empty()),t.set(r.field,s))}return t||null}function XH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Jy(t,r,(i,s)=>function vZ(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Fp&&r instanceof Fp||t instanceof Lp&&r instanceof Lp?Jy(t.elements,r.elements,Tl):t instanceof o_&&r instanceof o_?Tl(t.gt,r.gt):t instanceof s_&&r instanceof s_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class a_ extends nx{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class rc extends nx{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function JH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function e$(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,_Z(o,c,t[i]))}return r}function t$(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,yZ(s,o,e))}return r}class l_ extends nx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vN extends nx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&wZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=HH();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;const d=QH(o,c);null!==d&&r.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&Jy(this.mutations,e.mutations,(t,r)=>XH(t,r))&&Jy(this.baseMutations,e.baseMutations,(t,r)=>XH(t,r))}}class wN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=pZ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new wN(e,t,r,i)}}class EN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class CZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var zr,yn;function n$(n){switch(n){default:return lt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function r$(n){if(void 0===n)return Fr("GRPC error has no .code"),le.UNKNOWN;switch(n){case zr.OK:return le.OK;case zr.CANCELLED:return le.CANCELLED;case zr.UNKNOWN:return le.UNKNOWN;case zr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case zr.INTERNAL:return le.INTERNAL;case zr.UNAVAILABLE:return le.UNAVAILABLE;case zr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case zr.NOT_FOUND:return le.NOT_FOUND;case zr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case zr.ABORTED:return le.ABORTED;case zr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case zr.DATA_LOSS:return le.DATA_LOSS;default:return lt()}}(yn=zr||(zr={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class IN{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return rx}static getOrCreateInstance(){return null===rx&&(rx=new IN),rx}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let rx=null;function i$(){return new TextEncoder}const DZ=new Qy([4294967295,4294967295],0);function s$(n){const e=i$().encode(n),t=new _7;return t.update(e),new Uint8Array(t.digest())}function o$(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qy([t,r],0),new Qy([i,s],0)]}class CN{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xw(`Invalid padding: ${t}`);if(r<0)throw new Xw(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Xw(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Xw(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Qy.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Qy.fromNumber(r)));return 1===i.compare(DZ)&&(i=new Qy([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=s$(e),[r,i]=o$(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new CN(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(0===this.It)return;const t=s$(e),[r,i]=o$(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Xw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,eE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Jw(Et.min(),i,new jn(Ht),js(),qt())}}class eE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new eE(r,t,qt(),qt(),qt())}}class ix{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class a${constructor(e,t){this.targetId=e,this.Vt=t}}class l${constructor(e,t,r=ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class u${constructor(){this.St=0,this.Dt=d$(),this.Ct=ti.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qt(),t=qt(),r=qt();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new eE(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=d$()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class TZ{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=js(),this.zt=c$(),this.Wt=new jn(Ht)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(YS(o))if(0===i){const c=new Qe(o.path);this.Yt(r,c,Zn.newNoDocument(c,Et.min()))}else wt(1===i);else{const c=this.ie(r);if(c!==i){const d=this.re(e,c);0!==d&&(this.ee(r),this.Wt=this.Wt.insert(r,2===d?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=IN.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(g,_,w){var T,S,M,R,N,B;const G={localCacheCount:_,existenceFilterCount:w.count},X=w.unchangedNames;return X&&(G.bloomFilter={applied:0===g,hashCount:null!==(T=X?.hashCount)&&void 0!==T?T:0,bitmapLength:null!==(R=null===(M=null===(S=X?.bits)||void 0===S?void 0:S.bitmap)||void 0===M?void 0:M.length)&&void 0!==R?R:0,padding:null!==(B=null===(N=X?.bits)||void 0===N?void 0:N.padding)&&void 0!==B?B:0}),G}(d,c,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=r;let d,g;try{d=ec(s).toUint8Array()}catch(_){if(_ instanceof mH)return jo("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw _}try{g=new CN(d,o,c)}catch(_){return jo(_ instanceof Xw?"BloomFilter error: ":"Applying bloom filter failed: ",_),1}return 0===g.It?1:i!==t-this.oe(e.targetId,g)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(c)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const c=this.se(o);if(c){if(s.current&&YS(c.target)){const d=new Qe(c.target.path);null!==this.jt.get(d)||this.ae(o,d)||this.Yt(o,d,Zn.newNoDocument(d,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let r=qt();this.zt.forEach((s,o)=>{let c=!0;o.forEachWhile(d=>{const g=this.se(d);return!g||"TargetPurposeLimboResolution"===g.purpose||(c=!1,!1)}),c&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new Jw(e,t,this.Wt,this.jt,r);return this.jt=js(),this.zt=c$(),this.Wt=new jn(Ht),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new u$,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new qn(Ht),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new u$),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function c$(){return new jn(Qe.comparator)}function d$(){return new jn(Qe.comparator)}const SZ={asc:"ASCENDING",desc:"DESCENDING"},xZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AZ={and:"AND",or:"OR"};class MZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function DN(n,e){return n.useProto3Json||Uw(e)?e:{value:e}}function u_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h$(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kZ(n,e){return u_(n,e.toTimestamp())}function Lr(n){return wt(!!n),Et.fromTimestamp(function(e){const t=$d(e);return new or(t.seconds,t.nanos)}(n))}function TN(n,e){return(t=n,new mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function f$(n){const e=mn.fromString(n);return wt(E$(e)),e}function tE(n,e){return TN(n.databaseId,e.path)}function xl(n,e){const t=f$(e);if(t.get(1)!==n.databaseId.projectId)throw new De(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(g$(t))}function SN(n,e){return TN(n.databaseId,e)}function p$(n){const e=f$(n);return 4===e.length?mn.emptyPath():g$(e)}function nE(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function g$(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function m$(n,e,t){return{name:tE(n,e),fields:t.value.mapValue.fields}}function y$(n,e,t){const r=xl(n,e.name),i=Lr(e.updateTime),s=e.createTime?Lr(e.createTime):Et.min(),o=new Ri({mapValue:{fields:e.fields}}),c=Zn.newFoundDocument(r,i,s,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function rE(n,e){let t;if(e instanceof a_)t={update:m$(n,e.key,e.value)};else if(e instanceof l_)t={delete:tE(n,e.key)};else if(e instanceof rc)t={update:m$(n,e.key,e.data),updateMask:UZ(e.fieldMask)};else{if(!(e instanceof vN))return lt();t={verify:tE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof s_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Fp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Lp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof o_)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:kZ(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function xN(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ar.updateTime(Lr(i.updateTime)):void 0!==i.exists?ar.exists(i.exists):ar.none():ar.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let c=null;"setToServerValue"in o?(wt("REQUEST_TIME"===o.setToServerValue),c=new s_):"appendMissingElements"in o?c=new Fp(o.appendMissingElements.values||[]):"removeAllFromArray"in o?c=new Lp(o.removeAllFromArray.values||[]):"increment"in o?c=new o_(s,o.increment):lt();const d=Tr.fromServerFormat(o.fieldPath);return new Yw(d,c)}(n,i)):[];var i;if(e.update){const i=xl(n,e.update.name),s=new Ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Bs((e.updateMask.fieldPaths||[]).map(g=>Tr.fromServerFormat(g)));return new rc(i,s,o,t,r)}return new a_(i,s,t,r)}if(e.delete){const i=xl(n,e.delete);return new l_(i,t)}if(e.verify){const i=xl(n,e.verify);return new vN(i,t)}return lt()}function _$(n,e){return{documents:[SN(n,e.path)]}}function AN(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=SN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=SN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(d){if(0!==d.length)return w$(An.create(d,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(d){if(0!==d.length)return d.map(g=>{return{field:Kd((_=g).field),direction:FZ(_.dir)};var _})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=DN(n,e.limit);var c,d;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt={before:!(d=e.endAt).inclusive,values:d.position}),t}function v$(n){let e=p$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let s=[];t.where&&(s=function(_){const w=b$(_);return w instanceof An&&dN(w)?w.getFilters():[w]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new n_(c_((w=_).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let c=null;t.limit&&(c=function(_){let w;return w="object"==typeof _?_.value:_,Uw(w)?null:w}(t.limit));let d=null;var _;t.startAt&&(d=new Zd((_=t.startAt).values||[],!!_.before));let g=null;return t.endAt&&(g=function(_){return new Zd(_.values||[],!_.before)}(t.endAt)),NH(e,i,o,s,c,"F",d,g)}function b$(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=c_(e.unaryFilter.field);return hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=c_(e.unaryFilter.field);return hn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=c_(e.unaryFilter.field);return hn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=c_(e.unaryFilter.field);return hn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(n):void 0!==n.fieldFilter?hn.create(c_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return An.create(e.compositeFilter.filters.map(t=>b$(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return lt()}}(e.compositeFilter.op))}(n):lt();var e}function FZ(n){return SZ[n]}function LZ(n){return xZ[n]}function VZ(n){return AZ[n]}function Kd(n){return{fieldPath:n.canonicalString()}}function c_(n){return Tr.fromServerFormat(n.fieldPath)}function w$(n){return n instanceof hn?function(e){if("=="===e.op){if(vH(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NAN"}};if(_H(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vH(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NOT_NAN"}};if(_H(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kd(e.field),op:LZ(e.op),value:e.value}}}(n):n instanceof An?function(e){const t=e.getFilters().map(r=>w$(r));return 1===t.length?t[0]:{compositeFilter:{op:VZ(e.op),filters:t}}}(n):lt()}function UZ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function E$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ic{constructor(e,t,r,i,s=Et.min(),o=Et.min(),c=ti.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new ic(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ic(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ic(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ic(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class I${constructor(e){this.fe=e}}function C$(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:tE(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:u_(i,s.version.toTimestamp()),createTime:u_(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vp(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:Vp(e.version)}}var i,s;return r}function sx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Up(n){const e=new or(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Bp(n,e){const t=(e.baseMutations||[]).map(s=>xN(n.fe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>xN(n.fe,s)),i=or.fromMillis(e.localWriteTimeMs);return new bN(e.batchId,i,t,r)}function iE(n){const e=Up(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Up(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=_s(i_(p$(i.documents[0])))):r=_s(v$(n.query)),new ic(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ti.fromBase64String(n.resumeToken))}function D$(n,e){const t=Vp(e.snapshotVersion),r=Vp(e.lastLimboFreeSnapshotVersion);let i;i=YS(e.target)?_$(n.fe,e.target):AN(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Op(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function MN(n){const e=v$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?JS(e,e.limit,"L"):e}function kN(n,e){return new EN(e.largestBatchId,xN(n.fe,e.overlayMutation))}function T$(n,e){const t=e.path.lastSegment();return[n,Wi(e.path.popLast()),t]}function S$(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Vp(r.readTime),documentKey:Wi(r.documentKey.path),largestBatchId:r.largestBatchId}}class jZ{getBundleMetadata(e,t){return x$(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Up(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return x$(e).put({bundleId:(r=t).id,createTime:Vp(Lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return A$(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:MN(i.bundledQuery),readTime:Up(i.readTime)};var i})}saveNamedQuery(e,t){return A$(e).put({name:(r=t).name,readTime:Vp(Lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function x$(n){return mi(n,"bundles")}function A$(n){return mi(n,"namedQueries")}class ox{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new ox(e,t.uid||"")}getOverlay(e,t){return sE(e).get(T$(this.userId,t)).next(r=>r?kN(this.serializer,r):null)}getOverlays(e,t){const r=Sl();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const c=new EN(t,o);i.push(this.we(e,c))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Wi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(sE(e).J("collectionPathOverlayIndex",c))}),oe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Sl(),s=Wi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return sE(e).j("collectionPathOverlayIndex",o).next(c=>{for(const d of c){const g=kN(this.serializer,d);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Sl();let o;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sE(e).X({index:"collectionGroupOverlayIndex",range:c},(d,g,_)=>{const w=kN(this.serializer,g);s.size()<i||w.largestBatchId===o?(s.set(w.getKey(),w),o=w.largestBatchId):_.done()}).next(()=>s)}we(e,t){return sE(e).put(function(r,i,s){const[o,c,d]=T$(i,s.mutation.key);return{userId:i,collectionPath:c,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:rE(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function sE(n){return mi(n,"documentOverlays")}class jp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Bw(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ec(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?bH(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):lt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function HZ(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function M$(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=HZ(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}jp.Ve=new jp;class $Z{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=M$(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=M$(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class zZ{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class GZ{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class oE{constructor(){this.je=new $Z,this.ze=new zZ(this.je),this.We=new GZ(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Hp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hp(this.indexId,this.documentKey,this.arrayValue,r)}}function Yd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=k$(n.arrayValue,e.arrayValue),0!==t?t:(t=k$(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function k$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class WZ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){wt(e.collectionGroup===this.collectionId);const t=rN(e);if(void 0!==t&&!this.en(t))return!1;const r=kp(e);let i=0,s=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const o=r[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],o))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function R$(n){var e,t;if(wt(n instanceof hn||n instanceof An),n instanceof hn){if(n instanceof RH){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>hn.create(n.field,"==",s)))||[];return An.create(i,"or")}return n}const r=n.filters.map(i=>R$(i));return An.create(r,n.op)}function qZ(n){if(0===n.getFilters().length)return[];const e=ON(R$(n));return wt(P$(e)),RN(e)||PN(e)?[e]:e.getFilters()}function RN(n){return n instanceof hn}function PN(n){return n instanceof An&&dN(n)}function P$(n){return RN(n)||PN(n)||function(e){if(e instanceof An&&cN(e)){for(const t of e.getFilters())if(!RN(t)&&!PN(t))return!1;return!0}return!1}(n)}function ON(n){if(wt(n instanceof hn||n instanceof An),n instanceof hn)return n;if(1===n.filters.length)return ON(n.filters[0]);const e=n.filters.map(r=>ON(r));let t=An.create(e,n.op);return t=ax(t),P$(t)?t:(wt(t instanceof An),wt(r_(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>NN(r,i)))}function NN(n,e){let t;return wt(n instanceof hn||n instanceof An),wt(e instanceof hn||e instanceof An),t=n instanceof hn?e instanceof hn?An.create([n,e],"and"):O$(n,e):e instanceof hn?O$(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),r_(r)&&r_(i))return AH(r,i.getFilters());const s=cN(r)?r:i,o=cN(r)?i:r,c=s.filters.map(d=>NN(d,o));return An.create(c,"or")}(n,e),ax(t)}function O$(n,e){if(r_(e))return AH(e,n.getFilters());{const t=e.filters.map(r=>NN(n,r));return An.create(t,"or")}}function ax(n){if(wt(n instanceof hn||n instanceof An),n instanceof hn)return n;const e=n.getFilters();if(1===e.length)return ax(e[0]);if(SH(n))return n;const t=e.map(i=>ax(i)),r=[];return t.forEach(i=>{i instanceof hn?r.push(i):i instanceof An&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:An.create(r,n.op)}class ZZ{constructor(){this.rn=new FN}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(uo.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class FN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qn(mn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qn(mn.comparator)).toArray()}}const lx=new Uint8Array(0);class KZ{constructor(e,t){this.user=e,this.databaseId=t,this.on=new FN,this.un=new nc(r=>Op(r),(r,i)=>Gw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:Wi(i)};return N$(e).put(s)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[eH(t),""],!1,!0);return N$(e).j(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Dl(o.parent))}return r})}addFieldIndex(e,t){const r=ux(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var o;delete i.indexId;const s=r.add(i);if(t.indexState){const o=lE(e);return s.next(c=>{o.put(S$(c,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ux(e),i=lE(e),s=aE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=aE(e);let i=!0;const s=new Map;return oe.forEach(this.cn(t),o=>this.an(e,o).next(c=>{i&&(i=!!c),s.set(o,c)})).next(()=>{if(i){let o=qt();const c=[];return oe.forEach(s,(d,g)=>{var _;Fe("IndexedDbIndexManager",`Using index ${_=d,`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`} to execute ${Op(t)}`);const w=function(X,ee){const re=rN(ee);if(void 0===re)return null;for(const pe of QS(X,re.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null}(g,d),T=function(X,ee){const re=new Map;for(const pe of kp(ee))for(const Ie of QS(X,pe.fieldPath))switch(Ie.op){case"==":case"in":re.set(pe.fieldPath.canonicalString(),Ie.value);break;case"not-in":case"!=":return re.set(pe.fieldPath.canonicalString(),Ie.value),Array.from(re.values())}return null}(g,d),S=function(X,ee){const re=[];let pe=!0;for(const Ie of kp(ee)){const Ve=0===Ie.kind?PH(X,Ie.fieldPath,X.startAt):OH(X,Ie.fieldPath,X.startAt);re.push(Ve.value),pe&&(pe=Ve.inclusive)}return new Zd(re,pe)}(g,d),M=function(X,ee){const re=[];let pe=!0;for(const Ie of kp(ee)){const Ve=0===Ie.kind?OH(X,Ie.fieldPath,X.endAt):PH(X,Ie.fieldPath,X.endAt);re.push(Ve.value),pe&&(pe=Ve.inclusive)}return new Zd(re,pe)}(g,d),R=this.hn(d,g,S),N=this.hn(d,g,M),B=this.ln(d,g,T),G=this.fn(d.indexId,w,R,S.inclusive,N,M.inclusive,B);return oe.forEach(G,X=>r.H(X,t.limit).next(ee=>{ee.forEach(re=>{const pe=Qe.fromSegments(re.documentKey);o.has(pe)||(o=o.add(pe),c.push(pe))})}))}).next(()=>c)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:qZ(An.create(e.filters,"and")).map(r=>fN(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,o,c){const d=(null!=t?t.length:1)*Math.max(r.length,s.length),g=d/(null!=t?t.length:1),_=[];for(let w=0;w<d;++w){const T=t?this.dn(t[w/g]):lx,S=this.wn(e,T,r[w%g],i),M=this._n(e,T,s[w%g],o),R=c.map(N=>this.wn(e,T,N,!0));_.push(...this.createRange(S,M,R))}return _}wn(e,t,r,i){const s=new Hp(e,Qe.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new Hp(e,Qe.empty(),t,r);return i?s.Je():s}an(e,t){const r=new WZ(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const c of s)r.tn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,s=>this.an(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let d=new qn(Tr.comparator),g=!1;for(const _ of c.filters)for(const w of _.getFlattenedFilters())w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?g=!0:d=d.add(w.field));for(const _ of c.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new oE;for(const i of kp(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.He(i.kind);jp.Ve._e(s,o)}return r.Qe()}dn(e){const t=new oE;return jp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new oE;return jp.Ve._e(Pp(this.databaseId,t),r.He(function(i){const s=kp(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new oE);let s=0;for(const o of kp(e)){const c=r[s++];for(const d of i)if(this.yn(t,o.fieldPath)&&$w(c))i=this.pn(i,o,c);else{const g=d.He(o.kind);jp.Ve._e(c,g)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const c of i){const d=new oE;d.seed(c.Qe()),jp.Ve._e(o,d.He(t.kind)),s.push(d)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof hn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ux(e),i=lE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const o=[];return oe.forEach(s,c=>i.get([c.indexId,this.uid]).next(d=>{o.push(function(g,_){const w=_?new Lw(_.sequenceNumber,new uo(Up(_.readTime),new Qe(Dl(_.documentKey)),_.largestBatchId)):Lw.empty(),T=g.fields.map(([S,M])=>new jS(Tr.fromServerFormat(S),M));return new BS(g.indexId,g.collectionGroup,T,w)}(c,d))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ux(e),s=lE(e);return this.Tn(e).next(o=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>oe.forEach(c,d=>s.put(S$(d.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?oe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),oe.forEach(c,d=>this.En(e,i,d).next(g=>{const _=this.An(s,d);return g.isEqual(_)?oe.resolve():this.vn(e,s,d,g,_)}))))})}Rn(e,t,r,i){return aE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return aE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=aE(e);let s=new qn(Yd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(o,c)=>{s=s.add(new Hp(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}An(e,t){let r=new qn(Yd);const i=this.mn(t,e);if(null==i)return r;const s=rN(t);if(null!=s){const o=e.data.field(s.fieldPath);if($w(o))for(const c of o.arrayValue.values||[])r=r.add(new Hp(t.indexId,e.key,this.dn(c),i))}else r=r.add(new Hp(t.indexId,e.key,lx,i));return r}vn(e,t,r,i,s){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,d,g,_,w){const T=c.getIterator(),S=d.getIterator();let M=e_(T),R=e_(S);for(;M||R;){let N=!1,B=!1;if(M&&R){const G=g(M,R);G<0?B=!0:G>0&&(N=!0)}else null!=M?B=!0:N=!0;N?(_(R),R=e_(S)):B?(w(M),M=e_(T)):(M=e_(T),R=e_(S))}}(i,s,Yd,c=>{o.push(this.Rn(e,t,r,c))},c=>{o.push(this.Pn(e,t,r,c))}),oe.waitFor(o)}Tn(e){let t=1;return lE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,c)=>Yd(o,c)).filter((o,c,d)=>!c||0!==Yd(o,d[c-1]));const i=[];i.push(e);for(const o of r){const c=Yd(o,e),d=Yd(o,t);if(0===c)i[0]=e.Je();else if(c>0&&d<0)i.push(o),i.push(o.Je());else if(d>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,lx,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,lx,[]]))}return s}bn(e,t){return Yd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(F$)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||lt())).next(F$)}}function N$(n){return mi(n,"collectionParents")}function aE(n){return mi(n,"indexEntries")}function ux(n){return mi(n,"indexConfiguration")}function lE(n){return mi(n,"indexState")}function F$(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;iN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new uo(e.readTime,e.documentKey,t)}const L$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qi(e,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function V$(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let c=0;const d=r.X({range:o},(_,w,T)=>(c++,T.delete()));s.push(d.next(()=>{wt(1===c)}));const g=[];for(const _ of t.mutations){const w=uH(e,_.key.path,t.batchId);s.push(i.delete(w)),g.push(_.key)}return oe.waitFor(s).next(()=>g)}function cx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}qi.DEFAULT_COLLECTION_PERCENTILE=10,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qi.DEFAULT=new qi(41943040,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qi.DISABLED=new qi(-1,0,0);class dx{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){wt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new dx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qd(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=d_(e),o=Qd(e);return o.add({}).next(c=>{wt("number"==typeof c);const d=new bN(c,t,r,i),g=function(T,S,M){const R=M.baseMutations.map(B=>rE(T.fe,B)),N=M.mutations.map(B=>rE(T.fe,B));return{userId:S,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:R,mutations:N}}(this.serializer,this.userId,d),_=[];let w=new qn((T,S)=>Ht(T.canonicalString(),S.canonicalString()));for(const T of i){const S=uH(this.userId,T.key.path,c);w=w.add(T.key.path.popLast()),_.push(o.put(g)),_.push(s.put(S,F7))}return w.forEach(T=>{_.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Vn[c]=d.keys()}),oe.waitFor(_).next(()=>d)})}lookupMutationBatch(e,t){return Qd(e).get(t).next(r=>r?(wt(r.userId===this.userId),Bp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Qd(e).X({index:"userMutationsIndex",range:i},(o,c,d)=>{c.userId===this.userId&&(wt(c.batchId>=r),s=Bp(this.serializer,c)),d.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qd(e).j("userMutationsIndex",t).next(r=>r.map(i=>Bp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$S(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return d_(e).X({range:i},(o,c,d)=>{const[g,_,w]=o,T=Dl(_);if(g===this.userId&&t.path.isEqual(T))return Qd(e).get(w).next(S=>{if(!S)throw lt();wt(S.userId===this.userId),s.push(Bp(this.serializer,S))});d.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Ht);const i=[];return t.forEach(s=>{const o=$S(this.userId,s.path),c=IDBKeyRange.lowerBound(o),d=d_(e).X({range:c},(g,_,w)=>{const[T,S,M]=g,R=Dl(S);T===this.userId&&s.path.isEqual(R)?r=r.add(M):w.done()});i.push(d)}),oe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=$S(this.userId,r),o=IDBKeyRange.lowerBound(s);let c=new qn(Ht);return d_(e).X({range:o},(d,g,_)=>{const[w,T,S]=d,M=Dl(T);w===this.userId&&r.isPrefixOf(M)?M.length===i&&(c=c.add(S)):_.done()}).next(()=>this.Dn(e,c))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Qd(e).get(s).next(o=>{if(null===o)throw lt();wt(o.userId===this.userId),r.push(Bp(this.serializer,o))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return V$(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return d_(e).X({range:r},(s,o,c)=>{if(s[0]===this.userId){const d=Dl(s[1]);i.push(d)}else c.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return U$(e,this.userId,t)}xn(e){return B$(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function U$(n,e,t){const r=$S(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return d_(n).X({range:s,Y:!0},(c,d,g)=>{const[_,w,T]=c;_===e&&w===i&&(o=!0),g.done()}).next(()=>o)}function Qd(n){return mi(n,"mutations")}function d_(n){return mi(n,"documentMutations")}function B$(n){return mi(n,"mutationQueues")}class $p{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new $p(0)}static Mn(){return new $p(-1)}}class YZ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new $p(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Et.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>h_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return h_(e).X((o,c)=>{const d=iE(c);d.sequenceNumber<=t&&null===r.get(d.targetId)&&(i++,s.push(this.removeTargetData(e,d)))}).next(()=>oe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return h_(e).X((r,i)=>{const s=iE(i);t(s)})}$n(e){return j$(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return j$(e).put("targetGlobalKey",t)}Fn(e,t){return h_(e).put(D$(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Op(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return h_(e).X({range:i,index:"queryTargetsIndex"},(o,c,d)=>{const g=iE(c);Gw(t,g.target)&&(s=g,d.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Xd(e);return t.forEach(o=>{const c=Wi(o.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,o))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Xd(e);return oe.forEach(t,s=>{const o=Wi(s.path);return oe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Xd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Xd(e);let s=qt();return i.X({range:r,Y:!0},(o,c,d)=>{const g=Dl(o[1]),_=new Qe(g);s=s.add(_)}).next(()=>s)}containsKey(e,t){const r=Wi(t.path),i=IDBKeyRange.bound([r],[eH(r)],!1,!0);let s=0;return Xd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([o,c],d,g)=>{0!==o&&(s++,g.done())}).next(()=>s>0)}le(e,t){return h_(e).get(t).next(r=>r?iE(r):null)}}function h_(n){return mi(n,"targets")}function j$(n){return mi(n,"targetGlobal")}function Xd(n){return mi(n,"targetDocuments")}function H$([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class QZ{constructor(e){this.Ln=e,this.buffer=new qn(H$),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();H$(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Q.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){jd(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Bd(r)}yield t.Qn(3e5)}))}}class XZ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(co.ct);const r=new QZ(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(L$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L$):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,o,c,d,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,o=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(r=w,c=Date.now(),this.removeTargets(e,r,t))).next(w=>(s=w,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(g=Date.now(),tN()<=Ta.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-_}ms\n\tDetermined least recently used ${i} in `+(c-o)+`ms\n\tRemoved ${s} targets in `+(d-c)+`ms\n\tRemoved ${w} documents in `+(g-d)+`ms\nTotal Duration: ${g-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:w})))}}class JZ{constructor(e,t){this.db=e,this.garbageCollector=function z$(n,e){return new XZ(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return hx(e,r)}removeReference(e,t,r){return hx(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hx(e,t)}Xn(e,t){return function(r,i){let s=!1;return B$(r).Z(o=>U$(r,o,i).next(c=>(c&&(s=!0),oe.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(o,c)=>{if(c<=t){const d=this.Xn(e,o).next(g=>{if(!g)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Et.min()),Xd(e).delete([0,Wi(o.path)])))});i.push(d)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hx(e,t)}Yn(e,t){const r=Xd(e);let i,s=co.ct;return r.X({index:"documentTargetsIndex"},([o,c],{path:d,sequenceNumber:g})=>{0===o?(s!==co.ct&&t(new Qe(Dl(i)),s),s=g,i=d):s=co.ct}).next(()=>{s!==co.ct&&t(new Qe(Dl(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hx(n,e){return Xd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Wi(e.path),sequenceNumber:r}));var r}class G${constructor(){this.changes=new nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zp(e).put(r)}removeEntry(e,t,r){return zp(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],sx(s),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Zn.newInvalidDocument(t);return zp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(uE(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:Zn.newInvalidDocument(t)};return zp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(uE(t))},(i,s)=>{r={document:this.ts(t,s),size:cx(s)}}).next(()=>r)}getEntries(e,t){let r=js();return this.ns(e,t,(i,s)=>{const o=this.ts(i,s);r=r.insert(i,o)}).next(()=>r)}ss(e,t){let r=js(),i=new jn(Qe.comparator);return this.ns(e,t,(s,o)=>{const c=this.ts(s,o);r=r.insert(s,c),i=i.insert(s,cx(o))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let i=new qn(K$);t.forEach(d=>i=i.add(d));const s=IDBKeyRange.bound(uE(i.first()),uE(i.last())),o=i.getIterator();let c=o.getNext();return zp(e).X({index:"documentKeyIndex",range:s},(d,g,_)=>{const w=Qe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;c&&K$(c,w)<0;)r(c,null),c=o.getNext();c&&c.isEqual(w)&&(r(c,g),c=o.hasNext()?o.getNext():null),c?_.G(uE(c)):_.done()}).next(()=>{for(;c;)r(c,null),c=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),sx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zp(e).j(IDBKeyRange.bound(o,c,!0)).next(d=>{let g=js();for(const _ of d){const w=this.ts(Qe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);w.isFoundDocument()&&(qw(t,w)||i.has(w.key))&&(g=g.insert(w.key,w))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=js();const o=Z$(t,r),c=Z$(t,uo.max());return zp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},(d,g,_)=>{const w=this.ts(Qe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);s=s.insert(w.key,w),s.size===i&&_.done()}).next(()=>s)}newChangeBuffer(e){return new tK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return q$(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Zn(e,t){return q$(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function BZ(n,e){let t;if(e.document)t=y$(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=Up(e.noDocument.readTime);t=Zn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Qe.fromSegments(e.unknownDocument.path),i=Up(e.unknownDocument.version);t=Zn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new or(r[0],r[1]);return Et.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Zn.newInvalidDocument(e)}}function W$(n){return new eK(n)}class tK extends G${constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new nc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new qn((s,o)=>Ht(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const c=this.us.get(s);if(t.push(this.os.removeEntry(e,s,c.readTime)),o.isValidDocument()){const d=C$(this.os.serializer,o);i=i.add(s.path.popLast()),r+=cx(d)-c.size,t.push(this.os.addEntry(e,s,d))}else if(r-=c.size,this.trackRemovals){const d=C$(this.os.serializer,o.convertToNoDocument(Et.min()));t.push(this.os.addEntry(e,s,d))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,o)=>{this.us.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function q$(n){return mi(n,"remoteDocumentGlobal")}function zp(n){return mi(n,"remoteDocumentsV14")}function uE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Z$(n,e){const t=e.documentKey.path.toArray();return[n,sx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function K$(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ht(t[s],r[s]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}class nK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Y${constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Qw(r.mutation,i,Bs.empty(),or.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const i=Sl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Zw();return s.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Sl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=js();const o=Kw(),c=Kw();return t.forEach((d,g)=>{const _=r.get(g.key);i.has(g.key)&&(void 0===_||_.mutation instanceof rc)?s=s.insert(g.key,g):void 0!==_?(o.set(g.key,_.mutation.getFieldMask()),Qw(_.mutation,g,_.mutation.getFieldMask(),or.now())):o.set(g.key,Bs.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((g,_)=>o.set(g,_)),t.forEach((g,_)=>{var w;return c.set(g,new nK(_,null!==(w=o.get(g))&&void 0!==w?w:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Kw();let i=new jn((o,c)=>o-c),s=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const c of o)c.keys().forEach(d=>{const g=t.get(d);if(null===g)return;let _=r.get(d)||Bs.empty();_=c.applyToLocalView(g,_),r.set(d,_);const w=(i.get(c.batchId)||qt()).add(d);i=i.insert(c.batchId,w)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),g=d.key,_=d.value,w=HH();_.forEach(T=>{if(!s.has(T)){const S=QH(t.get(T),r.get(T));null!==S&&w.set(T,S),s=s.add(T)}}),o.push(this.documentOverlayCache.saveOverlays(e,g,w))}return oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):gN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(Sl());let c=-1,d=s;return o.next(g=>oe.forEach(g,(_,w)=>(c<w.largestBatchId&&(c=w.largestBatchId),s.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(e,g,s)).next(()=>this.computeViews(e,d,g,qt())).next(_=>({batchId:c,changes:jH(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=Zw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Zw();return this.indexManager.getCollectionParents(e,i).next(o=>oe.forEach(o,c=>{const d=(g=t,_=c.child(i),new tc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r).next(g=>{g.forEach((_,w)=>{s=s.insert(_,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((c,d)=>{const g=d.getKey();null===s.get(g)&&(s=s.insert(g,Zn.newInvalidDocument(g)))});let o=Zw();return s.forEach((c,d)=>{const g=i.get(c);void 0!==g&&Qw(g.mutation,d,Bs.empty(),or.now()),qw(t,d)&&(o=o.insert(c,d))}),o})}}class rK{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Lr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:MN(r.bundledQuery),readTime:Lr(r.readTime)}),oe.resolve();var r}}class iK{constructor(){this.overlays=new jn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Sl();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Sl(),s=t.length+1,o=new Qe(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,g=d.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new jn((g,_)=>g-_);const o=this.overlays.getIterator();for(;o.hasNext();){const g=o.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=s.get(g.largestBatchId);null===_&&(_=Sl(),s=s.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const c=Sl(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((g,_)=>c.set(g,_)),!(c.size()>=i)););return oe.resolve(c)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new EN(t,r));let s=this.ls.get(t);void 0===s&&(s=qt(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class LN{constructor(){this.fs=new qn(yi.ds),this.ws=new qn(yi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new yi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new yi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new mn([])),r=new yi(t,e),i=new yi(t,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new mn([])),r=new yi(t,e),i=new yi(t,e+1);let s=qt();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new yi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class yi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||Ht(e.As,t.As)}static _s(e,t){return Ht(e.As,t.As)||Qe.comparator(e.key,t.key)}}class sK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new qn(yi.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const o=new bN(s,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Rs=this.Rs.add(new yi(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yi(t,0),i=new yi(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const c=this.Ps(o.As);s.push(c)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Ht);return t.forEach(i=>{const s=new yi(i,0),o=new yi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],c=>{r=r.add(c.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Qe.isDocumentKey(s)||(s=s.child(""));const o=new yi(new Qe(s),0);let c=new qn(Ht);return this.Rs.forEachWhile(d=>{const g=d.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(c=c.add(d.As)),!0)},o),oe.resolve(this.Vs(c))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,i=>{const s=new yi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new yi(t,0),i=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oK{constructor(e){this.Ds=e,this.docs=new jn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Zn.newInvalidDocument(t))}getEntries(e,t){let r=js();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zn.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=js();const o=t.path,c=new Qe(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:g,value:{document:_}}=d.getNext();if(!o.isPrefixOf(g.path))break;g.path.length>o.length+1||iN(nH(_),r)<=0||(i.has(_.key)||qw(t,_))&&(s=s.insert(_.key,_.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){lt()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aK(this)}getSize(e){return oe.resolve(this.size)}}class aK extends G${constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class lK{constructor(e){this.persistence=e,this.xs=new nc(t=>Op(t),Gw),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new LN,this.targetCount=0,this.Ms=$p.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new $p(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((o,c)=>{c.sequenceNumber<=t&&null===r.get(c.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class VN{constructor(e,t){this.$s={},this.overlays={},this.Os=new co(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new lK(this),this.indexManager=new ZZ,this.remoteDocumentCache=new oK(r=>this.referenceDelegate.Ls(r)),this.serializer=new I$(t),this.qs=new rK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new sK(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new uK(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class uK extends iH{constructor(e){super(),this.currentSequenceNumber=e}}class fx{constructor(e){this.persistence=e,this.Qs=new LN,this.js=null}static zs(e){return new fx(e)}get Ws(){if(this.js)return this.js;throw lt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const i=Qe.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Et.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class cK{constructor(e){this.serializer=e}O(e,t,r,i){const s=new HS("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lH,{unique:!0}),c.createObjectStore("documentMutations"),Q$(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Q$(e)),o=o.next(()=>function(c){const d=c.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,d){return d.store("mutations").j().next(g=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lH,{unique:!0});const _=d.store("mutations"),w=g.map(T=>_.put(T));return oe.waitFor(w)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Ys(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(o=o.next(()=>this.Zs(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ei(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const d=c.createObjectStore("documentOverlays",{keyPath:Z7});d.createIndex("collectionPathOverlayIndex",K7,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",Y7,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore("remoteDocumentsV14",{keyPath:L7});d.createIndex("documentKeyIndex",V7),d.createIndex("collectionGroupIndex",U7)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:z7}).createIndex("sequenceNumberIndex",G7,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:W7}).createIndex("documentKeyIndex",q7,{unique:!1})}(e))),o}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=cx(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>oe.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",o).next(c=>oe.forEach(c,d=>{wt(d.userId===s.userId);const g=Bp(this.serializer,d);return V$(e,s.userId,g).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,c)=>{const d=new mn(o),g=[0,Wi(d)];s.push(t.get(g).next(_=>_?oe.resolve():t.put({targetId:0,path:Wi(d),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:$7});const r=t.store("collectionParents"),i=new FN,s=o=>{if(i.add(o)){const c=o.lastSegment(),d=o.popLast();return r.put({collectionId:c,parent:Wi(d)})}};return t.store("remoteDocuments").X({Y:!0},(o,c)=>{const d=new mn(o);return s(d.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([o,c,d],g)=>{const _=Dl(c);return s(_.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=iE(i),o=D$(this.serializer,s);return t.put(o)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,o)=>{const c=t.store("remoteDocumentsV14"),d=(g=o,g.document?new Qe(mn.fromString(g.document.name).popFirst(5)):g.noDocument?Qe.fromSegments(g.noDocument.path):g.unknownDocument?Qe.fromSegments(g.unknownDocument.path):lt()).path.toArray();var g;const _={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(c.put(_))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=W$(this.serializer),s=new VN(fx.zs,this.serializer.fe);return r.j().next(o=>{const c=new Map;return o.forEach(d=>{var g;let _=null!==(g=c.get(d.userId))&&void 0!==g?g:qt();Bp(this.serializer,d).keys().forEach(w=>_=_.add(w)),c.set(d.userId,_)}),oe.forEach(c,(d,g)=>{const _=new gi(g),w=ox.de(this.serializer,_),T=s.getIndexManager(_),S=dx.de(_,this.serializer,T,s.referenceDelegate);return new Y$(i,S,w,T).recalculateAndSaveOverlaysForDocumentKeys(new aN(t,co.ct),d).next()})})}}function Q$(n){n.createObjectStore("targetDocuments",{keyPath:j7}).createIndex("documentTargetsIndex",H7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",B7,{unique:!0}),n.createObjectStore("targetGlobal")}const UN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class BN{constructor(e,t,r,i,s,o,c,d,g,_,w=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=o,this.document=c,this.ri=g,this.oi=_,this.ui=w,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=T=>Promise.resolve(),!BN.D())throw new De(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JZ(this,i),this.di=t+"main",this.serializer=new I$(d),this.wi=new Ma(this.di,this.ui,new cK(this.serializer)),this.Bs=new YZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=W$(this.serializer),this.qs=new jZ,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===_&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(le.FAILED_PRECONDITION,UN);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new co(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Q.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Q.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(jd(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return cE(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return gx(e).delete(this.clientId)}bi(){var e=this;return(0,Q.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=mi(r,"clientMetadata");return i.j().next(s=>{const o=e.Si(s,18e5),c=s.filter(d=>-1===o.indexOf(d));return oe.forEach(c,d=>i.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):cE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new De(le.FAILED_PRECONDITION,UN);return!1}}return!(!this.networkEnabled||!this.inForeground)||gx(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||o&&c)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Q.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new aN(t,co.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>gx(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return dx.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KZ(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return ox.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(o=this.ui)?X7:14===o?hH:13===o?dH:12===o?Q7:11===o?cH:void lt();var o;let c;return this.wi.runTransaction(e,i,s,d=>(c=new aN(d,this.Os?this.Os.next():co.ct),"readwrite-primary"===t?this.Ti(c).next(g=>!!g||this.Ei(c)).next(g=>{if(!g)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new De(le.FAILED_PRECONDITION,rH);return r(c)}).next(g=>this.vi(c).next(()=>g)):this.Oi(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Oi(e){return cE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(le.FAILED_PRECONDITION,UN)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cE(e).put("owner",t)}static D(){return Ma.D()}Ai(e){const t=cE(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,at.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cE(n){return mi(n,"owner")}function gx(n){return mi(n,"clientMetadata")}function jN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=qt(),i=qt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new HN(e,t.fromCache,r,i)}}class X${constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(FH(t))return oe.resolve(null);let r=_s(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=JS(t,null,"F"),r=_s(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=qt(...s);return this.Ui.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const g=this.ji(t,c);return this.zi(t,g,o,d.readTime)?this.Ki(e,JS(t,null,"F")):this.Wi(e,g,t,d)}))})))}Gi(e,t,r,i){return FH(t)||i.isEqual(Et.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(t,s);return this.zi(t,o,r,i)?this.Qi(e,t):(tN()<=Ta.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yN(t)),this.Wi(e,o,t,tH(i,-1)))})}ji(e,t){let r=new qn(UH(e));return t.forEach((i,s)=>{qw(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return tN()<=Ta.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",yN(t)),this.Ui.getDocumentsMatchingQuery(e,t,uo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class dK{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new jn(Ht),this.Yi=new nc(s=>Op(s),Gw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y$(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function J$(n,e,t,r){return new dK(n,e,t,r)}function ez(n,e){return $N.apply(this,arguments)}function $N(){return $N=(0,Q.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let d=qt();for(const g of i){o.push(g.batchId);for(const _ of g.mutations)d=d.add(_.key)}for(const g of s){c.push(g.batchId);for(const _ of g.mutations)d=d.add(_.key)}return t.localDocuments.getDocuments(r,d).next(g=>({er:g,removedBatchIds:o,addedBatchIds:c}))})})}),$N.apply(this,arguments)}function hK(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,c,d,g){const _=d.batch,w=_.keys();let T=oe.resolve();return w.forEach(S=>{T=T.next(()=>g.getEntry(c,S)).next(M=>{const R=d.docVersions.get(S);wt(null!==R),M.version.compareTo(R)<0&&(_.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),g.addEntry(M)))})}),T.next(()=>o.mutationQueue.removeMutationBatch(c,_))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=qt();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function tz(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function fK(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const c=[];e.targetChanges.forEach((_,w)=>{const T=i.get(w);if(!T)return;c.push(t.Bs.removeMatchingKeys(s,_.removedDocuments,w).next(()=>t.Bs.addMatchingKeys(s,_.addedDocuments,w)));let S=T.withSequenceNumber(s.currentSequenceNumber);var M,R,N;null!==e.targetMismatches.get(w)?S=S.withResumeToken(ti.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,r)),i=i.insert(w,S),R=S,N=_,(0===(M=T).resumeToken.approximateByteSize()||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&c.push(t.Bs.updateTargetData(s,S))});let d=js(),g=qt();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,_))}),c.push(nz(s,o,e.documentUpdates).next(_=>{d=_.nr,g=_.sr})),!r.isEqual(Et.min())){const _=t.Bs.getLastRemoteSnapshotVersion(s).next(w=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(_)}return oe.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,g)).next(()=>d)}).then(s=>(t.Ji=i,s))}function nz(n,e,t){let r=qt(),i=qt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=js();return t.forEach((c,d)=>{const g=s.get(c);d.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Et.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||0===d.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",g.version," Watch version:",d.version)}),{nr:o,sr:i}})}function pK(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function f_(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.Bs.allocateTargetId(r).next(o=>(i=new ic(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function p_(n,e,t){return zN.apply(this,arguments)}function zN(){return zN=(0,Q.Z)(function*(n,e,t){const r=et(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!jd(o))throw o;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),zN.apply(this,arguments)}function mx(n,e,t){const r=et(n);let i=Et.min(),s=qt();return r.persistence.runTransaction("Execute query","readonly",o=>function(c,d,g){const _=et(c),w=_.Yi.get(g);return void 0!==w?oe.resolve(_.Ji.get(w)):_.Bs.getTargetData(d,g)}(r,o,_s(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,c.targetId).next(d=>{s=d})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,t?i:Et.min(),t?s:qt())).next(c=>(sz(r,VH(e),c),{documents:c,ir:s})))}function rz(n,e){const t=et(n),r=et(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(o=>o?o.target:null))}function iz(n,e){const t=et(n),r=t.Xi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,tH(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(sz(t,e,i),i))}function sz(n,e,t){let r=n.Xi.get(e)||Et.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function GN(){return GN=(0,Q.Z)(function*(n,e,t,r){const i=et(n);let s=qt(),o=js();for(const g of t){const _=e.rr(g.metadata.name);g.document&&(s=s.add(_));const w=e.ur(g);w.setReadTime(e.cr(g.metadata.readTime)),o=o.insert(_,w)}const c=i.Zi.newChangeBuffer({trackRemovals:!0}),d=yield f_(i,(g=r,_s(i_(mn.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",g=>nz(g,c,o).next(_=>(c.apply(g),_)).next(_=>i.Bs.removeMatchingKeysForTargetId(g,d.targetId).next(()=>i.Bs.addMatchingKeys(g,s,d.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(g,_.nr,_.sr)).next(()=>_.nr)))}),GN.apply(this,arguments)}function mK(n,e){return WN.apply(this,arguments)}function WN(){return WN=(0,Q.Z)(function*(n,e,t=qt()){const r=yield f_(n,_s(MN(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Lr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.qs.saveNamedQuery(s,e);const c=r.withResumeToken(ti.EMPTY_BYTE_STRING,o);return i.Ji=i.Ji.insert(c.targetId,c),i.Bs.updateTargetData(s,c).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),WN.apply(this,arguments)}function oz(n,e){return`firestore_clients_${n}_${e}`}function az(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qN(n,e){return`firestore_targets_${n}_${e}`}class yx{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new De(i.error.code,i.error.message))),o?new yx(e,t,i.state,s):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new De(r.error.code,r.error.message))),s?new dE(e,r.state,i):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _x{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=_N();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=oH(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new _x(e,s):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ZN{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ZN(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class KN{constructor(){this.activeTargetIds=_N()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YN{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new jn(Ht),this.started=!1,this.yr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=oz(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new KN),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Q.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(oz(e.persistenceKey,i));if(s){const o=_x.ar(i,s);o&&(e.gr=e.gr.insert(o.clientId,o))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(qN(this.persistenceKey,e));if(r){const i=dE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qN(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Q.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let o=co.ct;if(null!=s)try{const c=JSON.parse(s);wt("number"==typeof c),o=c}catch(c){Fr("SharedClientState","Failed to read sequence number from WebStorage",c)}return o}(r.newValue);i!==co.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new yx(this.currentUser,e,t,r),s=az(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=az(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=qN(this.persistenceKey,e),s=new dE(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return _x.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return yx.ar(new gi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return dE.ar(i,t)}br(e){return ZN.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Q.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),o=[],c=[];return s.forEach(d=>{i.has(d)||o.push(d)}),i.forEach(d=>{s.has(d)||c.push(d)}),this.syncEngine.Wr(o,c).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=_N();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class lz{constructor(){this.Hr=new KN,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new KN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yK{Yr(e){}shutdown(){}}class uz{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vx=null;function QN(){return null===vx?vx=268435456+Math.round(2147483648*Math.random()):vx++,"0x"+vx.toString(16)}const _K={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vK{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Zi="WebChannelConnection";class bK extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const o=QN(),c=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${o}:`,c,r);const d={};return this.Eo(d,i,s),this.Ao(e,c,d,r).then(g=>(Fe("RestConnection",`Received RPC '${e}' ${o}: `,g),g),g=>{throw jo("RestConnection",`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g})}vo(e,t,r,i,s,o){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${_K[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=QN();return new Promise((o,c)=>{const d=new y7;d.setWithCredentials(!0),d.listenOnce(p7.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case eN.NO_ERROR:const _=d.getResponseJson();Fe(Zi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(_)),o(_);break;case eN.TIMEOUT:Fe(Zi,`RPC '${e}' ${s} timed out`),c(new De(le.DEADLINE_EXCEEDED,"Request time out"));break;case eN.HTTP_ERROR:const w=d.getStatus();if(Fe(Zi,`RPC '${e}' ${s} failed with status:`,w,"response text:",d.getResponseText()),w>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const M=function(R){const N=R.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(N)>=0?N:le.UNKNOWN}(S.status);c(new De(M,S.message))}else c(new De(le.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new De(le.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Fe(Zi,`RPC '${e}' ${s} completed.`)}});const g=JSON.stringify(i);Fe(Zi,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",g,r,15)})}Ro(e,t,r){const i=QN(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=h7(),c=f7(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;void 0!==g&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.xmlHttpFactory=new m7({})),this.Eo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const _=s.join("");Fe(Zi,`Creating RPC '${e}' stream ${i}: ${_}`,d);const w=o.createWebChannel(_,d);let T=!1,S=!1;const M=new vK({ro:N=>{S?Fe(Zi,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(T||(Fe(Zi,`Opening RPC '${e}' stream ${i} transport.`),w.open(),T=!0),Fe(Zi,`RPC '${e}' stream ${i} sending:`,N),w.send(N))},oo:()=>w.close()}),R=(N,B,G)=>{N.listen(B,X=>{try{G(X)}catch(ee){setTimeout(()=>{throw ee},0)}})};return R(w,US.EventType.OPEN,()=>{S||Fe(Zi,`RPC '${e}' stream ${i} transport opened.`)}),R(w,US.EventType.CLOSE,()=>{S||(S=!0,Fe(Zi,`RPC '${e}' stream ${i} transport closed`),M.wo())}),R(w,US.EventType.ERROR,N=>{S||(S=!0,jo(Zi,`RPC '${e}' stream ${i} transport errored:`,N),M.wo(new De(le.UNAVAILABLE,"The operation could not be completed")))}),R(w,US.EventType.MESSAGE,N=>{var B;if(!S){const G=N.data[0];wt(!!G);const X=G,ee=X.error||(null===(B=X[0])||void 0===B?void 0:B.error);if(ee){Fe(Zi,`RPC '${e}' stream ${i} received error:`,ee);const re=ee.status;let pe=function(Ve){const ut=zr[Ve];if(void 0!==ut)return r$(ut)}(re),Ie=ee.message;void 0===pe&&(pe=le.INTERNAL,Ie="Unknown error status: "+re+" with message "+ee.message),S=!0,M.wo(new De(pe,Ie)),w.close()}else Fe(Zi,`RPC '${e}' stream ${i} received:`,G),M._o(G)}}),R(c,g7.STAT_EVENT,N=>{N.stat===Kj.PROXY?Fe(Zi,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Kj.NOPROXY&&Fe(Zi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}}function cz(){return typeof window<"u"?window:null}function bx(){return typeof document<"u"?document:null}function hE(n){return new MZ(n,!0)}class XN{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class dz{constructor(e,t,r,i,s,o,c,d){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new XN(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Q.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Q.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Q.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new De(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Q.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wK extends dz{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function PZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:lt(),i=e.targetChange.targetIds||[],s=function(d,g){return d.useProto3Json?(wt(void 0===g||"string"==typeof g),ti.fromBase64String(g||"")):(wt(void 0===g||g instanceof Uint8Array),ti.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const g=void 0===d.code?le.UNKNOWN:r$(d.code);return new De(g,d.message||"")}(o);t=new l$(r,i,s,c||null)}else if("documentChange"in e){const r=e.documentChange,i=xl(n,r.document.name),s=Lr(r.document.updateTime),o=r.document.createTime?Lr(r.document.createTime):Et.min(),c=new Ri({mapValue:{fields:r.document.fields}}),d=Zn.newFoundDocument(i,s,o,c);t=new ix(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=xl(n,r.document),s=r.readTime?Lr(r.readTime):Et.min(),o=Zn.newNoDocument(i,s);t=new ix([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=xl(n,r.document);t=new ix([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new CZ(i,s);t=new a$(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Et.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Et.min():s.readTime?Lr(s.readTime):Et.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=nE(this.serializer),t.addTarget=function(i,s){let o;const c=s.target;if(o=YS(c)?{documents:_$(i,c)}:{query:AN(i,c)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=h$(i,s.resumeToken);const d=DN(i,s.expectedCount);null!==d&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(Et.min())>0){o.readTime=u_(i,s.snapshotVersion.toTimestamp());const d=DN(i,s.expectedCount);null!==d&&(o.expectedCount=d)}return o}(this.serializer,e);const r=function NZ(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=nE(this.serializer),t.removeTarget=e,this.Wo(t)}}class EK extends dz{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function OZ(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let s=Lr(r.updateTime?r.updateTime:i);return s.isEqual(Et.min())&&(s=Lr(i)),new bZ(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.cu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=nE(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rE(this.serializer,r))};this.Wo(t)}}class IK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new De(le.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new De(le.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new De(le.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class DK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Fr(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class TK{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(c=>{r.enqueueAndForget((0,Q.Z)(function*(){var d;Jd(o)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(d=(0,Q.Z)(function*(g){const _=et(g);_.vu.add(4),yield g_(_),_.bu.set("Unknown"),_.vu.delete(4),yield fE(_)}),function(g){return d.apply(this,arguments)})(o))}))}),this.bu=new DK(r,i)}}function fE(n){return eF.apply(this,arguments)}function eF(){return eF=(0,Q.Z)(function*(n){if(Jd(n))for(const e of n.Ru)yield e(!0)}),eF.apply(this,arguments)}function g_(n){return tF.apply(this,arguments)}function tF(){return tF=(0,Q.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),tF.apply(this,arguments)}function wx(n,e){const t=et(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),iF(t)?rF(t):y_(t).Ko()&&nF(t,e))}function pE(n,e){const t=et(n),r=y_(t);t.Au.delete(e),r.Ko()&&hz(t,e),0===t.Au.size&&(r.Ko()?r.jo():Jd(t)&&t.bu.set("Unknown"))}function nF(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}y_(n).su(e)}function hz(n,e){n.Vu.qt(e),y_(n).iu(e)}function rF(n){n.Vu=new TZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),y_(n).start(),n.bu.gu()}function iF(n){return Jd(n)&&!y_(n).Uo()&&n.Au.size>0}function Jd(n){return 0===et(n).vu.size}function fz(n){n.Vu=void 0}function SK(n){return sF.apply(this,arguments)}function sF(){return sF=(0,Q.Z)(function*(n){n.Au.forEach((e,t)=>{nF(n,e)})}),sF.apply(this,arguments)}function xK(n,e){return oF.apply(this,arguments)}function oF(){return oF=(0,Q.Z)(function*(n,e){fz(n),iF(n)?(n.bu.Iu(e),rF(n)):n.bu.set("Unknown")}),oF.apply(this,arguments)}function AK(n,e,t){return aF.apply(this,arguments)}function aF(){return aF=(0,Q.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof l$&&2===e.state&&e.cause)try{yield(r=(0,Q.Z)(function*(i,s){const o=s.cause;for(const c of s.targetIds)i.Au.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.Au.delete(c),i.Vu.removeTarget(c))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ex(n,r)}else if(e instanceof ix?n.Vu.Ht(e):e instanceof a$?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Et.min()))try{const r=yield tz(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const g=i.Au.get(d);g&&i.Au.set(d,g.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,d)=>{const g=i.Au.get(c);if(!g)return;i.Au.set(c,g.withResumeToken(ti.EMPTY_BYTE_STRING,g.snapshotVersion)),hz(i,c);const _=new ic(g.target,c,d,g.sequenceNumber);nF(i,_)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Ex(n,r)}var r}),aF.apply(this,arguments)}function Ex(n,e,t){return lF.apply(this,arguments)}function lF(){return lF=(0,Q.Z)(function*(n,e,t){if(!jd(e))throw e;n.vu.add(1),yield g_(n),n.bu.set("Offline"),t||(t=()=>tz(n.localStore)),n.asyncQueue.enqueueRetryable((0,Q.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield fE(n)}))}),lF.apply(this,arguments)}function pz(n,e){return e().catch(t=>Ex(n,t,e))}function m_(n){return uF.apply(this,arguments)}function uF(){return uF=(0,Q.Z)(function*(n){const e=et(n),t=eh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;MK(e);)try{const i=yield pK(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,kK(e,i)}catch(i){yield Ex(e,i)}gz(e)&&mz(e)}),uF.apply(this,arguments)}function MK(n){return Jd(n)&&n.Eu.length<10}function kK(n,e){n.Eu.push(e);const t=eh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function gz(n){return Jd(n)&&!eh(n).Uo()&&n.Eu.length>0}function mz(n){eh(n).start()}function RK(n){return cF.apply(this,arguments)}function cF(){return cF=(0,Q.Z)(function*(n){eh(n).hu()}),cF.apply(this,arguments)}function PK(n){return dF.apply(this,arguments)}function dF(){return dF=(0,Q.Z)(function*(n){const e=eh(n);for(const t of n.Eu)e.uu(t.mutations)}),dF.apply(this,arguments)}function OK(n,e,t){return hF.apply(this,arguments)}function hF(){return hF=(0,Q.Z)(function*(n,e,t){const r=n.Eu.shift(),i=wN.from(r,e,t);yield pz(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield m_(n)}),hF.apply(this,arguments)}function NK(n,e){return fF.apply(this,arguments)}function fF(){return fF=(0,Q.Z)(function*(n,e){var t;e&&eh(n).ou&&(yield(t=(0,Q.Z)(function*(r,i){if(n$(s=i.code)&&s!==le.ABORTED){const o=r.Eu.shift();eh(r).Qo(),yield pz(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield m_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),gz(n)&&mz(n)}),fF.apply(this,arguments)}function yz(n,e){return pF.apply(this,arguments)}function pF(){return pF=(0,Q.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Jd(t);t.vu.add(3),yield g_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield fE(t)}),pF.apply(this,arguments)}function gF(n,e){return mF.apply(this,arguments)}function mF(){return mF=(0,Q.Z)(function*(n,e){const t=et(n);e?(t.vu.delete(2),yield fE(t)):e||(t.vu.add(2),yield g_(t),t.bu.set("Unknown"))}),mF.apply(this,arguments)}function y_(n){return n.Su||(n.Su=function(e,t,r){const i=et(e);return i.fu(),new wK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:SK.bind(null,n),ao:xK.bind(null,n),nu:AK.bind(null,n)}),n.Ru.push(function(){var e=(0,Q.Z)(function*(t){t?(n.Su.Qo(),iF(n)?rF(n):n.bu.set("Unknown")):(yield n.Su.stop(),fz(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function eh(n){return n.Du||(n.Du=function(e,t,r){const i=et(e);return i.fu(),new EK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:RK.bind(null,n),ao:NK.bind(null,n),au:PK.bind(null,n),cu:OK.bind(null,n)}),n.Ru.push(function(){var e=(0,Q.Z)(function*(t){t?(n.Du.Qo(),yield m_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class yF{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,c=new yF(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),jd(n))return new De(le.UNAVAILABLE,`${e}: ${n}`);throw n}class v_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Zw(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new v_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof v_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new v_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _z{constructor(){this.Cu=new jn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):lt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class b_{constructor(e,t,r,i,s,o,c,d,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new b_(e,t,v_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ww(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class FK{constructor(){this.Nu=void 0,this.listeners=[]}}class LK{constructor(){this.queries=new nc(e=>LH(e),Ww),this.onlineState="Unknown",this.ku=new Set}}function _F(n,e){return vF.apply(this,arguments)}function vF(){return vF=(0,Q.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new FK),i)try{s.Nu=yield t.onListen(r)}catch(o){const c=__(o,`Initialization of query '${yN(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&EF(t)}),vF.apply(this,arguments)}function bF(n,e){return wF.apply(this,arguments)}function wF(){return wF=(0,Q.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),wF.apply(this,arguments)}function VK(n,e){const t=et(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const c of o.listeners)c.$u(i)&&(r=!0);o.Nu=i}}r&&EF(t)}function UK(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function EF(n){n.ku.forEach(e=>{e.next()})}class IF{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new b_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=b_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class BK{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class vz{constructor(e){this.serializer=e}rr(e){return xl(this.serializer,e)}ur(e){return e.metadata.exists?y$(this.serializer,e.document,!1):Zn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Lr(e)}}class jK{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bz(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=mn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new vz(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const o of i.metadata.queries){const c=(t.get(o)||qt()).add(s);t.set(o,c)}}return t}complete(){var e=this;return(0,Q.Z)(function*(){const t=yield function gK(n,e,t,r){return GN.apply(this,arguments)}(e.localStore,new vz(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield mK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function bz(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wz{constructor(e){this.key=e}}class Ez{constructor(e){this.key=e}}class Iz{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qt(),this.mutatedKeys=qt(),this.tc=UH(e),this.ec=new v_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new _z,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const d="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,g="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,w)=>{const T=i.get(_),S=qw(this.query,w)?w:null,M=!!T&&this.mutatedKeys.has(T.key),R=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;T&&S?T.data.isEqual(S.data)?M!==R&&(r.track({type:3,doc:S}),N=!0):this.rc(T,S)||(r.track({type:2,doc:S}),N=!0,(d&&this.tc(S,d)>0||g&&this.tc(S,g)<0)&&(c=!0)):!T&&S?(r.track({type:0,doc:S}),N=!0):T&&!S&&(r.track({type:1,doc:T}),N=!0,(d||g)&&(c=!0)),N&&(S?(o=o.add(S),s=R?s.add(_):s.delete(_)):(o=o.delete(_),s=s.delete(_)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const _="F"===this.query.limitType?o.last():o.first();o=o.delete(_.key),s=s.delete(_.key),r.track({type:1,doc:_})}return{ec:o,ic:r,zi:c,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((g,_)=>function(w,T){const S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return S(w)-S(T)}(g.type,_.type)||this.tc(g.doc,_.doc)),this.oc(r);const o=t?this.uc():[],c=0===this.Zu.size&&this.current?1:0,d=c!==this.Xu;return this.Xu=c,0!==s.length||d?{snapshot:new b_(this.query,e.ec,i,s,e.mutatedKeys,0===c,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new _z,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Ez(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new wz(r))}),t}hc(e){this.Yu=e.ir,this.Zu=qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return b_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class HK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $K{constructor(e){this.key=e,this.fc=!1}}class zK{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new nc(c=>LH(c),Ww),this._c=new Map,this.mc=new Set,this.gc=new jn(Qe.comparator),this.yc=new Map,this.Ic=new LN,this.Tc={},this.Ec=new Map,this.Ac=$p.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function GK(n,e){return CF.apply(this,arguments)}function CF(){return CF=(0,Q.Z)(function*(n,e){const t=qF(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield f_(t.localStore,_s(e)),c=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield DF(t,e,r,"current"===c,o.resumeToken),t.isPrimaryClient&&wx(t.remoteStore,o)}return i}),CF.apply(this,arguments)}function DF(n,e,t,r,i){return TF.apply(this,arguments)}function TF(){return TF=(0,Q.Z)(function*(n,e,t,r,i){n.Rc=(w,T,S)=>{return(M=(0,Q.Z)(function*(R,N,B,G){let X=N.view.sc(B);X.zi&&(X=yield mx(R.localStore,N.query,!1).then(({documents:pe})=>N.view.sc(pe,X)));const ee=G&&G.targetChanges.get(N.targetId),re=N.view.applyChanges(X,R.isPrimaryClient,ee);return FF(R,N.targetId,re.cc),re.snapshot}),function(R,N,B,G){return M.apply(this,arguments)})(n,w,T,S);var M};const s=yield mx(n.localStore,e,!0),o=new Iz(e,s.ir),c=o.sc(s.documents),d=eE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),g=o.applyChanges(c,n.isPrimaryClient,d);FF(n,t,g.cc);const _=new HK(e,t,o);return n.wc.set(e,_),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),g.snapshot}),TF.apply(this,arguments)}function WK(n,e){return SF.apply(this,arguments)}function SF(){return SF=(0,Q.Z)(function*(n,e){const t=et(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!Ww(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield p_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),pE(t.remoteStore,r.targetId),w_(t,r.targetId)}).catch(Bd))):(w_(t,r.targetId),yield p_(t.localStore,r.targetId,!0))}),SF.apply(this,arguments)}function xF(){return xF=(0,Q.Z)(function*(n,e,t){const r=ZF(n);try{const i=yield function(s,o){const c=et(s),d=or.now(),g=o.reduce((T,S)=>T.add(S.key),qt());let _,w;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=js(),M=qt();return c.Zi.getEntries(T,g).next(R=>{S=R,S.forEach((N,B)=>{B.isValidDocument()||(M=M.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,S)).next(R=>{_=R;const N=[];for(const B of o){const G=EZ(B,_.get(B.key).overlayedDocument);null!=G&&N.push(new rc(B.key,G,IH(G.value.mapValue),ar.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,N,o)}).next(R=>{w=R;const N=R.applyToLocalDocumentSet(_,M);return c.documentOverlayCache.saveOverlays(T,R.batchId,N)})}).then(()=>({batchId:w.batchId,changes:jH(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let d=s.Tc[s.currentUser.toKey()];d||(d=new jn(Ht)),d=d.insert(o,c),s.Tc[s.currentUser.toKey()]=d}(r,i.batchId,t),yield sc(r,i.changes),yield m_(r.remoteStore)}catch(i){const s=__(i,"Failed to persist write");t.reject(s)}}),xF.apply(this,arguments)}function Cz(n,e){return AF.apply(this,arguments)}function AF(){return AF=(0,Q.Z)(function*(n,e){const t=et(n);try{const r=yield fK(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.yc.get(s);o&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?wt(o.fc):i.removedDocuments.size>0&&(wt(o.fc),o.fc=!1))}),yield sc(t,r,e)}catch(r){yield Bd(r)}}),AF.apply(this,arguments)}function Dz(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,o)=>{const c=o.view.Mu(e);c.snapshot&&i.push(c.snapshot)}),function(s,o){const c=et(s);c.onlineState=o;let d=!1;c.queries.forEach((g,_)=>{for(const w of _.listeners)w.Mu(o)&&(d=!0)}),d&&EF(c)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ZK(n,e,t){return MF.apply(this,arguments)}function MF(){return MF=(0,Q.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new jn(Qe.comparator);o=o.insert(s,Zn.newNoDocument(s,Et.min()));const c=qt().add(s),d=new Jw(Et.min(),new Map,new jn(Ht),o,c);yield Cz(r,d),r.gc=r.gc.remove(s),r.yc.delete(e),LF(r)}else yield p_(r.localStore,e,!1).then(()=>w_(r,e,t)).catch(Bd)}),MF.apply(this,arguments)}function KK(n,e){return kF.apply(this,arguments)}function kF(){return kF=(0,Q.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield hK(t.localStore,e);NF(t,r,null),OF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sc(t,i)}catch(i){yield Bd(i)}}),kF.apply(this,arguments)}function YK(n,e,t){return RF.apply(this,arguments)}function RF(){return RF=(0,Q.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(s,o){const c=et(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return c.mutationQueue.lookupMutationBatch(d,o).next(_=>(wt(null!==_),g=_.keys(),c.mutationQueue.removeMutationBatch(d,_))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,g,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>c.localDocuments.getDocuments(d,g))})}(r.localStore,e);NF(r,e,t),OF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sc(r,i)}catch(i){yield Bd(i)}}),RF.apply(this,arguments)}function PF(){return PF=(0,Q.Z)(function*(n,e){const t=et(n);Jd(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const o=et(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=__(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),PF.apply(this,arguments)}function OF(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function NF(n,e,t){const r=et(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function w_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Tz(n,r)})}function Tz(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(pE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),LF(n))}function FF(n,e,t){for(const r of t)r instanceof wz?(n.Ic.addReference(r.key,e),XK(n,r)):r instanceof Ez?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Tz(n,r.key)):lt()}function XK(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),LF(n))}function LF(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(mn.fromString(e)),r=n.Ac.next();n.yc.set(r,new $K(t)),n.gc=n.gc.insert(t,r),wx(n.remoteStore,new ic(_s(i_(t.path)),r,"TargetPurposeLimboResolution",co.ct))}}function sc(n,e,t){return VF.apply(this,arguments)}function VF(){return VF=(0,Q.Z)(function*(n,e,t){const r=et(n),i=[],s=[],o=[];var c;r.wc.isEmpty()||(r.wc.forEach((c,d)=>{o.push(r.Rc(d,e,t).then(g=>{if((g||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(d.targetId,g?.fromCache?"not-current":"current"),g){i.push(g);const _=HN.Li(d.targetId,g);s.push(_)}}))}),yield Promise.all(o),r.dc.nu(i),yield(c=(0,Q.Z)(function*(d,g){const _=et(d);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>oe.forEach(g,T=>oe.forEach(T.Fi,S=>_.persistence.referenceDelegate.addReference(w,T.targetId,S)).next(()=>oe.forEach(T.Bi,S=>_.persistence.referenceDelegate.removeReference(w,T.targetId,S)))))}catch(w){if(!jd(w))throw w;Fe("LocalStore","Failed to update sequence numbers: "+w)}for(const w of g){const T=w.targetId;if(!w.fromCache){const S=_.Ji.get(T),R=S.withLastLimboFreeSnapshotVersion(S.snapshotVersion);_.Ji=_.Ji.insert(T,R)}}}),function(d,g){return c.apply(this,arguments)})(r.localStore,s))}),VF.apply(this,arguments)}function JK(n,e){return UF.apply(this,arguments)}function UF(){return UF=(0,Q.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield ez(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(o=>{o.forEach(c=>{c.reject(new De(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sc(t,r.er)}var i}),UF.apply(this,arguments)}function eY(n,e){const t=et(n),r=t.yc.get(e);if(r&&r.fc)return qt().add(r.key);{let i=qt();const s=t._c.get(e);if(!s)return i;for(const o of s){const c=t.wc.get(o);i=i.unionWith(c.view.nc)}return i}}function tY(n,e){return BF.apply(this,arguments)}function BF(){return BF=(0,Q.Z)(function*(n,e){const t=et(n),r=yield mx(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&FF(t,e.targetId,i.cc),i}),BF.apply(this,arguments)}function nY(n,e){return jF.apply(this,arguments)}function jF(){return jF=(0,Q.Z)(function*(n,e){const t=et(n);return iz(t.localStore,e).then(r=>sc(t,r))}),jF.apply(this,arguments)}function rY(n,e,t,r){return HF.apply(this,arguments)}function HF(){return HF=(0,Q.Z)(function*(n,e,t,r){const i=et(n),s=yield function(o,c){const d=et(o),g=et(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",_=>g.Sn(_,c).next(w=>w?d.localDocuments.getDocuments(_,w):oe.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield m_(i.remoteStore):"acknowledged"===t||"rejected"===t?(NF(i,e,r||null),OF(i,e),c=e,et(et(i.localStore).mutationQueue).Cn(c)):lt(),yield sc(i,s)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),HF.apply(this,arguments)}function $F(){return $F=(0,Q.Z)(function*(n,e){const t=et(n);if(qF(t),ZF(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Sz(t,r.toArray());t.vc=!0,yield gF(t.remoteStore,!0);for(const s of i)wx(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(w_(t,o),p_(t.localStore,o,!0))),pE(t.remoteStore,o)}),yield i,yield Sz(t,r),function(s){const o=et(s);o.yc.forEach((c,d)=>{pE(o.remoteStore,d)}),o.Ic.Ts(),o.yc=new Map,o.gc=new jn(Qe.comparator)}(t),t.vc=!1,yield gF(t.remoteStore,!1)}}),$F.apply(this,arguments)}function Sz(n,e,t){return zF.apply(this,arguments)}function zF(){return zF=(0,Q.Z)(function*(n,e,t){const r=et(n),i=[],s=[];for(const o of e){let c;const d=r._c.get(o);if(d&&0!==d.length){c=yield f_(r.localStore,_s(d[0]));for(const g of d){const _=r.wc.get(g),w=yield tY(r,_);w.snapshot&&s.push(w.snapshot)}}else{const g=yield rz(r.localStore,o);c=yield f_(r.localStore,g),yield DF(r,xz(g),o,!1,c.resumeToken)}i.push(c)}return r.dc.nu(s),i}),zF.apply(this,arguments)}function xz(n){return NH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function sY(n){const e=et(n);return et(et(e.localStore).persistence).$i()}function oY(n,e,t,r){return GF.apply(this,arguments)}function GF(){return GF=(0,Q.Z)(function*(n,e,t,r){const i=et(n);if(i.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield iz(i.localStore,VH(s[0])),c=Jw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ti.EMPTY_BYTE_STRING);yield sc(i,o,c);break}case"rejected":yield p_(i.localStore,e,!0),w_(i,e,r);break;default:lt()}}),GF.apply(this,arguments)}function aY(n,e,t){return WF.apply(this,arguments)}function WF(){return WF=(0,Q.Z)(function*(n,e,t){const r=qF(n);if(r.vc){for(const i of e){if(r._c.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const s=yield rz(r.localStore,i),o=yield f_(r.localStore,s);yield DF(r,xz(s),o.targetId,!1,o.resumeToken),wx(r.remoteStore,o)}for(const i of t)r._c.has(i)&&(yield p_(r.localStore,i,!1).then(()=>{pE(r.remoteStore,i),w_(r,i)}).catch(Bd))}}),WF.apply(this,arguments)}function qF(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZK.bind(null,e),e.dc.nu=VK.bind(null,e.eventManager),e.dc.Pc=UK.bind(null,e.eventManager),e}function ZF(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YK.bind(null,e),e}class gE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Q.Z)(function*(){t.serializer=hE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return J$(this.persistence,new X$,e.initialUser,this.serializer)}createPersistence(e){return new VN(fx.zs,this.serializer)}createSharedClientState(e){return new lz}terminate(){var e=this;return(0,Q.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KF extends gE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield ZF(r.Vc.syncEngine),yield m_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return J$(this.persistence,new X$,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new $$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new O7(t,this.persistence);return new P7(e.asyncQueue,r)}createPersistence(e){const t=jN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?qi.withCacheSize(this.cacheSizeBytes):qi.DEFAULT;return new BN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cz(),bx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lz}}class Az extends KF{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof YN&&(r.sharedClientState.syncEngine={jr:rY.bind(null,i),zr:oY.bind(null,i),Wr:aY.bind(null,i),$i:sY.bind(null,i),Qr:nY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,Q.Z)(function*(o){yield function iY(n,e){return $F.apply(this,arguments)}(r.Vc.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=cz();if(!YN.D(t))throw new De(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new YN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class E_{initialize(e,t){var r=this;return(0,Q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Dz(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=JK.bind(null,r.syncEngine),yield gF(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LK}createDatastore(e){const t=hE(e.databaseInfo.databaseId),r=new bK(e.databaseInfo);return new IK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=c=>Dz(this.syncEngine,c,0),o=uz.D()?new uz:new yK,new TK(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,c,d,g){const _=new zK(r,i,s,o,c,d);return g&&(_.vc=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Q.Z)(function*(t){const r=et(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield g_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Mz(n,e=10240){let t=0;return{read:()=>(0,Q.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Q.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ix{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cY{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ei,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Q.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Q.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Q.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new BK(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Q.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Q.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Q.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class dY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Q.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Q.Z)(function*(s,o){const c=et(s),d=nE(c.serializer)+"/documents",g={documents:o.map(S=>tE(c.serializer,S))},_=yield c.vo("BatchGetDocuments",d,g,o.length),w=new Map;_.forEach(S=>{const M=function RZ(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=xl(t,r.found.name),s=Lr(r.found.updateTime),o=r.found.createTime?Lr(r.found.createTime):Et.min(),c=new Ri({mapValue:{fields:r.found.fields}});return Zn.newFoundDocument(i,s,o,c)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=xl(t,r.missing),s=Lr(r.readTime);return Zn.newNoDocument(i,s)}(n,e):lt()}(c.serializer,S);w.set(M.key.toString(),M)});const T=[];return o.forEach(S=>{const M=w.get(S.toString());wt(!!M),T.push(M)}),T}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new l_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Qe.fromPath(i);e.mutations.push(new vN(s,e.precondition(s)))}),yield(r=(0,Q.Z)(function*(i,s){const o=et(i),c=nE(o.serializer)+"/documents",d={writes:s.map(g=>rE(o.serializer,g))};yield o.Io("Commit",c,d)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?ar.exists(!1):ar.updateTime(t):ar.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new De(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ar.updateTime(t)}return ar.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hY{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new XN(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Q.Z)(function*(){const t=new dY(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Uw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!n$(t)}return!1}}class fY{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=Jj.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Q.Z)(function*(c){Fe("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Fe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,Q.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=__(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Cx(n,e){return YF.apply(this,arguments)}function YF(){return YF=(0,Q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Q.Z)(function*(s){r.isEqual(s)||(yield ez(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),YF.apply(this,arguments)}function QF(n,e){return XF.apply(this,arguments)}function XF(){return XF=(0,Q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JF(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>yz(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>yz(e.remoteStore,s)),n._onlineComponents=e}),XF.apply(this,arguments)}function kz(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function JF(n){return eL.apply(this,arguments)}function eL(){return eL=(0,Q.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!kz(t))throw t;jo("Error using user provided cache. Falling back to memory cache: "+t),yield Cx(n,new gE)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Cx(n,new gE);return n._offlineComponents}),eL.apply(this,arguments)}function Dx(n){return tL.apply(this,arguments)}function tL(){return tL=(0,Q.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield QF(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield QF(n,new E_))),n._onlineComponents}),tL.apply(this,arguments)}function Rz(n){return JF(n).then(e=>e.persistence)}function Tx(n){return JF(n).then(e=>e.localStore)}function Pz(n){return Dx(n).then(e=>e.remoteStore)}function nL(n){return Dx(n).then(e=>e.syncEngine)}function I_(n){return rL.apply(this,arguments)}function rL(){return rL=(0,Q.Z)(function*(n){const e=yield Dx(n),t=e.eventManager;return t.onListen=GK.bind(null,e.syncEngine),t.onUnlisten=WK.bind(null,e.syncEngine),t}),rL.apply(this,arguments)}function Nz(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(i,s,o,c,d){const g=new Ix({next:w=>{s.enqueueAndForget(()=>bF(i,_));const T=w.docs.has(o);!T&&w.fromCache?d.reject(new De(le.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&c&&"server"===c.source?d.reject(new De(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(w)},error:w=>d.reject(w)}),_=new IF(i_(o.path),g,{includeMetadataChanges:!0,Ku:!0});return _F(i,_)}(yield I_(n),n.asyncQueue,e,t,r)})),r.promise}function Fz(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(i,s,o,c,d){const g=new Ix({next:w=>{s.enqueueAndForget(()=>bF(i,_)),w.fromCache&&"server"===c.source?d.reject(new De(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(w)},error:w=>d.reject(w)}),_=new IF(o,g,{includeMetadataChanges:!0,Ku:!0});return _F(i,_)}(yield I_(n),n.asyncQueue,e,t,r)})),r.promise}function Lz(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Vz=new Map;function iL(n,e,t){if(!t)throw new De(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Uz(n,e,t,r){if(!0===e&&!0===r)throw new De(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Bz(n){if(!Qe.isDocumentKey(n))throw new De(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jz(n){if(Qe.isDocumentKey(n))throw new De(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sx(n);throw new De(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Hz(n,e){if(e<=0)throw new De(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class $z{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new De(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Lz(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new De(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new De(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new De(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $z({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $z(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new w7;switch(t.type){case"firstParty":return new D7(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Vz.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),Vz.delete(e),t.terminate())}(this),Promise.resolve()}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class Pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class Al extends Pi{constructor(e,t,r){super(e,t,i_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new Qe(e))}withConverter(e){return new Al(this.firestore,e,this._path)}}function Gz(n,e,...t){if(n=(0,at.m9)(n),iL("collection","path",e),n instanceof mE){const r=mn.fromString(e,...t);return jz(r),new Al(n,null,r)}{if(!(n instanceof Kn||n instanceof Al))throw new De(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return jz(r),new Al(n.firestore,null,r)}}function xx(n,e,...t){if(n=(0,at.m9)(n),1===arguments.length&&(e=Jj.A()),iL("doc","path",e),n instanceof mE){const r=mn.fromString(e,...t);return Bz(r),new Kn(n,null,new Qe(r))}{if(!(n instanceof Kn||n instanceof Al))throw new De(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return Bz(r),new Kn(n.firestore,n instanceof Al?n.converter:null,new Qe(r))}}function Wz(n,e){return n=(0,at.m9)(n),e=(0,at.m9)(e),(n instanceof Kn||n instanceof Al)&&(e instanceof Kn||e instanceof Al)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sL(n,e){return n=(0,at.m9)(n),e=(0,at.m9)(e),n instanceof Pi&&e instanceof Pi&&n.firestore===e.firestore&&Ww(n._query,e._query)&&n.converter===e.converter}class IY{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new XN(this,"async_queue_retry"),this.Xc=()=>{const t=bx();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=bx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=bx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ei;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Q.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!jd(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=yF.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&lt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Q.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function oL(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class CY{constructor(){this._progressObserver={},this._taskCompletionResolver=new ei,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yn extends mE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new IY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||qz(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||qz(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function qz(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new tZ(n._databaseId,c,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Lz(g.experimentalLongPollingOptions),g.useFetchStreams));var c,g;n._firestoreClient=new fY(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Zz(n,e,t){const r=new ei;return n.asyncQueue.enqueue((0,Q.Z)(function*(){try{yield Cx(n,t),yield QF(n,e),r.resolve()}catch(i){const s=i;if(!kz(s))throw s;jo("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function Kz(n){if(n._initialized||n._terminated)throw new De(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(ti.fromBase64String(e))}catch(t){throw new De(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ml(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gp{constructor(e){this._methodName=e}}class Ax{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const NY=/^__.*__$/;class FY{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new rc(e,this.data,this.fieldMask,t,this.fieldTransforms):new a_(e,this.data,t,this.fieldTransforms)}}class Yz{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qz(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class Mx{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Mx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Px(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Qz(this.ca)&&NY.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class LY{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hE(e)}ya(e,t,r,i=!1){return new Mx({ca:e,methodName:t,ga:r,path:Tr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wp(n){const e=n._freezeSettings(),t=hE(n._databaseId);return new LY(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kx(n,e,t,r,i,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,i);cL("Data must be an object, but it was:",o,r);const c=e4(r,o);let d,g;if(s.merge)d=new Bs(o.fieldMask),g=o.fieldTransforms;else if(s.mergeFields){const _=[];for(const w of s.mergeFields){const T=vE(e,w,t);if(!o.contains(T))throw new De(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);n4(_,T)||_.push(T)}d=new Bs(_),g=o.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,g=o.fieldTransforms;return new FY(new Ri(c),d,g)}class _E extends Gp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _E}}function Xz(n,e,t){return new Mx({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class aL extends Gp{_toFieldTransform(e){return new Yw(e.path,new s_)}isEqual(e){return e instanceof aL}}class VY extends Gp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Xz(this,e,!0),r=this.pa.map(s=>qp(s,t)),i=new Fp(r);return new Yw(e.path,i)}isEqual(e){return this===e}}class UY extends Gp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Xz(this,e,!0),r=this.pa.map(s=>qp(s,t)),i=new Lp(r);return new Yw(e.path,i)}isEqual(e){return this===e}}class BY extends Gp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new o_(e.serializer,GH(e.serializer,this.Ia));return new Yw(e.path,t)}isEqual(e){return this===e}}function lL(n,e,t,r){const i=n.ya(1,e,t);cL("Data must be an object, but it was:",i,r);const s=[],o=Ri.empty();Hd(r,(d,g)=>{const _=Rx(e,d,t);g=(0,at.m9)(g);const w=i.da(_);if(g instanceof _E)s.push(_);else{const T=qp(g,w);null!=T&&(s.push(_),o.set(_,T))}});const c=new Bs(s);return new Yz(o,c,i.fieldTransforms)}function uL(n,e,t,r,i,s){const o=n.ya(1,e,t),c=[vE(e,r,t)],d=[i];if(s.length%2!=0)throw new De(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)c.push(vE(e,s[T])),d.push(s[T+1]);const g=[],_=Ri.empty();for(let T=c.length-1;T>=0;--T)if(!n4(g,c[T])){const S=c[T];let M=d[T];M=(0,at.m9)(M);const R=o.da(S);if(M instanceof _E)g.push(S);else{const N=qp(M,R);null!=N&&(g.push(S),_.set(S,N))}}const w=new Bs(g);return new Yz(_,w,o.fieldTransforms)}function Jz(n,e,t,r=!1){return qp(t,n.ya(r?4:3,e))}function qp(n,e){if(t4(n=(0,at.m9)(n)))return cL("Unsupported field value:",e,n),e4(n,e);if(n instanceof Gp)return function(t,r){if(!Qz(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let c=qp(o,r.wa(s));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,at.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return GH(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=or.fromDate(t);return{timestampValue:u_(r.serializer,i)}}if(t instanceof or){const i=new or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:u_(r.serializer,i)}}if(t instanceof Ax)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ml)return{bytesValue:h$(r.serializer,t._byteString)};if(t instanceof Kn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:TN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Sx(t)}`)}(n,e)}function e4(n,e){const t={};return pH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hd(n,(r,i)=>{const s=qp(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function t4(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof or||n instanceof Ax||n instanceof Ml||n instanceof Kn||n instanceof Gp)}function cL(n,e,t){if(!t4(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Sx(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function vE(n,e,t){if((e=(0,at.m9)(e))instanceof oc)return e._internalPath;if("string"==typeof e)return Rx(n,e);throw Px("Field path arguments must be of type string or ",n,!1,void 0,t)}const jY=new RegExp("[~\\*/\\[\\]]");function Rx(n,e,t){if(e.search(jY)>=0)throw Px(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oc(...e.split("."))._internalPath}catch{throw Px(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Px(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||o)&&(d+=" (found",s&&(d+=` in field ${r}`),o&&(d+=` in document ${i}`),d+=")"),new De(le.INVALID_ARGUMENT,c+n+d)}function n4(n,e){return n.some(t=>t.isEqual(e))}class bE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new HY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ox("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class HY extends bE{data(){return super.data()}}function Ox(n,e){return"string"==typeof e?Rx(n,e):e instanceof oc?e._internalPath:e._delegate._internalPath}function r4(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dL{}class wE extends dL{}function th(n,e,...t){let r=[];e instanceof dL&&r.push(e),r=r.concat(t),function(i){const s=i.filter(c=>c instanceof C_).length,o=i.filter(c=>c instanceof EE).length;if(s>1||s>0&&o>0)throw new De(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class EE extends wE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new EE(e,t,r)}_apply(e){const t=this._parse(e);return a4(e._query,t),new Pi(e.firestore,e.converter,mN(e._query,t))}_parse(e){const t=Wp(e.firestore);return function(i,s,o,c,d,g,_){let w;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new De(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){o4(_,g);const T=[];for(const S of _)T.push(s4(c,i,S));w={arrayValue:{values:T}}}else w=s4(c,i,_)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||o4(_,g),w=Jz(o,"where",_,"in"===g||"not-in"===g);return hn.create(d,g,w)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class C_ extends dL{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new C_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:An.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const c of o)a4(s,c),s=mN(s,c)}(e._query,t),new Pi(e.firestore,e.converter,mN(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hL extends wE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hL(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new De(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new n_(i,s);return function(c,d){if(null===pN(c)){const g=XS(c);null!==g&&l4(0,g,d.field)}}(r,o),o}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new tc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Nx extends wE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Nx(e,t,r)}_apply(e){return new Pi(e.firestore,e.converter,JS(e._query,this._limit,this._limitType))}}class Fx extends wE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Fx(e,t,r)}_apply(e){const t=i4(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(i=t,new tc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Lx extends wE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lx(e,t,r)}_apply(e){const t=i4(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(i=t,new tc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function i4(n,e,t,r){if(t[0]=(0,at.m9)(t[0]),t[0]instanceof bE)return function(i,s,o,c,d){if(!c)throw new De(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const g=[];for(const _ of Np(i))if(_.field.isKeyField())g.push(Pp(s,c.key));else{const w=c.data.field(_.field);if(GS(w))throw new De(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===w){const T=_.field.canonicalString();throw new De(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}g.push(w)}return new Zd(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Wp(n.firestore);return function(s,o,c,d,g,_){const w=s.explicitOrderBy;if(g.length>w.length)throw new De(le.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let S=0;S<g.length;S++){const M=g[S];if(w[S].field.isKeyField()){if("string"!=typeof M)throw new De(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof M}`);if(!gN(s)&&-1!==M.indexOf("/"))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${M}' contains a slash.`);const R=s.path.child(mn.fromString(M));if(!Qe.isDocumentKey(R))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const N=new Qe(R);T.push(Pp(o,N))}else{const R=Jz(c,d,M);T.push(R)}}return new Zd(T,_)}(n._query,n.firestore._databaseId,i,e,t,r)}}function s4(n,e,t){if("string"==typeof(t=(0,at.m9)(t))){if(""===t)throw new De(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gN(e)&&-1!==t.indexOf("/"))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Qe.isDocumentKey(r))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pp(n,new Qe(r))}if(t instanceof Kn)return Pp(n,t._key);throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sx(t)}.`)}function o4(n,e){if(!Array.isArray(n)||0===n.length)throw new De(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a4(n,e){if(e.isInequality()){const r=XS(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new De(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=pN(n);null!==s&&l4(0,i,s)}const t=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new De(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function l4(n,e,t){if(!t.isEqual(e))throw new De(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fL{convertValue(e,t="none"){switch(Wd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Hd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Ax(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=WS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jw(e));default:return null}}convertTimestamp(e){const t=$d(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);wt(E$(r));const i=new zd(r.get(1),r.get(3)),s=new Qe(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Vx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class QY extends fL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}class Zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ac extends bE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new IE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ox("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class IE extends ac{data(e={}){return super.data(e)}}class nh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new IE(this._firestore,this._userDataWriter,r.key,r,new Zp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new IE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Zp(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const c=new IE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Zp(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,g=-1;return 0!==o.type&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),g=s.indexOf(o.doc.key)),{type:JY(o.type),doc:c,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function JY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function c4(n,e){return n instanceof ac&&e instanceof ac?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nh&&e instanceof nh&&n._firestore===e._firestore&&sL(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class rh extends fL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function d4(n,e,t){n=fn(n,Kn);const r=fn(n.firestore,Yn),i=Vx(n.converter,e,t);return D_(r,[kx(Wp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ar.none())])}function h4(n,e,t,...r){n=fn(n,Kn);const i=fn(n.firestore,Yn),s=Wp(i);let o;return o="string"==typeof(e=(0,at.m9)(e))||e instanceof oc?uL(s,"updateDoc",n._key,e,t,r):lL(s,"updateDoc",n._key,e),D_(i,[o.toMutation(n._key,ar.exists(!0))])}function f4(n,...e){var t,r,i;n=(0,at.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||oL(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges};if(oL(e[o])){const w=e[o];e[o]=null===(t=w.next)||void 0===t?void 0:t.bind(w),e[o+1]=null===(r=w.error)||void 0===r?void 0:r.bind(w),e[o+2]=null===(i=w.complete)||void 0===i?void 0:i.bind(w)}let d,g,_;if(n instanceof Kn)g=fn(n.firestore,Yn),_=i_(n._key.path),d={next:w=>{e[o]&&e[o](pL(g,n,w))},error:e[o+1],complete:e[o+2]};else{const w=fn(n,Pi);g=fn(w.firestore,Yn),_=w._query;const T=new rh(g);d={next:S=>{e[o]&&e[o](new nh(g,T,w,S))},error:e[o+1],complete:e[o+2]},r4(n._query)}return function(w,T,S,M){const R=new Ix(M),N=new IF(T,R,S);return w.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return _F(yield I_(w),N)})),()=>{R.Dc(),w.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return bF(yield I_(w),N)}))}}(Vr(g),_,c,d)}function D_(n,e){return function(t,r){const i=new ei;return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function qK(n,e,t){return xF.apply(this,arguments)}(yield nL(t),r,i)})),i.promise}(Vr(n),e)}function pL(n,e,t){const r=t.docs.get(e._key),i=new rh(n);return new ac(n,i,e._key,r,new Zp(t.hasPendingWrites,t.fromCache),e.converter)}const yQ={maxAttempts:5};class p4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wp(e)}set(e,t,r){this._verifyNotCommitted();const i=ih(e,this._firestore),s=Vx(i.converter,t,r),o=kx(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ar.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=ih(e,this._firestore);let o;return o="string"==typeof(t=(0,at.m9)(t))||t instanceof oc?uL(this._dataReader,"WriteBatch.update",s._key,t,r,i):lL(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ih(e,this._firestore);return this._mutations=this._mutations.concat(new l_(t._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ih(n,e){if((n=(0,at.m9)(n)).firestore!==e)throw new De(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class _Q extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wp(e)}get(e){const t=ih(e,this._firestore),r=new QY(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const s=i[0];if(s.isFoundDocument())return new bE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new bE(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=ih(e,this._firestore),s=Vx(i.converter,t,r),o=kx(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=ih(e,this._firestore);let o;return o="string"==typeof(t=(0,at.m9)(t))||t instanceof oc?uL(this._dataReader,"Transaction.update",s._key,t,r,i):lL(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ih(e,this._firestore),r=new rh(this._firestore);return super.get(e).then(i=>new ac(this._firestore,r,t._key,i._document,new Zp(!1,!1),t.converter))}}function gL(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function m4(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function y4(){if(!function J7(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xy=rn.SDK_VERSION,(0,rn._registerComponent)(new oo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new Yn(new I7(t.getProvider("auth-internal")),new T7(t.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new De(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zd(c.options.projectId,d)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(Yj,"3.12.0",n),(0,rn.registerVersion)(Yj,"3.12.0","esm2017")}();class CE{constructor(e){this._delegate=e}static fromBase64String(e){return y4(),new CE(Ml.fromBase64String(e))}static fromUint8Array(e){return m4(),new CE(Ml.fromUint8Array(e))}toBase64(){return y4(),this._delegate.toBase64()}toUint8Array(){return m4(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mL(n){return function SQ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class xQ{enableIndexedDbPersistence(e,t){return function TY(n,e){Kz(n=fn(n,Yn));const t=Vr(n);if(t._uninitializedComponentsProvider)throw new De(le.FAILED_PRECONDITION,"SDK cache is already specified.");jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new E_;return Zz(t,i,new KF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function SY(n){Kz(n=fn(n,Yn));const e=Vr(n);if(e._uninitializedComponentsProvider)throw new De(le.FAILED_PRECONDITION,"SDK cache is already specified.");jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new E_;return Zz(e,r,new Az(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function xY(n){if(n._initialized&&!n._terminated)throw new De(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ei;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{yield(t=(0,Q.Z)(function*(r){if(!Ma.D())return Promise.resolve();const i=r+"main";yield Ma.delete(i)}),function(r){return t.apply(this,arguments)})(jN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _4{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function zz(n,e,t,r={}){var i;const s=(n=fn(n,mE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&jo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,c;if("string"==typeof r.mockUserToken)o=r.mockUserToken,c=gi.MOCK_USER;else{o=(0,at.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new De(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new gi(d)}n._authCredentials=new E7(new Qj(o,c))}}(this._delegate,e,t,r)}enableNetwork(){return function MY(n){return function pY(n){return n.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield Rz(n),t=yield Pz(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i.vu.delete(0),fE(i)}(t)}))}(Vr(n=fn(n,Yn)))}(this._delegate)}disableNetwork(){return function kY(n){return function gY(n){return n.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield Rz(n),t=yield Pz(n);return e.setNetworkEnabled(!1),(r=(0,Q.Z)(function*(i){const s=et(i);s.vu.add(0),yield g_(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Vr(n=fn(n,Yn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Uz("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AY(n){return function(e){const t=new ei;return e.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function QK(n,e){return PF.apply(this,arguments)}(yield nL(e),t)})),t.promise}(Vr(n=fn(n,Yn)))}(this._delegate)}onSnapshotsInSync(e){return function lQ(n,e){return function _Y(n,e){const t=new Ix(e);return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return r=yield I_(n),i=t,et(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return r=yield I_(n),i=t,void et(r).ku.delete(i);var r,i}))}}(Vr(n=fn(n,Yn)),oL(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new T_(this,Gz(this._delegate,e))}catch(t){throw vs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ho(this,xx(this._delegate,e))}catch(t){throw vs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bs(this,function EY(n,e){if(n=fn(n,mE),iL("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(n,null,(t=e,new tc(mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw vs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function vQ(n,e,t){n=fn(n,Yn);const r=Object.assign(Object.assign({},yQ),t);return function(i){if(i.maxAttempts<1)throw new De(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const c=new ei;return i.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){const d=yield function Oz(n){return Dx(n).then(e=>e.datastore)}(i);new hY(i.asyncQueue,d,o,s,c).run()})),c.promise}(Vr(n),i=>e(new _Q(n,i)),r)}(this._delegate,t=>e(new v4(this,t)))}batch(){return Vr(this._delegate),new b4(new p4(this._delegate,e=>D_(this._delegate,e)))}loadBundle(e){return function RY(n,e){const t=Vr(n=fn(n,Yn)),r=new CY;return function vY(n,e,t,r){const i=function(s,o){let c;return c="string"==typeof s?i$().encode(s):s,d=function(d,g){if(d instanceof Uint8Array)return Mz(d,g);if(d instanceof ArrayBuffer)return Mz(new Uint8Array(d),g);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new cY(d,o);var d}(t,hE(e));n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){!function lY(n,e,t){const r=et(n);var i;(i=(0,Q.Z)(function*(s,o,c){try{const d=yield o.getMetadata();if(yield function(T,S){const M=et(T),R=Lr(S.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",N=>M.qs.getBundleMetadata(N,S.id)).then(N=>!!N&&N.createTime.compareTo(R)>=0)}(s.localStore,d))return yield o.close(),c._completeWith({taskState:"Success",documentsLoaded:(T=d).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);c._updateProgress(bz(d));const g=new jK(d,s.localStore,o.serializer);let _=yield o.bc();for(;_;){const T=yield g.zu(_);T&&c._updateProgress(T),_=yield o.bc()}const w=yield g.complete();return yield sc(s,w.Ju,void 0),yield function(T,S){const M=et(T);return M.persistence.runTransaction("Save bundle","readwrite",R=>M.qs.saveBundleMetadata(R,S))}(s.localStore,d),c._completeWith(w.progress),Promise.resolve(w.Hu)}catch(d){return jo("SyncEngine",`Loading bundle failed with ${d}`),c._failWith(d),Promise.resolve(new Set)}var T}),function(s,o,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield nL(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function PY(n,e){return function bY(n,e){return n.asyncQueue.enqueue((0,Q.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield Tx(n),e)}))}(Vr(n=fn(n,Yn)),e).then(t=>t?new Pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new bs(this,t):null)}}class Ux extends fL{constructor(e){super(),this.firestore=e}convertBytes(e){return new CE(new Ml(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ho.forKey(t,this.firestore,null)}}class v4{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ux(e)}get(e){const t=Yp(e);return this._delegate.get(t).then(r=>new DE(this._firestore,new ac(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Yp(e);return r?(gL("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Yp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}}class b4{constructor(e){this._delegate=e}set(e,t,r){const i=Yp(e);return r?(gL("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Yp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new IE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Kp(e,new Ux(e),t),i.set(t,s)),s}}Kp.INSTANCES=new WeakMap;class Ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ux(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ho(t,new Kn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Ho(t,new Kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new T_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new T_(this.firestore,Gz(this._delegate,e))}catch(t){throw vs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,at.m9)(e))instanceof Kn&&Wz(this._delegate,e)}set(e,t){t=gL("DocumentReference.set",t);try{return t?d4(this._delegate,e,t):d4(this._delegate,e)}catch(r){throw vs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?h4(this._delegate,e):h4(this._delegate,e,t,...r)}catch(i){throw vs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function oQ(n){return D_(fn(n.firestore,Yn),[new l_(n._key,ar.none())])}(this._delegate)}onSnapshot(...e){const t=w4(e),r=E4(e,i=>new DE(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return f4(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function tQ(n){n=fn(n,Kn);const e=fn(n.firestore,Yn),t=Vr(e),r=new rh(e);return function mY(n,e){const t=new ei;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(i,s,o){try{const c=yield function(d,g){const _=et(d);return _.persistence.runTransaction("read document","readonly",w=>_.localDocuments.getDocument(w,g))}(i,s);c.isFoundDocument()?o.resolve(c):c.isNoDocument()?o.resolve(null):o.reject(new De(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const d=__(c,`Failed to get document '${s} from cache`);o.reject(d)}}),function(i,s,o){return r.apply(this,arguments)})(yield Tx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ac(e,r,n._key,i,new Zp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function nQ(n){n=fn(n,Kn);const e=fn(n.firestore,Yn);return Nz(Vr(e),n._key,{source:"server"}).then(t=>pL(e,n,t))}(this._delegate):function eQ(n){n=fn(n,Kn);const e=fn(n.firestore,Yn);return Nz(Vr(e),n._key).then(t=>pL(e,n,t))}(this._delegate),t.then(r=>new DE(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ho(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}function vs(n,e,t){return n.message=n.message.replace(e,t),n}function w4(n){for(const e of n)if("object"==typeof e&&!mL(e))return e;return{}}function E4(n,e){var t,r;let i;return i=mL(n[0])?n[0]:mL(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class DE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ho(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return c4(this._delegate,e._delegate)}}class TE extends DE{data(e){const t=this._delegate.data(e);return function b7(n,e){n||lt()}(void 0!==t),t}}class bs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ux(e)}where(e,t,r){try{return new bs(this.firestore,th(this._delegate,function $Y(n,e,t){const r=e,i=Ox("where",n);return EE._create(i,r,t)}(e,t,r)))}catch(i){throw vs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new bs(this.firestore,th(this._delegate,function zY(n,e="asc"){const t=e,r=Ox("orderBy",n);return hL._create(r,t)}(e,t)))}catch(r){throw vs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bs(this.firestore,th(this._delegate,function GY(n){return Hz("limit",n),Nx._create("limit",n,"F")}(e)))}catch(t){throw vs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new bs(this.firestore,th(this._delegate,function WY(n){return Hz("limitToLast",n),Nx._create("limitToLast",n,"L")}(e)))}catch(t){throw vs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bs(this.firestore,th(this._delegate,function qY(...n){return Fx._create("startAt",n,!0)}(...e)))}catch(t){throw vs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bs(this.firestore,th(this._delegate,function ZY(...n){return Fx._create("startAfter",n,!1)}(...e)))}catch(t){throw vs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bs(this.firestore,th(this._delegate,function KY(...n){return Lx._create("endBefore",n,!1)}(...e)))}catch(t){throw vs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bs(this.firestore,th(this._delegate,function YY(...n){return Lx._create("endAt",n,!0)}(...e)))}catch(t){throw vs(t,"endAt()","Query.endAt()")}}isEqual(e){return sL(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function iQ(n){n=fn(n,Pi);const e=fn(n.firestore,Yn),t=Vr(e),r=new rh(e);return function yY(n,e){const t=new ei;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(i,s,o){try{const c=yield mx(i,s,!0),d=new Iz(s,c.ir),g=d.sc(c.documents),_=d.applyChanges(g,!1);o.resolve(_.snapshot)}catch(c){const d=__(c,`Failed to execute query '${s} against cache`);o.reject(d)}}),function(i,s,o){return r.apply(this,arguments)})(yield Tx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate):"server"===e?.source?function sQ(n){n=fn(n,Pi);const e=fn(n.firestore,Yn),t=Vr(e),r=new rh(e);return Fz(t,n._query,{source:"server"}).then(i=>new nh(e,r,n,i))}(this._delegate):function rQ(n){n=fn(n,Pi);const e=fn(n.firestore,Yn),t=Vr(e),r=new rh(e);return r4(n._query),Fz(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate),t.then(r=>new yL(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=w4(e),r=E4(e,i=>new yL(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return f4(this._delegate,t,r)}withConverter(e){return new bs(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}class MQ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new TE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yL{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new bs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new TE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new MQ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new TE(this._firestore,r))})}isEqual(e){return c4(this._delegate,e._delegate)}}class T_ extends bs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ho(this.firestore,e):null}doc(e){try{return new Ho(this.firestore,void 0===e?xx(this._delegate):xx(this._delegate,e))}catch(t){throw vs(t,"doc()","CollectionReference.doc()")}}add(e){return function aQ(n,e){const t=fn(n.firestore,Yn),r=xx(n),i=Vx(n.converter,e);return D_(t,[kx(Wp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ar.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ho(this.firestore,t))}isEqual(e){return Wz(this._delegate,e._delegate)}withConverter(e){return new T_(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}function Yp(n){return fn(n,Kn)}class _L{constructor(...e){this._delegate=new oc(...e)}static documentId(){return new _L(Tr.keyField().canonicalString())}isEqual(e){return(e=(0,at.m9)(e))instanceof oc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wQ(){return new aL("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Qp(e)}static delete(){const e=function bQ(){return new _E("deleteField")}();return e._methodName="FieldValue.delete",new Qp(e)}static arrayUnion(...e){const t=function EQ(...n){return new VY("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qp(t)}static arrayRemove(...e){const t=function IQ(...n){return new UY("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qp(t)}static increment(e){const t=function CQ(n){return new BY("increment",n)}(e);return t._methodName="FieldValue.increment",new Qp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const kQ={Firestore:_4,GeoPoint:Ax,Timestamp:or,Blob:CE,Transaction:v4,WriteBatch:b4,DocumentReference:Ho,DocumentSnapshot:DE,Query:bs,QueryDocumentSnapshot:TE,QuerySnapshot:yL,CollectionReference:T_,FieldPath:_L,FieldValue:Qp,setLogLevel:function AQ(n){!function v7(n){Ud.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function PQ(n){(function RQ(n,e){n.INTERNAL.registerComponent(new oo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},kQ)))})(n,(e,t)=>new _4(e,t,new xQ)),n.registerVersion("@firebase/firestore-compat","0.3.9")}(wU.Z);var OQ=j(6451);class NQ extends ca.x{constructor(e=1/0,t=1/0,r=Ak){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let c=0;for(let d=1;d<r.length&&r[d]<=o;d+=2)c=d;c&&r.splice(0,c+1)}}}var FQ=j(3099);function I4(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,FQ.B)({connector:()=>new NQ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function C4(n,e){return(0,Co.m)(e)?Ir(()=>n,e):Ir(()=>n)}const D4=new f.OlP("angularfire2.auth.use-emulator"),T4=new f.OlP("angularfire2.auth.settings"),S4=new f.OlP("angularfire2.auth.tenant-id"),x4=new f.OlP("angularfire2.auth.langugage-code"),A4=new f.OlP("angularfire2.auth.use-device-language"),M4=new f.OlP("angularfire.auth.persistence"),k4=(n,e,t,r,i,s,o,c)=>(0,ps.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const d=e.runOutsideAngular(()=>n.auth());if(t&&d.useEmulator(...t),r&&(d.tenantId=r),d.languageCode=i,s&&d.useDeviceLanguage(),o)for(const[g,_]of Object.entries(o))d.settings[g]=_;return c&&d.setPersistence(c),d},[t,r,i,s,o,c]);let R4=(()=>{class n{constructor(t,r,i,s,o,c,d,g,_,w,T,S){const M=new ca.x,R=mt(void 0).pipe((0,Ip.Q)(o.outsideAngular),Ir(()=>s.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,Nt.U)(()=>(0,ps.on)(t,s,r)),(0,Nt.U)(N=>k4(N,s,c,g,_,w,d,T)),I4({bufferSize:1,refCount:!1}));if(po(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{R.pipe(Do()).subscribe();const B=R.pipe(Ir(ee=>ee.getRedirectResult().then(re=>re,()=>null)),fs,I4({bufferSize:1,refCount:!1})),G=R.pipe(Ir(ee=>new Os.y(re=>({unsubscribe:s.runOutsideAngular(()=>ee.onAuthStateChanged(pe=>re.next(pe),pe=>re.error(pe),()=>re.complete()))})))),X=R.pipe(Ir(ee=>new Os.y(re=>({unsubscribe:s.runOutsideAngular(()=>ee.onIdTokenChanged(pe=>re.next(pe),pe=>re.error(pe),()=>re.complete()))}))));this.authState=B.pipe(C4(G),(0,lw.R)(o.outsideAngular),(0,Ip.Q)(o.insideAngular)),this.user=B.pipe(C4(X),(0,lw.R)(o.outsideAngular),(0,Ip.Q)(o.insideAngular)),this.idToken=this.user.pipe(Ir(ee=>ee?(0,wn.D)(ee.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Ir(ee=>ee?(0,wn.D)(ee.getIdTokenResult()):mt(null))),this.credential=(0,OQ.T)(B,M,this.authState.pipe(Ys(ee=>!ee))).pipe((0,Nt.U)(ee=>ee?.user?ee:null),(0,lw.R)(o.outsideAngular),(0,Ip.Q)(o.insideAngular))}return(0,ps.pX)(this,R,s,{spy:{apply:(N,B,G)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&G.then(X=>M.next(X))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ps.Dh),f.LFG(ps.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(uw),f.LFG(D4,8),f.LFG(T4,8),f.LFG(S4,8),f.LFG(x4,8),f.LFG(A4,8),f.LFG(M4,8),f.LFG(mw,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function P4(n,e){return function VQ(n,e=Mk){return new Os.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function vL(n,e){return P4(n,e).pipe((0,Nt.U)(t=>({payload:t,type:"query"})))}function Bx(n,e){return vL(n,e).pipe(nm(void 0),cO(),(0,Nt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((o,c)=>{const d=i.find(_=>_.doc.ref.isEqual(o.ref)),g=t?.payload.docs.find(_=>_.ref.isEqual(o.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(o.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:o}})}),s}))}function O4(n,e,t){return Bx(n,t).pipe(To((r,i)=>function BQ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function jQ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bL(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bL(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bL(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function f8(n,e=vu.y){return n=n??p8,(0,Yr.e)((t,r)=>{let i,s=!0;t.subscribe((0,jr.x)(r,o=>{const c=e(o);(s||!n(i,c))&&(s=!1,i=c,r.next(o))}))})}(),(0,Nt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function bL(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function N4(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class F4{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Bx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Nt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(nm(void 0),cO(),Ys(([r,i])=>i.length>0||!r),(0,Nt.U)(([r,i])=>i),fs)}auditTrail(e){return this.stateChanges(e).pipe(To((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=N4(e);return O4(this.query,t,this.afs.schedulers.outsideAngular).pipe(fs)}valueChanges(e={}){return vL(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),fs)}get(e){return(0,wn.D)(this.query.get(e)).pipe(fs)}add(e){return this.ref.add(e)}doc(e){return new L4(this.ref.doc(e),this.afs)}}class L4{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=B4(r,t);return new F4(i,s,this.afs)}snapshotChanges(){return function UQ(n,e){return P4(n,e).pipe(nm(void 0),cO(),(0,Nt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(fs)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Nt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(fs)}}class HQ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Bx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ys(t=>t.length>0),fs):Bx(this.query,this.afs.schedulers.outsideAngular).pipe(fs)}auditTrail(e){return this.stateChanges(e).pipe(To((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=N4(e);return O4(this.query,t,this.afs.schedulers.outsideAngular).pipe(fs)}valueChanges(e={}){return vL(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),fs)}get(e){return(0,wn.D)(this.query.get(e)).pipe(fs)}}const V4=new f.OlP("angularfire2.enableFirestorePersistence"),U4=new f.OlP("angularfire2.firestore.persistenceSettings"),$Q=new f.OlP("angularfire2.firestore.settings"),zQ=new f.OlP("angularfire2.firestore.use-emulator");function B4(n,e=(t=>t)){return{query:e(n),ref:n}}let wL=(()=>{class n{constructor(t,r,i,s,o,c,d,g,_,w,T,S,M,R,N,B,G){this.schedulers=d;const X=(0,ps.on)(t,c,r),ee=_;w&&k4(X,c,T,M,R,N,S,B),[this.firestore,this.persistenceEnabled$]=(0,ps.cc)(`${X.name}.firestore`,"AngularFirestore",X.name,()=>{const re=c.runOutsideAngular(()=>X.firestore());if(s&&re.settings(s),ee&&re.useEmulator(...ee),i&&!po(o)){const pe=()=>{try{return(0,wn.D)(re.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(Ie){return typeof console<"u"&&console.warn(Ie),mt(!1)}};return[re,c.runOutsideAngular(pe)]}return[re,mt(!1)]},[s,ee,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=B4(i,r),c=this.schedulers.ngZone.run(()=>s);return new F4(c,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new HQ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new L4(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ps.Dh),f.LFG(ps.xv,8),f.LFG(V4,8),f.LFG($Q,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(uw),f.LFG(U4,8),f.LFG(zQ,8),f.LFG(R4,8),f.LFG(D4,8),f.LFG(T4,8),f.LFG(S4,8),f.LFG(x4,8),f.LFG(A4,8),f.LFG(M4,8),f.LFG(mw,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GQ=(()=>{class n{constructor(){o8.Z.registerVersion("angularfire",KT.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:V4,useValue:!0},{provide:U4,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[wL]}),n})(),EL=(()=>{class n{constructor(t,r){this.angularstorage=t,this.angularfirestore=r}getVideoList(){const t=[];return this.angularstorage.ref("").listAll().subscribe(i=>{for(let s=0;s<i.items.length;s++){let o=i.items[s].name;this.angularstorage.ref(i.items[s].name).getDownloadURL().subscribe(g=>{t.push({nom:o,lien:g})})}}),t}getProjetList(){return this.angularfirestore.collection("projet-collection").snapshotChanges()}createProjet(t){return new Promise((r,i)=>{this.angularfirestore.collection("projet-collection").add(t).then(s=>{console.log(s)},s=>i(s))})}deleteProjet(t){return this.angularfirestore.collection("projet-collection").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(h8),f.LFG(wL))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jx=(()=>{class n{constructor(t){this.angularfirestore=t}getExperienceList(){return this.angularfirestore.collection("experience-collection").snapshotChanges()}createExperience(t){return new Promise((r,i)=>{this.angularfirestore.collection("experience-collection").add(t).then(s=>{console.log(s)},s=>i(s))})}getExperienceDoc(t){return this.angularfirestore.collection("experience-collection").doc(t).valueChanges()}updateExperience(t,r){return this.angularfirestore.collection("experience-collection").doc(r).update({nom:t.nom,type:t.type,dateDebut:t.dateDebut,dateFin:t.dateFin,description:t.description})}deleteExperience(t){return this.angularfirestore.collection("experience-collection").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(wL))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IL=(()=>{class n{constructor(t,r){this.el=t,this.renderer=r}ngOnInit(){const t=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&(this.renderer.addClass(this.el.nativeElement,"fade-in-text"),this.renderer.removeClass(this.el.nativeElement,"invis"),t.unobserve(i.target))})},{threshold:.5});t.observe(this.el.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","appFadeIn",""]]}),n})();function WQ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"ul",7)(1,"li",8)(2,"button",9),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openAccueil())}),f._uU(3,"1. Accueil"),f.qZA()(),f.TgZ(4,"li",8)(5,"button",10),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openApropos())}),f._uU(6,"2. \xc0 propos"),f.qZA()(),f.TgZ(7,"li",8)(8,"button",10),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openExperiences())}),f._uU(9,"3. Exp\xe9riences"),f.qZA()(),f.TgZ(10,"li",8)(11,"button",9),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openProjets())}),f._uU(12,"4. Projets"),f.qZA()()()}}function qQ(n,e){1&n&&f._UZ(0,"img",13)}function ZQ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",11),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openMenu())}),f.YNc(1,qQ,1,0,"img",12),f.qZA()}if(2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",t.menuButton)}}function KQ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",14)(1,"nav",15)(2,"ul",16)(3,"li")(4,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openAccueil())}),f._uU(5,"1. Accueil"),f.qZA()(),f.TgZ(6,"li")(7,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openApropos())}),f._uU(8,"2. \xc0 propos"),f.qZA()(),f.TgZ(9,"li")(10,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openExperiences())}),f._uU(11,"3. Exp\xe9riences"),f.qZA()(),f.TgZ(12,"li")(13,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openProjets())}),f._uU(14,"4. Projets"),f.qZA()()(),f.TgZ(15,"button",18),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.closeMenu())}),f._UZ(16,"img",19),f.qZA()()()}if(2&n){const t=f.oxw();f.Q6J("@fadeInAnimation",t.menuVisibility?"visible":"hidden")}}const YQ=function(n){return{"blur-background":n}},QQ=function(n){return{"drop-shadow":n}};let XQ=(()=>{class n{constructor(t){this.sharedService=t,this.menuAccueilClick=new f.vpe,this.menuAproposClick=new f.vpe,this.menuExperienceClick=new f.vpe,this.menuProjetClick=new f.vpe,this.sm=!1,this.menuVisibility=!1,this.menuButton=!0,this.isMenuOpenHeader=!1,this.headerBorder=!1}ngOnInit(){this.sharedService.isHeaderBorder$.subscribe(t=>{this.headerBorder=t}),this.getScreenWidth=window.innerWidth,this.getScreenHeight=window.innerHeight,this.onWindowResize()}openMenu(){this.menuVisibility=!0,this.menuButton=!1,this.isMenuOpenHeader=!0,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}closeMenu(){this.menuVisibility=!1,this.menuButton=!0,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}onWindowResize(){this.getScreenWidth=window.innerWidth,this.getScreenHeight=window.innerHeight,this.getScreenWidth<=769?(this.sm=!0,this.sharedService.setIsSM(this.sm),this.menuButton=!0):(this.sm=!1,this.sharedService.setIsSM(this.sm),this.menuVisibility=!1,this.menuButton=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader))}openAccueil(){this.menuAccueilClick.emit(),this.menuButton=!0,this.menuVisibility=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}openApropos(){this.menuAproposClick.emit(),this.menuButton=!0,this.menuVisibility=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}openExperiences(){this.menuExperienceClick.emit(),this.menuButton=!0,this.menuVisibility=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}openProjets(){this.menuProjetClick.emit(),this.menuButton=!0,this.menuVisibility=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xk))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-header"]],hostBindings:function(t,r){1&t&&f.NdJ("resize",function(s){return r.onWindowResize(s)},!1,f.Jf7)},outputs:{menuAccueilClick:"menuAccueilClick",menuAproposClick:"menuAproposClick",menuExperienceClick:"menuExperienceClick",menuProjetClick:"menuProjetClick"},decls:7,vars:10,consts:[[1,"fixed","z-20","w-full",3,"ngClass"],[1,"relative","flex","items-center","justify-between","w-full","h-20","sm:h-20","md:h-20","lg:h-20","xl:h-20","2xl:h-20","bg-gradient-to-r","from-white","to-sky-200",3,"ngClass"],["href","https://zakkwylde008.github.io/bruel-portfolio/","alt","Accueil"],["appFadeIn","","src","assets/images/bold.png","alt","Accueil",1,"invis","rounded","h-10","w-10","pt-1","pb-1","pl-4","2xl:h-20","2xl:w-28","2xl:pt-4","2xl:pb-4","2xl:pl-16","xl:h-20","xl:w-20","xl:pt-2","xl:pb-2","xl:pl-8","lg:h-20","lg:w-20","lg:pt-2","lg:pb-2","lg:pl-8","md:h-20","md:w-20","md:pt-2","md:pb-2","md:pl-8","sm:h-10","sm:w-10","sm:pt-1","sm:pb-1","sm:pl-2"],["class","2xl:flex 2xl:items-end 2xl:space-x-8 2xl:mr-8 xl:flex xl:items-end  xl:space-x-4 xl:mr-4 lg:flex lg:items-end lg:space-x-4 lg:mr-4 md:flex md:items-end md:space-x-4 md:mr-4",4,"ngIf"],["class","pt-1 pb-1 mr-4 rounded-lg",3,"click",4,"ngIf"],["class","fixed z-30 top-0 right-0 h-full w-auto bg-sky-200 rounded",4,"ngIf"],[1,"2xl:flex","2xl:items-end","2xl:space-x-8","2xl:mr-8","xl:flex","xl:items-end","xl:space-x-4","xl:mr-4","lg:flex","lg:items-end","lg:space-x-4","lg:mr-4","md:flex","md:items-end","md:space-x-4","md:mr-4"],[1,"py-2","2xl:py-3"],["appFadeIn","",1,"invis","text-lg","text-base","2xl:text-2xl","font-sans","duration-200","hover:text-sky-400",3,"click"],["appFadeIn","",1,"invis","text-base","text-lg","2xl:text-2xl","font-sans","duration-200","hover:text-sky-400",3,"click"],[1,"pt-1","pb-1","mr-4","rounded-lg",3,"click"],["appFadeIn","","src","assets/images/menu.png","alt","Menu","class","invis h-10 w-10 rounded-lg",4,"ngIf"],["appFadeIn","","src","assets/images/menu.png","alt","Menu",1,"invis","h-10","w-10","rounded-lg"],[1,"fixed","z-30","top-0","right-0","h-full","w-auto","bg-sky-200","rounded"],[1,"h-full","relative","flex","space-x-20","mt-5","ml-2","mr-2"],[1,"flex","flex-col","space-y-5"],[1,"text-base","text-lg","font-sans","duration-200","hover:text-sky-400",3,"click"],[3,"click"],["src","assets/images/annuler.png","alt","Fermer",1,"absolute","top-0","right-0","h-7","w-7"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"nav",1)(2,"a",2),f._UZ(3,"img",3),f.qZA(),f.YNc(4,WQ,13,0,"ul",4),f.YNc(5,ZQ,2,1,"button",5),f.qZA()(),f.YNc(6,KQ,17,1,"div",6)),2&t&&(f.Q6J("@menuFadeInAnimation",!0)("ngClass",f.VKq(6,YQ,r.isMenuOpenHeader)),f.xp6(1),f.Q6J("ngClass",f.VKq(8,QQ,r.headerBorder)),f.xp6(3),f.Q6J("ngIf",!r.sm),f.xp6(1),f.Q6J("ngIf",r.sm),f.xp6(1),f.Q6J("ngIf",r.menuVisibility))},dependencies:[an,tr,IL],styles:[".animate-spin[_ngcontent-%COMP%]{animation:spin 1s 0s}.blur-background[_ngcontent-%COMP%]{filter:blur(5px)}.invis[_ngcontent-%COMP%]{opacity:0}.fade-in-text[_ngcontent-%COMP%]{animation:fadeIn .5s}@keyframes fadeIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:none}}"],data:{animation:[H0,$f]}}),n})();function JQ(n,e){1&n&&(f.TgZ(0,"div",2)(1,"a",3),f._UZ(2,"img",4),f.qZA(),f._uU(3,"\xa0 "),f.TgZ(4,"a",5),f._UZ(5,"img",6),f.qZA(),f._uU(6,"\xa0 "),f.TgZ(7,"a",7),f._UZ(8,"img",8),f.qZA(),f._uU(9,"\xa0 "),f.TgZ(10,"a",9),f._UZ(11,"img",10),f.qZA(),f._uU(12,"\xa0 "),f._UZ(13,"div",11),f.qZA())}function eX(n,e){1&n&&(f.TgZ(0,"div",12)(1,"span",13),f._uU(2,"razafimbelobruel@gmail.com"),f.qZA(),f._UZ(3,"div",14),f.qZA())}let tX=(()=>{class n{constructor(t){this.sharedService=t,this.menuVisibility=!1,this.isMenuOpenHeader=!1}ngOnInit(){this.onWindowResize()}onWindowResize(){this.getScreenWidth=window.innerWidth,this.getScreenHeight=window.innerHeight,this.getScreenWidth<769?(this.menuVisibility=!1,this.sharedService.setIsMenuOpenFooter(this.menuVisibility)):(this.menuVisibility=!0,this.sharedService.setIsMenuOpenFooter(this.menuVisibility))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xk))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],hostBindings:function(t,r){1&t&&f.NdJ("resize",function(s){return r.onWindowResize(s)},!1,f.Jf7)},decls:2,vars:2,consts:[["appFadeIn","","class","invis fixed flex flex-col items-center bottom-48 lg:ml-24 md:ml-20 xl:ml-32",4,"ngIf"],["appFadeIn","","class","invis fixed flex flex-col items-center right-0 bottom-80",4,"ngIf"],["appFadeIn","",1,"invis","fixed","flex","flex-col","items-center","bottom-48","lg:ml-24","md:ml-20","xl:ml-32"],["href","https://www.linkedin.com/in/bruel-razafimbelo-ratompoarisoa-48979026a/","target","_blank"],["src","assets/images/linkedin.png","title","Linkedin",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://github.com/ZakkWylde008","target","_blank"],["src","assets/images/github.png","title","Github",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://gitlab.com/ZakkWylde008","target","_blank"],["src","assets/images/gitlab.png","title","Gitlab",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://www.codewars.com/users/ZakkWylde008","target","_blank"],["src","assets/images/codewars.png","title","Codewars",1,"w-6","h-6","duration-500","hover:scale-150"],[1,"absolute","h-44","border-black","border-2","rounded-lg","mt-48"],["appFadeIn","",1,"invis","fixed","flex","flex-col","items-center","right-0","bottom-80"],[1,"rotate-90","italic","mt-10","duration-500","hover:scale-110"],[1,"absolute","h-44","mt-48","border-black","border-2","rounded-lg"]],template:function(t,r){1&t&&(f.YNc(0,JQ,14,0,"div",0),f.YNc(1,eX,4,0,"div",1)),2&t&&(f.Q6J("ngIf",r.menuVisibility),f.xp6(1),f.Q6J("ngIf",r.menuVisibility))},dependencies:[tr,IL],styles:[".invis[_ngcontent-%COMP%]{opacity:0}.fade-in-text[_ngcontent-%COMP%]{animation:fadeIn .5s}@keyframes fadeIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:none}}"],data:{animation:[$f]}}),n})(),nX=(()=>{class n{transform(t){let r=t.split(""),i=[];for(let s=0;s<r.length;s++){if("."==r[s])return i.join("").toString();i.push(r[s])}return i.join("").toString()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=f.Yjl({name:"removeExtension",type:n,pure:!0}),n})();const rX=["expChart"];function iX(n,e){1&n&&(f.TgZ(0,"div",46)(1,"div",47),f._UZ(2,"div",48)(3,"div",48)(4,"div",48)(5,"div",48)(6,"div",48)(7,"div",48)(8,"div",48)(9,"div",48)(10,"div",48)(11,"div",48),f.qZA()())}function sX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"app-header",49),f.NdJ("menuAccueilClick",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.scrollToDiv1())})("menuAproposClick",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.scrollToDiv2())})("menuExperienceClick",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.scrollToDiv3())})("menuProjetClick",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.scrollToDiv4())}),f.qZA()}}const oX=function(n,e){return{"border-sky-400":n,"text-xs":e}};function aX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",50),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw();return f.KtG(o.changeDescription(s))}),f._uU(1),f.qZA()}if(2&n){const t=e.$implicit,r=f.oxw();f.Q6J("ngClass",f.WLB(2,oX,t.isShow,r.isTextXS)),f.xp6(1),f.hij(" ",t.nom," ")}}function lX(n,e){if(1&n&&(f.TgZ(0,"p",55),f._uU(1),f.ALo(2,"date"),f.qZA()),2&n){const t=f.oxw(2).$implicit;f.xp6(1),f.Oqu(f.xi3(2,1,t.dateFin,"dd/MM/yyyy"))}}function uX(n,e){1&n&&(f.TgZ(0,"p",55),f._uU(1,"Pr\xe9sent"),f.qZA())}function cX(n,e){if(1&n&&(f.TgZ(0,"div",52)(1,"p",53),f._uU(2),f.qZA(),f.TgZ(3,"div",54)(4,"p",55),f._uU(5),f.ALo(6,"date"),f.qZA(),f._uU(7,"\xa0 "),f.YNc(8,lX,3,4,"p",56),f.YNc(9,uX,2,0,"p",56),f.qZA(),f.TgZ(10,"p",57),f._uU(11),f.qZA()()),2&n){const t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.type),f.xp6(3),f.hij("",f.xi3(6,5,t.dateDebut,"dd/MM/yyyy")," -"),f.xp6(3),f.Q6J("ngIf",t.dateFin),f.xp6(1),f.Q6J("ngIf",!t.dateFin),f.xp6(2),f.Oqu(t.description)}}function dX(n,e){if(1&n&&(f.TgZ(0,"div"),f.YNc(1,cX,12,8,"div",51),f.qZA()),2&n){const t=e.$implicit;f.xp6(1),f.Q6J("ngIf",t.isShow)}}function hX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",60),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw(2);return f.KtG(o.openDemonstration(s))}),f._UZ(1,"img",61),f.TgZ(2,"div",62),f._UZ(3,"img",63),f.qZA(),f.TgZ(4,"div",64)(5,"p",65),f._uU(6),f.ALo(7,"removeExtension"),f.qZA()(),f.TgZ(8,"div",64)(9,"p",66),f._uU(10),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(3),f.Q6J("src",t.urlImage,f.LSH),f.xp6(3),f.Oqu(f.lcZ(7,3,t.nom)),f.xp6(4),f.Oqu(t.outils)}}function fX(n,e){if(1&n&&(f.TgZ(0,"div",58),f.YNc(1,hX,11,5,"div",59),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngForOf",t.projet)}}function pX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",67),f._UZ(1,"video",68),f.TgZ(2,"div",69),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.closeDemonstration())}),f.TgZ(3,"button",70),f._uU(4," X "),f.qZA()()()}if(2&n){const t=f.oxw();f.xp6(1),f.Q6J("src",t.videoUrl,f.LSH)}}function gX(n,e){1&n&&(f.TgZ(0,"div",71)(1,"a",72),f._UZ(2,"img",73),f.qZA(),f.TgZ(3,"a",74),f._UZ(4,"img",75),f.qZA(),f.TgZ(5,"a",76),f._UZ(6,"img",77),f.qZA(),f.TgZ(7,"a",78),f._UZ(8,"img",79),f.qZA()())}const mX=function(n){return{hidden:n}},yX=function(n){return{"blur-background":n}};Uo.register(..._3);let _X=(()=>{class n{constructor(t,r,i){this.sharedService=t,this.projectservice=r,this.experienceService=i,this.isLoad=!1,this.isMenuOpen=!1,this.header_variable=!0,this.experience=[],this.projet=[],this.bodyNow=0,this.docbodyNow=0,this.headerBorder=!1,this.isShowVideoModal=!1,this.videoUrl="",this.menuVisibilityFooter=!1,this.isTextXS=!1,this.phrases=["D\xe9veloppeur fullstack","Frontend Vue et Angular","Backend Symfony"],this.currentPhraseIndex=0}ngOnInit(){this.isLoad=!0,setTimeout(()=>{this.isLoad=!1},3500),setInterval(()=>{this.currentPhraseIndex=(this.currentPhraseIndex+1)%this.phrases.length},2e3),this.sharedService.isMenuOpenHeader$.subscribe(t=>{this.isMenuOpen=t}),this.sharedService.isMenuOpenFooter$.subscribe(t=>{this.menuVisibilityFooter=t}),this.experienceService.getExperienceList().subscribe(t=>{this.experience=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data(),isShow:!1})).sort(function(r,i){return+new Date(i.dateDebut)-+new Date(r.dateDebut)}),this.experience[0].isShow=!0}),this.projectservice.getProjetList().subscribe(t=>{this.projet=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})).sort(function(r,i){return+new Date(i.date)-+new Date(r.date)})}),this.sharedService.isSM$.subscribe(t=>{this.isTextXS=t})}ngAfterViewInit(){new Uo(this.expChart.nativeElement,{type:"bar",data:{labels:["Angular","Bootstrap","Git","MySQL","Postgres","Symfony","Tailwind"],datasets:[{label:"Mes connaissances (%)",data:[60,50,75,80,60,50,55],backgroundColor:["rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)"],borderColor:["rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)"],borderWidth:2,barPercentage:.2,categoryPercentage:1,borderRadius:10}]},options:{responsive:!0,indexAxis:"y",elements:{line:{borderWidth:3}},plugins:{legend:{labels:{font:{size:18}},display:!0}},scales:{x:{max:100}}}})}changeDescription(t){t.isShow=!0;for(let r=0;r<this.experience.length;r++)this.experience[r]!=t&&!0===this.experience[r].isShow&&(this.experience[r].isShow=!1)}openDemonstration(t){this.isShowVideoModal=!0,this.videoUrl=t.urlVideo}closeDemonstration(){this.isShowVideoModal=!1,this.videoUrl=""}openCV(){window.open("assets/pdf/CV_Bruel.pdf","_blank")}contactMe(){window.open("mailto:razafimbelobruel@gmail.com","_self")}scrollFunction(){(document.body.scrollTop>this.bodyNow||document.documentElement.scrollTop>this.docbodyNow)&&(this.header_variable=!1,this.bodyNow=document.body.scrollTop,this.docbodyNow=document.documentElement.scrollTop),(this.bodyNow>document.body.scrollTop||this.docbodyNow>document.documentElement.scrollTop)&&(this.header_variable=!0,this.bodyNow=document.body.scrollTop,this.docbodyNow=document.documentElement.scrollTop),this.bodyNow>0||this.docbodyNow>0?(this.headerBorder=!0,this.sharedService.setIsHeaderBorder(this.headerBorder)):(this.headerBorder=!1,this.sharedService.setIsHeaderBorder(this.headerBorder))}scrollToDiv1(){document.getElementById("target1").scrollIntoView({behavior:"smooth"})}scrollToDiv2(){document.getElementById("target2").scrollIntoView({behavior:"smooth"})}scrollToDiv3(){document.getElementById("target3").scrollIntoView({behavior:"smooth"})}scrollToDiv4(){document.getElementById("target4").scrollIntoView({behavior:"smooth"})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xk),f.Y36(EL),f.Y36(jx))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-accueil"]],viewQuery:function(t,r){if(1&t&&f.Gf(rX,5),2&t){let i;f.iGM(i=f.CRH())&&(r.expChart=i.first)}},hostBindings:function(t,r){1&t&&f.NdJ("scroll",function(){return r.scrollFunction()},!1,f.evT)},decls:88,vars:16,consts:[["class","grid h-screen bg-gradient-to-r from-white to-sky-200 place-items-center",4,"ngIf"],[3,"ngClass"],[1,"h-screen"],[3,"menuAccueilClick","menuAproposClick","menuExperienceClick","menuProjetClick",4,"ngIf"],[1,"flex","flex-col","items-center","z-0","w-full","bg-gradient-to-r","from-white","to-sky-200",3,"ngClass"],[1,"flex","items-center","justify-center"],[1,"fixed","top-36","right-1/2","md:left-1/3","2xl:w-96","2xl:h-96","xl:w-80","xl:h-80","lg:w-64","lg:h-64","md:w-60","md:h-60","sm:w-56","sm:h-56","w-48","h-48","bg-sky-200","rounded-full","blur-md","animate-blob1"],[1,"fixed","top-36","left-1/2","md:right-1/3","2xl:w-96","2xl:h-96","xl:w-80","xl:h-80","lg:w-64","lg:h-64","md:w-60","md:h-60","sm:w-56","sm:h-56","w-48","h-48","bg-white","rounded-full","blur-md","animate-blob2"],["id","target1",1,"w-2/3","md:w-1/2","h-auto","mt-24","sm:mt-24","md:mt-24","lg:mt-24","xl:mt-26","2xl:mt-30","drop-shadow"],["appFadeIn","",1,"invis","pt-14","sm:pt-16","md:pt-16","lg:pt-20","xl:pt-20","2xl:pt-20"],[1,"text-base","sm:text-base","md:text-base","lg:text-lg","xl:text-xl","2xl:text-2xl","font-sans"],[1,"mt-4","text-xl","sm:mt-4","sm:text-2xl","md:mt-4","md:text-2xl","lg:mt-4","lg:text-3xl","xl:mt-4","xl:text-5xl","2xl:mt-4","2xl:text-5xl","font-sans","font-extrabold"],[1,"mt-4","text-lg","sm:text-xl","md:text-2xl","lg:text-3xl","text-slate-400","font-sans","font-bold"],["appFadeIn","",1,"invis","mt-4","sm:mt-4","md:mt-6","lg:mt-6","xl:mt-6","2xl:mt-6"],[1,"text-base","drop-shadow"],["appFadeIn","",1,"invis","flex","flex-row","justify-center","items-center","w-52","h-12","mt-4","sm:w-52","sm:h-12","sm:mt-6","md:w-52","md:h-12","md:mt-10","lg:w-60","lg:h-16","lg:mt-8","xl:w-60","xl:h-16","xl:mt-8","2xl:w-60","2xl:h-16","2xl:mt-8","font-bold","bg-sky-200","drop-shadow","duration-500","border-sky-200","rounded-lg","hover:bg-sky-300","hover:border-[2px]","hover:text-slate-500","hover:scale-105",3,"click"],["src","assets/images/icon_telecharger.png",1,"w-6","h-6"],["id","target2",1,"w-2/3","md:w-1/2","h-auto","mt-96","drop-shadow"],["appFadeIn","",1,"invis","flex","flex-row","items-center","space-x-2"],[1,"2xl:text-3xl","xl:text-3xl","lg:text-2xl","md:text-xl","sm:text-lg","text-base","font-sans","font-extrabold"],[1,"w-1/2","border-black","border-2"],["appFadeIn","",1,"invis","flex","flex-col","space-y-2","pt-2","2xl:flex-row","2xl:space-x-6","xl:flex-row","xl:space-x-6","lg:pt-4","md:pt-2","sm:pt-2"],[1,"rounded","w-full","xl:w-1/2"],[1,"duration-500","hover:text-sky-400"],["appFadeIn","","src","assets/images/pdp.jpg","title","Photo",1,"invis","w-full","xl:w-1/2","xl:p-0","duration-500","rounded","drop-shadow","hover:scale-105"],["id","target3",1,"w-2/3","md:w-1/2","h-auto","mt-96","drop-shadow"],[1,"flex","flex-col","space-y-4","mt-4","md:flex-row","xl:space-x-12","xl:mt-6","lg:space-x-10","lg:mt-6","md:space-x-8","md:mt-4"],["appFadeIn","",1,"invis","overflow-x-auto","flex","flex-row","space-x-1","space-y-0","md:flex-col","md:space-y-1","md:space-x-0"],["class","bg-sky-200 font-bold p-1 border-l-[4px] duration-500 hover:bg-sky-300 hover:text-slate-500",3,"ngClass","click",4,"ngFor","ngForOf"],["appFadeIn","",1,"invis","border-l-[3px]","border-r-[3px]","border-sky-400","rounded","md:w-3/4","w-full"],[4,"ngFor","ngForOf"],["appFadeIn","",1,"invis","scale-100","text-center","2xl:mt-20","xl:mt-16","lg:mt-14","md:mt-10","sm:mt-10","mt-8"],["expChart",""],["id","target4",1,"w-2/3","md:w-1/2","h-auto","mt-96","drop-shadow"],[1,"2xl:mt-6","xl:mt-6","lg:mt-6","md:mt-4","sm:mt-4","mt-4"],["class","grid 2xl:grid-cols-3 xl:grid-cols-3 lg:grid-cols-2 md:grid-cols-2 sm:grid-cols-1 grid-cols-1 gap-4",4,"ngIf"],["class","relative w-full h-full",4,"ngIf"],[1,"w-2/3","md:w-1/2","h-auto","flex","flex-col","justify-center","items-center","bg-image","mt-96","drop-shadow"],["appFadeIn","",1,"invis","text-2xl","pt-10","text-slate-400","font-sans","font-bold"],["appFadeIn","",1,"invis","w-2/3","md:w-1/2","text-center","font-bold","mt-32","text-sm","sm:text-sm","lg:text-lg","xl:text-lg","2xl:text-lg"],["appFadeIn","",1,"invis","mt-10"],[1,"w-36","h-10","font-bold","bg-sky-200","duration-500","border-[2px]","border-sky-200","rounded-lg","hover:bg-sky-300","hover:text-slate-500","hover:scale-105",3,"click"],["appFadeIn","","class","invis mt-10 flex flex-row space-x-2 justify-center",4,"ngIf"],[1,"text-center","mt-32","pb-4"],[1,"text-sm","text-black"],["href","https://www.facebook.com/bruel.razafimbeloratompoarisoa/","target","_blank",1,"font-bold","hover:underline"],[1,"grid","h-screen","bg-gradient-to-r","from-white","to-sky-200","place-items-center"],[1,"loading"],[1,"bar"],[3,"menuAccueilClick","menuAproposClick","menuExperienceClick","menuProjetClick"],[1,"bg-sky-200","font-bold","p-1","border-l-[4px]","duration-500","hover:bg-sky-300","hover:text-slate-500",3,"ngClass","click"],["class","p-2",4,"ngIf"],[1,"p-2"],[1,"font-extrabold","underline"],[1,"italic","flex","flex-wrap"],[1,"inline-block"],["class","inline-block",4,"ngIf"],[1,"text-base","mt-6"],[1,"grid","2xl:grid-cols-3","xl:grid-cols-3","lg:grid-cols-2","md:grid-cols-2","sm:grid-cols-1","grid-cols-1","gap-4"],["appFadeIn","","class","invis bg-white rounded-lg border-[2px] border-sky-300 shadow-xl cursor-pointer duration-500 hover:scale-105 hover:bg-opacity-10",3,"click",4,"ngFor","ngForOf"],["appFadeIn","",1,"invis","bg-white","rounded-lg","border-[2px]","border-sky-300","shadow-xl","cursor-pointer","duration-500","hover:scale-105","hover:bg-opacity-10",3,"click"],["src","assets/images/folder.png","alt","Folder",1,"px-2","w-12","h-10"],[1,"px-2","py-2"],["alt","Image",1,"rounded-t-lg","w-full","h-60",3,"src"],[1,"px-2"],[1,"font-bold","text-lg","mb-2"],[1,"font-semibold","font-sans","text-slate-400","mb-2"],[1,"relative","w-full","h-full"],["controls","","playsinline","","loop","",1,"w-full","h-auto","2xl:h-96","rounded",3,"src"],[1,"absolute","right-2","top-2","cursor-pointer","bg-white","rounded-full","w-8","h-8","grid","place-items-center","hover:scale-110",3,"click"],["title","FERMER",1,"text-sky-200","font-extrabold"],["appFadeIn","",1,"invis","mt-10","flex","flex-row","space-x-2","justify-center"],["href","https://www.linkedin.com/in/bruel-razafimbelo-ratompoarisoa-48979026a/","target","_blank"],["src","assets/images/linkedin.png","title","Linkedin",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://github.com/ZakkWylde008","target","_blank"],["src","assets/images/github.png","title","Github",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://gitlab.com/ZakkWylde008","target","_blank"],["src","assets/images/gitlab.png","title","Gitlab",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://www.codewars.com/users/ZakkWylde008","target","_blank"],["src","assets/images/codewars.png","title","Codewars",1,"w-6","h-6","duration-500","hover:scale-150"]],template:function(t,r){1&t&&(f.YNc(0,iX,12,0,"div",0),f.TgZ(1,"div",1)(2,"div",2),f.YNc(3,sX,1,0,"app-header",3),f.TgZ(4,"div",4)(5,"div",5),f._UZ(6,"div",6)(7,"div",7),f.qZA(),f.TgZ(8,"section",8)(9,"div",9)(10,"h3",10),f._uU(11,"Bonjour, je m'appelle"),f.qZA(),f.TgZ(12,"h1",11),f._uU(13," RATOMPOARISOA Bruel Razafimbelo. "),f.qZA(),f.TgZ(14,"p",12),f._uU(15),f.qZA()(),f.TgZ(16,"div",13)(17,"p",14),f._uU(18," Je peut m'adapter \xe0 plusieurs types de technologies utilisant des langages de programmation comme "),f.TgZ(19,"b"),f._uU(20,"Javascript"),f.qZA(),f._uU(21,", "),f.TgZ(22,"b"),f._uU(23,"Typescript"),f.qZA(),f._uU(24," ou encore "),f.TgZ(25,"b"),f._uU(26,"PHP"),f.qZA(),f._uU(27,". "),f.qZA()(),f.TgZ(28,"button",15),f.NdJ("click",function(){return r.openCV()}),f._uU(29," T\xe9l\xe9charger CV \xa0"),f._UZ(30,"img",16),f.qZA()(),f.TgZ(31,"section",17)(32,"div",18)(33,"h1",19),f._uU(34,"2. \xc0 PROPOS"),f.qZA(),f._UZ(35,"hr",20),f.qZA(),f.TgZ(36,"div",21)(37,"p",22),f._uU(38," Bonjour! Je m'appele Bruel et je suis un ing\xe9nieur en Genie Logiciel et Base de Donn\xe9es sp\xe9cialis\xe9 dans le d\xe9veloppement web et mobile. Depuis tout petit, je suis fascin\xe9 par les jeux vid\xe9os. Cela m'a men\xe9 dans le monde du digital quand je suis arriv\xe9 au lyc\xe9e vers 2013. Choisir un parcours en Informatique est devenu une \xe9vidence pour moi et j'ai d\xe9cid\xe9 d'int\xe9grer l'ENI. "),f._UZ(39,"br")(40,"br"),f._uU(41," J'ai commenc\xe9 par les bases du d\xe9veloppement web avec HTML, CSS et Javascript puis s'en est suivi des langages comme PHP, JAVA ou encore Python. Je suis maintenant un d\xe9veloppeur fullstack et apr\xe8s avoir presque touch\xe9 \xe0 tout, je me focalise pour les technologies "),f.TgZ(42,"b",23),f._uU(43,"Symfony"),f.qZA(),f._uU(44," et "),f.TgZ(45,"b",23),f._uU(46,"Angular"),f.qZA(),f._uU(47,". J'ai aussi d'autres comp\xe9tences comme par exemple construire et mettre en place des sites web avec le CMS "),f.TgZ(48,"b",23),f._uU(49,"Wordpress"),f.qZA(),f._uU(50,". "),f.qZA(),f._UZ(51,"img",24),f.qZA()(),f.TgZ(52,"section",25)(53,"div",18)(54,"h1",19),f._uU(55,"3. EXP\xc9RIENCES"),f.qZA(),f._UZ(56,"hr",20),f.qZA(),f.TgZ(57,"div",26)(58,"div",27),f.YNc(59,aX,2,5,"button",28),f.qZA(),f.TgZ(60,"div",29),f.YNc(61,dX,2,1,"div",30),f.qZA()(),f._UZ(62,"canvas",31,32),f.qZA(),f.TgZ(64,"section",33)(65,"div",18)(66,"h1",19),f._uU(67,"4. PROJETS"),f.qZA(),f._UZ(68,"hr",20),f.qZA(),f.TgZ(69,"div",34),f.YNc(70,fX,2,1,"div",35),f.YNc(71,pX,5,1,"div",36),f.qZA()(),f.TgZ(72,"section",37)(73,"div",38),f._uU(74," ME CONTACTER? "),f.qZA(),f.TgZ(75,"div",39),f._uU(76," Je suis actuellement \xe0 la recherche d'un nouveau defi et si mon profil vous int\xe9resse pour un poste, un projet ou une collaboration, n'h\xe9sitez pas \xe0 m'en faire part : "),f.qZA(),f.TgZ(77,"div",40)(78,"button",41),f.NdJ("click",function(){return r.contactMe()}),f._uU(79,"CLIQUEZ ICI"),f.qZA()(),f.YNc(80,gX,9,0,"div",42),f.TgZ(81,"div",43)(82,"span",44),f._uU(83,"\xa9 2023 - 2024. Con\xe7u et r\xe9alis\xe9 par "),f.TgZ(84,"a",45),f._uU(85,"Bruel Razafimbelo"),f.qZA(),f._uU(86,". "),f.qZA()()()(),f._UZ(87,"app-footer"),f.qZA()()),2&t&&(f.Q6J("ngIf",r.isLoad),f.xp6(1),f.Q6J("@fadeInAnimation",!r.isLoad)("ngClass",f.VKq(12,mX,r.isLoad)),f.xp6(2),f.Q6J("ngIf",r.header_variable),f.xp6(1),f.Q6J("ngClass",f.VKq(14,yX,r.isMenuOpen)),f.xp6(10),f.Q6J("@textFadeInOutAnimation",r.phrases[r.currentPhraseIndex]),f.xp6(1),f.hij(" ",r.phrases[r.currentPhraseIndex]," "),f.xp6(44),f.Q6J("ngForOf",r.experience),f.xp6(2),f.Q6J("ngForOf",r.experience),f.xp6(9),f.Q6J("ngIf",!r.isShowVideoModal),f.xp6(1),f.Q6J("ngIf",r.isShowVideoModal),f.xp6(9),f.Q6J("ngIf",!r.menuVisibilityFooter))},dependencies:[an,$s,tr,XQ,tX,IL,R_,nX],styles:[".blur-background[_ngcontent-%COMP%]{filter:blur(5px)}.bg-image[_ngcontent-%COMP%]{width:100%;height:100%;background-image:url(sea_background.56ca2f894be9efaa.png);background-repeat:no-repeat;background-size:100% 100%}.loading[_ngcontent-%COMP%]{width:300px;height:200px;position:relative;display:inline-flex;align-items:center;justify-content:space-between}.bar[_ngcontent-%COMP%]{--bg: white;--delay: 1s;background:var(--bg);width:12px;height:80px;border-radius:10px;animation:loader 1.5s ease-in-out infinite;animation-delay:var(--delay)}@keyframes loader{0%,to{height:2px}50%{height:80px}}.bar[_ngcontent-%COMP%]{&:nth-child(1),&:nth-child(10){--bg: rgb(0, 94, 255);--delay: 1s}&:nth-child(2),&:nth-child(9){--bg: rgb(35, 113, 248);--delay: .8s}&:nth-child(3),&:nth-child(8){--bg: rgb(80, 142, 251);--delay: .6s}&:nth-child(4),&:nth-child(7){--bg: rgb(111, 162, 250);--delay: .4s}&:nth-child(5),&:nth-child(6){--bg: rgb(165, 196, 250);--delay: .2s}}.invis[_ngcontent-%COMP%]{opacity:0}.fade-in-text[_ngcontent-%COMP%]{animation:fadeIn 1.5s}@keyframes fadeIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:none}}#typing-text[_ngcontent-%COMP%]{overflow:hidden;border-right:1px solid black;white-space:nowrap;animation:typing 3s steps(40,end),deleting 3s 3s steps(40,end) infinite}@keyframes typing{0%{width:0}to{width:100%}}@keyframes deleting{0%{width:100%}to{width:0}}"],data:{animation:[H0,$f,IC,CC]}}),n})();function vX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr",8)(1,"th",9),f._uU(2),f.qZA(),f.TgZ(3,"td",10),f._uU(4),f.qZA(),f.TgZ(5,"td",10),f._uU(6),f.qZA(),f.TgZ(7,"td",10),f._uU(8),f.qZA(),f.TgZ(9,"td",10),f._uU(10),f.qZA(),f.TgZ(11,"td",10),f._uU(12),f.qZA(),f.TgZ(13,"td")(14,"span",11),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw();return f.KtG(o.redirectToEdit(s))}),f.TgZ(15,"button"),f._uU(16,"Modifier"),f.qZA()(),f._uU(17," \xa0 "),f.TgZ(18,"span",12),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw();return f.KtG(o.removeExperience(s))}),f.TgZ(19,"button"),f._uU(20,"Supprimer"),f.qZA()()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.hij(" ",t.id," "),f.xp6(2),f.hij(" ",t.nom," "),f.xp6(2),f.hij(" ",t.type," "),f.xp6(2),f.hij(" ",t.dateDebut," "),f.xp6(2),f.hij(" ",t.dateFin," "),f.xp6(2),f.hij(" ",t.description," ")}}let bX=(()=>{class n{constructor(t,r){this.experienceService=t,this.router=r}ngOnInit(){this.experienceService.getExperienceList().subscribe(t=>{this.experience=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}redirectToEdit(t){this.router.navigate(["backend008/experienceUpdate",t.id])}removeExperience(t){confirm("Etes-vous sur de vouloir supprimer l'exp\xe9rience n\xb0"+t.id+" ?")&&this.experienceService.deleteExperience(t),alert("Suppression d'un exp\xe9rience eff\xe9ctu\xe9 avec succ\xe8s!"),setTimeout(()=>{this.router.navigate(["backend008/experience"])},1e3)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(jx),f.Y36(Un))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-gestion-experience"]],decls:25,vars:1,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/experienceCreate"],[1,"w-20","mt-4","p-2","font-bold","bg-sky-600","drop-shadow","rounded-lg","hover:bg-sky-200"],[1,"relative","overflow-x-auto","mt-4"],[1,"w-full","text-sm","text-left","text-cyan-600","dark:text-cyan-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700"],["scope","row",1,"py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"py-4"],[1,"bg-emerald-400","hover:bg-emerald-600","text-white","font-bold","rounded","p-1","focus:outline-none","focus:shadow-outline",3,"click"],[1,"bg-rose-400","hover:bg-rose-600","text-white","font-bold","rounded","p-1","focus:outline-none","focus:shadow-outline",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Gestion des exp\xe9riences"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Cr\xe9er"),f.qZA()(),f.TgZ(5,"div",3)(6,"table",4)(7,"thead",5)(8,"tr")(9,"th",6),f._uU(10," Id "),f.qZA(),f.TgZ(11,"th",6),f._uU(12," Nom "),f.qZA(),f.TgZ(13,"th",6),f._uU(14," Type "),f.qZA(),f.TgZ(15,"th",6),f._uU(16," Date de d\xe9but "),f.qZA(),f.TgZ(17,"th",6),f._uU(18," Date de fin "),f.qZA(),f.TgZ(19,"th",6),f._uU(20," Description "),f.qZA(),f.TgZ(21,"th",6),f._uU(22," Action "),f.qZA()()(),f.TgZ(23,"tbody"),f.YNc(24,vX,21,6,"tr",7),f.qZA()()()),2&t&&(f.xp6(24),f.Q6J("ngForOf",r.experience))},dependencies:[$s]}),n})(),j4=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Xp=(()=>{class n extends j4{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const kl=new f.OlP("NgValueAccessor"),IX={provide:kl,useExisting:(0,f.Gpc)(()=>S_),multi:!0},DX=new f.OlP("CompositionEventMode");let S_=(()=>{class n extends j4{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CX(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(DX,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[f._Bn([IX]),f.qOj]}),n})();const Ki=new f.OlP("NgValidators"),oh=new f.OlP("NgAsyncValidators");function W4(n){return function sh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function Hx(n){return null}function X4(n){return null!=n}function J4(n){return(0,f.QGY)(n)?(0,wn.D)(n):n}function e6(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function t6(n,e){return e.map(t=>t(n))}function n6(n){return n.map(e=>function xX(n){return!n.validate}(e)?e:t=>e.validate(t))}function CL(n){return null!=n?function r6(n){if(!n)return null;const e=n.filter(X4);return 0==e.length?null:function(t){return e6(t6(t,e))}}(n6(n)):null}function DL(n){return null!=n?function i6(n){if(!n)return null;const e=n.filter(X4);return 0==e.length?null:function(t){return function wX(...n){const e=(0,Xa.jO)(n),{args:t,keys:r}=jv(n),i=new Os.y(s=>{const{length:o}=t;if(!o)return void s.complete();const c=new Array(o);let d=o,g=o;for(let _=0;_<o;_++){let w=!1;(0,Xg.Xf)(t[_]).subscribe((0,jr.x)(s,T=>{w||(w=!0,g--),c[_]=T},()=>d--,void 0,()=>{(!d||!w)&&(g||s.next(r?TA(r,c):c),s.complete())}))}});return e?i.pipe(Qg(e)):i}(t6(t,e).map(J4)).pipe((0,Nt.U)(e6))}}(n6(n)):null}function s6(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function o6(n){return n._rawValidators}function a6(n){return n._rawAsyncValidators}function TL(n){return n?Array.isArray(n)?n:[n]:[]}function $x(n,e){return Array.isArray(n)?n.includes(e):n===e}function l6(n,e){const t=TL(e);return TL(n).forEach(i=>{$x(t,i)||t.push(i)}),t}function u6(n,e){return TL(e).filter(t=>!$x(n,t))}class c6{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ws extends c6{get formDirective(){return null}get path(){return null}}class ah extends c6{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class d6{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zx=(()=>{class n extends d6{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ah,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),SL=(()=>{class n extends d6{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ws,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const SE="VALID",Wx="INVALID",x_="PENDING",xE="DISABLED";function kL(n){return(qx(n)?n.validators:n)||null}function f6(n){return Array.isArray(n)?CL(n):n||null}function RL(n,e){return(qx(e)?e.asyncValidators:n)||null}function p6(n){return Array.isArray(n)?DL(n):n||null}function qx(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function g6(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function m6(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class Zx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=f6(this._rawValidators),this._composedAsyncValidatorFn=p6(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===SE}get invalid(){return this.status===Wx}get pending(){return this.status==x_}get disabled(){return this.status===xE}get enabled(){return this.status!==xE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=f6(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=p6(e)}addValidators(e){this.setValidators(l6(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(l6(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(u6(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(u6(e,this._rawAsyncValidators))}hasValidator(e){return $x(this._rawValidators,e)}hasAsyncValidator(e){return $x(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=x_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=SE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===SE||this.status===x_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xE:SE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=x_,this._hasOwnPendingAsyncValidator=!0;const t=J4(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?xE:this.errors?Wx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(x_)?x_:this._anyControlsHaveStatus(Wx)?Wx:SE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qx(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class AE extends Zx{constructor(e,t,r){super(kL(t),RL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){m6(this,0,e),Object.keys(e).forEach(r=>{g6(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class y6 extends AE{}function Kx(n,e){return[...e.path,n]}function ME(n,e){PL(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function FX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&_6(n,e)})}(n,e),function VX(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function LX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&_6(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function NX(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Yx(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Xx(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Qx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function PL(n,e){const t=o6(n);null!==e.validator?n.setValidators(s6(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=a6(n);null!==e.asyncValidator?n.setAsyncValidators(s6(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Qx(e._rawValidators,i),Qx(e._rawAsyncValidators,i)}function Xx(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=o6(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=a6(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Qx(e._rawValidators,r),Qx(e._rawAsyncValidators,r),t}function _6(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function OL(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function NL(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===S_?t=s:function jX(n){return Object.getPrototypeOf(n.constructor)===Xp}(s)?r=s:i=s}),i||r||t||null}function E6(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function I6(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const RE=class extends Zx{constructor(e=null,t,r){super(kL(t),RL(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qx(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=I6(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){E6(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){E6(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){I6(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},WX={provide:ah,useExisting:(0,f.Gpc)(()=>LL)},T6=(()=>Promise.resolve())();let LL=(()=>{class n extends ah{constructor(t,r,i,s,o){super(),this._changeDetectorRef=o,this.control=new RE,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=NL(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),OL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ME(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){T6.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);T6.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Kx(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ws,9),f.Y36(Ki,10),f.Y36(oh,10),f.Y36(kl,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([WX]),f.qOj,f.TTD]}),n})(),VL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),x6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const UL=new f.OlP("NgModelWithFormControlWarning"),XX={provide:ws,useExisting:(0,f.Gpc)(()=>PE)};let PE=(()=>{class n extends ws{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xx(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ME(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Yx(t.control||null,t,!1),function HX(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function w6(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Yx(r||null,t),(n=>n instanceof RE)(i)&&(ME(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function v6(n,e){PL(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function UX(n,e){return Xx(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){PL(this.form,this),this._oldForm&&Xx(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ki,10),f.Y36(oh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([XX]),f.qOj,f.TTD]}),n})();const tJ={provide:ah,useExisting:(0,f.Gpc)(()=>Jx)};let Jx=(()=>{class n extends ah{constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=NL(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),OL(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Kx(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(ws,13),f.Y36(Ki,10),f.Y36(oh,10),f.Y36(kl,10),f.Y36(UL,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([tJ]),f.qOj,f.TTD]}),n})(),Jp=(()=>{class n{constructor(){this._validator=Hx}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Hx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const cJ={provide:Ki,useExisting:(0,f.Gpc)(()=>A_),multi:!0};let A_=(()=>{class n extends Jp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>W4}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([cJ]),f.qOj]}),n})(),z6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[x6]}),n})(),mJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[z6]}),n})(),G6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:UL,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[z6]}),n})();class W6 extends Zx{constructor(e,t,r){super(kL(t),RL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){m6(this,0,e),e.forEach((r,i)=>{g6(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function q6(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Z6=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return q6(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new AE(i,s)}record(t,r=null){const i=this._reduceControls(t);return new y6(i,r)}control(t,r,i){let s={};return this.useNonNullable?(q6(r)?s=r:(s.validators=r,s.asyncValidators=i),new RE(t,{...s,nonNullable:!0})):new RE(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new W6(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof RE||t instanceof Zx?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:G6}),n})(),yJ=(()=>{class n{constructor(t,r,i){this.experienceService=t,this.formBuilder=r,this.router=i,this.experienceForm=this.formBuilder.group({nom:[""],type:[""],dateDebut:[""],dateFin:[""],description:[""]})}ngOnInit(){}onSubmit(){this.experienceService.createExperience(this.experienceForm.value),alert("Ajout d'un exp\xe9rience eff\xe9ctu\xe9 avec succ\xe8s!"),setTimeout(()=>{this.router.navigate(["backend008/experience"])},1e3)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(jx),f.Y36(Z6),f.Y36(Un))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create"]],decls:30,vars:2,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/experience"],[1,"text-center","w-20","m-4","p-2","font-bold","bg-black","drop-shadow","rounded-lg","text-white","hover:bg-white","hover:text-black"],[1,"w-full","mt-4"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","m-4",3,"formGroup","ngSubmit"],[1,"m-4"],["for","nom",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","nom","formControlName","nom","type","text","placeholder","Lieux de l'exp\xe9rience","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"m-6"],["for","type",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","type","formControlName","type","type","text","placeholder","Type de l'exp\xe9rience","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","dateDebut",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","dateDebut","formControlName","dateDebut","type","date","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","dateFin",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","dateFin","formControlName","dateFin","type","date",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","description",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","description","formControlName","description","cols","30","rows","10","placeholder","D\xe9scription de l'exp\xe9rience","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"flex","items-center","justify-between","m-4"],["type","submit",1,"bg-cyan-500","hover:bg-cyan-600","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"disabled"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Cr\xe9ation d'experience"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Retour"),f.qZA()(),f.TgZ(5,"div",3)(6,"form",4),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(7,"div",5)(8,"label",6),f._uU(9," Nom "),f.qZA(),f._UZ(10,"input",7),f.qZA(),f.TgZ(11,"div",8)(12,"label",9),f._uU(13," Type "),f.qZA(),f._UZ(14,"input",10),f.qZA(),f.TgZ(15,"div",8)(16,"label",11),f._uU(17," Date de d\xe9but "),f.qZA(),f._UZ(18,"input",12),f.qZA(),f.TgZ(19,"div",8)(20,"label",13),f._uU(21," Date de fin "),f.qZA(),f._UZ(22,"input",14),f.qZA(),f.TgZ(23,"div",8)(24,"label",15),f._uU(25," D\xe9scription "),f.qZA(),f._UZ(26,"textarea",16),f.qZA(),f.TgZ(27,"div",17)(28,"button",18),f._uU(29," Ajouter "),f.qZA()()()()),2&t&&(f.xp6(6),f.Q6J("formGroup",r.experienceForm),f.xp6(22),f.Q6J("disabled",!r.experienceForm.valid))},dependencies:[VL,S_,zx,SL,A_,PE,Jx]}),n})(),_J=(()=>{class n{constructor(t,r,i,s){this.experienceService=t,this.formBuilder=r,this.act=i,this.router=s,this.experienceEditForm=this.formBuilder.group({nom:[""],type:[""],dateDebut:[""],dateFin:[""],description:[""]})}ngOnInit(){const t=this.act.snapshot.paramMap.get("id");this.experienceService.getExperienceDoc(t).subscribe(r=>{this.experienceRef=r,this.experienceEditForm=this.formBuilder.group({nom:[this.experienceRef.nom],type:[this.experienceRef.type],dateDebut:[this.experienceRef.dateDebut],dateFin:[this.experienceRef.dateFin],description:[this.experienceRef.description]})})}onSubmit(){const t=this.act.snapshot.paramMap.get("id");this.experienceService.updateExperience(this.experienceEditForm.value,t),alert("Modification d'un exp\xe9rience eff\xe9ctu\xe9 avec succ\xe8s!"),setTimeout(()=>{this.router.navigate(["backend008/experience"])},1e3)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(jx),f.Y36(Z6),f.Y36(Js),f.Y36(Un))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-update"]],decls:30,vars:2,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/experience"],[1,"text-center","w-20","m-4","p-2","font-bold","bg-black","drop-shadow","rounded-lg","text-white","hover:bg-white","hover:text-black"],[1,"w-full","mt-4"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","m-4",3,"formGroup","ngSubmit"],[1,"m-4"],["for","nom",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","nom","formControlName","nom","type","text","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"m-6"],["for","type",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","type","formControlName","type","type","text","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","dateDebut",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","dateDebut","formControlName","dateDebut","type","date","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","dateFin",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","dateFin","formControlName","dateFin","type","date",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","description",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","description","formControlName","description","cols","30","rows","10","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"flex","items-center","justify-between","m-4"],["type","submit",1,"bg-cyan-500","hover:bg-cyan-600","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"disabled"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Modification"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Annuler"),f.qZA()(),f.TgZ(5,"div",3)(6,"form",4),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(7,"div",5)(8,"label",6),f._uU(9," Nom "),f.qZA(),f._UZ(10,"input",7),f.qZA(),f.TgZ(11,"div",8)(12,"label",9),f._uU(13," Type "),f.qZA(),f._UZ(14,"input",10),f.qZA(),f.TgZ(15,"div",8)(16,"label",11),f._uU(17," Date de d\xe9but "),f.qZA(),f._UZ(18,"input",12),f.qZA(),f.TgZ(19,"div",8)(20,"label",13),f._uU(21," Date de fin "),f.qZA(),f._UZ(22,"input",14),f.qZA(),f.TgZ(23,"div",8)(24,"label",15),f._uU(25," D\xe9scription "),f.qZA(),f._UZ(26,"textarea",16),f.qZA(),f.TgZ(27,"div",17)(28,"button",18),f._uU(29," Modifier "),f.qZA()()()()),2&t&&(f.xp6(6),f.Q6J("formGroup",r.experienceEditForm),f.xp6(22),f.Q6J("disabled",!r.experienceEditForm.valid))},dependencies:[VL,S_,zx,SL,A_,PE,Jx]}),n})();j(1389);class Y6{constructor(){return xP("auth")}}class OE{constructor(e){return e}}const Q6="storage",WL=new f.OlP("angularfire2.storage-instances");function CJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OE(r)}}const DJ={provide:class EJ{constructor(){return xP(Q6)}},deps:[[new f.FiY,WL]]},TJ={provide:OE,useFactory:function IJ(n,e){const t=function SP(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(Q6,n,e);return t&&new OE(t)},deps:[[new f.FiY,WL],$y]};let SJ=(()=>{class n{constructor(){(0,rn.registerVersion)("angularfire",KT.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[TJ,DJ]}),n})();function xJ(n,...e){return{ngModule:SJ,providers:[{provide:WL,useFactory:CJ(n),multi:!0,deps:[f.R0b,f.zs3,uw,uB,[new f.FiY,Y6],[new f.FiY,mw],...e]}]}}const AJ=Uy(rB,!0),X6=Uy(nB,!0),MJ=Uy(n9,!0),qL=Uy(jP,!0),J6=Uy(tB,!0);function kJ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr",8)(1,"th",9),f._uU(2),f.qZA(),f.TgZ(3,"td")(4,"span",10),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw();return f.KtG(o.removeVideo(s))}),f.TgZ(5,"button"),f._uU(6,"Supprimer"),f.qZA()()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.hij(" ",t.nom," ")}}const RJ=[{path:"",component:_X},{path:"backend008/experience",component:bX},{path:"backend008/experienceCreate",component:yJ},{path:"backend008/experienceUpdate/:id",component:_J},{path:"backend008/projet",component:(()=>{class n{constructor(t,r,i){this.projetservice=t,this.storage=r,this.router=i,this.videolist=[],this.projetlist=[]}ngOnInit(){this.projetservice.getProjetList().subscribe(t=>{this.projetlist=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}removeVideo(t){const r=qL(this.storage,t.nom);AJ(r).then(()=>{this.projetservice.deleteProjet(t),console.log("Projet supprimer avec succ\xe8s!"),setTimeout(()=>{this.router.navigate(["backend008/projet"])},1e3)}).catch(i=>{console.log("Erreur: "+i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(EL),f.Y36(OE),f.Y36(Un))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-gestion-projet"]],decls:13,vars:1,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/projetCreate"],[1,"w-20","mt-4","p-2","font-bold","bg-sky-600","drop-shadow","rounded-lg","hover:bg-sky-200"],[1,"relative","overflow-x-auto","mt-4"],[1,"w-full","text-sm","text-left","text-cyan-600","dark:text-cyan-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700"],["scope","row",1,"py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"bg-rose-400","hover:bg-rose-600","text-white","font-bold","rounded","p-1","focus:outline-none","focus:shadow-outline",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Gestion des projets"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Cr\xe9er"),f.qZA()(),f.TgZ(5,"div",3)(6,"table",4)(7,"thead",5)(8,"tr")(9,"th",6),f._uU(10," Nom video "),f.qZA()()(),f.TgZ(11,"tbody"),f.YNc(12,kJ,7,1,"tr",7),f.qZA()()()),2&t&&(f.xp6(12),f.Q6J("ngForOf",r.projetlist))},dependencies:[$s]}),n})()},{path:"backend008/projetCreate",component:(()=>{class n{constructor(t,r,i){this.storage=t,this.router=r,this.projetService=i,this.video={},this.image={}}ngOnInit(){}chooseVideo(t){this.video=t?.target.files[0]}chooseImage(t){this.image=t?.target.files[0]}onSubmit(){const t=qL(this.storage,this.video.name),r=J6(t,this.video);r.on("state_changed",i=>{console.log("L'ajout de la video est \xe0 "+i.bytesTransferred/i.totalBytes*100+" %")},i=>{console.log(i.message)},()=>{X6(r.snapshot.ref).then(i=>{const s=qL(this.storage,this.image.name),o=J6(s,this.image);o.on("state_changed",c=>{console.log("L'ajout de l'image est \xe0 "+c.bytesTransferred/c.totalBytes*100+" %")},c=>{console.log(c.message)},()=>{X6(o.snapshot.ref).then(c=>{let d={nom:this.video.name,urlVideo:i,urlImage:c,outils:this.outils,date:new Date};this.projetService.createProjet(d),alert("Ajout d'un projet eff\xe9ctu\xe9 avec succ\xe8s!")})})})})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(OE),f.Y36(Un),f.Y36(EL))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create"]],decls:22,vars:1,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/projet"],[1,"text-center","w-20","m-4","p-2","font-bold","bg-black","drop-shadow","rounded-lg","text-white","hover:bg-white","hover:text-black"],[1,"w-full","mt-4"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","m-4"],[1,"m-4"],["for","video",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","video","type","file","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"change"],["for","outils",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","outils","type","text","placeholder","Outils","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],[1,"flex","items-center","justify-between","m-4"],[1,"bg-cyan-500","hover:bg-cyan-600","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Cr\xe9ation projet"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Retour"),f.qZA()(),f.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"label",6),f._uU(9," Video: "),f.qZA(),f.TgZ(10,"input",7),f.NdJ("change",function(s){return r.chooseVideo(s)}),f.qZA()(),f.TgZ(11,"div",5)(12,"label",6),f._uU(13," Image: "),f.qZA(),f.TgZ(14,"input",7),f.NdJ("change",function(s){return r.chooseImage(s)}),f.qZA()(),f.TgZ(15,"div",5)(16,"label",8),f._uU(17," Outils: "),f.qZA(),f.TgZ(18,"input",9),f.NdJ("ngModelChange",function(s){return r.outils=s}),f.qZA()(),f.TgZ(19,"div",10)(20,"button",11),f.NdJ("click",function(){return r.onSubmit()}),f._uU(21," Ajouter "),f.qZA()()()()),2&t&&(f.xp6(18),f.Q6J("ngModel",r.outils))},dependencies:[S_,zx,A_,LL]}),n})()}];let PJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Lm.forRoot(RJ,{useHash:!0}),Lm]}),n})(),OJ=(()=>{class n{constructor(){this.title="bruel-portfolio"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[WI]}),n})();const ZL={production:!0,firebaseConfig:{apiKey:"AIzaSyCefTqIvgYOvovAmCDIKUJVYlmwnkVZuq4",authDomain:"bruelportfolio.firebaseapp.com",projectId:"bruelportfolio",storageBucket:"bruelportfolio.appspot.com",messagingSenderId:"105832684079",appId:"1:105832684079:web:a10515f620438e735644da"}};let NJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[OJ]}),n.\u0275inj=f.cJS({providers:[{provide:ps.Dh,useValue:ZL.firebaseConfig}],imports:[Uh,PJ,Uv,g9(()=>m9(ZL.firebaseConfig)),GQ,mJ,G6,xJ(()=>MJ())]}),n})();ZL.production&&(0,f.G48)(),Ic().bootstrapModule(NJ).catch(n=>console.error(n))},9751:(_t,ke,j)=>{j.d(ke,{y:()=>Re});var f=j(2961),z=j(727),U=j(8822),ce=j(9635),Se=j(2416),Ce=j(576),Pe=j(2806);let Re=(()=>{class J{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const xe=new J;return xe.source=this,xe.operator=Be,xe}subscribe(Be,xe,rt){const ue=function q(J){return J&&J instanceof f.Lv||function Z(J){return J&&(0,Ce.m)(J.next)&&(0,Ce.m)(J.error)&&(0,Ce.m)(J.complete)}(J)&&(0,z.Nn)(J)}(Be)?Be:new f.Hp(Be,xe,rt);return(0,Pe.x)(()=>{const{operator:_e,source:ht}=this;ue.add(_e?_e.call(ue,ht):ht?this._subscribe(ue):this._trySubscribe(ue))}),ue}_trySubscribe(Be){try{return this._subscribe(Be)}catch(xe){Be.error(xe)}}forEach(Be,xe){return new(xe=He(xe))((rt,ue)=>{const _e=new f.Hp({next:ht=>{try{Be(ht)}catch(Dt){ue(Dt),_e.unsubscribe()}},error:ue,complete:rt});this.subscribe(_e)})}_subscribe(Be){var xe;return null===(xe=this.source)||void 0===xe?void 0:xe.subscribe(Be)}[U.L](){return this}pipe(...Be){return(0,ce.U)(Be)(this)}toPromise(Be){return new(Be=He(Be))((xe,rt)=>{let ue;this.subscribe(_e=>ue=_e,_e=>rt(_e),()=>xe(ue))})}}return J.create=ze=>new J(ze),J})();function He(J){var ze;return null!==(ze=J??Se.v.Promise)&&void 0!==ze?ze:Promise}},7579:(_t,ke,j)=>{j.d(ke,{x:()=>Pe});var f=j(9751),z=j(727);const ce=(0,j(3888).d)(He=>function(){He(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=j(8737),Ce=j(2806);let Pe=(()=>{class He extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const J=new Re(this,this);return J.operator=q,J}_throwIfClosed(){if(this.closed)throw new ce}next(q){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(q)}})}error(q){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:J}=this;for(;J.length;)J.shift().error(q)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:J,isStopped:ze,observers:Be}=this;return J||ze?z.Lc:(this.currentObservers=null,Be.push(q),new z.w0(()=>{this.currentObservers=null,(0,Se.P)(Be,q)}))}_checkFinalizedStatuses(q){const{hasError:J,thrownError:ze,isStopped:Be}=this;J?q.error(ze):Be&&q.complete()}asObservable(){const q=new f.y;return q.source=this,q}}return He.create=(Z,q)=>new Re(Z,q),He})();class Re extends Pe{constructor(Z,q){super(),this.destination=Z,this.source=q}next(Z){var q,J;null===(J=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===J||J.call(q,Z)}error(Z){var q,J;null===(J=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===J||J.call(q,Z)}complete(){var Z,q;null===(q=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===q||q.call(Z)}_subscribe(Z){var q,J;return null!==(J=null===(q=this.source)||void 0===q?void 0:q.subscribe(Z))&&void 0!==J?J:z.Lc}}},2961:(_t,ke,j)=>{j.d(ke,{Hp:()=>rt,Lv:()=>J});var f=j(576),z=j(727),U=j(2416),ce=j(7849);function Se(){}const Ce=He("C",void 0,void 0);function He(Ae,ye,we){return{kind:Ae,value:ye,error:we}}var Z=j(3410),q=j(2806);class J extends z.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,z.Nn)(ye)&&ye.add(this)):this.destination=Dt}static create(ye,we,Ge){return new rt(ye,we,Ge)}next(ye){this.isStopped?ht(function Re(Ae){return He("N",Ae,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?ht(function Pe(Ae){return He("E",void 0,Ae)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?ht(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Be(Ae,ye){return ze.call(Ae,ye)}class xe{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:we}=this;if(we.next)try{we.next(ye)}catch(Ge){ue(Ge)}}error(ye){const{partialObserver:we}=this;if(we.error)try{we.error(ye)}catch(Ge){ue(Ge)}else ue(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(we){ue(we)}}}class rt extends J{constructor(ye,we,Ge){let Ke;if(super(),(0,f.m)(ye)||!ye)Ke={next:ye??void 0,error:we??void 0,complete:Ge??void 0};else{let ie;this&&U.v.useDeprecatedNextContext?(ie=Object.create(ye),ie.unsubscribe=()=>this.unsubscribe(),Ke={next:ye.next&&Be(ye.next,ie),error:ye.error&&Be(ye.error,ie),complete:ye.complete&&Be(ye.complete,ie)}):Ke=ye}this.destination=new xe(Ke)}}function ue(Ae){U.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ae):(0,ce.h)(Ae)}function ht(Ae,ye){const{onStoppedNotification:we}=U.v;we&&Z.z.setTimeout(()=>we(Ae,ye))}const Dt={closed:!0,next:Se,error:function _e(Ae){throw Ae},complete:Se}},727:(_t,ke,j)=>{j.d(ke,{Lc:()=>Ce,w0:()=>Se,Nn:()=>Pe});var f=j(576);const U=(0,j(3888).d)(He=>function(q){He(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((J,ze)=>`${ze+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ce=j(8737);class Se{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Be of q)Be.remove(this);else q.remove(this);const{initialTeardown:J}=this;if((0,f.m)(J))try{J()}catch(Be){Z=Be instanceof U?Be.errors:[Be]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Be of ze)try{Re(Be)}catch(xe){Z=Z??[],xe instanceof U?Z=[...Z,...xe.errors]:Z.push(xe)}}if(Z)throw new U(Z)}}add(Z){var q;if(Z&&Z!==this)if(this.closed)Re(Z);else{if(Z instanceof Se){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(Z)}}_hasParent(Z){const{_parentage:q}=this;return q===Z||Array.isArray(q)&&q.includes(Z)}_addParent(Z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(Z),q):q?[q,Z]:Z}_removeParent(Z){const{_parentage:q}=this;q===Z?this._parentage=null:Array.isArray(q)&&(0,ce.P)(q,Z)}remove(Z){const{_finalizers:q}=this;q&&(0,ce.P)(q,Z),Z instanceof Se&&Z._removeParent(this)}}Se.EMPTY=(()=>{const He=new Se;return He.closed=!0,He})();const Ce=Se.EMPTY;function Pe(He){return He instanceof Se||He&&"closed"in He&&(0,f.m)(He.remove)&&(0,f.m)(He.add)&&(0,f.m)(He.unsubscribe)}function Re(He){(0,f.m)(He)?He():He.unsubscribe()}},2416:(_t,ke,j)=>{j.d(ke,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,ke,j)=>{j.d(ke,{E:()=>z});const z=new(j(9751).y)(Se=>Se.complete())},8996:(_t,ke,j)=>{j.d(ke,{D:()=>ye});var f=j(8421),z=j(5363),U=j(9468),Ce=j(9751),Re=j(2202),He=j(576),Z=j(9672);function J(we,Ge){if(!we)throw new Error("Iterable cannot be null");return new Ce.y(Ke=>{(0,Z.f)(Ke,Ge,()=>{const ie=we[Symbol.asyncIterator]();(0,Z.f)(Ke,Ge,()=>{ie.next().then(Xe=>{Xe.done?Ke.complete():Ke.next(Xe.value)})},0,!0)})})}var ze=j(3670),Be=j(8239),xe=j(1144),rt=j(6495),ue=j(2206),_e=j(4532),ht=j(3260);function ye(we,Ge){return Ge?function Ae(we,Ge){if(null!=we){if((0,ze.c)(we))return function ce(we,Ge){return(0,f.Xf)(we).pipe((0,U.R)(Ge),(0,z.Q)(Ge))}(we,Ge);if((0,xe.z)(we))return function Pe(we,Ge){return new Ce.y(Ke=>{let ie=0;return Ge.schedule(function(){ie===we.length?Ke.complete():(Ke.next(we[ie++]),Ke.closed||this.schedule())})})}(we,Ge);if((0,Be.t)(we))return function Se(we,Ge){return(0,f.Xf)(we).pipe((0,U.R)(Ge),(0,z.Q)(Ge))}(we,Ge);if((0,ue.D)(we))return J(we,Ge);if((0,rt.T)(we))return function q(we,Ge){return new Ce.y(Ke=>{let ie;return(0,Z.f)(Ke,Ge,()=>{ie=we[Re.h](),(0,Z.f)(Ke,Ge,()=>{let Xe,At;try{({value:Xe,done:At}=ie.next())}catch(dt){return void Ke.error(dt)}At?Ke.complete():Ke.next(Xe)},0,!0)}),()=>(0,He.m)(ie?.return)&&ie.return()})}(we,Ge);if((0,ht.L)(we))return function Dt(we,Ge){return J((0,ht.Q)(we),Ge)}(we,Ge)}throw(0,_e.z)(we)}(we,Ge):(0,f.Xf)(we)}},8421:(_t,ke,j)=>{j.d(ke,{Xf:()=>ze});var f=j(655),z=j(1144),U=j(8239),ce=j(9751),Se=j(3670),Ce=j(2206),Pe=j(4532),Re=j(6495),He=j(3260),Z=j(576),q=j(7849),J=j(8822);function ze(Ae){if(Ae instanceof ce.y)return Ae;if(null!=Ae){if((0,Se.c)(Ae))return function Be(Ae){return new ce.y(ye=>{const we=Ae[J.L]();if((0,Z.m)(we.subscribe))return we.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,z.z)(Ae))return function xe(Ae){return new ce.y(ye=>{for(let we=0;we<Ae.length&&!ye.closed;we++)ye.next(Ae[we]);ye.complete()})}(Ae);if((0,U.t)(Ae))return function rt(Ae){return new ce.y(ye=>{Ae.then(we=>{ye.closed||(ye.next(we),ye.complete())},we=>ye.error(we)).then(null,q.h)})}(Ae);if((0,Ce.D)(Ae))return _e(Ae);if((0,Re.T)(Ae))return function ue(Ae){return new ce.y(ye=>{for(const we of Ae)if(ye.next(we),ye.closed)return;ye.complete()})}(Ae);if((0,He.L)(Ae))return function ht(Ae){return _e((0,He.Q)(Ae))}(Ae)}throw(0,Pe.z)(Ae)}function _e(Ae){return new ce.y(ye=>{(function Dt(Ae,ye){var we,Ge,Ke,ie;return(0,f.mG)(this,void 0,void 0,function*(){try{for(we=(0,f.KL)(Ae);!(Ge=yield we.next()).done;)if(ye.next(Ge.value),ye.closed)return}catch(Xe){Ke={error:Xe}}finally{try{Ge&&!Ge.done&&(ie=we.return)&&(yield ie.call(we))}finally{if(Ke)throw Ke.error}}ye.complete()})})(Ae,ye).catch(we=>ye.error(we))})}},6451:(_t,ke,j)=>{j.d(ke,{T:()=>Ce});var f=j(8189),z=j(8421),U=j(515),ce=j(7669),Se=j(8996);function Ce(...Pe){const Re=(0,ce.yG)(Pe),He=(0,ce._6)(Pe,1/0),Z=Pe;return Z.length?1===Z.length?(0,z.Xf)(Z[0]):(0,f.J)(He)((0,Se.D)(Z,Re)):U.E}},5403:(_t,ke,j)=>{j.d(ke,{x:()=>z});var f=j(2961);function z(ce,Se,Ce,Pe,Re){return new U(ce,Se,Ce,Pe,Re)}class U extends f.Lv{constructor(Se,Ce,Pe,Re,He,Z){super(Se),this.onFinalize=He,this.shouldUnsubscribe=Z,this._next=Ce?function(q){try{Ce(q)}catch(J){Se.error(J)}}:super._next,this._error=Re?function(q){try{Re(q)}catch(J){Se.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(q){Se.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},4004:(_t,ke,j)=>{j.d(ke,{U:()=>U});var f=j(4482),z=j(5403);function U(ce,Se){return(0,f.e)((Ce,Pe)=>{let Re=0;Ce.subscribe((0,z.x)(Pe,He=>{Pe.next(ce.call(Se,He,Re++))}))})}},8189:(_t,ke,j)=>{j.d(ke,{J:()=>U});var f=j(5577),z=j(4671);function U(ce=1/0){return(0,f.z)(z.y,ce)}},5577:(_t,ke,j)=>{j.d(ke,{z:()=>Re});var f=j(4004),z=j(8421),U=j(4482),ce=j(9672),Se=j(5403),Pe=j(576);function Re(He,Z,q=1/0){return(0,Pe.m)(Z)?Re((J,ze)=>(0,f.U)((Be,xe)=>Z(J,Be,ze,xe))((0,z.Xf)(He(J,ze))),q):("number"==typeof Z&&(q=Z),(0,U.e)((J,ze)=>function Ce(He,Z,q,J,ze,Be,xe,rt){const ue=[];let _e=0,ht=0,Dt=!1;const Ae=()=>{Dt&&!ue.length&&!_e&&Z.complete()},ye=Ge=>_e<J?we(Ge):ue.push(Ge),we=Ge=>{Be&&Z.next(Ge),_e++;let Ke=!1;(0,z.Xf)(q(Ge,ht++)).subscribe((0,Se.x)(Z,ie=>{ze?.(ie),Be?ye(ie):Z.next(ie)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(_e--;ue.length&&_e<J;){const ie=ue.shift();xe?(0,ce.f)(Z,xe,()=>we(ie)):we(ie)}Ae()}catch(ie){Z.error(ie)}}))};return He.subscribe((0,Se.x)(Z,ye,()=>{Dt=!0,Ae()})),()=>{rt?.()}}(J,ze,He,q)))}},5363:(_t,ke,j)=>{j.d(ke,{Q:()=>ce});var f=j(9672),z=j(4482),U=j(5403);function ce(Se,Ce=0){return(0,z.e)((Pe,Re)=>{Pe.subscribe((0,U.x)(Re,He=>(0,f.f)(Re,Se,()=>Re.next(He),Ce),()=>(0,f.f)(Re,Se,()=>Re.complete(),Ce),He=>(0,f.f)(Re,Se,()=>Re.error(He),Ce)))})}},3099:(_t,ke,j)=>{j.d(ke,{B:()=>Se});var f=j(8421),z=j(7579),U=j(2961),ce=j(4482);function Se(Pe={}){const{connector:Re=(()=>new z.x),resetOnError:He=!0,resetOnComplete:Z=!0,resetOnRefCountZero:q=!0}=Pe;return J=>{let ze,Be,xe,rt=0,ue=!1,_e=!1;const ht=()=>{Be?.unsubscribe(),Be=void 0},Dt=()=>{ht(),ze=xe=void 0,ue=_e=!1},Ae=()=>{const ye=ze;Dt(),ye?.unsubscribe()};return(0,ce.e)((ye,we)=>{rt++,!_e&&!ue&&ht();const Ge=xe=xe??Re();we.add(()=>{rt--,0===rt&&!_e&&!ue&&(Be=Ce(Ae,q))}),Ge.subscribe(we),!ze&&rt>0&&(ze=new U.Hp({next:Ke=>Ge.next(Ke),error:Ke=>{_e=!0,ht(),Be=Ce(Dt,He,Ke),Ge.error(Ke)},complete:()=>{ue=!0,ht(),Be=Ce(Dt,Z),Ge.complete()}}),(0,f.Xf)(ye).subscribe(ze))})(J)}}function Ce(Pe,Re,...He){if(!0===Re)return void Pe();if(!1===Re)return;const Z=new U.Hp({next:()=>{Z.unsubscribe(),Pe()}});return Re(...He).subscribe(Z)}},9468:(_t,ke,j)=>{j.d(ke,{R:()=>z});var f=j(4482);function z(U,ce=0){return(0,f.e)((Se,Ce)=>{Ce.add(U.schedule(()=>Se.subscribe(Ce),ce))})}},3410:(_t,ke,j)=>{j.d(ke,{z:()=>f});const f={setTimeout(z,U,...ce){const{delegate:Se}=f;return Se?.setTimeout?Se.setTimeout(z,U,...ce):setTimeout(z,U,...ce)},clearTimeout(z){const{delegate:U}=f;return(U?.clearTimeout||clearTimeout)(z)},delegate:void 0}},2202:(_t,ke,j)=>{j.d(ke,{h:()=>z});const z=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,ke,j)=>{j.d(ke,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,ke,j)=>{j.d(ke,{_6:()=>Ce,jO:()=>ce,yG:()=>Se});var f=j(576);function U(Pe){return Pe[Pe.length-1]}function ce(Pe){return(0,f.m)(U(Pe))?Pe.pop():void 0}function Se(Pe){return function z(Pe){return Pe&&(0,f.m)(Pe.schedule)}(U(Pe))?Pe.pop():void 0}function Ce(Pe,Re){return"number"==typeof U(Pe)?Pe.pop():Re}},8737:(_t,ke,j)=>{function f(z,U){if(z){const ce=z.indexOf(U);0<=ce&&z.splice(ce,1)}}j.d(ke,{P:()=>f})},3888:(_t,ke,j)=>{function f(z){const ce=z(Se=>{Error.call(Se),Se.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}j.d(ke,{d:()=>f})},2806:(_t,ke,j)=>{j.d(ke,{O:()=>ce,x:()=>U});var f=j(2416);let z=null;function U(Se){if(f.v.useDeprecatedSynchronousErrorHandling){const Ce=!z;if(Ce&&(z={errorThrown:!1,error:null}),Se(),Ce){const{errorThrown:Pe,error:Re}=z;if(z=null,Pe)throw Re}}else Se()}function ce(Se){f.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=Se)}},9672:(_t,ke,j)=>{function f(z,U,ce,Se=0,Ce=!1){const Pe=U.schedule(function(){ce(),Ce?z.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(z.add(Pe),!Ce)return Pe}j.d(ke,{f:()=>f})},4671:(_t,ke,j)=>{function f(z){return z}j.d(ke,{y:()=>f})},1144:(_t,ke,j)=>{j.d(ke,{z:()=>f});const f=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(_t,ke,j)=>{j.d(ke,{D:()=>z});var f=j(576);function z(U){return Symbol.asyncIterator&&(0,f.m)(U?.[Symbol.asyncIterator])}},576:(_t,ke,j)=>{function f(z){return"function"==typeof z}j.d(ke,{m:()=>f})},3670:(_t,ke,j)=>{j.d(ke,{c:()=>U});var f=j(8822),z=j(576);function U(ce){return(0,z.m)(ce[f.L])}},6495:(_t,ke,j)=>{j.d(ke,{T:()=>U});var f=j(2202),z=j(576);function U(ce){return(0,z.m)(ce?.[f.h])}},8239:(_t,ke,j)=>{j.d(ke,{t:()=>z});var f=j(576);function z(U){return(0,f.m)(U?.then)}},3260:(_t,ke,j)=>{j.d(ke,{L:()=>ce,Q:()=>U});var f=j(655),z=j(576);function U(Se){return(0,f.FC)(this,arguments,function*(){const Pe=Se.getReader();try{for(;;){const{value:Re,done:He}=yield(0,f.qq)(Pe.read());if(He)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Re)}}finally{Pe.releaseLock()}})}function ce(Se){return(0,z.m)(Se?.getReader)}},4482:(_t,ke,j)=>{j.d(ke,{A:()=>z,e:()=>U});var f=j(576);function z(ce){return(0,f.m)(ce?.lift)}function U(ce){return Se=>{if(z(Se))return Se.lift(function(Ce){try{return ce(Ce,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(_t,ke,j)=>{j.d(ke,{U:()=>U,z:()=>z});var f=j(4671);function z(...ce){return U(ce)}function U(ce){return 0===ce.length?f.y:1===ce.length?ce[0]:function(Ce){return ce.reduce((Pe,Re)=>Re(Pe),Ce)}}},7849:(_t,ke,j)=>{j.d(ke,{h:()=>U});var f=j(2416),z=j(3410);function U(ce){z.z.setTimeout(()=>{const{onUnhandledError:Se}=f.v;if(!Se)throw ce;Se(ce)})}},4532:(_t,ke,j)=>{function f(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ke,{z:()=>f})},655:(_t,ke,j)=>{function ce(he,fe){var be={};for(var Me in he)Object.prototype.hasOwnProperty.call(he,Me)&&fe.indexOf(Me)<0&&(be[Me]=he[Me]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(Me=Object.getOwnPropertySymbols(he);Le<Me.length;Le++)fe.indexOf(Me[Le])<0&&Object.prototype.propertyIsEnumerable.call(he,Me[Le])&&(be[Me[Le]]=he[Me[Le]])}return be}function J(he,fe,be,Me){return new(be||(be=Promise))(function(ve,Tt){function bt(Xt){try{tt(Me.next(Xt))}catch(zt){Tt(zt)}}function Rt(Xt){try{tt(Me.throw(Xt))}catch(zt){Tt(zt)}}function tt(Xt){Xt.done?ve(Xt.value):function Le(ve){return ve instanceof be?ve:new be(function(Tt){Tt(ve)})}(Xt.value).then(bt,Rt)}tt((Me=Me.apply(he,fe||[])).next())})}function Ae(he){return this instanceof Ae?(this.v=he,this):new Ae(he)}function ye(he,fe,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,Me=be.apply(he,fe||[]),ve=[];return Le={},Tt("next"),Tt("throw"),Tt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function Tt(Ut){Me[Ut]&&(Le[Ut]=function(mr){return new Promise(function(Jn,ni){ve.push([Ut,mr,Jn,ni])>1||bt(Ut,mr)})})}function bt(Ut,mr){try{!function Rt(Ut){Ut.value instanceof Ae?Promise.resolve(Ut.value.v).then(tt,Xt):zt(ve[0][2],Ut)}(Me[Ut](mr))}catch(Jn){zt(ve[0][3],Jn)}}function tt(Ut){bt("next",Ut)}function Xt(Ut){bt("throw",Ut)}function zt(Ut,mr){Ut(mr),ve.shift(),ve.length&&bt(ve[0][0],ve[0][1])}}function Ge(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,fe=he[Symbol.asyncIterator];return fe?fe.call(he):(he=function rt(he){var fe="function"==typeof Symbol&&Symbol.iterator,be=fe&&he[fe],Me=0;if(be)return be.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Me>=he.length&&(he=void 0),{value:he&&he[Me++],done:!he}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),be={},Me("next"),Me("throw"),Me("return"),be[Symbol.asyncIterator]=function(){return this},be);function Me(ve){be[ve]=he[ve]&&function(Tt){return new Promise(function(bt,Rt){!function Le(ve,Tt,bt,Rt){Promise.resolve(Rt).then(function(tt){ve({value:tt,done:bt})},Tt)}(bt,Rt,(Tt=he[ve](Tt)).done,Tt.value)})}}}j.d(ke,{FC:()=>ye,KL:()=>Ge,_T:()=>ce,mG:()=>J,qq:()=>Ae})},4650:(_t,ke,j)=>{j.d(ke,{$8M:()=>Cc,$Z:()=>UI,AFp:()=>iT,ALo:()=>SD,AaK:()=>Re,CHM:()=>vg,CRH:()=>PD,CZH:()=>vy,CqO:()=>CC,D6c:()=>Ek,EJc:()=>hT,EpF:()=>H0,F4k:()=>IC,FYo:()=>bI,FiY:()=>ea,G48:()=>ST,Gf:()=>gy,GfV:()=>wI,Gpc:()=>q,JOm:()=>Er,Jf7:()=>sm,KtG:()=>fc,LFG:()=>rr,LSH:()=>Xa,Lbi:()=>lT,Lck:()=>pD,MMx:()=>wb,NdJ:()=>al,OlP:()=>vn,Oqu:()=>Y0,PXZ:()=>tk,Q6J:()=>U0,QGY:()=>$f,QP$:()=>ge,QbO:()=>dT,Qsj:()=>qv,R0b:()=>ds,RDi:()=>rI,Rgc:()=>ju,SBq:()=>wu,Sil:()=>pp,Suo:()=>Ob,TTD:()=>ph,TgZ:()=>Vm,VKq:()=>vD,WLB:()=>bD,X6Q:()=>Yb,XFs:()=>ot,Xpm:()=>$n,Xts:()=>Bv,Y36:()=>ed,YKP:()=>fD,YNc:()=>vM,Yjl:()=>L,Yz7:()=>tt,Z0I:()=>mr,ZZ4:()=>Xb,_Bn:()=>hD,_UZ:()=>B0,_Vd:()=>Ns,_c5:()=>UT,_uU:()=>hd,aQg:()=>ew,c2e:()=>j1,cJS:()=>zt,cg1:()=>Zm,dDg:()=>Q1,dqk:()=>en,eFA:()=>wT,ekj:()=>cd,eoX:()=>$u,evT:()=>II,f3M:()=>Sg,g9A:()=>aT,h0i:()=>Bu,hGG:()=>wk,hij:()=>Q0,iGM:()=>RD,ifc:()=>It,ip1:()=>rT,jDz:()=>Eb,kL8:()=>HM,lG2:()=>H,lcZ:()=>cy,lqb:()=>Co,lri:()=>_T,n5z:()=>Gs,oAB:()=>oi,oxw:()=>$0,q4F:()=>Eu,qLn:()=>Kc,qOj:()=>P0,qZA:()=>Um,rWj:()=>vT,sBO:()=>ak,sIi:()=>Bf,s_b:()=>hy,soG:()=>fp,tb:()=>uT,tp0:()=>ta,uIk:()=>yC,vHH:()=>xe,vpe:()=>Vo,wAp:()=>xt,xi3:()=>Mb,xp6:()=>AI,z2F:()=>Pd,zSh:()=>zv,zs3:()=>Qc});var f=j(7579),z=j(727),U=j(9751),ce=j(6451),Se=j(3099);function Ce(a){for(let l in a)if(a[l]===Ce)return l;throw Error("Could not find renamed property on target object.")}function Pe(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function Re(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Re).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function He(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const Z=Ce({__forward_ref__:Ce});function q(a){return a.__forward_ref__=q,a.toString=function(){return Re(this())},a}function J(a){return ze(a)?a():a}function ze(a){return"function"==typeof a&&a.hasOwnProperty(Z)&&a.__forward_ref__===q}class xe extends Error{constructor(l,u){super(function rt(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,u)),this.code=l}}function ue(a){return"string"==typeof a?a:null==a?"":String(a)}function ye(a,l){throw new xe(-201,!1)}function Le(a,l){null==a&&function ve(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}(l,a,null,"!=")}function tt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function zt(a){return{providers:a.providers||[],imports:a.imports||[]}}function Ut(a){return Jn(a,ii)||Jn(a,Is)}function mr(a){return null!==Ut(a)}function Jn(a,l){return a.hasOwnProperty(l)?a[l]:null}function ri(a){return a&&(a.hasOwnProperty(Xi)||a.hasOwnProperty(ka))?a[Xi]:null}const ii=Ce({\u0275prov:Ce}),Xi=Ce({\u0275inj:Ce}),Is=Ce({ngInjectableDef:Ce}),ka=Ce({ngInjectorDef:Ce});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Ur;function Hn(a){const l=Ur;return Ur=a,l}function Ji(a,l,u){const h=Ut(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&ot.Optional?null:void 0!==l?l:void ye(Re(a))}function Pn(a){return{toString:a}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),It=(()=>{return(a=It||(It={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",It;var a})();const en=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ur={},Pt=[],er=Ce({\u0275cmp:Ce}),Gt=Ce({\u0275dir:Ce}),Cs=Ce({\u0275pipe:Ce}),on=Ce({\u0275mod:Ce}),Br=Ce({\u0275fac:Ce}),Cn=Ce({__NG_ELEMENT_ID__:Ce});let _r=0;function $n(a){return Pn(()=>{const u=!0===a.standalone,h={},p={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||Pt,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||It.Emulated,id:"c"+_r++,styles:a.styles||Pt,_:null,setInput:null,schemas:a.schemas||null,tView:null},y=a.dependencies,b=a.features;return p.inputs=$(a.inputs,h),p.outputs=$(a.outputs),b&&b.forEach(C=>C(p)),p.directiveDefs=y?()=>("function"==typeof y?y():y).map(vr).filter(Ds):null,p.pipeDefs=y?()=>("function"==typeof y?y():y).map(Y).filter(Ds):null,p})}function vr(a){return F(a)||P(a)}function Ds(a){return null!==a}function oi(a){return Pn(()=>({type:a.type,bootstrap:a.bootstrap||Pt,declarations:a.declarations||Pt,imports:a.imports||Pt,exports:a.exports||Pt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function $(a,l){if(null==a)return ur;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],y=p;Array.isArray(p)&&(y=p[1],p=p[0]),u[p]=h,l&&(l[p]=y)}return u}const H=$n;function L(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function F(a){return a[er]||null}function P(a){return a[Gt]||null}function Y(a){return a[Cs]||null}function ge(a){const l=F(a)||P(a)||Y(a);return null!==l&&l.standalone}function We(a,l){const u=a[on]||null;if(!u&&!0===l)throw new Error(`Type ${Re(a)} does not have '\u0275mod' property.`);return u}function qr(a){return Array.isArray(a)&&"object"==typeof a[1]}function ai(a){return Array.isArray(a)&&!0===a[1]}function Nl(a){return 0!=(8&a.flags)}function zs(a){return 2==(2&a.flags)}function Fl(a){return 1==(1&a.flags)}function Fi(a){return null!==a.template}function dh(a){return 0!=(256&a[2])}function fo(a,l){return a.hasOwnProperty(Br)?a[Br]:null}class Ts{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function ph(){return uc}function uc(a){return a.type.prototype.ngOnChanges&&(a.setInput=Vl),gh}function gh(){const a=mh(this),l=a?.current;if(l){const u=a.previous;if(u===ur)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function Vl(a,l,u,h){const p=mh(a)||function P_(a,l){return a[gg]=l}(a,{previous:ur,current:null}),y=p.current||(p.current={}),b=p.previous,C=this.declaredInputs[u],D=b[C];y[C]=new Ts(D&&D.currentValue,l,b===ur),a[h]=l}ph.ngInherit=!0;const gg="__ngSimpleChanges__";function mh(a){return a[gg]||null}function bn(a){for(;Array.isArray(a);)a=a[0];return a}function Ul(a,l){return bn(l[a])}function bi(a,l){return bn(l[a.index])}function vh(a,l){return a.data[l]}function Ss(a,l){return a[l]}function _n(a,l){const u=l[a];return qr(u)?u:u[0]}function Pa(a){return 64==(64&a[2])}function xs(a,l){return null==l?null:a[l]}function wi(a){a[18]=0}function hc(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const Lt={lFrame:Mh(null),bindingsEnabled:!0};function Go(){return Lt.bindingsEnabled}function Ee(){return Lt.lFrame.lView}function nn(){return Lt.lFrame.tView}function vg(a){return Lt.lFrame.contextLView=a,a[8]}function fc(a){return Lt.lFrame.contextLView=null,a}function cr(){let a=pc();for(;null!==a&&64===a.type;)a=a.parent;return a}function pc(){return Lt.lFrame.currentTNode}function Vi(a,l){const u=Lt.lFrame;u.currentTNode=a,u.isParent=l}function Dh(){return Lt.lFrame.isParent}function dr(){const a=Lt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Zo(){return Lt.lFrame.bindingIndex++}function wg(a,l){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=a,mc(l)}function mc(a){Lt.lFrame.currentDirectiveIndex=a}function xh(){return Lt.lFrame.currentQueryIndex}function yc(a){Lt.lFrame.currentQueryIndex=a}function Ah(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function L_(a,l,u){if(u&ot.SkipSelf){let p=l,y=a;for(;!(p=p.parent,null!==p||u&ot.Host||(p=Ah(y),null===p||(y=y[15],10&p.type))););if(null===p)return!1;l=p,a=y}const h=Lt.lFrame=V_();return h.currentTNode=l,h.lView=a,!0}function _c(a){const l=V_(),u=a[1];Lt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function V_(){const a=Lt.lFrame,l=null===a?null:a.child;return null===l?Mh(a):l}function Mh(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function U_(){const a=Lt.lFrame;return Lt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Eg=U_;function Ko(){const a=U_();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function nr(){return Lt.lFrame.selectedIndex}function go(a){Lt.lFrame.selectedIndex=a}function Dn(){const a=Lt.lFrame;return vh(a.tView,a.selectedIndex)}function Hl(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const y=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:k}=y;b&&(a.contentHooks||(a.contentHooks=[])).push(-u,b),C&&((a.contentHooks||(a.contentHooks=[])).push(u,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,C)),D&&(a.viewHooks||(a.viewHooks=[])).push(-u,D),x&&((a.viewHooks||(a.viewHooks=[])).push(u,x),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,x)),null!=k&&(a.destroyHooks||(a.destroyHooks=[])).push(u,k)}}function Yo(a,l,u){bc(a,l,3,u)}function mo(a,l,u,h){(3&a[2])===u&&bc(a,l,u,h)}function Fa(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function bc(a,l,u,h){const y=h??-1,b=l.length-1;let C=0;for(let D=void 0!==h?65535&a[18]:0;D<b;D++)if("number"==typeof l[D+1]){if(C=l[D],null!=h&&C>=h)break}else l[D]<0&&(a[18]+=65536),(C<y||-1==y)&&(Ph(a,u,l,D),a[18]=(4294901760&a[18])+D+2),D++}function Ph(a,l,u,h){const p=u[h]<0,y=u[h+1],C=a[p?-u[h]:u[h]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{y.call(C)}finally{}}}else try{y.call(C)}finally{}}class yo{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function $l(a,l,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const y=u[h++],b=u[h++],C=u[h++];a.setAttribute(l,b,C,y)}else{const y=p,b=u[++h];Fh(y)?a.setProperty(l,y,b):a.setAttribute(l,y,b),h++}}return h}function z_(a){return 3===a||4===a||6===a}function Fh(a){return 64===a.charCodeAt(0)}function zl(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?u=p:0===u||G_(a,u,p,null,-1===u||2===u?l[++h]:null)}}return a}function G_(a,l,u,h,p){let y=0,b=a.length;if(-1===l)b=-1;else for(;y<a.length;){const C=a[y++];if("number"==typeof C){if(C===l){b=-1;break}if(C>l){b=y-1;break}}}for(;y<a.length;){const C=a[y];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==p&&(a[y+1]=p));if(h===a[y+1])return void(a[y+2]=p)}y++,null!==h&&y++,null!==p&&y++}-1!==b&&(a.splice(b,0,l),y=b+1),a.splice(y++,0,u),null!==h&&a.splice(y++,0,h),null!==p&&a.splice(y++,0,p)}function W_(a){return-1!==a}function Gl(a){return 32767&a}function Wl(a,l){let u=function q_(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let ql=!0;function ks(a){const l=ql;return ql=a,l}let Cg=0;const _o={};function Zl(a,l){const u=Ua(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,Kl(h.data,a),Kl(l,null),Kl(h.blueprint,null));const p=Ic(a,l),y=a.injectorIndex;if(W_(p)){const b=Gl(p),C=Wl(p,l),D=C[1].data;for(let x=0;x<8;x++)l[y+x]=C[b+x]|D[b+x]}return l[y+8]=p,y}function Kl(a,l){a.push(0,0,0,0,0,0,0,0,l)}function Ua(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function Ic(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=l;for(;null!==p;){if(h=Ba(p),null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function vo(a,l,u){!function Y_(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Cn)&&(h=u[Cn]),null==h&&(h=u[Cn]=Cg++);const p=255&h;l.data[a+(p>>5)]|=1<<p}(a,l,u)}function Vh(a,l,u){if(u&ot.Optional||void 0!==a)return a;ye()}function Uh(a,l,u,h){if(u&ot.Optional&&void 0===h&&(h=null),0==(u&(ot.Self|ot.Host))){const p=a[9],y=Hn(void 0);try{return p?p.get(l,h,u&ot.Optional):Ji(l,h,u&ot.Optional)}finally{Hn(y)}}return Vh(h,0,u)}function Q_(a,l,u,h=ot.Default,p){if(null!==a){if(1024&l[2]){const b=function tv(a,l,u,h,p){let y=a,b=l;for(;null!==y&&null!==b&&1024&b[2]&&!(256&b[2]);){const C=X_(y,b,u,h|ot.Self,_o);if(C!==_o)return C;let D=y.parent;if(!D){const x=b[21];if(x){const k=x.get(u,_o,h);if(k!==_o)return k}D=Ba(b),b=b[15]}y=D}return p}(a,l,u,h,_o);if(b!==_o)return b}const y=X_(a,l,u,h,_o);if(y!==_o)return y}return Uh(l,u,h,p)}function X_(a,l,u,h,p){const y=function ev(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Cn)?a[Cn]:void 0;return"number"==typeof l?l>=0?255&l:zn:l}(u);if("function"==typeof y){if(!L_(l,a,h))return h&ot.Host?Vh(p,0,h):Uh(l,u,h,p);try{const b=y(h);if(null!=b||h&ot.Optional)return b;ye()}finally{Eg()}}else if("number"==typeof y){let b=null,C=Ua(a,l),D=-1,x=h&ot.Host?l[16][6]:null;for((-1===C||h&ot.SkipSelf)&&(D=-1===C?Ic(a,l):l[C+8],-1!==D&&Yl(h,!1)?(b=l[1],C=Gl(D),l=Wl(D,l)):C=-1);-1!==C;){const k=l[1];if(Dg(y,C,k.data)){const V=J_(C,l,u,b,h,x);if(V!==_o)return V}D=l[C+8],-1!==D&&Yl(h,l[1].data[C+8]===x)&&Dg(y,C,l)?(b=k,C=Gl(D),l=Wl(D,l)):C=-1}}return p}function J_(a,l,u,h,p,y){const b=l[1],C=b.data[a+8],k=Bh(C,b,u,null==h?zs(C)&&ql:h!=b&&0!=(3&C.type),p&ot.Host&&y===C);return null!==k?bo(l,b,k,C):_o}function Bh(a,l,u,h,p){const y=a.providerIndexes,b=l.data,C=1048575&y,D=a.directiveStart,k=y>>20,W=p?C+k:a.directiveEnd;for(let te=h?C:C+k;te<W;te++){const de=b[te];if(te<D&&u===de||te>=D&&de.type===u)return te}if(p){const te=b[D];if(te&&Fi(te)&&te.type===u)return D}return null}function bo(a,l,u,h){let p=a[u];const y=l.data;if(function $_(a){return a instanceof yo}(p)){const b=p;b.resolving&&function ht(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new xe(-200,`Circular dependency in DI detected for ${a}${u}`)}(function _e(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():ue(a)}(y[u]));const C=ks(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?Hn(b.injectImpl):null;L_(a,h,ot.Default);try{p=a[u]=b.factory(void 0,y,a,h),l.firstCreatePass&&u>=h.directiveStart&&function Na(a,l,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:y}=l.type.prototype;if(h){const b=uc(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,b)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,p),y&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,y))}(u,y[u],l)}finally{null!==D&&Hn(D),ks(C),b.resolving=!1,Eg()}}return p}function Dg(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function Yl(a,l){return!(a&ot.Self||a&ot.Host&&l)}class Ql{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return Q_(this._tNode,this._lView,l,h,u)}}function zn(){return new Ql(cr(),Ee())}function Gs(a){return Pn(()=>{const l=a.prototype.constructor,u=l[Br]||Xl(l),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const y=p[Br]||Xl(p);if(y&&y!==u)return y;p=Object.getPrototypeOf(p)}return y=>new y})}function Xl(a){return ze(a)?()=>{const l=Xl(J(a));return l&&l()}:fo(a)}function Ba(a){const l=a[1],u=l.type;return 2===u?l.declTNode:1===u?a[6]:null}function Cc(a){return function Lh(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const y=u[p];if(z_(y))break;if(0===y)p+=2;else if("number"==typeof y)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(y===l)return u[p+1];p+=2}}}return null}(cr(),a)}const ja="__parameters__";function Ws(a,l,u){return Pn(()=>{const h=function jh(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(l);function p(...y){if(this instanceof p)return h.apply(this,y),this;const b=new p(...y);return C.annotation=b,C;function C(D,x,k){const V=D.hasOwnProperty(ja)?D[ja]:Object.defineProperty(D,ja,{value:[]})[ja];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(b),D}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class vn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function hr(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let h=a[u];Array.isArray(h)?(l===a&&(l=a.slice(0,u)),hr(h,l)):l!==a&&l.push(h)}return l}function Eo(a,l){a.forEach(u=>Array.isArray(u)?Eo(u,l):l(u))}function $h(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function fr(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Bi(a,l,u){let h=ji(a,l);return h>=0?a[1|h]=u:(h=~h,function GE(a,l,u,h){let p=a.length;if(p==l)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Tc(a,l){const u=ji(a,l);if(u>=0)return a[1|u]}function ji(a,l){return function Ha(a,l,u){let h=0,p=a.length>>u;for(;p!==h;){const y=h+(p-h>>1),b=a[y<<u];if(l===b)return y<<u;b>l?p=y:h=y+1}return~(p<<u)}(a,l,1)}const ns={},iu="__NG_DI_FLAG__",Ac="ngTempTokenPath",uv=/\n/gm,Zh="__source";let su;function za(a){const l=su;return su=a,l}function Kh(a,l=ot.Default){if(void 0===su)throw new xe(-203,!1);return null===su?Ji(a,void 0,l):su.get(a,l&ot.Optional?null:void 0,l)}function rr(a,l=ot.Default){return(function lr(){return Ur}()||Kh)(J(a),l)}function Sg(a,l=ot.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),rr(a,l)}function ou(a){const l=[];for(let u=0;u<a.length;u++){const h=J(a[u]);if(Array.isArray(h)){if(0===h.length)throw new xe(900,!1);let p,y=ot.Default;for(let b=0;b<h.length;b++){const C=h[b],D=cv(C);"number"==typeof D?-1===D?p=C.token:y|=D:p=C}l.push(rr(p,y))}else l.push(rr(h))}return l}function Jo(a,l){return a[iu]=l,a.prototype[iu]=l,a}function cv(a){return a[iu]}const ea=Jo(Ws("Optional"),8),ta=Jo(Ws("SkipSelf"),4);var Er=(()=>((Er=Er||{})[Er.Important=1]="Important",Er[Er.DashCase=2]="DashCase",Er))();const Fc=new Map;let Cv=0;const ia="__ngContext__";function Ar(a,l){qr(l)?(a[ia]=l[20],function Zs(a){Fc.set(a[20],a)}(l)):a[ia]=l}function uf(a,l){return undefined(a,l)}function Io(a){const l=a[3];return ai(l)?l[3]:l}function Lg(a){return m(a[13])}function E(a){return m(a[4])}function m(a){for(;null!==a&&!ai(a);)a=a[4];return a}function I(a,l,u,h,p){if(null!=h){let y,b=!1;ai(h)?y=h:qr(h)&&(b=!0,h=h[0]);const C=bn(h);0===a&&null!==u?null==p?ff(l,u,C):is(l,u,C,p||null,!0):1===a&&null!==u?is(l,u,C,p||null,!0):2===a?function tI(a,l,u){const h=Ug(a,l);h&&function yu(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}(l,C,b):3===a&&l.destroyNode(C),null!=y&&function uA(a,l,u,h,p){const y=u[7];y!==bn(u)&&I(l,a,h,y,p);for(let C=10;C<u.length;C++){const D=u[C];mf(D[1],D,a,l,h,y)}}(l,a,y,u,p)}}function ae(a,l,u){return a.createElement(l,u)}function oa(a,l){const u=a[9],h=u.indexOf(l),p=l[3];512&l[2]&&(l[2]&=-513,hc(p,-1)),u.splice(h,1)}function Qa(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const p=h[17];null!==p&&p!==a&&oa(p,h),l>0&&(a[u-1][4]=h[4]);const y=fr(a,10+l);!function je(a,l){mf(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const b=y[19];null!==b&&b.detachView(y[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function aa(a,l){if(!(128&l[2])){const u=l[11];u.destroyNode&&mf(a,l,u,3,null,null),function Yt(a){let l=a[13];if(!l)return jc(a[1],a);for(;l;){let u=null;if(qr(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)qr(l)&&jc(l[1],l),l=l[3];null===l&&(l=a),qr(l)&&jc(l[1],l),u=l&&l[4]}l=u}}(l)}}function jc(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function cf(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=l[u[h]];if(!(p instanceof yo)){const y=u[h+1];if(Array.isArray(y))for(let b=0;b<y.length;b+=2){const C=p[y[b]],D=y[b+1];try{D.call(C)}finally{}}else try{y.call(p)}finally{}}}}(a,l),function Vg(a,l){const u=a.cleanup,h=l[7];let p=-1;if(null!==u)for(let y=0;y<u.length-1;y+=2)if("string"==typeof u[y]){const b=u[y+1],C="function"==typeof b?b(l):bn(l[b]),D=h[p=u[y+2]],x=u[y+3];"boolean"==typeof x?C.removeEventListener(u[y],D,x):x>=0?h[p=x]():h[p=-x].unsubscribe(),y+=2}else{const b=h[p=u[y+1]];u[y].call(b)}if(null!==h){for(let y=p+1;y<h.length;y++)(0,h[y])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const u=l[17];if(null!==u&&ai(l[3])){u!==l[3]&&oa(u,l);const h=l[19];null!==h&&h.detachView(a)}!function Og(a){Fc.delete(a[20])}(l)}}function df(a,l,u){return function hf(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];if(2&h.flags){const p=a.data[h.directiveStart].encapsulation;if(p===It.None||p===It.Emulated)return null}return bi(h,u)}(a,l.parent,u)}function is(a,l,u,h,p){a.insertBefore(l,u,h,p)}function ff(a,l,u){a.appendChild(l,u)}function mu(a,l,u,h,p){null!==h?is(a,l,u,h,p):ff(a,l,u)}function Ug(a,l){return a.parentNode(l)}let Ov,Bg=function aA(a,l,u){return 40&a.type?bi(a,u):null};function jg(a,l,u,h){const p=df(a,h,l),y=l[11],C=function XE(a,l,u){return Bg(a,l,u)}(h.parent||l[6],h,l);if(null!=p)if(Array.isArray(u))for(let D=0;D<u.length;D++)mu(y,p,u[D],C,!1);else mu(y,p,u,C,!1)}function gf(a,l){if(null!==l){const u=l.type;if(3&u)return bi(l,a);if(4&u)return $g(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return gf(a,h);{const p=a[l.index];return ai(p)?$g(-1,p):bn(p)}}if(32&u)return uf(l,a)()||bn(a[l.index]);{const h=Hg(a,l);return null!==h?Array.isArray(h)?h[0]:gf(Io(a[16]),h):gf(a,l.next)}}return null}function Hg(a,l){return null!==l?a[16][6].projection[l.projection]:null}function $g(a,l){const u=10+a+1;if(u<l.length){const h=l[u],p=h[1].firstChild;if(null!==p)return gf(h,p)}return l[7]}function Mv(a,l,u,h,p,y,b){for(;null!=u;){const C=h[u.index],D=u.type;if(b&&0===l&&(C&&Ar(bn(C),h),u.flags|=4),64!=(64&u.flags))if(8&D)Mv(a,l,u.child,h,p,y,!1),I(l,a,p,C,y);else if(32&D){const x=uf(u,h);let k;for(;k=x();)I(l,a,p,k,y);I(l,a,p,C,y)}else 16&D?nI(a,l,h,u,p,y):I(l,a,p,C,y);u=b?u.projectionNext:u.next}}function mf(a,l,u,h,p,y){Mv(u,h,a.firstChild,l,p,y,!1)}function nI(a,l,u,h,p,y){const b=u[16],D=b[6].projection[h.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)I(l,a,p,D[x],y);else Mv(a,l,D,b[3],p,y,!0)}function kv(a,l,u){a.setAttribute(l,"style",u)}function Rv(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function rI(a){Ov=a}class oI{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function la(a){return a instanceof oI?a.changingThisBreaksApplicationSecurity:a}const _A=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Mr=(()=>((Mr=Mr||{})[Mr.NONE=0]="NONE",Mr[Mr.HTML=1]="HTML",Mr[Mr.STYLE=2]="STYLE",Mr[Mr.SCRIPT=3]="SCRIPT",Mr[Mr.URL=4]="URL",Mr[Mr.RESOURCE_URL=5]="RESOURCE_URL",Mr))();function Xa(a){const l=function bf(){const a=Ee();return a&&a[12]}();return l?l.sanitize(Mr.URL,a)||"":function $c(a,l){const u=function aI(a){return a instanceof oI&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}(a,"URL")?la(a):function vf(a){return(a=String(a)).match(_A)?a:"unsafe:"+a}(ue(a))}const Bv=new vn("ENVIRONMENT_INITIALIZER"),jv=new vn("INJECTOR",-1),gI=new vn("INJECTOR_DEF_TYPES");class vu{get(l,u=ns){if(u===ns){const h=new Error(`NullInjectorError: No provider for ${Re(l)}!`);throw h.name="NullInjectorError",h}return u}}function Nt(...a){return{\u0275providers:mI(0,a)}}function mI(a,...l){const u=[],h=new Set;let p;return Eo(l,y=>{const b=y;Qg(b,u,[],h)&&(p||(p=[]),p.push(b))}),void 0!==p&&yI(p,u),u}function yI(a,l){for(let u=0;u<a.length;u++){const{providers:p}=a[u];Eo(p,y=>{l.push(y)})}}function Qg(a,l,u,h){if(!(a=J(a)))return!1;let p=null,y=ri(a);const b=!y&&F(a);if(y||b){if(b&&!b.standalone)return!1;p=a}else{const D=a.ngModule;if(y=ri(D),!y)return!1;p=D}const C=h.has(p);if(b){if(C)return!1;if(h.add(p),b.dependencies){const D="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const x of D)Qg(x,l,u,h)}}else{if(!y)return!1;{if(null!=y.imports&&!C){let x;h.add(p);try{Eo(y.imports,k=>{Qg(k,l,u,h)&&(x||(x=[]),x.push(k))})}finally{}void 0!==x&&yI(x,l)}if(!C){const x=fo(p)||(()=>new p);l.push({provide:p,useFactory:x,deps:Pt},{provide:gI,useValue:p,multi:!0},{provide:Bv,useValue:()=>rr(p),multi:!0})}const D=y.providers;null==D||C||Eo(D,k=>{l.push(k)})}}return p!==a&&void 0!==a.providers}const jr=Ce({provide:String,useValue:Ce});function Hv(a){return null!==a&&"object"==typeof a&&jr in a}function Ja(a){return"function"==typeof a}const zv=new vn("Set Injector scope."),Wc={},Xg={};let Jg;function em(){return void 0===Jg&&(Jg=new vu),Jg}class Co{}class qc extends Co{constructor(l,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qr(l,b=>this.processProvider(b)),this.records.set(jv,bu(void 0,this)),p.has("environment")&&this.records.set(Co,bu(void 0,this));const y=this.records.get(zv);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(gI.multi,Pt,ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=za(this),h=Hn(void 0);try{return l()}finally{za(u),Hn(h)}}get(l,u=ns,h=ot.Default){this.assertNotDestroyed();const p=za(this),y=Hn(void 0);try{if(!(h&ot.SkipSelf)){let C=this.records.get(l);if(void 0===C){const D=function nm(a){return"function"==typeof a||"object"==typeof a&&a instanceof vn}(l)&&Ut(l);C=D&&this.injectableDefInScope(D)?bu(da(l),Wc):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(h&ot.Self?em():this.parent).get(l,u=h&ot.Optional&&u===ns?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Ac]=b[Ac]||[]).unshift(Re(l)),p)throw b;return function au(a,l,u,h){const p=a[Ac];throw l[Zh]&&p.unshift(l[Zh]),a.message=function dv(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=Re(l);if(Array.isArray(l))p=l.map(Re).join(" -> ");else if("object"==typeof l){let y=[];for(let b in l)if(l.hasOwnProperty(b)){let C=l[b];y.push(b+":"+("string"==typeof C?JSON.stringify(C):Re(C)))}p=`{${y.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(uv,"\n  ")}`}("\n"+a.message,p,u,h),a.ngTokenPath=p,a[Ac]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{Hn(y),za(p)}}resolveInjectorInitializers(){const l=za(this),u=Hn(void 0);try{const h=this.get(Bv.multi,Pt,ot.Self);for(const p of h)p()}finally{za(l),Hn(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(Re(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(l){let u=Ja(l=J(l))?l:J(l&&l.provide);const h=function Yr(a){return Hv(a)?bu(void 0,a.useValue):bu(tm(a),Wc)}(l);if(Ja(l)||!0!==l.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=bu(void 0,Wc,!0),p.factory=()=>ou(p.multi),this.records.set(u,p)),u=l,p.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===Wc&&(u.value=Xg,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Ef(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=J(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function da(a){const l=Ut(a),u=null!==l?l.factory:fo(a);if(null!==u)return u;if(a instanceof vn)throw new xe(204,!1);if(a instanceof Function)return function Gv(a){const l=a.length;if(l>0)throw function ru(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}(l,"?"),new xe(204,!1);const u=function ni(a){const l=a&&(a[ii]||a[Is]);if(l){const u=function yr(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new xe(204,!1)}function tm(a,l,u){let h;if(Ja(a)){const p=J(a);return fo(p)||da(p)}if(Hv(a))h=()=>J(a.useValue);else if(function _I(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...ou(a.deps||[]));else if(function $v(a){return!(!a||!a.useExisting)}(a))h=()=>rr(J(a.useExisting));else{const p=J(a&&(a.useClass||a.provide));if(!function Ir(a){return!!a.deps}(a))return fo(p)||da(p);h=()=>new p(...ou(a.deps))}return h}function bu(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function Ys(a){return!!a.\u0275providers}function Qr(a,l){for(const u of a)Array.isArray(u)?Qr(u,l):Ys(u)?Qr(u.\u0275providers,l):l(u)}class Wv{}class Xr{resolveComponentFactory(l){throw function SA(a){const l=Error(`No component factory found for ${Re(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Ns=(()=>{class a{}return a.NULL=new Xr,a})();function xA(){return To(cr(),Ee())}function To(a,l){return new wu(bi(a,l))}let wu=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=xA,a})();function vI(a){return a instanceof wu?a.nativeElement:a}class bI{}let qv=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Qt(){const a=Ee(),u=_n(cr().index,a);return(qr(u)?u:a)[11]}(),a})(),If=(()=>{class a{}return a.\u0275prov=tt({token:a,providedIn:"root",factory:()=>null}),a})();class wI{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Eu=new wI("14.2.12"),Zv={};function im(a){return a.ngOriginalError}class Kc{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&im(l);for(;u&&im(u);)u=im(u);return u||null}}function sm(a){return a.ownerDocument.defaultView}function II(a){return a.ownerDocument}function xo(a){return a instanceof Function?a():a}function tl(a,l,u){let h=a.length;for(;;){const p=a.indexOf(l,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const y=l.length;if(p+y===h||a.charCodeAt(p+y)<=32)return p}u=p+1}}const Yc="ng-template";function RA(a,l,u){let h=0;for(;h<a.length;){let p=a[h++];if(u&&"class"===p){if(p=a[h],-1!==tl(p.toLowerCase(),l,0))return!0}else if(1===p){for(;h<a.length&&"string"==typeof(p=a[h++]);)if(p.toLowerCase()===l)return!0;return!1}}return!1}function nl(a){return 4===a.type&&a.value!==Yc}function PA(a,l,u){return l===(4!==a.type||u?a.value:Yc)}function DI(a,l,u){let h=4;const p=a.attrs||[],y=function TI(a){for(let l=0;l<a.length;l++)if(z_(a[l]))return l;return a.length}(p);let b=!1;for(let C=0;C<l.length;C++){const D=l[C];if("number"!=typeof D){if(!b)if(4&h){if(h=2|1&h,""!==D&&!PA(a,D,u)||""===D&&1===l.length){if(ss(h))return!1;b=!0}}else{const x=8&h?D:l[++C];if(8&h&&null!==a.attrs){if(!RA(a.attrs,x,u)){if(ss(h))return!1;b=!0}continue}const V=OA(8&h?"class":D,p,nl(a),u);if(-1===V){if(ss(h))return!1;b=!0;continue}if(""!==x){let W;W=V>y?"":p[V+1].toLowerCase();const te=8&h?W:null;if(te&&-1!==tl(te,x,0)||2&h&&x!==W){if(ss(h))return!1;b=!0}}}}else{if(!b&&!ss(h)&&!ss(D))return!1;if(b&&ss(D))continue;b=!1,h=D|1&h}}return ss(h)||b}function ss(a){return 0==(1&a)}function OA(a,l,u,h){if(null===l)return-1;let p=0;if(h||!u){let y=!1;for(;p<l.length;){const b=l[p];if(b===a)return p;if(3===b||6===b)y=!0;else{if(1===b||2===b){let C=l[++p];for(;"string"==typeof C;)C=l[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=y?1:2}return-1}return function om(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function Cf(a,l,u=!1){for(let h=0;h<l.length;h++)if(DI(a,l[h],u))return!0;return!1}function am(a,l){return a?":not("+l.trim()+")":l}function lm(a){let l=a[0],u=1,h=2,p="",y=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&h){const C=a[++u];p+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!ss(b)&&(l+=am(y,p),p=""),h=b,y=y||!ss(h);u++}return""!==p&&(l+=am(y,p)),l}const Bt={};function AI(a){MI(nn(),Ee(),nr()+a,!1)}function MI(a,l,u,h){if(!h)if(3==(3&l[2])){const y=a.preOrderCheckHooks;null!==y&&Yo(l,y,u)}else{const y=a.preOrderHooks;null!==y&&mo(l,y,0,u)}go(u)}function rl(a,l=null,u=null,h){const p=cm(a,l,u,h);return p.resolveInjectorInitializers(),p}function cm(a,l=null,u=null,h,p=new Set){const y=[u||Pt,Nt(a)];return h=h||("object"==typeof a?void 0:Re(a)),new qc(y,l||em(),h||null,p)}let Qc=(()=>{class a{static create(u,h){if(Array.isArray(u))return rl({name:""},h,u,"");{const p=u.name??"";return rl({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=ns,a.NULL=new vu,a.\u0275prov=tt({token:a,providedIn:"any",factory:()=>rr(jv)}),a.__NG_ELEMENT_ID__=-1,a})();function ed(a,l=ot.Default){const u=Ee();return null===u?rr(a,l):Q_(cr(),u,J(a),l)}function UI(){throw new Error("invalid")}function fm(a,l){return a<<17|l<<2}function Qs(a){return a>>17&32767}function a0(a){return 2|a}function Ao(a){return(131068&a)>>2}function Rf(a,l){return-131069&a|l<<2}function Xs(a){return 1|a}function YI(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const p=u[h],y=u[h+1];if(-1!==y){const b=a.data[y];yc(p),b.contentQueries(2,l[y],y)}}}function Im(a,l,u,h,p,y,b,C,D,x,k){const V=l.blueprint.slice();return V[0]=p,V[2]=76|h,(null!==k||a&&1024&a[2])&&(V[2]|=1024),wi(V),V[3]=V[15]=a,V[8]=u,V[10]=b||a&&a[10],V[11]=C||a&&a[11],V[12]=D||a&&a[12]||null,V[9]=x||a&&a[9]||null,V[6]=y,V[20]=function Pg(){return Cv++}(),V[21]=k,V[16]=2==l.type?a[16]:V,V}function nd(a,l,u,h,p){let y=a.data[l];if(null===y)y=function il(a,l,u,h,p){const y=pc(),b=Dh(),D=a.data[l]=function I0(a,l,u,h,p,y){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?y:y&&y.parent,u,l,h,p);return null===a.firstChild&&(a.firstChild=D),null!==y&&(b?null==y.child&&null!==D.parent&&(y.child=D):null===y.next&&(y.next=D)),D}(a,l,u,h,p),function Bl(){return Lt.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=u,y.value=h,y.attrs=p;const b=function Wo(){const a=Lt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();y.injectorIndex=null===b?-1:b.injectorIndex}return Vi(y,!0),y}function Mo(a,l,u,h){if(0===u)return-1;const p=l.length;for(let y=0;y<u;y++)l.push(h),a.blueprint.push(h),a.data.push(null);return p}function v0(a,l,u){_c(l);try{const h=a.viewQuery;null!==h&&x0(1,h,u);const p=a.template;null!==p&&rd(a,l,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&YI(a,l),a.staticViewQueries&&x0(2,a.viewQuery,u);const y=a.components;null!==y&&function Em(a,l){for(let u=0;u<l.length;u++)sM(a,l[u])}(l,y)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,Ko()}}function Cm(a,l,u,h){const p=l[2];if(128!=(128&p)){_c(l);try{wi(l),function qo(a){return Lt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&rd(a,l,u,2,h);const b=3==(3&p);if(b){const x=a.preOrderCheckHooks;null!==x&&Yo(l,x,null)}else{const x=a.preOrderHooks;null!==x&&mo(l,x,0,null),Fa(l,0)}if(function aC(a){for(let l=Lg(a);null!==l;l=E(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const p=u[h],y=p[3];0==(512&p[2])&&hc(y,1),p[2]|=512}}}(l),function Ff(a){for(let l=Lg(a);null!==l;l=E(l))for(let u=10;u<l.length;u++){const h=l[u],p=h[1];Pa(h)&&Cm(p,h,p.template,h[8])}}(l),null!==a.contentQueries&&YI(a,l),b){const x=a.contentCheckHooks;null!==x&&Yo(l,x)}else{const x=a.contentHooks;null!==x&&mo(l,x,1),Fa(l,1)}!function KA(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)go(~p);else{const y=p,b=u[++h],C=u[++h];wg(b,y),C(2,l[y])}}}finally{go(-1)}}(a,l);const C=a.components;null!==C&&function QI(a,l){for(let u=0;u<l.length;u++)iM(a,l[u])}(l,C);const D=a.viewQuery;if(null!==D&&x0(2,D,h),b){const x=a.viewCheckHooks;null!==x&&Yo(l,x)}else{const x=a.viewHooks;null!==x&&mo(l,x,2),Fa(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,hc(l[3],-1))}finally{Ko()}}}function rd(a,l,u,h,p){const y=nr(),b=2&h;try{go(-1),b&&l.length>22&&MI(a,l,22,!1),u(h,p)}finally{go(y)}}function b0(a,l,u){!Go()||(function nC(a,l,u,h){const p=u.directiveStart,y=u.directiveEnd;a.firstCreatePass||Zl(u,l),Ar(h,l);const b=u.initialInputs;for(let C=p;C<y;C++){const D=a.data[C],x=Fi(D);x&&rM(l,u,D);const k=bo(l,a,C,u);Ar(k,l),null!==b&&oC(0,C-p,k,D,0,b),x&&(_n(u.index,l)[8]=k)}}(a,l,u,bi(u,l)),128==(128&u.flags)&&function tM(a,l,u){const h=u.directiveStart,p=u.directiveEnd,y=u.index,b=function BE(){return Lt.lFrame.currentDirectiveIndex}();try{go(y);for(let C=h;C<p;C++){const D=a.data[C],x=l[C];mc(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Dm(D,x)}}finally{go(-1),mc(b)}}(a,l,u))}function w0(a,l,u=bi){const h=l.localNames;if(null!==h){let p=l.index+1;for(let y=0;y<h.length;y+=2){const b=h[y+1],C=-1===b?u(l,a):a[b];a[p++]=C}}}function XI(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=E0(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function E0(a,l,u,h,p,y,b,C,D,x){const k=22+h,V=k+p,W=function YA(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Bt);return u}(k,V),te="function"==typeof x?x():x;return W[1]={type:a,blueprint:W,template:u,queries:null,viewQuery:C,declTNode:l,data:W.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:te,incompleteFirstPass:!1}}function JI(a,l,u,h){const p=lC(l);null===u?p.push(h):(p.push(u),a.firstCreatePass&&uC(a).push(h,p.length-1))}function Nf(a,l,u){for(let h in a)if(a.hasOwnProperty(h)){const p=a[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(l,p):u[h]=[l,p]}return u}function Tu(a,l){const h=l.directiveEnd,p=a.data,y=l.attrs,b=[];let C=null,D=null;for(let x=l.directiveStart;x<h;x++){const k=p[x],V=k.inputs,W=null===y||nl(l)?null:Am(V,y);b.push(W),C=Nf(V,x,C),D=Nf(k.outputs,x,D)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=b,l.inputs=C,l.outputs=D}function eC(a,l){const u=_n(l,a);16&u[2]||(u[2]|=32)}function C0(a,l,u,h){let p=!1;if(Go()){const y=function rC(a,l,u){const h=a.directiveRegistry;let p=null;if(h)for(let y=0;y<h.length;y++){const b=h[y];Cf(u,b.selectors,!1)&&(p||(p=[]),vo(Zl(u,l),a,b.type),Fi(b)?(Tm(a,u),p.unshift(b)):p.push(b))}return p}(a,l,u),b=null===h?null:{"":-1};if(null!==y){p=!0,iC(u,a.data.length,y.length);for(let k=0;k<y.length;k++){const V=y[k];V.providersResolver&&V.providersResolver(V)}let C=!1,D=!1,x=Mo(a,l,y.length,null);for(let k=0;k<y.length;k++){const V=y[k];u.mergedAttrs=zl(u.mergedAttrs,V.hostAttrs),sC(a,u,l,x,V),nM(x,V,b),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const W=V.type.prototype;!C&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),C=!0),!D&&(W.ngOnChanges||W.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),D=!0),x++}Tu(a,u)}b&&function Sm(a,l,u){if(l){const h=a.localNames=[];for(let p=0;p<l.length;p+=2){const y=u[l[p+1]];if(null==y)throw new xe(-301,!1);h.push(l[p],y)}}}(u,h,b)}return u.mergedAttrs=zl(u.mergedAttrs,u.attrs),p}function tC(a,l,u,h,p,y){const b=y.hostBindings;if(b){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const D=~l.index;(function eM(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(h,p,b)}}function Dm(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function Tm(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function nM(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;Fi(l)&&(u[""]=a)}}function iC(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function sC(a,l,u,h,p){a.data[h]=p;const y=p.factory||(p.factory=fo(p.type)),b=new yo(y,Fi(p),ed);a.blueprint[h]=b,u[h]=b,tC(a,l,0,h,Mo(a,u,p.hostVars,Bt),p)}function rM(a,l,u){const h=bi(l,a),p=XI(u),y=a[10],b=Mm(a,Im(a,p,null,u.onPush?32:16,h,l,y,y.createRenderer(h,u),null,null,null));a[l.index]=b}function as(a,l,u,h,p,y){const b=bi(a,l);!function xm(a,l,u,h,p,y,b){if(null==y)a.removeAttribute(l,p,u);else{const C=null==b?ue(y):b(y,h||"",p);a.setAttribute(l,p,C,u)}}(l[11],b,y,a.value,u,h,p)}function oC(a,l,u,h,p,y){const b=y[l];if(null!==b){const C=h.setInput;for(let D=0;D<b.length;){const x=b[D++],k=b[D++],V=b[D++];null!==C?h.setInput(u,V,x,k):u[k]=V}}}function Am(a,l){let u=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;a.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,a[p],l[h+1])),h+=2}else h+=2;else h+=4}return u}function T0(a,l,u,h){return new Array(a,!0,!1,l,null,0,h,u,null,null)}function iM(a,l){const u=_n(l,a);if(Pa(u)){const h=u[1];48&u[2]?Cm(h,u,h.template,u[8]):u[5]>0&&S0(u)}}function S0(a){for(let h=Lg(a);null!==h;h=E(h))for(let p=10;p<h.length;p++){const y=h[p];if(Pa(y))if(512&y[2]){const b=y[1];Cm(b,y,b.template,y[8])}else y[5]>0&&S0(y)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=_n(u[h],a);Pa(p)&&p[5]>0&&S0(p)}}function sM(a,l){const u=_n(l,a),h=u[1];(function oM(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),v0(h,u,u[8])}function Mm(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function sd(a){for(;a;){a[2]|=32;const l=Io(a);if(dh(a)&&!l)return a;a=l}return null}function km(a,l,u,h=!0){const p=l[10];p.begin&&p.begin();try{Cm(a,l,a.template,u)}catch(b){throw h&&A0(l,b),b}finally{p.end&&p.end()}}function x0(a,l,u){yc(0),l(a,u)}function lC(a){return a[7]||(a[7]=[])}function uC(a){return a.cleanup||(a.cleanup=[])}function A0(a,l){const u=a[9],h=u?u.get(Kc,null):null;h&&h.handleError(l)}function M0(a,l,u,h,p){for(let y=0;y<u.length;){const b=u[y++],C=u[y++],D=l[b],x=a.data[b];null!==x.setInput?x.setInput(D,p,h,C):D[C]=p}}function Lf(a,l,u){let h=u?a.styles:null,p=u?a.classes:null,y=0;if(null!==l)for(let b=0;b<l.length;b++){const C=l[b];"number"==typeof C?y=C:1==y?p=He(p,C):2==y&&(h=He(h,C+": "+l[++b]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function Vf(a,l,u,h,p=!1){for(;null!==u;){const y=l[u.index];if(null!==y&&h.push(bn(y)),ai(y))for(let C=10;C<y.length;C++){const D=y[C],x=D[1].firstChild;null!==x&&Vf(D[1],D,x,h)}const b=u.type;if(8&b)Vf(a,l,u.child,h);else if(32&b){const C=uf(u,l);let D;for(;D=C();)h.push(D)}else if(16&b){const C=Hg(l,u);if(Array.isArray(C))h.push(...C);else{const D=Io(l[16]);Vf(D[1],D,C,h,!0)}}u=p?u.projectionNext:u.next}return h}class od{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Vf(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(ai(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(Qa(l,h),fr(u,h))}this._attachedToViewContainer=!1}aa(this._lView[1],this._lView)}onDestroy(l){JI(this._lView[1],this._lView,null,l)}markForCheck(){sd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){km(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gt(a,l){mf(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=l}}class dC extends od{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;km(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class k0 extends Ns{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=F(l);return new Uf(u,this.ngModule)}}function hC(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class lM{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){const p=this.injector.get(l,Zv,h);return p!==Zv||u===Zv?p:this.parentInjector.get(l,u,h)}}class Uf extends Wv{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function SI(a){return a.map(lm).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return hC(this.componentDef.inputs)}get outputs(){return hC(this.componentDef.outputs)}create(l,u,h,p){let y=(p=p||this.ngModule)instanceof Co?p:p?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const b=y?new lM(l,y):l,C=b.get(bI,null);if(null===C)throw new xe(407,!1);const D=b.get(If,null),x=C.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",V=h?function y2(a,l,u){return a.selectRootElement(l,u===It.ShadowDom)}(x,h,this.componentDef.encapsulation):ae(x,k,function aM(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(k)),W=this.componentDef.onPush?288:272,te=E0(0,null,null,1,0,null,null,null,null,null),de=Im(null,te,null,W,null,null,C,x,D,b,null);let Ue,qe;_c(de);try{const ct=function fC(a,l,u,h,p,y){const b=u[1];u[22]=a;const D=nd(b,22,2,"#host",null),x=D.mergedAttrs=l.hostAttrs;null!==x&&(Lf(D,x,!0),null!==a&&($l(p,a,x),null!==D.classes&&Rv(p,a,D.classes),null!==D.styles&&kv(p,a,D.styles)));const k=h.createRenderer(a,l),V=Im(u,XI(l),null,l.onPush?32:16,u[22],D,h,k,y||null,null,null);return b.firstCreatePass&&(vo(Zl(D,u),b,l.type),Tm(b,D),iC(D,u.length,1)),Mm(u,V),u[22]=V}(V,this.componentDef,de,C,x);if(V)if(h)$l(x,V,["ng-version",Eu.full]);else{const{attrs:Ct,classes:Te}=function xI(a){const l=[],u=[];let h=1,p=2;for(;h<a.length;){let y=a[h];if("string"==typeof y)2===p?""!==y&&l.push(y,a[++h]):8===p&&u.push(y);else{if(!ss(p))break;p=y}h++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);Ct&&$l(x,V,Ct),Te&&Te.length>0&&Rv(x,V,Te.join(" "))}if(qe=vh(te,22),void 0!==u){const Ct=qe.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const kt=u[Te];Ct.push(null!=kt?Array.from(kt):null)}}Ue=function w2(a,l,u,h){const p=u[1],y=function JA(a,l,u){const h=cr();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),sC(a,h,l,Mo(a,l,1,null),u),Tu(a,h));const p=bo(l,a,h.directiveStart,h);Ar(p,l);const y=bi(h,l);return y&&Ar(y,l),p}(p,u,l);if(a[8]=u[8]=y,null!==h)for(const C of h)C(y,l);if(l.contentQueries){const C=cr();l.contentQueries(1,y,C.directiveStart)}const b=cr();return!p.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(go(b.index),tC(u[1],b,0,b.directiveStart,b.directiveEnd,l),Dm(l,y)),y}(ct,this.componentDef,de,[hM]),v0(te,de,null)}finally{Ko()}return new R0(this.componentType,Ue,To(qe,de),de,qe)}}class R0 extends class rm{}{constructor(l,u,h,p,y){super(),this.location=h,this._rootLView=p,this._tNode=y,this.instance=u,this.hostView=this.changeDetectorRef=new dC(p),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){const y=this._rootLView;M0(y[1],y,p,l,u),eC(y,this._tNode.index)}}get injector(){return new Ql(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function hM(){const a=cr();Hl(Ee()[1],a)}function P0(a){let l=function pC(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let p;if(Fi(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new xe(903,!1);p=l.\u0275dir}if(p){if(u){h.push(p);const b=a;b.inputs=ad(a.inputs),b.declaredInputs=ad(a.declaredInputs),b.outputs=ad(a.outputs);const C=p.hostBindings;C&&N0(a,C);const D=p.viewQuery,x=p.contentQueries;if(D&&gC(a,D),x&&O0(a,x),Pe(a.inputs,p.inputs),Pe(a.declaredInputs,p.declaredInputs),Pe(a.outputs,p.outputs),Fi(p)&&p.data.animation){const k=a.data;k.animation=(k.animation||[]).concat(p.data.animation)}}const y=p.features;if(y)for(let b=0;b<y.length;b++){const C=y[b];C&&C.ngInherit&&C(a),C===P0&&(u=!1)}}l=Object.getPrototypeOf(l)}!function fM(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=l+=p.hostVars,p.hostAttrs=zl(p.hostAttrs,u=zl(u,p.hostAttrs))}}(h)}function ad(a){return a===ur?{}:a===Pt?[]:a}function gC(a,l){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{l(h,p),u(h,p)}:l}function O0(a,l){const u=a.contentQueries;a.contentQueries=u?(h,p,y)=>{l(h,p,y),u(h,p,y)}:l}function N0(a,l){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{l(h,p),u(h,p)}:l}let Pm=null;function Su(){if(!Pm){const a=en.Symbol;if(a&&a.iterator)Pm=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Pm=h)}}}return Pm}function Bf(a){return!!Un(a)&&(Array.isArray(a)||!(a instanceof Map)&&Su()in a)}function Un(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function eo(a,l,u){return a[l]=u}function Hr(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function yC(a,l,u,h){const p=Ee();return Hr(p,Zo(),l)&&(nn(),as(Dn(),p,a,l,u,h)),yC}function vM(a,l,u,h,p,y,b,C){const D=Ee(),x=nn(),k=a+22,V=x.firstCreatePass?function Fm(a,l,u,h,p,y,b,C,D){const x=l.consts,k=nd(l,a,4,b||null,xs(x,C));C0(l,u,k,xs(x,D)),Hl(l,k);const V=k.tViews=E0(2,k,h,p,y,l.directiveRegistry,l.pipeRegistry,null,l.schemas,x);return null!==l.queries&&(l.queries.template(l,k),V.queries=l.queries.embeddedTView(k)),k}(k,x,D,l,u,h,p,y,b):x.data[k];Vi(V,!1);const W=D[11].createComment("");jg(x,D,W,V),Ar(W,D),Mm(D,D[k]=T0(W,D,W,V)),Fl(V)&&b0(x,D,V),null!=b&&w0(D,V,C)}function U0(a,l,u){const h=Ee();return Hr(h,Zo(),l)&&function os(a,l,u,h,p,y,b,C){const D=bi(l,u);let k,x=l.inputs;!C&&null!=x&&(k=x[h])?(M0(a,u,k,h,p),zs(l)&&eC(u,l.index)):3&l.type&&(h=function QA(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=b?b(p,l.value||"",h):p,y.setProperty(D,h,p))}(nn(),Dn(),h,a,l,h[11],u,!1),U0}function Lm(a,l,u,h,p){const b=p?"class":"style";M0(a,u,l.inputs[b],b,h)}function Vm(a,l,u,h){const p=Ee(),y=nn(),b=22+a,C=p[11],D=p[b]=ae(C,l,function vc(){return Lt.lFrame.currentNamespace}()),x=y.firstCreatePass?function wM(a,l,u,h,p,y,b){const C=l.consts,x=nd(l,a,2,p,xs(C,y));return C0(l,u,x,xs(C,b)),null!==x.attrs&&Lf(x,x.attrs,!1),null!==x.mergedAttrs&&Lf(x,x.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,x),x}(b,y,p,0,l,u,h):y.data[b];Vi(x,!0);const k=x.mergedAttrs;null!==k&&$l(C,D,k);const V=x.classes;null!==V&&Rv(C,D,V);const W=x.styles;return null!==W&&kv(C,D,W),64!=(64&x.flags)&&jg(y,p,D,x),0===function yg(){return Lt.lFrame.elementDepthCount}()&&Ar(D,p),function _g(){Lt.lFrame.elementDepthCount++}(),Fl(x)&&(b0(y,p,x),function id(a,l,u){if(Nl(l)){const p=l.directiveEnd;for(let y=l.directiveStart;y<p;y++){const b=a.data[y];b.contentQueries&&b.contentQueries(1,u[y],y)}}}(y,x,p)),null!==h&&w0(p,x),Vm}function Um(){let a=cr();Dh()?function gc(){Lt.lFrame.isParent=!1}():(a=a.parent,Vi(a,!1));const l=a;!function N_(){Lt.lFrame.elementDepthCount--}();const u=nn();return u.firstCreatePass&&(Hl(u,a),Nl(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function wc(a){return 0!=(16&a.flags)}(l)&&Lm(u,l,Ee(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Ig(a){return 0!=(32&a.flags)}(l)&&Lm(u,l,Ee(),l.stylesWithoutHost,!1),Um}function B0(a,l,u,h){return Vm(a,l,u,h),Um(),B0}function H0(){return Ee()}function $f(a){return!!a&&"function"==typeof a.then}function IC(a){return!!a&&"function"==typeof a.subscribe}const CC=IC;function al(a,l,u,h){const p=Ee(),y=nn(),b=cr();return function CM(a,l,u,h,p,y,b,C){const D=Fl(h),k=a.firstCreatePass&&uC(a),V=l[8],W=lC(l);let te=!0;if(3&h.type||C){const qe=bi(h,l),ct=C?C(qe):qe,Ct=W.length,Te=C?gn=>C(bn(gn[h.index])):h.index;let kt=null;if(!C&&D&&(kt=function zf(a,l,u,h){const p=a.cleanup;if(null!=p)for(let y=0;y<p.length-1;y+=2){const b=p[y];if(b===u&&p[y+1]===h){const C=l[7],D=p[y+2];return C.length>D?C[D]:null}"string"==typeof b&&(y+=2)}return null}(a,l,p,h.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=y,kt.__ngLastListenerFn__=y,te=!1;else{y=Po(h,l,V,y,!1);const gn=u.listen(ct,p,y);W.push(y,gn),k&&k.push(p,Te,Ct,Ct+1)}}else y=Po(h,l,V,y,!1);const de=h.outputs;let Ue;if(te&&null!==de&&(Ue=de[p])){const qe=Ue.length;if(qe)for(let ct=0;ct<qe;ct+=2){const Rn=l[Ue[ct]][Ue[ct+1]].subscribe(y),zu=W.length;W.push(y,Rn),k&&k.push(p,h.index,zu,-(zu+1))}}}(y,p,p[11],b,a,l,0,h),al}function pa(a,l,u,h){try{return!1!==u(h)}catch(p){return A0(a,p),!1}}function Po(a,l,u,h,p){return function y(b){if(b===Function)return h;sd(2&a.flags?_n(a.index,l):l);let D=pa(l,0,h,b),x=y.__ngNextListenerFn__;for(;x;)D=pa(l,0,x,b)&&D,x=x.__ngNextListenerFn__;return p&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function $0(a=1){return function jl(a){return(Lt.lFrame.contextLView=function B_(a,l){for(;a>0;)l=l[15],a--;return l}(a,Lt.lFrame.contextLView))[8]}(a)}function jm(a,l,u,h,p){const y=a[u+1],b=null===l;let C=h?Qs(y):Ao(y),D=!1;for(;0!==C&&(!1===D||b);){const k=a[C+1];TM(a[C],l)&&(D=!0,a[C+1]=h?Xs(k):a0(k)),C=h?Qs(k):Ao(k)}D&&(a[u+1]=h?a0(y):Xs(y))}function TM(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&ji(a,l)>=0}function cd(a,l){return function Oo(a,l,u,h){const p=Ee(),y=nn(),b=function As(a){const l=Lt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}(2);y.firstUpdatePass&&function dn(a,l,u,h){const p=a.data;if(null===p[u+1]){const y=p[nr()],b=function UC(a,l){return l>=a.expandoStartIndex}(a,u);(function dd(a,l){return 0!=(a.flags&(l?16:32))})(y,h)&&null===l&&!b&&(l=!1),l=function On(a,l,u,h){const p=function Sh(a){const l=Lt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let y=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(u=Wf(u=jt(null,a,l,u,h),l.attrs,h),y=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==p)if(u=jt(p,a,l,u,h),null===y){let D=function un(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==Ao(h))return a[Qs(h)]}(a,l,h);void 0!==D&&Array.isArray(D)&&(D=jt(null,a,l,D[1],h),D=Wf(D,l.attrs,h),function ir(a,l,u,h){a[Qs(u?l.classBindings:l.styleBindings)]=h}(a,l,h,D))}else y=function us(a,l,u){let h;const p=l.directiveEnd;for(let y=1+l.directiveStylingLast;y<p;y++)h=Wf(h,a[y].hostAttrs,u);return Wf(h,l.attrs,u)}(a,l,h)}return void 0!==y&&(h?l.residualClasses=y:l.residualStyles=y),u}(p,y,l,h),function W0(a,l,u,h,p,y){let b=y?l.classBindings:l.styleBindings,C=Qs(b),D=Ao(b);a[h]=u;let k,x=!1;if(Array.isArray(u)){const V=u;k=V[1],(null===k||ji(V,k)>0)&&(x=!0)}else k=u;if(p)if(0!==D){const W=Qs(a[C+1]);a[h+1]=fm(W,C),0!==W&&(a[W+1]=Rf(a[W+1],h)),a[C+1]=function HI(a,l){return 131071&a|l<<17}(a[C+1],h)}else a[h+1]=fm(C,0),0!==C&&(a[C+1]=Rf(a[C+1],h)),C=h;else a[h+1]=fm(D,0),0===C?C=h:a[D+1]=Rf(a[D+1],h),D=h;x&&(a[h+1]=a0(a[h+1])),jm(a,k,h,!0),jm(a,k,h,!1),function q0(a,l,u,h,p){const y=p?a.residualClasses:a.residualStyles;null!=y&&"string"==typeof l&&ji(y,l)>=0&&(u[h+1]=Xs(u[h+1]))}(l,k,a,h,y),b=fm(C,D),y?l.classBindings=b:l.styleBindings=b}(p,y,l,u,b,h)}}(y,a,b,h),l!==Bt&&Hr(p,b,l)&&function qf(a,l,u,h,p,y,b,C){if(!(3&l.type))return;const D=a.data,x=D[C+1];Kf(function pm(a){return 1==(1&a)}(x)?Zf(D,l,u,p,Ao(x),b):void 0)||(Kf(y)||function jI(a){return 2==(2&a)}(x)&&(y=Zf(D,null,u,p,C,b)),function cA(a,l,u,h,p){if(l)p?a.addClass(u,h):a.removeClass(u,h);else{let y=-1===h.indexOf("-")?void 0:Er.DashCase;null==p?a.removeStyle(u,h,y):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),y|=Er.Important),a.setStyle(u,h,p,y))}}(h,b,Ul(nr(),u),p,y))}(y,y.data[nr()],p,p[11],a,p[b+1]=function PM(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=Re(la(a)))),a}(l,u),h,b)}(a,l,null,!0),cd}function jt(a,l,u,h,p){let y=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(y=l[C],h=Wf(h,y.hostAttrs,p),y!==a);)C++;return null!==a&&(u.directiveStylingLast=C),h}function Wf(a,l,u){const h=u?1:2;let p=-1;if(null!==l)for(let y=0;y<l.length;y++){const b=l[y];"number"==typeof b?p=b:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Bi(a,b,!!u||l[++y]))}return void 0===a?null:a}function Zf(a,l,u,h,p,y){const b=null===l;let C;for(;p>0;){const D=a[p],x=Array.isArray(D),k=x?D[1]:D,V=null===k;let W=u[p+1];W===Bt&&(W=V?Pt:void 0);let te=V?Tc(W,h):k===h?W:void 0;if(x&&!Kf(te)&&(te=Tc(D,h)),Kf(te)&&(C=te,b))return C;const de=a[p+1];p=b?Qs(de):Ao(de)}if(null!==l){let D=y?l.residualClasses:l.residualStyles;null!=D&&(C=Tc(D,h))}return C}function Kf(a){return void 0!==a}function hd(a,l=""){const u=Ee(),h=nn(),p=a+22,y=h.firstCreatePass?nd(h,p,1,l,null):h.data[p],b=u[p]=function A(a,l){return a.createText(l)}(u[11],l);jg(h,u,b,y),Vi(y,!1)}function Y0(a){return Q0("",a,""),Y0}function Q0(a,l,u){const h=Ee(),p=function ld(a,l,u,h){return Hr(a,Zo(),u)?l+ue(u)+h:Bt}(h,a,l,u);return p!==Bt&&function ko(a,l,u){const h=Ul(l,a);!function O(a,l,u){a.setValue(l,u)}(a[11],h,u)}(h,nr(),p),Q0}const Di=void 0;var BM=["en",[["a","p"],["AM","PM"],Di],[["AM","PM"],Di,Di],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Di,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Di,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Di,"{1} 'at' {0}",Di],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function UM(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Pu={};function Zm(a){const l=function rb(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=nb(l);if(u)return u;const h=l.split("-")[0];if(u=nb(h),u)return u;if("en"===h)return BM;throw new xe(701,!1)}function HM(a){return Zm(a)[xt.PluralCase]}function nb(a){return a in Pu||(Pu[a]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[a]),Pu[a]}var xt=(()=>((xt=xt||{})[xt.LocaleId=0]="LocaleId",xt[xt.DayPeriodsFormat=1]="DayPeriodsFormat",xt[xt.DayPeriodsStandalone=2]="DayPeriodsStandalone",xt[xt.DaysFormat=3]="DaysFormat",xt[xt.DaysStandalone=4]="DaysStandalone",xt[xt.MonthsFormat=5]="MonthsFormat",xt[xt.MonthsStandalone=6]="MonthsStandalone",xt[xt.Eras=7]="Eras",xt[xt.FirstDayOfWeek=8]="FirstDayOfWeek",xt[xt.WeekendRange=9]="WeekendRange",xt[xt.DateFormat=10]="DateFormat",xt[xt.TimeFormat=11]="TimeFormat",xt[xt.DateTimeFormat=12]="DateTimeFormat",xt[xt.NumberSymbols=13]="NumberSymbols",xt[xt.NumberFormats=14]="NumberFormats",xt[xt.CurrencyCode=15]="CurrencyCode",xt[xt.CurrencySymbol=16]="CurrencySymbol",xt[xt.CurrencyName=17]="CurrencyName",xt[xt.Currencies=18]="Currencies",xt[xt.Directionality=19]="Directionality",xt[xt.PluralCase=20]="PluralCase",xt[xt.ExtraData=21]="ExtraData",xt))();const Ou="en-US";let Ym=Ou;function mb(a,l,u,h,p){if(a=J(a),Array.isArray(a))for(let y=0;y<a.length;y++)mb(a[y],l,u,h,p);else{const y=nn(),b=Ee();let C=Ja(a)?a:J(a.provide),D=tm(a);const x=cr(),k=1048575&x.providerIndexes,V=x.directiveStart,W=x.providerIndexes>>20;if(Ja(a)||!a.multi){const te=new yo(D,p,ed),de=_b(C,l,p?k:k+W,V);-1===de?(vo(Zl(x,b),y,C),yb(y,a,l.length),l.push(C),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(te),b.push(te)):(u[de]=te,b[de]=te)}else{const te=_b(C,l,k+W,V),de=_b(C,l,k,k+W),Ue=te>=0&&u[te],qe=de>=0&&u[de];if(p&&!qe||!p&&!Ue){vo(Zl(x,b),y,C);const ct=function oy(a,l,u,h,p){const y=new yo(a,u,ed);return y.multi=[],y.index=l,y.componentProviders=0,hl(y,p,h&&!u),y}(p?Uu:c1,u.length,p,h,D);!p&&qe&&(u[de].providerFactory=ct),yb(y,a,l.length,0),l.push(C),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(ct),b.push(ct)}else yb(y,a,te>-1?te:de,hl(u[p?de:te],D,!p&&h));!p&&h&&qe&&u[de].componentProviders++}}}function yb(a,l,u,h){const p=Ja(l),y=function wf(a){return!!a.useClass}(l);if(p||y){const D=(y?J(l.useClass):l).prototype.ngOnDestroy;if(D){const x=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const k=x.indexOf(u);-1===k?x.push(u,[h,D]):x[k+1].push(h,D)}else x.push(u,D)}}}function hl(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function _b(a,l,u,h){for(let p=u;p<h;p++)if(l[p]===a)return p;return-1}function c1(a,l,u,h){return vb(this.multi,[])}function Uu(a,l,u,h){const p=this.multi;let y;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=bo(u,u[1],this.providerFactory.index,h);y=C.slice(0,b),vb(p,y);for(let D=b;D<C.length;D++)y.push(C[D])}else y=[],vb(p,y);return y}function vb(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function hD(a,l=[]){return u=>{u.providersResolver=(h,p)=>function sy(a,l,u){const h=nn();if(h.firstCreatePass){const p=Fi(a);mb(u,h.data,h.blueprint,p,!0),mb(l,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,l)}}class Bu{}class fD{}function pD(a,l){return new gD(a,l??null)}class gD extends Bu{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new k0(this);const h=We(l);this._bootstrapComponents=xo(h.bootstrap),this._r3Injector=cm(l,u,[{provide:Bu,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver}],Re(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class bb extends fD{constructor(l){super(),this.moduleType=l}create(l){return new gD(this.moduleType,l)}}class d1 extends Bu{constructor(l,u,h){super(),this.componentFactoryResolver=new k0(this),this.instance=null;const p=new qc([...l,{provide:Bu,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver}],u||em(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function wb(a,l,u=null){return new d1(a,l,u).injector}let Ed=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=mI(0,u.type),p=h.length>0?wb([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=tt({token:a,providedIn:"environment",factory:()=>new a(rr(Co))}),a})();function Eb(a){a.getStandaloneInjector=l=>l.get(Ed).getOrCreateStandaloneInjector(a)}function vD(a,l,u,h){return DD(Ee(),dr(),a,l,u,h)}function bD(a,l,u,h,p){return TD(Ee(),dr(),a,l,u,h,p)}function rp(a,l){const u=a[l];return u===Bt?void 0:u}function DD(a,l,u,h,p,y){const b=l+u;return Hr(a,b,p)?eo(a,b+1,y?h.call(y,p):h(p)):rp(a,b+1)}function TD(a,l,u,h,p,y,b){const C=l+u;return function Au(a,l,u,h){const p=Hr(a,l,u);return Hr(a,l+1,h)||p}(a,C,p,y)?eo(a,C+2,b?h.call(b,p,y):h(p,y)):rp(a,C+2)}function SD(a,l){const u=nn();let h;const p=a+22;u.firstCreatePass?(h=function I1(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const y=h.factory||(h.factory=fo(h.type)),b=Hn(ed);try{const C=ks(!1),D=y();return ks(C),function EC(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,Ee(),p,D),D}finally{Hn(b)}}function cy(a,l,u){const h=a+22,p=Ee(),y=Ss(p,h);return ip(p,h)?DD(p,dr(),l,y.transform,u,y):y.transform(u)}function Mb(a,l,u,h){const p=a+22,y=Ee(),b=Ss(y,p);return ip(y,p)?TD(y,dr(),l,b.transform,u,h,b):b.transform(u,h)}function ip(a,l){return a[1].data[l].pure}function kb(a){return l=>{setTimeout(a,void 0,l)}}const Vo=class T1 extends f.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let p=l,y=u||(()=>null),b=h;if(l&&"object"==typeof l){const D=l;p=D.next?.bind(D),y=D.error?.bind(D),b=D.complete?.bind(D)}this.__isAsync&&(y=kb(y),p&&(p=kb(p)),b&&(b=kb(b)));const C=super.subscribe({next:p,error:y,complete:b});return l instanceof z.w0&&l.add(C),C}};function xD(){return this._results[Su()]()}class dy{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Su(),h=dy.prototype;h[u]||(h[u]=xD)}get changes(){return this._changes||(this._changes=new Vo)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const p=hr(l);(this._changesDetected=!function Qo(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],y=l[h];if(u&&(p=u(p),y=u(y)),y!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ju=(()=>{class a{}return a.__NG_ELEMENT_ID__=A1,a})();const S1=ju,x1=class extends S1{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tViews,p=Im(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(p[19]=b.createEmbeddedView(h)),v0(h,p,l),new od(p)}};function A1(){return sp(cr(),Ee())}function sp(a,l){return 4&a.type?new x1(l,a,To(a,l)):null}let hy=(()=>{class a{}return a.__NG_ELEMENT_ID__=AD,a})();function AD(){return pl(cr(),Ee())}const M1=hy,op=class extends M1{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return To(this._hostTNode,this._hostLView)}get injector(){return new Ql(this._hostTNode,this._hostLView)}get parentInjector(){const l=Ic(this._hostTNode,this._hostLView);if(W_(l)){const u=Wl(l,this._hostLView),h=Gl(l);return new Ql(u[1].data[h+8],u)}return new Ql(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=ap(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){let p,y;"number"==typeof h?p=h:null!=h&&(p=h.index,y=h.injector);const b=l.createEmbeddedView(u||{},y);return this.insert(b,p),b}createComponent(l,u,h,p,y){const b=l&&!function nu(a){return"function"==typeof a}(l);let C;if(b)C=u;else{const V=u||{};C=V.index,h=V.injector,p=V.projectableNodes,y=V.environmentInjector||V.ngModuleRef}const D=b?l:new Uf(F(l)),x=h||this.parentInjector;if(!y&&null==D.ngModule){const W=(b?x:this.parentInjector).get(Co,null);W&&(y=W)}const k=D.create(x,p,void 0,y);return this.insert(k.hostView,C),k}insert(l,u){const h=l._lView,p=h[1];if(function wh(a){return ai(a[3])}(h)){const k=this.indexOf(l);if(-1!==k)this.detach(k);else{const V=h[3],W=new op(V,V[6],V[3]);W.detach(W.indexOf(l))}}const y=this._adjustIndex(u),b=this._lContainer;!function li(a,l,u,h){const p=10+h,y=u.length;h>0&&(u[p-1][4]=l),h<y-10?(l[4]=u[p],$h(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const b=l[17];null!==b&&u!==b&&function ui(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(b,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=64}(p,h,b,y);const C=$g(y,b),D=h[11],x=Ug(D,b[7]);return null!==x&&function Ye(a,l,u,h,p,y){h[0]=p,h[6]=l,mf(a,h,u,1,p,y)}(p,b[6],D,h,x,C),l.attachToViewContainerRef(),$h(Rb(b),y,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=ap(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=Qa(this._lContainer,u);h&&(fr(Rb(this._lContainer),u),aa(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=Qa(this._lContainer,u);return h&&null!=fr(Rb(this._lContainer),u)?new od(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function ap(a){return a[8]}function Rb(a){return a[8]||(a[8]=[])}function pl(a,l){let u;const h=l[a.index];if(ai(h))u=h;else{let p;if(8&a.type)p=bn(h);else{const y=l[11];p=y.createComment("");const b=bi(a,l);is(y,Ug(y,b),p,function QE(a,l){return a.nextSibling(l)}(y,b),!1)}l[a.index]=u=T0(h,l,p,a),Mm(l,u)}return new op(u,a,l)}class Id{constructor(l){this.queryList=l,this.matches=null}clone(){return new Id(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cd{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,p=[];for(let y=0;y<h;y++){const b=u.getByIndex(y);p.push(this.queries[b.indexInDeclarationView].clone())}return new Cd(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==ND(l,u).matches&&this.queries[u].setDirty()}}class kD{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class va{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,y=this.getByIndex(h).embeddedTView(l,p);y&&(y.indexInDeclarationView=h,null!==u?u.push(y):u=[y])}return null!==u?new va(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class up{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new up(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const y=h[p];this.matchTNodeWithReadOption(l,u,k1(u,y)),this.matchTNodeWithReadOption(l,u,Bh(u,l,y,!1,!1))}else h===ju?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Bh(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===wu||p===hy||p===ju&&4&u.type)this.addMatch(u.index,-2);else{const y=Bh(u,l,p,!1,!1);null!==y&&this.addMatch(u.index,y)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function k1(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function cp(a,l,u,h){return-1===u?function R1(a,l){return 11&a.type?To(a,l):4&a.type?sp(a,l):null}(l,a):-2===u?function P1(a,l,u){return u===wu?To(l,a):u===ju?sp(l,a):u===hy?pl(l,a):void 0}(a,l,h):bo(a,a[1],u,l)}function py(a,l,u,h){const p=l[19].queries[h];if(null===p.matches){const y=a.data,b=u.matches,C=[];for(let D=0;D<b.length;D+=2){const x=b[D];C.push(x<0?null:cp(l,y[x],b[D+1],u.metadata.read))}p.matches=C}return p.matches}function Pb(a,l,u,h){const p=a.queries.getByIndex(u),y=p.matches;if(null!==y){const b=py(a,l,p,u);for(let C=0;C<y.length;C+=2){const D=y[C];if(D>0)h.push(b[C/2]);else{const x=y[C+1],k=l[-D];for(let V=10;V<k.length;V++){const W=k[V];W[17]===W[3]&&Pb(W[1],W,x,h)}if(null!==k[9]){const V=k[9];for(let W=0;W<V.length;W++){const te=V[W];Pb(te[1],te,x,h)}}}}}return h}function RD(a){const l=Ee(),u=nn(),h=xh();yc(h+1);const p=ND(u,h);if(a.dirty&&function bh(a){return 4==(4&a[2])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const y=p.crossesNgTemplate?Pb(u,l,h,[]):py(u,l,p,h);a.reset(y,vI),a.notifyOnChanges()}return!0}return!1}function gy(a,l,u){const h=nn();h.firstCreatePass&&(Nb(h,new kD(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),Dd(h,Ee(),l)}function Ob(a,l,u,h){const p=nn();if(p.firstCreatePass){const y=cr();Nb(p,new kD(l,u,h),y.index),function dp(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}Dd(p,Ee(),u)}function PD(){return function OD(a,l){return a[19].queries[l].queryList}(Ee(),xh())}function Dd(a,l,u){const h=new dy(4==(4&u));JI(a,l,h,h.destroy),null===l[19]&&(l[19]=new Cd),l[19].queries.push(new Id(h))}function Nb(a,l,u){null===a.queries&&(a.queries=new va),a.queries.track(new up(l,u))}function ND(a,l){return a.queries.getByIndex(l)}function cs(...a){}const rT=new vn("Application Initializer");let vy=(()=>{class a{constructor(u){this.appInits=u,this.resolve=cs,this.reject=cs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const y=this.appInits[p]();if($f(y))u.push(y);else if(CC(y)){const b=new Promise((C,D)=>{y.subscribe({complete:C,error:D})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(rr(rT,8))},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const iT=new vn("AppId",{providedIn:"root",factory:function sT(){return`${Gb()}${Gb()}${Gb()}`}});function Gb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aT=new vn("Platform Initializer"),lT=new vn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),uT=new vn("appBootstrapListener"),dT=new vn("AnimationModuleType");let j1=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const fp=new vn("LocaleId",{providedIn:"root",factory:()=>Sg(fp,ot.Optional|ot.SkipSelf)||function H1(){return typeof $localize<"u"&&$localize.locale||Ou}()}),hT=new vn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class by{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let pp=(()=>{class a{compileModuleSync(u){return new bb(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),y=xo(We(u).declarations).reduce((b,C)=>{const D=F(C);return D&&b.push(new Uf(D)),b},[]);return new by(h,y)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const gT=(()=>Promise.resolve(0))();function wy(a){typeof Zone>"u"?gT.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class ds{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vo(!1),this.onMicrotaskEmpty=new Vo(!1),this.onStable=new Vo(!1),this.onError=new Vo(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const y=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new y("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function Z1(){let a=en.requestAnimationFrame,l=en.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function Y1(a){const l=()=>{!function K1(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(en,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Md(a),a.isCheckStableRunning=!0,Iy(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Md(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,y,b,C)=>{try{return mT(a),u.invokeTask(p,y,b,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||a.shouldCoalesceRunChangeDetection)&&l(),Uo(a)}},onInvoke:(u,h,p,y,b,C,D)=>{try{return mT(a),u.invoke(p,y,b,C,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),Uo(a)}},onHasTask:(u,h,p,y)=>{u.hasTask(p,y),h===p&&("microTask"==y.change?(a._hasPendingMicrotasks=y.microTask,Md(a),Iy(a)):"macroTask"==y.change&&(a.hasPendingMacrotasks=y.macroTask))},onHandleError:(u,h,p,y)=>(u.handleError(p,y),a.runOutsideAngular(()=>a.onError.emit(y)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ds.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(ds.isInAngularZone())throw new xe(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,p){const y=this._inner,b=y.scheduleEventTask("NgZoneEvent: "+p,l,Ey,cs,cs);try{return y.runTask(b,u,h)}finally{y.cancelTask(b)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const Ey={};function Iy(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Md(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function mT(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Uo(a){a._nesting--,Iy(a)}class yT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vo,this.onMicrotaskEmpty=new Vo,this.onStable=new Vo,this.onError=new Vo}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,p){return l.apply(u,h)}}const _T=new vn(""),vT=new vn("");let Wb,Q1=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Wb||(function Cy(a){Wb=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ds.assertNotInAngularZone(),wy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wy(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==y),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)(rr(ds),rr($u),rr(vT))},a.\u0275prov=tt({token:a,factory:a.\u0275fac}),a})(),$u=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return Wb?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),ml=null;const kd=new vn("AllowMultipleToken"),Dy=new vn("PlatformDestroyListeners");class tk{constructor(l,u){this.name=l,this.token=u}}function wT(a,l,u=[]){const h=`Platform: ${l}`,p=new vn(h);return(y=[])=>{let b=Rd();if(!b||b.injector.get(kd,!1)){const C=[...u,...y,{provide:p,useValue:!0}];a?a(C):function qb(a){if(ml&&!ml.get(kd,!1))throw new xe(400,!1);ml=a;const l=a.get(Zb);(function bT(a){const l=a.get(aT,null);l&&l.forEach(u=>u())})(a)}(function wa(a=[],l){return Qc.create({name:l,providers:[{provide:zv,useValue:"platform"},{provide:Dy,useValue:new Set([()=>ml=null])},...a]})}(C,h))}return function rk(a){const l=Rd();if(!l)throw new xe(401,!1);return l}()}}function Rd(){return ml?.get(Zb)??null}let Zb=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function ET(a,l){let u;return u="noop"===a?new yT:("zone.js"===a?void 0:a)||new ds(l),u}(h?.ngZone,function Ea(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),y=[{provide:ds,useValue:p}];return p.run(()=>{const b=Qc.create({providers:y,parent:this.injector,name:u.moduleType.name}),C=u.create(b),D=C.injector.get(Kc,null);if(!D)throw new xe(402,!1);return p.runOutsideAngular(()=>{const x=p.onError.subscribe({next:k=>{D.handleError(k)}});C.onDestroy(()=>{Ty(this._modules,C),x.unsubscribe()})}),function IT(a,l,u){try{const h=u();return $f(h)?h.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(D,p,()=>{const x=C.injector.get(vy);return x.runInitializers(),x.donePromise.then(()=>(function ib(a){Le(a,"Expected localeId to be defined"),"string"==typeof a&&(Ym=a.toLowerCase().replace(/_/g,"-"))}(C.injector.get(fp,Ou)||Ou),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const p=CT({},h);return function X1(a,l,u){const h=new bb(u);return Promise.resolve(h)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,p))}_moduleDoBootstrap(u){const h=u.injector.get(Pd);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new xe(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Dy,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(rr(Qc))},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function CT(a,l){return Array.isArray(l)?l.reduce(CT,a):{...a,...l}}let Pd=(()=>{class a{constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new U.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new U.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{ds.assertNotInAngularZone(),wy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ce.T)(y,b.pipe((0,Se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof Wv;if(!this._injector.get(vy).done)throw!p&&ge(u),new xe(405,false);let b;b=p?u:this._injector.get(Ns).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const C=function ek(a){return a.isBoundToModule}(b)?void 0:this._injector.get(Bu),x=b.create(Qc.NULL,[],h||b.selector,C),k=x.location.nativeElement,V=x.injector.get(_T,null);return V?.registerApplication(k),x.onDestroy(()=>{this.detachView(x.hostView),Ty(this.components,x),V?.unregisterApplication(k)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Ty(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(uT,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Ty(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new xe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(rr(ds),rr(Co),rr(Kc))},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Ty(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let gp=!0,TT=!1;function Yb(){return TT=!0,gp}function ST(){if(TT)throw new Error("Cannot enable prod mode after platform setup.");gp=!1}let ak=(()=>{class a{}return a.__NG_ELEMENT_ID__=lk,a})();function lk(a){return function uk(a,l,u){if(zs(a)&&!u){const h=_n(a.index,l);return new od(h,h)}return 47&a.type?new od(l[16],l):null}(cr(),Ee(),16==(16&a))}class PT{constructor(){}supports(l){return Bf(l)}create(l){return new pk(l)}}const fk=(a,l)=>l;class pk{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||fk}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,p=0,y=null;for(;u||h;){const b=!h||u&&u.currentIndex<FT(h,p,y)?u:h,C=FT(b,p,y),D=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{y||(y=[]);const x=C-p,k=D-p;if(x!=k){for(let W=0;W<x;W++){const te=W<y.length?y[W]:y[W]=0,de=te+W;k<=de&&de<x&&(y[W]=te+1)}y[b.previousIndex]=k-x}}C!==D&&l(b,C,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Bf(l))throw new xe(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,y,b,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)y=l[C],b=this._trackByFn(C,y),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,y,b,C)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,b,C),h=!0),u=u._next}else p=0,function mC(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Su()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,C=>{b=this._trackByFn(p,C),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,C,b,p)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,p){let y;return null===l?y=this._itTail:(y=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,y,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,y,p)):l=this._addAfter(new gk(u,h),y,p),l}_verifyReinsertion(l,u,h,p){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==y?l=this._reinsertAfter(y,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,y=l._nextRemoved;return null===p?this._removalsHead=y:p._nextRemoved=y,null===y?this._removalsTail=p:y._prevRemoved=p,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const p=null===u?this._itHead:u._next;return l._next=p,l._prev=u,null===p?this._itTail=l:p._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new NT),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NT),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class gk{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OT{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class NT{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new OT,this.map.set(u,h)),h.add(l)}get(l,u){const p=this.map.get(l);return p?p.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FT(a,l,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+l+p}class LT{constructor(){}supports(l){return l instanceof Map||Un(l)}create(){return new mk}}class mk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Un(l)))throw new xe(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const y=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,y)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,u);const y=p._prev,b=p._next;return y&&(y._next=b),b&&(b._prev=y),p._next=null,p._prev=null,p}const h=new yk(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class yk{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function My(){return new Xb([new PT])}let Xb=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||My()),deps:[[a,new ta,new ea]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new xe(901,!1)}}return a.\u0275prov=tt({token:a,providedIn:"root",factory:My}),a})();function Jb(){return new ew([new LT])}let ew=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||Jb()),deps:[[a,new ta,new ea]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new xe(901,!1)}}return a.\u0275prov=tt({token:a,providedIn:"root",factory:Jb}),a})();const UT=wT(null,"core",[]);let wk=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(rr(Pd))},a.\u0275mod=oi({type:a}),a.\u0275inj=zt({}),a})();function Ek(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},3942:(_t,ke,j)=>{j.d(ke,{Z:()=>xe});var f=j(2090),z=j(4859),U=j(6881),ce=j(1877);class Se{constructor(ue,_e){this._delegate=ue,this.firebase=_e,(0,U._addComponent)(ue,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ue){this._delegate.automaticDataCollectionEnabled=ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ue=>{this._delegate.checkDestroyed(),ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(ue,_e=U._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const Dt=this._delegate.container.getProvider(ue);return!Dt.isInitialized()&&"EXPLICIT"===(null===(ht=Dt.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&Dt.initialize(),Dt.getImmediate({identifier:_e})}_removeServiceInstance(ue,_e=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ue).clearInstance(_e)}_addComponent(ue){(0,U._addComponent)(this._delegate,ue)}_addOrOverwriteComponent(ue){(0,U._addOrOverwriteComponent)(this._delegate,ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function He(){const rt=function Re(rt){const ue={},_e={__esModule:!0,initializeApp:function Ae(Ke,ie={}){const Xe=U.initializeApp(Ke,ie);if((0,f.r3)(ue,Xe.name))return ue[Xe.name];const At=new rt(Xe,_e);return ue[Xe.name]=At,At},app:Dt,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function we(Ke){const ie=Ke.name,Xe=ie.replace("-compat","");if(U._registerComponent(Ke)&&"PUBLIC"===Ke.type){const At=(dt=Dt())=>{if("function"!=typeof dt[Xe])throw Pe.create("invalid-app-argument",{appName:ie});return dt[Xe]()};void 0!==Ke.serviceProps&&(0,f.ZB)(At,Ke.serviceProps),_e[Xe]=At,rt.prototype[Xe]=function(...dt){return this._getService.bind(this,ie).apply(this,Ke.multipleInstances?dt:[])}}return"PUBLIC"===Ke.type?_e[Xe]:null},removeApp:function ht(Ke){delete ue[Ke]},useAsService:function Ge(Ke,ie){return"serverAuth"===ie?null:ie},modularAPIs:U}};function Dt(Ke){if(!(0,f.r3)(ue,Ke=Ke||U._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:Ke});return ue[Ke]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function ye(){return Object.keys(ue).map(Ke=>ue[Ke])}}),Dt.App=rt,_e}(Se);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:He,extendNamespace:function ue(_e){(0,f.ZB)(rt,_e)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),rt}(),q=new ce.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=Z;!function Be(rt){(0,U.registerVersion)("@firebase/app-compat","0.2.10",rt)}()},6881:(_t,ke,j)=>{j.r(ke),j.d(ke,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Cs,_DEFAULT_ENTRY_NAME:()=>Oi,_addComponent:()=>yt,_addOrOverwriteComponent:()=>It,_apps:()=>Tn,_clearComponents:()=>ur,_components:()=>Jt,_getProvider:()=>si,_registerComponent:()=>en,_removeServiceInstance:()=>xr,deleteApp:()=>_r,getApp:()=>Br,getApps:()=>Cn,initializeApp:()=>on,onLog:()=>vr,registerVersion:()=>Ni,setLogLevel:()=>Ds});var f=j(5861),z=j(4859),U=j(1877),ce=j(2090);let Ce,Pe;const Z=new WeakMap,q=new WeakMap,J=new WeakMap,ze=new WeakMap,Be=new WeakMap;let ue={get(se,ne,Oe){if(se instanceof IDBTransaction){if("done"===ne)return q.get(se);if("objectStoreNames"===ne)return se.objectStoreNames||J.get(se);if("store"===ne)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return Ae(se[ne])},set:(se,ne,Oe)=>(se[ne]=Oe,!0),has:(se,ne)=>se instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in se};function Dt(se){return"function"==typeof se?function ht(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function He(){return Pe||(Pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...ne){return se.apply(ye(this),ne),Ae(Z.get(this))}:function(...ne){return Ae(se.apply(ye(this),ne))}:function(ne,...Oe){const Ne=se.call(ye(this),ne,...Oe);return J.set(Ne,ne.sort?ne.sort():[ne]),Ae(Ne)}}(se):(se instanceof IDBTransaction&&function rt(se){if(q.has(se))return;const ne=new Promise((Oe,Ne)=>{const St=()=>{se.removeEventListener("complete",Vt),se.removeEventListener("error",pn),se.removeEventListener("abort",pn)},Vt=()=>{Oe(),St()},pn=()=>{Ne(se.error||new DOMException("AbortError","AbortError")),St()};se.addEventListener("complete",Vt),se.addEventListener("error",pn),se.addEventListener("abort",pn)});q.set(se,ne)}(se),((se,ne)=>ne.some(Oe=>se instanceof Oe))(se,function Re(){return Ce||(Ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,ue):se)}function Ae(se){if(se instanceof IDBRequest)return function xe(se){const ne=new Promise((Oe,Ne)=>{const St=()=>{se.removeEventListener("success",Vt),se.removeEventListener("error",pn)},Vt=()=>{Oe(Ae(se.result)),St()},pn=()=>{Ne(se.error),St()};se.addEventListener("success",Vt),se.addEventListener("error",pn)});return ne.then(Oe=>{Oe instanceof IDBCursor&&Z.set(Oe,se)}).catch(()=>{}),Be.set(ne,se),ne}(se);if(ze.has(se))return ze.get(se);const ne=Dt(se);return ne!==se&&(ze.set(se,ne),Be.set(ne,se)),ne}const ye=se=>Be.get(se),Ke=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],Xe=new Map;function At(se,ne){if(!(se instanceof IDBDatabase)||ne in se||"string"!=typeof ne)return;if(Xe.get(ne))return Xe.get(ne);const Oe=ne.replace(/FromIndex$/,""),Ne=ne!==Oe,St=ie.includes(Oe);if(!(Oe in(Ne?IDBIndex:IDBObjectStore).prototype)||!St&&!Ke.includes(Oe))return;const Vt=function(){var pn=(0,f.Z)(function*(Ln,...Wt){const Wr=this.transaction(Ln,St?"readwrite":"readonly");let es=Wr.store;return Ne&&(es=es.index(Wt.shift())),(yield Promise.all([es[Oe](...Wt),St&&Wr.done]))[0]});return function(Wt){return pn.apply(this,arguments)}}();return Xe.set(ne,Vt),Vt}!function _e(se){ue=se(ue)}(se=>({...se,get:(ne,Oe,Ne)=>At(ne,Oe)||se.get(ne,Oe,Ne),has:(ne,Oe)=>!!At(ne,Oe)||se.has(ne,Oe)}));class dt{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function Kt(se){return"VERSION"===se.getComponent()?.type}(Oe)){const Ne=Oe.getImmediate();return`${Ne.library}/${Ne.version}`}return null}).filter(Oe=>Oe).join(" ")}}const ft="@firebase/app",fe=new U.Yd("@firebase/app"),Oi="[DEFAULT]",Pn={[ft]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tn=new Map,Jt=new Map;function yt(se,ne){try{se.container.addComponent(ne)}catch(Oe){fe.debug(`Component ${ne.name} failed to register with FirebaseApp ${se.name}`,Oe)}}function It(se,ne){se.container.addOrOverwriteComponent(ne)}function en(se){const ne=se.name;if(Jt.has(ne))return fe.debug(`There were multiple attempts to register component ${ne}.`),!1;Jt.set(ne,se);for(const Oe of Tn.values())yt(Oe,se);return!0}function si(se,ne){const Oe=se.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),se.container.getProvider(ne)}function xr(se,ne,Oe=Oi){si(se,ne).clearInstance(Oe)}function ur(){Jt.clear()}const er=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gt{constructor(ne,Oe,Ne){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=Ne,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}const Cs="9.22.0";function on(se,ne={}){let Oe=se;"object"!=typeof ne&&(ne={name:ne});const Ne=Object.assign({name:Oi,automaticDataCollectionEnabled:!1},ne),St=Ne.name;if("string"!=typeof St||!St)throw er.create("bad-app-name",{appName:String(St)});if(Oe||(Oe=(0,ce.aH)()),!Oe)throw er.create("no-options");const Vt=Tn.get(St);if(Vt){if((0,ce.vZ)(Oe,Vt.options)&&(0,ce.vZ)(Ne,Vt.config))return Vt;throw er.create("duplicate-app",{appName:St})}const pn=new z.H0(St);for(const Wt of Jt.values())pn.addComponent(Wt);const Ln=new Gt(Oe,Ne,pn);return Tn.set(St,Ln),Ln}function Br(se=Oi){const ne=Tn.get(se);if(!ne&&se===Oi&&(0,ce.aH)())return on();if(!ne)throw er.create("no-app",{appName:se});return ne}function Cn(){return Array.from(Tn.values())}function _r(se){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(se){const ne=se.name;Tn.has(ne)&&(Tn.delete(ne),yield Promise.all(se.container.getProviders().map(Oe=>Oe.delete())),se.isDeleted=!0)})).apply(this,arguments)}function Ni(se,ne,Oe){var Ne;let St=null!==(Ne=Pn[se])&&void 0!==Ne?Ne:se;Oe&&(St+=`-${Oe}`);const Vt=St.match(/\s|\//),pn=ne.match(/\s|\//);if(Vt||pn){const Ln=[`Unable to register library "${St}" with version "${ne}":`];return Vt&&Ln.push(`library name "${St}" contains illegal characters (whitespace or "/")`),Vt&&pn&&Ln.push("and"),pn&&Ln.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void fe.warn(Ln.join(" "))}en(new z.wA(`${St}-version`,()=>({library:St,version:ne}),"VERSION"))}function vr(se,ne){if(null!==se&&"function"!=typeof se)throw er.create("invalid-log-argument");(0,U.Am)(se,ne)}function Ds(se){(0,U.Ub)(se)}const $="firebase-heartbeat-store";let H=null;function L(){return H||(H=function we(se,ne,{blocked:Oe,upgrade:Ne,blocking:St,terminated:Vt}={}){const pn=indexedDB.open(se,ne),Ln=Ae(pn);return Ne&&pn.addEventListener("upgradeneeded",Wt=>{Ne(Ae(pn.result),Wt.oldVersion,Wt.newVersion,Ae(pn.transaction),Wt)}),Oe&&pn.addEventListener("blocked",Wt=>Oe(Wt.oldVersion,Wt.newVersion,Wt)),Ln.then(Wt=>{Vt&&Wt.addEventListener("close",()=>Vt()),St&&Wt.addEventListener("versionchange",Wr=>St(Wr.oldVersion,Wr.newVersion,Wr))}).catch(()=>{}),Ln}("firebase-heartbeat-database",1,{upgrade:(se,ne)=>{0===ne&&se.createObjectStore($)}}).catch(se=>{throw er.create("idb-open",{originalErrorMessage:se.message})})),H}function P(){return(P=(0,f.Z)(function*(se){try{return yield(yield L()).transaction($).objectStore($).get(We(se))}catch(ne){if(ne instanceof ce.ZR)fe.warn(ne.message);else{const Oe=er.create("idb-get",{originalErrorMessage:ne?.message});fe.warn(Oe.message)}}})).apply(this,arguments)}function Y(se,ne){return ge.apply(this,arguments)}function ge(){return(ge=(0,f.Z)(function*(se,ne){try{const Ne=(yield L()).transaction($,"readwrite");yield Ne.objectStore($).put(ne,We(se)),yield Ne.done}catch(Oe){if(Oe instanceof ce.ZR)fe.warn(Oe.message);else{const Ne=er.create("idb-set",{originalErrorMessage:Oe?.message});fe.warn(Ne.message)}}})).apply(this,arguments)}function We(se){return`${se.name}!${se.options.appId}`}class Je{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new Mt(Oe),this._heartbeatsCachePromise=this._storage.read().then(Ne=>(this._heartbeatsCache=Ne,Ne))}triggerHeartbeat(){var ne=this;return(0,f.Z)(function*(){const Ne=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=it();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==St&&!ne._heartbeatsCache.heartbeats.some(Vt=>Vt.date===St))return ne._heartbeatsCache.heartbeats.push({date:St,agent:Ne}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(Vt=>{const pn=new Date(Vt.date).valueOf();return Date.now()-pn<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,f.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Oe=it(),{heartbeatsToSend:Ne,unsentEntries:St}=function tn(se,ne=1024){const Oe=[];let Ne=se.slice();for(const St of se){const Vt=Oe.find(pn=>pn.agent===St.agent);if(Vt){if(Vt.dates.push(St.date),cn(Oe)>ne){Vt.dates.pop();break}}else if(Oe.push({agent:St.agent,dates:[St.date]}),cn(Oe)>ne){Oe.pop();break}Ne=Ne.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:Ne}}(ne._heartbeatsCache.heartbeats),Vt=(0,ce.L)(JSON.stringify({version:2,heartbeats:Ne}));return ne._heartbeatsCache.lastSentHeartbeatDate=Oe,St.length>0?(ne._heartbeatsCache.heartbeats=St,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),Vt})()}}function it(){return(new Date).toISOString().substring(0,10)}class Mt{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,f.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function F(se){return P.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Oe=this;return(0,f.Z)(function*(){var Ne;if(yield Oe._canUseIndexedDBPromise){const Vt=yield Oe.read();return Y(Oe.app,{lastSentHeartbeatDate:null!==(Ne=ne.lastSentHeartbeatDate)&&void 0!==Ne?Ne:Vt.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Oe=this;return(0,f.Z)(function*(){var Ne;if(yield Oe._canUseIndexedDBPromise){const Vt=yield Oe.read();return Y(Oe.app,{lastSentHeartbeatDate:null!==(Ne=ne.lastSentHeartbeatDate)&&void 0!==Ne?Ne:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...ne.heartbeats]})}})()}}function cn(se){return(0,ce.L)(JSON.stringify({version:2,heartbeats:se})).length}!function vi(se){en(new z.wA("platform-logger",ne=>new dt(ne),"PRIVATE")),en(new z.wA("heartbeat",ne=>new Je(ne),"PRIVATE")),Ni(ft,"0.9.10",se),Ni(ft,"0.9.10","esm2017"),Ni("fire-js","")}("")},4859:(_t,ke,j)=>{j.d(ke,{H0:()=>Re,wA:()=>U});var f=j(5861),z=j(2090);class U{constructor(Z,q,J){this.name=Z,this.instanceFactory=q,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ce="[DEFAULT]";class Se{constructor(Z,q){this.name=Z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const q=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(q)){const J=new z.BH;if(this.instancesDeferred.set(q,J),this.isInitialized(q)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:q});ze&&J.resolve(ze)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(Z){var q;const J=this.normalizeInstanceIdentifier(Z?.identifier),ze=null!==(q=Z?.optional)&&void 0!==q&&q;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Be){if(ze)return null;throw Be}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function Pe(He){return"EAGER"===He.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[q,J]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(q);try{const Be=this.getOrInitializeService({instanceIdentifier:ze});J.resolve(Be)}catch{}}}}clearInstance(Z=ce){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,f.Z)(function*(){const q=Array.from(Z.instances.values());yield Promise.all([...q.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...q.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ce){return this.instances.has(Z)}getOptions(Z=ce){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:q={}}=Z,J=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:J,options:q});for(const[Be,xe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Be)&&xe.resolve(ze);return ze}onInit(Z,q){var J;const ze=this.normalizeInstanceIdentifier(q),Be=null!==(J=this.onInitCallbacks.get(ze))&&void 0!==J?J:new Set;Be.add(Z),this.onInitCallbacks.set(ze,Be);const xe=this.instances.get(ze);return xe&&Z(xe,ze),()=>{Be.delete(Z)}}invokeOnInitCallbacks(Z,q){const J=this.onInitCallbacks.get(q);if(J)for(const ze of J)try{ze(Z,q)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:q={}}){let J=this.instances.get(Z);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(He=Z,He===ce?void 0:He),options:q}),this.instances.set(Z,J),this.instancesOptions.set(Z,q),this.invokeOnInitCallbacks(J,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,J)}catch{}var He;return J||null}normalizeInstanceIdentifier(Z=ce){return this.component?this.component.multipleInstances?Z:ce:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const q=this.getProvider(Z.name);if(q.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);q.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const q=new Se(Z,this);return this.providers.set(Z,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,ke,j)=>{j.d(ke,{Am:()=>He,Ub:()=>Re,Yd:()=>Pe,in:()=>z});const f=[];var z=(()=>{return(Z=z||(z={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",z;var Z})();const U={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},ce=z.INFO,Se={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},Ce=(Z,q,...J)=>{if(q<Z.logLevel)return;const ze=(new Date).toISOString(),Be=Se[q];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Be](`[${ze}]  ${Z.name}:`,...J)};class Pe{constructor(q){this.name=q,this._logLevel=ce,this._logHandler=Ce,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in z))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?U[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...q),this._logHandler(this,z.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...q),this._logHandler(this,z.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,z.INFO,...q),this._logHandler(this,z.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,z.WARN,...q),this._logHandler(this,z.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...q),this._logHandler(this,z.ERROR,...q)}}function Re(Z){f.forEach(q=>{q.setLogLevel(Z)})}function He(Z,q){for(const J of f){let ze=null;q&&q.level&&(ze=U[q.level]),J.userLogHandler=null===Z?null:(Be,xe,...rt)=>{const ue=rt.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");xe>=(ze??Be.logLevel)&&Z({level:z[xe].toLowerCase(),message:ue,args:rt,type:Be.name})}}}},9260:(_t,ke,j)=>{j.d(ke,{Z:()=>f.Z});var f=j(3942);f.Z.registerVersion("firebase","9.22.0","app-compat")},9568:(_t,ke,j)=>{j.r(ke);var f=j(5861),z=j(3942),U=j(1389),ce=j(2090),Pe=(j(6881),j(1877),j(4859));function Re(){return window}function q(){return(q=(0,f.Z)(function*(L,F,P){var Y;const{BuildInfo:ge}=Re();(0,U.as)(F.sessionId,"AuthEvent did not contain a session ID");const We=yield _e(F.sessionId),pt={};return(0,U.at)()?pt.ibi=ge.packageName:(0,U.au)()?pt.apn=ge.packageName:(0,U.av)(L,"operation-not-supported-in-this-environment"),ge.displayName&&(pt.appDisplayName=ge.displayName),pt.sessionId=We,(0,U.aw)(L,P,F.type,void 0,null!==(Y=F.eventId)&&void 0!==Y?Y:void 0,pt)})).apply(this,arguments)}function ze(){return(ze=(0,f.Z)(function*(L){const{BuildInfo:F}=Re(),P={};(0,U.at)()?P.iosBundleId=F.packageName:(0,U.au)()?P.androidPackageName=F.packageName:(0,U.av)(L,"operation-not-supported-in-this-environment"),yield(0,U.ax)(L,P)})).apply(this,arguments)}function rt(){return(rt=(0,f.Z)(function*(L,F,P){const{cordova:Y}=Re();let ge=()=>{};try{yield new Promise((We,pt)=>{let me=null;function Je(){var Mt;We();const cn=null===(Mt=Y.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof cn&&cn(),"function"==typeof P?.close&&P.close()}function it(){me||(me=window.setTimeout(()=>{pt((0,U.az)(L,"redirect-cancelled-by-user"))},2e3))}function tn(){"visible"===document?.visibilityState&&it()}F.addPassiveListener(Je),document.addEventListener("resume",it,!1),(0,U.au)()&&document.addEventListener("visibilitychange",tn,!1),ge=()=>{F.removePassiveListener(Je),document.removeEventListener("resume",it,!1),document.removeEventListener("visibilitychange",tn,!1),me&&window.clearTimeout(me)}})}finally{ge()}})).apply(this,arguments)}function _e(L){return ht.apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(L){const F=Dt(L),P=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(P)).map(ge=>ge.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Dt(L){if((0,U.as)(/[0-9a-zA-Z]+/.test(L),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(L);const F=new ArrayBuffer(L.length),P=new Uint8Array(F);for(let Y=0;Y<L.length;Y++)P[Y]=L.charCodeAt(Y);return P}class ye extends U.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(P=>P(F)),super.onEvent(F)}initialized(){var F=this;return(0,f.Z)(function*(){yield F.initPromise})()}}function Ke(L){return ie.apply(this,arguments)}function ie(){return(ie=(0,f.Z)(function*(L){const F=yield dt()._get(Kt(L));return F&&(yield dt()._remove(Kt(L))),F})).apply(this,arguments)}function At(){const L=[],F="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<20;P++){const Y=Math.floor(Math.random()*F.length);L.push(F.charAt(Y))}return L.join("")}function dt(){return(0,U.aC)(U.b)}function Kt(L){return(0,U.aD)("authEvent",L.config.apiKey,L.name)}function fe(L){if(!L?.includes("?"))return{};const[F,...P]=L.split("?");return(0,ce.zd)(P.join("?"))}function ve(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,U.az)("no-auth-event")}}function Xt(){var L;return(null===(L=self?.location)||void 0===L?void 0:L.protocol)||null}function Ut(L=(0,ce.z$)()){return!("file:"!==Xt()&&"ionic:"!==Xt()&&"capacitor:"!==Xt()||!L.toLowerCase().match(/iphone|ipad|ipod|android/))}function ri(){try{const L=self.localStorage,F=U.aL();if(L)return L.setItem(F,"1"),L.removeItem(F),!function yr(L=(0,ce.z$)()){return function Jn(){return(0,ce.w1)()&&11===document?.documentMode}()||function ni(L=(0,ce.z$)()){return/Edge\/\d+/.test(L)}(L)}()||(0,ce.hl)()}catch{return ii()&&(0,ce.hl)()}return!1}function ii(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xi(){return(function zt(){return"http:"===Xt()||"https:"===Xt()}()||(0,ce.ru)()||Ut())&&!function mr(){return(0,ce.b$)()||(0,ce.UG)()}()&&ri()&&!ii()}function Is(){return Ut()&&typeof document<"u"}function ot(){return(ot=(0,f.Z)(function*(){return!!Is()&&new Promise(L=>{const F=setTimeout(()=>{L(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),L(!0)})})})).apply(this,arguments)}const lr={LOCAL:"local",NONE:"none",SESSION:"session"},Hn=U.aA,Ji="persistence";function Pn(L){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(L){yield L._initializationPromise;const F=yt(),P=U.aD(Ji,L.config.apiKey,L.name);F&&F.setItem(P,L._getPersistence())})).apply(this,arguments)}function yt(){var L;try{return(null===(L=function Ur(){return typeof window<"u"?window:null}())||void 0===L?void 0:L.sessionStorage)||null}catch{return null}}const It=U.aA;class en{constructor(){this.browserResolver=U.aC(U.k),this.cordovaResolver=U.aC(class Me{constructor(){this._redirectPersistence=U.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U.aE,this._overrideRedirectResult=U.aF}_initialize(F){var P=this;return(0,f.Z)(function*(){const Y=F._key();let ge=P.eventManagers.get(Y);return ge||(ge=new ye(F),P.eventManagers.set(Y,ge),P.attachCallbackListeners(F,ge)),ge})()}_openPopup(F){(0,U.av)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,P,Y,ge){var We=this;return(0,f.Z)(function*(){!function ue(L){var F,P,Y,ge,We,pt,me,Je,it,tn;const Mt=Re();(0,U.aA)("function"==typeof(null===(F=Mt?.universalLinks)||void 0===F?void 0:F.subscribe),L,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,U.aA)(typeof(null===(P=Mt?.BuildInfo)||void 0===P?void 0:P.packageName)<"u",L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,U.aA)("function"==typeof(null===(We=null===(ge=null===(Y=Mt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===We?void 0:We.openUrl),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aA)("function"==typeof(null===(Je=null===(me=null===(pt=Mt?.cordova)||void 0===pt?void 0:pt.plugins)||void 0===me?void 0:me.browsertab)||void 0===Je?void 0:Je.isAvailable),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aA)("function"==typeof(null===(tn=null===(it=Mt?.cordova)||void 0===it?void 0:it.InAppBrowser)||void 0===tn?void 0:tn.open),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const pt=yield We._initialize(F);yield pt.initialized(),pt.resetRedirect(),(0,U.aG)(),yield We._originValidation(F);const me=function we(L,F,P=null){return{type:F,eventId:P,urlResponse:null,sessionId:At(),postBody:null,tenantId:L.tenantId,error:(0,U.az)(L,"no-auth-event")}}(F,Y,ge);yield function Ge(L,F){return dt()._set(Kt(L),F)}(F,me);const Je=yield function Z(L,F,P){return q.apply(this,arguments)}(F,me,P),it=yield function Be(L){const{cordova:F}=Re();return new Promise(P=>{F.plugins.browsertab.isAvailable(Y=>{let ge=null;Y?F.plugins.browsertab.openUrl(L):ge=F.InAppBrowser.open(L,(0,U.ay)()?"_blank":"_system","location=yes"),P(ge)})})}(Je);return function xe(L,F,P){return rt.apply(this,arguments)}(F,pt,it)})()}_isIframeWebStorageSupported(F,P){throw new Error("Method not implemented.")}_originValidation(F){const P=F._key();return this.originValidationPromises[P]||(this.originValidationPromises[P]=function J(L){return ze.apply(this,arguments)}(F)),this.originValidationPromises[P]}attachCallbackListeners(F,P){const{universalLinks:Y,handleOpenURL:ge,BuildInfo:We}=Re(),pt=setTimeout((0,f.Z)(function*(){yield Ke(F),P.onEvent(ve())}),500),me=function(){var tn=(0,f.Z)(function*(Mt){clearTimeout(pt);const cn=yield Ke(F);let vi=null;cn&&Mt?.url&&(vi=function Xe(L,F){var P,Y;const ge=function he(L){const F=fe(L),P=F.link?decodeURIComponent(F.link):void 0,Y=fe(P).link,ge=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return fe(ge).link||ge||Y||P||L}(F);if(ge.includes("/__/auth/callback")){const We=fe(ge),pt=We.firebaseError?function ft(L){try{return JSON.parse(L)}catch{return null}}(decodeURIComponent(We.firebaseError)):null,me=null===(Y=null===(P=pt?.code)||void 0===P?void 0:P.split("auth/"))||void 0===Y?void 0:Y[1],Je=me?(0,U.az)(me):null;return Je?{type:L.type,eventId:L.eventId,tenantId:L.tenantId,error:Je,urlResponse:null,sessionId:null,postBody:null}:{type:L.type,eventId:L.eventId,tenantId:L.tenantId,sessionId:L.sessionId,urlResponse:ge,postBody:null}}return null}(cn,Mt.url)),P.onEvent(vi||ve())});return function(cn){return tn.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,me);const Je=ge,it=`${We.packageName.toLowerCase()}://`;Re().handleOpenURL=function(){var tn=(0,f.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(it)&&me({url:Mt}),"function"==typeof Je)try{Je(Mt)}catch(cn){console.error(cn)}});return function(Mt){return tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=U.a,this._completeRedirectFn=U.aE,this._overrideRedirectResult=U.aF}_initialize(F){var P=this;return(0,f.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,P,Y,ge){var We=this;return(0,f.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openPopup(F,P,Y,ge)})()}_openRedirect(F,P,Y,ge){var We=this;return(0,f.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openRedirect(F,P,Y,ge)})()}_isIframeWebStorageSupported(F,P){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,P)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return Is()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return It(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,f.Z)(function*(){if(F.underlyingResolver)return;const P=yield function ka(){return ot.apply(this,arguments)}();F.underlyingResolver=P?F.cordovaResolver:F.browserResolver})()}}function si(L){return L.unwrap()}function ur(L){return er(L)}function er(L){const{_tokenResponse:F}=L instanceof ce.ZR?L.customData:L;if(!F)return null;if(!(L instanceof ce.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return U.P.credentialFromResult(L);const P=F.providerId;if(!P||P===U.p.PASSWORD)return null;let Y;switch(P){case U.p.GOOGLE:Y=U.V;break;case U.p.FACEBOOK:Y=U.U;break;case U.p.GITHUB:Y=U.W;break;case U.p.TWITTER:Y=U.Z;break;default:const{oauthIdToken:ge,oauthAccessToken:We,oauthTokenSecret:pt,pendingToken:me,nonce:Je}=F;return We||pt||ge||me?me?P.startsWith("saml.")?U.aO._create(P,me):U.L._fromParams({providerId:P,signInMethod:P,pendingToken:me,idToken:ge,accessToken:We}):new U.X(P).credential({idToken:ge,accessToken:We,rawNonce:Je}):null}return L instanceof ce.ZR?Y.credentialFromError(L):Y.credentialFromResult(L)}function Gt(L,F){return F.catch(P=>{throw P instanceof ce.ZR&&function Pt(L,F){var P;const Y=null===(P=F.customData)||void 0===P?void 0:P._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new Br(L,U.aq(L,F));else if(Y){const ge=er(F),We=F;ge&&(We.credential=ge,We.tenantId=Y.tenantId||void 0,We.email=Y.email||void 0,We.phoneNumber=Y.phoneNumber||void 0)}}(L,P),P}).then(P=>{const ge=P.user;return{operationType:P.operationType,credential:ur(P),additionalUserInfo:U.ao(P),user:Cn.getOrCreate(ge)}})}function Cs(L,F){return on.apply(this,arguments)}function on(){return(on=(0,f.Z)(function*(L,F){const P=yield F;return{verificationId:P.verificationId,confirm:Y=>Gt(L,P.confirm(Y))}})).apply(this,arguments)}class Br{constructor(F,P){this.resolver=P,this.auth=function xr(L){return L.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return Gt(si(this.auth),this.resolver.resolveSignIn(F))}}class Cn{constructor(F){this._delegate=F,this.multiFactor=U.ar(F)}static getOrCreate(F){return Cn.USER_MAP.has(F)||Cn.USER_MAP.set(F,new Cn(F)),Cn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var P=this;return(0,f.Z)(function*(){return Gt(P.auth,U.a0(P._delegate,F))})()}linkWithPhoneNumber(F,P){var Y=this;return(0,f.Z)(function*(){return Cs(Y.auth,U.l(Y._delegate,F,P))})()}linkWithPopup(F){var P=this;return(0,f.Z)(function*(){return Gt(P.auth,U.d(P._delegate,F,en))})()}linkWithRedirect(F){var P=this;return(0,f.Z)(function*(){return yield Pn(U.aH(P.auth)),U.g(P._delegate,F,en)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var P=this;return(0,f.Z)(function*(){return Gt(P.auth,U.a1(P._delegate,F))})()}reauthenticateWithPhoneNumber(F,P){return Cs(this.auth,U.r(this._delegate,F,P))}reauthenticateWithPopup(F){return Gt(this.auth,U.e(this._delegate,F,en))}reauthenticateWithRedirect(F){var P=this;return(0,f.Z)(function*(){return yield Pn(U.aH(P.auth)),U.h(P._delegate,F,en)})()}sendEmailVerification(F){return U.ae(this._delegate,F)}unlink(F){var P=this;return(0,f.Z)(function*(){return yield U.an(P._delegate,F),P})()}updateEmail(F){return U.aj(this._delegate,F)}updatePassword(F){return U.ak(this._delegate,F)}updatePhoneNumber(F){return U.u(this._delegate,F)}updateProfile(F){return U.ai(this._delegate,F)}verifyBeforeUpdateEmail(F,P){return U.af(this._delegate,F,P)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cn.USER_MAP=new WeakMap;const _r=U.aA;let $n=(()=>{class L{constructor(P,Y){if(this.app=P,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ge}=P.options;_r(ge,"invalid-api-key",{appName:P.name}),_r(ge,"invalid-api-key",{appName:P.name});const We=typeof window<"u"?en:void 0;this._delegate=Y.initialize({options:{persistence:vr(ge,P.name),popupRedirectResolver:We}}),this._delegate._updateErrorMap(U.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(P){this._delegate.languageCode=P}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(P){this._delegate.tenantId=P}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(P,Y){U.I(this._delegate,P,Y)}applyActionCode(P){return U.a5(this._delegate,P)}checkActionCode(P){return U.a6(this._delegate,P)}confirmPasswordReset(P,Y){return U.a4(this._delegate,P,Y)}createUserWithEmailAndPassword(P,Y){var ge=this;return(0,f.Z)(function*(){return Gt(ge._delegate,U.a8(ge._delegate,P,Y))})()}fetchProvidersForEmail(P){return this.fetchSignInMethodsForEmail(P)}fetchSignInMethodsForEmail(P){return U.ad(this._delegate,P)}isSignInWithEmailLink(P){return U.ab(this._delegate,P)}getRedirectResult(){var P=this;return(0,f.Z)(function*(){_r(Xi(),P._delegate,"operation-not-supported-in-this-environment");const Y=yield U.j(P._delegate,en);return Y?Gt(P._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(P){!function Tt(L,F){(0,U.aH)(L)._logFramework(F)}(this._delegate,P)}onAuthStateChanged(P,Y,ge){const{next:We,error:pt,complete:me}=Ni(P,Y,ge);return this._delegate.onAuthStateChanged(We,pt,me)}onIdTokenChanged(P,Y,ge){const{next:We,error:pt,complete:me}=Ni(P,Y,ge);return this._delegate.onIdTokenChanged(We,pt,me)}sendSignInLinkToEmail(P,Y){return U.aa(this._delegate,P,Y)}sendPasswordResetEmail(P,Y){return U.a3(this._delegate,P,Y||void 0)}setPersistence(P){var Y=this;return(0,f.Z)(function*(){let ge;switch(function Oi(L,F){Hn(Object.values(lr).includes(F),L,"invalid-persistence-type"),(0,ce.b$)()?Hn(F!==lr.SESSION,L,"unsupported-persistence-type"):(0,ce.UG)()?Hn(F===lr.NONE,L,"unsupported-persistence-type"):ii()?Hn(F===lr.NONE||F===lr.LOCAL&&(0,ce.hl)(),L,"unsupported-persistence-type"):Hn(F===lr.NONE||ri(),L,"unsupported-persistence-type")}(Y._delegate,P),P){case lr.SESSION:ge=U.a;break;case lr.LOCAL:ge=(yield U.aC(U.i)._isAvailable())?U.i:U.b;break;case lr.NONE:ge=U.N;break;default:return U.av("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(ge)})()}signInAndRetrieveDataWithCredential(P){return this.signInWithCredential(P)}signInAnonymously(){return Gt(this._delegate,U._(this._delegate))}signInWithCredential(P){return Gt(this._delegate,U.$(this._delegate,P))}signInWithCustomToken(P){return Gt(this._delegate,U.a2(this._delegate,P))}signInWithEmailAndPassword(P,Y){return Gt(this._delegate,U.a9(this._delegate,P,Y))}signInWithEmailLink(P,Y){return Gt(this._delegate,U.ac(this._delegate,P,Y))}signInWithPhoneNumber(P,Y){return Cs(this._delegate,U.s(this._delegate,P,Y))}signInWithPopup(P){var Y=this;return(0,f.Z)(function*(){return _r(Xi(),Y._delegate,"operation-not-supported-in-this-environment"),Gt(Y._delegate,U.c(Y._delegate,P,en))})()}signInWithRedirect(P){var Y=this;return(0,f.Z)(function*(){return _r(Xi(),Y._delegate,"operation-not-supported-in-this-environment"),yield Pn(Y._delegate),U.f(Y._delegate,P,en)})()}updateCurrentUser(P){return this._delegate.updateCurrentUser(P)}verifyPasswordResetCode(P){return U.a7(this._delegate,P)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return L.Persistence=lr,L})();function Ni(L,F,P){let Y=L;"function"!=typeof L&&({next:Y,error:F,complete:P}=L);const ge=Y;return{next:pt=>ge(pt&&Cn.getOrCreate(pt)),error:F,complete:P}}function vr(L,F){const P=function Jt(L,F){const P=yt();if(!P)return[];const Y=U.aD(Ji,L,F);switch(P.getItem(Y)){case lr.NONE:return[U.N];case lr.LOCAL:return[U.i,U.a];case lr.SESSION:return[U.a];default:return[]}}(L,F);if(typeof self<"u"&&!P.includes(U.i)&&P.push(U.i),typeof window<"u")for(const Y of[U.b,U.a])P.includes(Y)||P.push(Y);return P.includes(U.N)||P.push(U.N),P}class Ds{constructor(){this.providerId="phone",this._delegate=new U.P(si(z.Z.auth()))}static credential(F,P){return U.P.credential(F,P)}verifyPhoneNumber(F,P){return this._delegate.verifyPhoneNumber(F,P)}unwrap(){return this._delegate}}Ds.PHONE_SIGN_IN_METHOD=U.P.PHONE_SIGN_IN_METHOD,Ds.PROVIDER_ID=U.P.PROVIDER_ID;const oi=U.aA;class _i{constructor(F,P,Y=z.Z.app()){var ge;oi(null===(ge=Y.options)||void 0===ge?void 0:ge.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new U.R(F,P,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(L){L.INTERNAL.registerComponent(new Pe.wA("auth-compat",F=>{const P=F.getProvider("app-compat").getImmediate(),Y=F.getProvider("auth");return new $n(P,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:U.A.EMAIL_SIGNIN,PASSWORD_RESET:U.A.PASSWORD_RESET,RECOVER_EMAIL:U.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:U.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:U.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:U.A.VERIFY_EMAIL}},EmailAuthProvider:U.Q,FacebookAuthProvider:U.U,GithubAuthProvider:U.W,GoogleAuthProvider:U.V,OAuthProvider:U.X,SAMLAuthProvider:U.Y,PhoneAuthProvider:Ds,PhoneMultiFactorGenerator:U.m,RecaptchaVerifier:_i,TwitterAuthProvider:U.Z,Auth:$n,AuthCredential:U.J,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),L.registerVersion("@firebase/auth-compat","0.4.2")}(z.Z)},5861:(_t,ke,j)=>{function f(U,ce,Se,Ce,Pe,Re,He){try{var Z=U[Re](He),q=Z.value}catch(J){return void Se(J)}Z.done?ce(q):Promise.resolve(q).then(Ce,Pe)}function z(U){return function(){var ce=this,Se=arguments;return new Promise(function(Ce,Pe){var Re=U.apply(ce,Se);function He(q){f(Re,Ce,Pe,He,Z,"next",q)}function Z(q){f(Re,Ce,Pe,He,Z,"throw",q)}He(void 0)})}}j.d(ke,{Z:()=>z})}},_t=>{_t(_t.s=2598)}]);