"use strict";var PJ=Object.defineProperty,OJ=(_t,ke,j)=>ke in _t?PJ(_t,ke,{enumerable:!0,configurable:!0,writable:!0,value:j}):_t[ke]=j,Ze=(_t,ke,j)=>(OJ(_t,"symbol"!=typeof ke?ke+"":ke,j),j);(self.webpackChunkbruel_portfolio=self.webpackChunkbruel_portfolio||[]).push([[179],{2011:(_t,ke,j)=>{j.d(ke,{Dh:()=>Pe,GT:()=>Se,cc:()=>ze,on:()=>He,pX:()=>ce,xv:()=>Re});var f=j(4650),z=j(9260);_t=j.hmd(_t);const U=["ngOnDestroy"],ce=(ue,_e,ht,Tt={})=>new Proxy(ue,{get:(Ae,ye)=>ht.runOutsideAngular(()=>{var we;if(ue[ye])return!(null===(we=Tt?.spy)||void 0===we)&&we.get&&Tt.spy.get(ye,ue[ye]),ue[ye];if(U.indexOf(ye)>-1)return()=>{};const Ge=_e.toPromise().then(Ke=>{const ie=Ke&&Ke[ye];return"function"==typeof ie?ie.bind(Ke):ie&&ie.then?ie.then(Xe=>ht.run(()=>Xe)):ht.run(()=>ie)});return new Proxy(()=>{},{get:(Ke,ie)=>Ge[ie],apply:(Ke,ie,Xe)=>Ge.then(At=>{var dt;const Kt=At&&At(...Xe);return!(null===(dt=Tt?.spy)||void 0===dt)&&dt.apply&&Tt.spy.apply(ye,Xe,Kt),Kt})})})}),Se=(ue,_e)=>{_e.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(Tt=>{Object.defineProperty(ue.prototype,Tt,Object.getOwnPropertyDescriptor(ht.prototype||ht,Tt))})})};class Ce{constructor(_e){return _e}}const Pe=new f.OlP("angularfire2.app.options"),Re=new f.OlP("angularfire2.app.name");function He(ue,_e,ht){const Ae="object"==typeof ht&&ht||{};Ae.name=Ae.name||"string"==typeof ht&&ht||"[DEFAULT]";const we=z.Z.apps.filter(Ge=>Ge&&Ge.name===Ae.name)[0]||_e.runOutsideAngular(()=>z.Z.initializeApp(ue,Ae));try{JSON.stringify(ue)!==JSON.stringify(we.options)&&Z("error",`${we.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(we)}const Z=(ue,..._e)=>{(0,f.X6Q)()&&typeof console<"u"&&console[ue](..._e)};function ze(ue,_e,ht,Tt,Ae){const[,ye,we]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===ue)||[];if(ye)return function Ue(ue,_e){try{return ue.toString()===_e.toString()}catch{return ue===_e}}(Ae,we)||(rt("error",`${_e} was already initialized on the ${ht} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),rt("warn",{is:Ae,was:we})),ye;{const Ge=Tt();return globalThis.\u0275AngularfireInstanceCache.push([ue,Ge,Ae]),Ge}}const xe=!!_t.hot,rt=(ue,..._e)=>{(0,f.X6Q)()&&typeof console<"u"&&console[ue](..._e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},1389:(_t,ke,j)=>{j.d(ke,{$:()=>Wo,A:()=>q,D:()=>Ue,I:()=>er,J:()=>Hs,L:()=>Cs,N:()=>si,P:()=>rI,Q:()=>H_,R:()=>Ui,U:()=>Fl,V:()=>bi,W:()=>qE,X:()=>lc,Y:()=>yh,Z:()=>ka,_:()=>Lt,a:()=>wo,a0:()=>Eh,a1:()=>Cg,a2:()=>dr,a3:()=>z_,a4:()=>KE,a5:()=>Ch,a6:()=>pc,a7:()=>G_,a8:()=>W_,a9:()=>q_,aA:()=>ie,aB:()=>Pg,aC:()=>yr,aD:()=>_i,aE:()=>kc,aF:()=>Zh,aG:()=>bv,aH:()=>Ln,aL:()=>ql,aO:()=>Ds,aa:()=>Tg,ab:()=>Vl,ac:()=>Z_,ad:()=>K_,ae:()=>Y_,af:()=>mc,ai:()=>yo,aj:()=>yc,ak:()=>Mh,an:()=>$_,ao:()=>Rh,aq:()=>nv,ar:()=>bc,as:()=>At,at:()=>me,au:()=>pe,av:()=>Ae,aw:()=>Nc,ax:()=>Og,ay:()=>Je,az:()=>ye,b:()=>av,c:()=>za,d:()=>kg,e:()=>nr,f:()=>wv,g:()=>Iv,h:()=>Wa,i:()=>XE,j:()=>Rg,k:()=>Ug,l:()=>nI,m:()=>Pv,p:()=>Re,r:()=>mv,s:()=>gv,u:()=>$h});var f=j(5861),z=j(2090),U=j(6881),ce=j(655),Se=j(1877),Ce=j(4859);const Re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ue=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},xe=function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new Se.Yd("@firebase/auth");function Tt(E,...m){_e.logLevel<=Se.in.ERROR&&_e.error(`Auth (${U.SDK_VERSION}): ${E}`,...m)}function Ae(E,...m){throw Ke(E,...m)}function ye(E,...m){return Ke(E,...m)}function we(E,m,v){const I=Object.assign(Object.assign({},xe()),{[m]:v});return new z.LL("auth","Firebase",I).create(m,{appName:E.name})}function Ge(E,m,v){if(!(m instanceof v))throw v.name!==m.constructor.name&&Ae(E,"argument-error"),we(E,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(E,...m){if("string"!=typeof E){const v=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(v,...I)}return rt.create(E,...m)}function ie(E,m,...v){if(!E)throw Ke(m,...v)}function Xe(E){const m="INTERNAL ASSERTION FAILED: "+E;throw Tt(m),new Error(m)}function At(E,m){E||Xe(m)}function dt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Kt(){return"http:"===ft()||"https:"===ft()}function ft(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class be{constructor(m,v){this.shortDelay=m,this.longDelay=v,At(v>m,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function de(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Me(E,m){At(E.emulator,"Emulator should always be set here");const{url:v}=E.emulator;return m?`${v}${m.startsWith("/")?m.slice(1):m}`:v}class Le{static initialize(m,v,I){this.fetchImpl=m,v&&(this.headersImpl=v),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},St=new be(3e4,6e4);function bt(E,m){return E.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:E.tenantId}):m}function Rt(E,m,v,I){return tt.apply(this,arguments)}function tt(){return(tt=(0,f.Z)(function*(E,m,v,I,A={}){return Xt(E,A,(0,f.Z)(function*(){let O={},K={};I&&("GET"===m?K=I:O={body:JSON.stringify(I)});const ae=(0,z.xO)(Object.assign({key:E.config.apiKey},K)).slice(1),je=yield E._getAdditionalHeaders();return je["Content-Type"]="application/json",E.languageCode&&(je["X-Firebase-Locale"]=E.languageCode),Le.fetch()(Xn(E,E.config.apiHost,v,ae),Object.assign({method:m,headers:je,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Xt(E,m,v){return $t.apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(E,m,v){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},ve),m);try{const A=new ti(E),O=yield Promise.race([v(),A.promise]);A.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw gr(E,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const ae=O.ok?K.errorMessage:K.error.message,[je,Ye]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw gr(E,"credential-already-in-use",K);if("EMAIL_EXISTS"===je)throw gr(E,"email-already-in-use",K);if("USER_DISABLED"===je)throw gr(E,"user-disabled",K);const gt=I[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw we(E,gt,Ye);Ae(E,gt)}}catch(A){if(A instanceof z.ZR)throw A;Ae(E,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function Ut(E,m,v,I){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(E,m,v,I,A={}){const O=yield Rt(E,m,v,I,A);return"mfaPendingCredential"in O&&Ae(E,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Xn(E,m,v,I){const A=`${m}${v}?${I}`;return E.config.emulator?Me(E.config,A):`${E.config.apiScheme}://${A}`}class ti{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((v,I)=>{this.timer=setTimeout(()=>I(ye(this.auth,"network-request-failed")),St.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gr(E,m,v){const I={appName:E.name};v.email&&(I.email=v.email),v.phoneNumber&&(I.phoneNumber=v.phoneNumber);const A=ye(E,m,I);return A.customData._tokenResponse=v,A}function ri(){return(ri=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Qi(E,m){return ws.apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Aa(E,m){return ot.apply(this,arguments)}function ot(){return(ot=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Ur(E){if(E)try{const m=new Date(Number(E));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Xi(){return(Xi=(0,f.Z)(function*(E,m=!1){const v=(0,z.m9)(E),I=yield v.getIdToken(m),A=Pn(I);ie(A&&A.exp&&A.auth_time&&A.iat,v.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,K=O?.sign_in_provider;return{claims:A,token:I,authTime:Ur(Pi(A.auth_time)),issuedAtTime:Ur(Pi(A.iat)),expirationTime:Ur(Pi(A.exp)),signInProvider:K||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Pi(E){return 1e3*Number(E)}function Pn(E){const[m,v,I]=E.split(".");if(void 0===m||void 0===v||void 0===I)return Tt("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,z.tV)(v);return A?JSON.parse(A):(Tt("Failed to decode base64 JWT payload"),null)}catch(A){return Tt("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Jt(E,m){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(E,m,v=!1){if(v)return m;try{return yield m}catch(I){throw I instanceof z.ZR&&It(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}function It({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class en{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var v;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const A=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(m=!1){var v=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,f.Z)(function*(){yield v.iteration()}),I)}iteration(){var m=this;return(0,f.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&m.schedule(!0))}m.schedule()})()}}class ii{constructor(m,v){this.createdAt=m,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ar(E){return ur.apply(this,arguments)}function ur(){return(ur=(0,f.Z)(function*(E){var m;const v=E.auth,I=yield E.getIdToken(),A=yield Jt(E,Aa(v,{idToken:I}));ie(A?.users.length,v,"internal-error");const O=A.users[0];E._notifyReloadListener(O);const K=null!==(m=O.providerUserInfo)&&void 0!==m&&m.length?Es(O.providerUserInfo):[],ae=zt(E.providerData,K),gt=!!E.isAnonymous&&!(E.email&&O.passwordHash||ae?.length),Yt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ae,metadata:new ii(O.createdAt,O.lastLoginAt),isAnonymous:gt};Object.assign(E,Yt)})).apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(E){const m=(0,z.m9)(E);yield Ar(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function zt(E,m){return[...E.filter(I=>!m.some(A=>A.providerId===I.providerId)),...m]}function Es(E){return E.map(m=>{var{providerId:v}=m,I=(0,ce._T)(m,["providerId"]);return{providerId:v,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Br(){return(Br=(0,f.Z)(function*(E,m){const v=yield Xt(E,{},(0,f.Z)(function*(){const I=(0,z.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:A,apiKey:O}=E.config,K=Xn(E,A,"/v1/token",`key=${O}`),ae=yield E._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",Le.fetch()(K,{method:"POST",headers:ae,body:I})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ie(m.idToken,"internal-error"),ie(typeof m.idToken<"u","internal-error"),ie(typeof m.refreshToken<"u","internal-error");const v="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Tn(E){const m=Pn(E);return ie(m,"internal-error"),ie(typeof m.exp<"u","internal-error"),ie(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,v)}getToken(m,v=!1){var I=this;return(0,f.Z)(function*(){return ie(!I.accessToken||I.refreshToken,m,"user-token-expired"),v||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,v){var I=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:K}=yield function on(E,m){return Br.apply(this,arguments)}(m,v);I.updateTokensAndExpiration(A,O,Number(K))})()}updateTokensAndExpiration(m,v,I){this.refreshToken=v||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,v){const{refreshToken:I,accessToken:A,expirationTime:O}=v,K=new Cn;return I&&(ie("string"==typeof I,"internal-error",{appName:m}),K.refreshToken=I),A&&(ie("string"==typeof A,"internal-error",{appName:m}),K.accessToken=A),O&&(ie("number"==typeof O,"internal-error",{appName:m}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Cn,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function mr(E,m){ie("string"==typeof E||typeof E>"u","internal-error",{appName:m})}class $n{constructor(m){var{uid:v,auth:I,stsTokenManager:A}=m,O=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new en(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=I,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new ii(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(m){var v=this;return(0,f.Z)(function*(){const I=yield Jt(v,v.stsTokenManager.getToken(v.auth,m));return ie(I,v.auth,"internal-error"),v.accessToken!==I&&(v.accessToken=I,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),I})()}getIdTokenResult(m){return function Hn(E){return Xi.apply(this,arguments)}(this,m)}reload(){return function Pt(E){return Jn.apply(this,arguments)}(this)}_assign(m){this!==m&&(ie(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(v=>Object.assign({},v)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const v=new $n(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(m){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,v=!1){var I=this;return(0,f.Z)(function*(){let A=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),A=!0),v&&(yield Ar(I)),yield I.auth._persistUserIfCurrent(I),A&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,f.Z)(function*(){const v=yield m.getIdToken();return yield Jt(m,function ni(E,m){return ri.apply(this,arguments)}(m.auth,{idToken:v})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,v){var I,A,O,K,ae,je,Ye,gt;const Yt=null!==(I=v.displayName)&&void 0!==I?I:void 0,ai=null!==(A=v.email)&&void 0!==A?A:void 0,li=null!==(O=v.phoneNumber)&&void 0!==O?O:void 0,ia=null!==(K=v.photoURL)&&void 0!==K?K:void 0,Qa=null!==(ae=v.tenantId)&&void 0!==ae?ae:void 0,sa=null!==(je=v._redirectEventId)&&void 0!==je?je:void 0,Uc=null!==(Ye=v.createdAt)&&void 0!==Ye?Ye:void 0,Hg=null!==(gt=v.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:af,emailVerified:lf,isAnonymous:uf,providerData:rs,stsTokenManager:cf}=v;ie(af&&cf,m,"internal-error");const hu=Cn.fromJSON(this.name,cf);ie("string"==typeof af,m,"internal-error"),mr(Yt,m.name),mr(ai,m.name),ie("boolean"==typeof lf,m,"internal-error"),ie("boolean"==typeof uf,m,"internal-error"),mr(li,m.name),mr(ia,m.name),mr(Qa,m.name),mr(sa,m.name),mr(Uc,m.name),mr(Hg,m.name);const fu=new $n({uid:af,auth:m,email:ai,emailVerified:lf,displayName:Yt,isAnonymous:uf,photoURL:ia,phoneNumber:li,tenantId:Qa,stsTokenManager:hu,createdAt:Uc,lastLoginAt:Hg});return rs&&Array.isArray(rs)&&(fu.providerData=rs.map(df=>Object.assign({},df))),sa&&(fu._redirectEventId=sa),fu}static _fromIdTokenResponse(m,v,I=!1){return(0,f.Z)(function*(){const A=new Cn;A.updateFromServerResponse(v);const O=new $n({uid:v.localId,auth:m,stsTokenManager:A,isAnonymous:I});return yield Ar(O),O})()}}const Oi=new Map;function yr(E){At(E instanceof Function,"Expected a class definition");let m=Oi.get(E);return m?(At(m instanceof E,"Instance stored in cache mismatched with class"),m):(m=new E,Oi.set(E,m),m)}const si=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(v,I){var A=this;return(0,f.Z)(function*(){A.storage[v]=I})()}_get(v){var I=this;return(0,f.Z)(function*(){const A=I.storage[v];return void 0===A?null:A})()}_remove(v){var I=this;return(0,f.Z)(function*(){delete I.storage[v]})()}_addListener(v,I){}_removeListener(v,I){}}return E.type="NONE",E})();function _i(E,m,v){return`firebase:${E}:${m}:${v}`}class ${constructor(m,v,I){this.persistence=m,this.auth=v,this.userKey=I;const{config:A,name:O}=this.auth;this.fullUserKey=_i(this.userKey,A.apiKey,O),this.fullPersistenceKey=_i("persistence",A.apiKey,O),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,f.Z)(function*(){const v=yield m.persistence._get(m.fullUserKey);return v?$n._fromJSON(m.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var v=this;return(0,f.Z)(function*(){if(v.persistence===m)return;const I=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=m,I?v.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,v,I="authUser"){return(0,f.Z)(function*(){if(!v.length)return new $(yr(si),m,I);const A=(yield Promise.all(v.map(function(){var Ye=(0,f.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let O=A[0]||yr(si);const K=_i(I,m.config.apiKey,m.name);let ae=null;for(const Ye of v)try{const gt=yield Ye._get(K);if(gt){const Yt=$n._fromJSON(m,gt);Ye!==O&&(ae=Yt),O=Ye;break}}catch{}const je=A.filter(Ye=>Ye._shouldAllowMigration);return O._shouldAllowMigration&&je.length?(O=je[0],ae&&(yield O._set(K,ae.toJSON())),yield Promise.all(v.map(function(){var Ye=(0,f.Z)(function*(gt){if(gt!==O)try{yield gt._remove(K)}catch{}});return function(gt){return Ye.apply(this,arguments)}}())),new $(O,m,I)):new $(O,m,I)})()}}function H(E){const m=E.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Y(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(L(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(We(m))return"Blackberry";if(pt(m))return"Webos";if(F(m))return"Safari";if((m.includes("chrome/")||P(m))&&!m.includes("edge/"))return"Chrome";if(pe(m))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function L(E=(0,z.z$)()){return/firefox\//i.test(E)}function F(E=(0,z.z$)()){const m=E.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function P(E=(0,z.z$)()){return/crios\//i.test(E)}function Y(E=(0,z.z$)()){return/iemobile/i.test(E)}function pe(E=(0,z.z$)()){return/android/i.test(E)}function We(E=(0,z.z$)()){return/blackberry/i.test(E)}function pt(E=(0,z.z$)()){return/webos/i.test(E)}function me(E=(0,z.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Je(E=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function kt(E=(0,z.z$)()){return me(E)||pe(E)||pt(E)||We(E)||/windows phone/i.test(E)||Y(E)}function vi(E,m=[]){let v;switch(E){case"Browser":v=H((0,z.z$)());break;case"Worker":v=`${H((0,z.z$)())}-${E}`;break;default:v=E}const I=m.length?m.join(","):"FirebaseCore-web";return`${v}/JsCore/${U.SDK_VERSION}/${I}`}function ne(){return(ne=(0,f.Z)(function*(E){return(yield Rt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Oe(E,m){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,f.Z)(function*(E,m){return Rt(E,"GET","/v2/recaptchaConfig",bt(E,m))})).apply(this,arguments)}function xt(E){return void 0!==E&&void 0!==E.getResponse}function Vt(E){return void 0!==E&&void 0!==E.enterprise}class pn{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function Wt(E){return new Promise((m,v)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=m,I.onerror=A=>{const O=ye("internal-error");O.customData=A,v(O)},I.type="text/javascript",I.charset="UTF-8",function Fn(){var E,m;return null!==(m=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==m?m:document}().appendChild(I)})}function Gr(E){return`__${E}${Math.floor(1e6*Math.random())}`}class oh{constructor(m){this.type="recaptcha-enterprise",this.auth=Ln(m)}verify(m="verify",v=!1){var I=this;return(0,f.Z)(function*(){function O(){return O=(0,f.Z)(function*(ae){if(!v){if(null==ae.tenantId&&null!=ae._agentRecaptchaConfig)return ae._agentRecaptchaConfig.siteKey;if(null!=ae.tenantId&&void 0!==ae._tenantRecaptchaConfigs[ae.tenantId])return ae._tenantRecaptchaConfigs[ae.tenantId].siteKey}return new Promise(function(){var je=(0,f.Z)(function*(Ye,gt){Oe(ae,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Yt=>{if(void 0!==Yt.recaptchaKey){const ai=new pn(Yt);return null==ae.tenantId?ae._agentRecaptchaConfig=ai:ae._tenantRecaptchaConfigs[ae.tenantId]=ai,Ye(ai.siteKey)}gt(new Error("recaptcha Enterprise site key undefined"))}).catch(Yt=>{gt(Yt)})});return function(Ye,gt){return je.apply(this,arguments)}}())}),O.apply(this,arguments)}function K(ae,je,Ye){const gt=window.grecaptcha;Vt(gt)?gt.enterprise.ready(()=>{gt.enterprise.execute(ae,{action:m}).then(Yt=>{je(Yt)}).catch(()=>{je("NO_RECAPTCHA")})}):Ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ae,je)=>{(function A(ae){return O.apply(this,arguments)})(I.auth).then(Ye=>{if(!v&&Vt(window.grecaptcha))K(Ye,ae,je);else{if(typeof window>"u")return void je(new Error("RecaptchaVerifier is only supported in browser"));Wt("https://www.google.com/recaptcha/enterprise.js?render="+Ye).then(()=>{K(Ye,ae,je)}).catch(gt=>{je(gt)})}}).catch(Ye=>{je(Ye)})})})()}}function an(E,m,v){return ah.apply(this,arguments)}function ah(){return(ah=(0,f.Z)(function*(E,m,v,I=!1){const A=new oh(E);let O;try{O=yield A.verify(v)}catch{O=yield A.verify(v,!0)}const K=Object.assign({},m);return Object.assign(K,I?{captchaResp:O}:{captchaResponse:O}),Object.assign(K,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(K,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),K})).apply(this,arguments)}class og{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,v){const I=O=>new Promise((K,ae)=>{try{K(m(O))}catch(je){ae(je)}});I.onAbort=v,this.queue.push(I);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(m){var v=this;return(0,f.Z)(function*(){if(v.auth.currentUser===m)return;const I=[];try{for(const A of v.queue)yield A(m),A.onAbort&&I.push(A.onAbort)}catch(A){I.reverse();for(const O of I)try{O()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Ml{constructor(m,v,I,A){this.app=m,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=I,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new js(this),this.idTokenSubscription=new js(this),this.beforeStateQueue=new og(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(m,v){var I=this;return v&&(this._popupRedirectResolver=yr(v)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,O;if(!I._deleted&&(I.persistenceManager=yield $.create(I,m),!I._deleted)){if(null!==(A=I._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(v),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,f.Z)(function*(){if(m._deleted)return;const v=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||v){if(m.currentUser&&v&&m.currentUser.uid===v.uid)return m._currentUser._assign(v),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(v,!0)}})()}initializeCurrentUser(m){var v=this;return(0,f.Z)(function*(){var I;const A=yield v.assertedPersistence.getCurrentUser();let O=A,K=!1;if(m&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const ae=null===(I=v.redirectUser)||void 0===I?void 0:I._redirectEventId,je=O?._redirectEventId,Ye=yield v.tryRedirectSignIn(m);(!ae||ae===je)&&Ye?.user&&(O=Ye.user,K=!0)}if(!O)return v.directlySetCurrentUser(null);if(!O._redirectEventId){if(K)try{yield v.beforeStateQueue.runMiddleware(O)}catch(ae){O=A,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(ae))}return O?v.reloadAndSetCurrentUserOrClear(O):v.directlySetCurrentUser(null)}return ie(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===O._redirectEventId?v.directlySetCurrentUser(O):v.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(m){var v=this;return(0,f.Z)(function*(){let I=null;try{I=yield v._popupRedirectResolver._completeRedirectFn(v,m,!0)}catch{yield v._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var v=this;return(0,f.Z)(function*(){try{yield Ar(m)}catch(I){if("auth/network-request-failed"!==I?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function he(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var m=this;return(0,f.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var v=this;return(0,f.Z)(function*(){const I=m?(0,z.m9)(m):null;return I&&ie(I.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(I&&I._clone(v))})()}_updateCurrentUser(m,v=!1){var I=this;return(0,f.Z)(function*(){if(!I._deleted)return m&&ie(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),v||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,f.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,f.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var v=this;return this.queue((0,f.Z)(function*(){yield v.assertedPersistence.setPersistence(yr(m))}))}initializeRecaptchaConfig(){var m=this;return(0,f.Z)(function*(){const v=yield Oe(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new pn(v);null==m.tenantId?m._agentRecaptchaConfig=I:m._tenantRecaptchaConfigs[m.tenantId]=I,I.emailPasswordEnabled&&new oh(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new z.LL("auth","Firebase",m())}onAuthStateChanged(m,v,I){return this.registerStateListener(this.authStateSubscription,m,v,I)}beforeAuthStateChanged(m,v){return this.beforeStateQueue.pushCallback(m,v)}onIdTokenChanged(m,v,I){return this.registerStateListener(this.idTokenSubscription,m,v,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,v){var I=this;return(0,f.Z)(function*(){const A=yield I.getOrInitRedirectPersistenceManager(v);return null===m?A.removeCurrentUser():A.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var v=this;return(0,f.Z)(function*(){if(!v.redirectPersistenceManager){const I=m&&yr(m)||v._popupRedirectResolver;ie(I,v,"argument-error"),v.redirectPersistenceManager=yield $.create(v,[yr(I._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(m){var v=this;return(0,f.Z)(function*(){var I,A;return v._isInitialized&&(yield v.queue((0,f.Z)(function*(){}))),(null===(I=v._currentUser)||void 0===I?void 0:I._redirectEventId)===m?v._currentUser:(null===(A=v.redirectUser)||void 0===A?void 0:A._redirectEventId)===m?v.redirectUser:null})()}_persistUserIfCurrent(m){var v=this;return(0,f.Z)(function*(){if(m===v.currentUser)return v.queue((0,f.Z)(function*(){return v.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(v=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,v,I,A){if(this._deleted)return()=>{};const O="function"==typeof v?v:v.next.bind(v),K=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof v?m.addObserver(v,I,A):m.addObserver(v)}directlySetCurrentUser(m){var v=this;return(0,f.Z)(function*(){v.currentUser&&v.currentUser!==m&&v._currentUser._stopProactiveRefresh(),m&&v.isProactiveRefreshEnabled&&m._startProactiveRefresh(),v.currentUser=m,m?yield v.assertedPersistence.setCurrentUser(m):yield v.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=vi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,f.Z)(function*(){var v;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const A=yield null===(v=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();A&&(I["X-Firebase-Client"]=A);const O=yield m._getAppCheckToken();return O&&(I["X-Firebase-AppCheck"]=O),I})()}_getAppCheckToken(){var m=this;return(0,f.Z)(function*(){var v;const I=yield null===(v=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return I?.error&&function ht(E,...m){_e.logLevel<=Se.in.WARN&&_e.warn(`Auth (${U.SDK_VERSION}): ${E}`,...m)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Ln(E){return(0,z.m9)(E)}class js{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,z.ne)(v=>this.observer=v)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function er(E,m,v){const I=Ln(E);ie(I._canInitEmulator,I,"emulator-config-failed"),ie(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const A=!!v?.disableWarnings,O=ag(m),{host:K,port:ae}=function Wr(E){const m=ag(E),v=/(\/\/)?([^?#/]+)/.exec(E.substr(m.length));if(!v)return{host:"",port:null};const I=v[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(I);if(A){const O=A[1];return{host:O,port:oi(I.substr(O.length+1))}}{const[O,K]=I.split(":");return{host:O,port:oi(K)}}}(m);I.config.emulator={url:`${O}//${K}${null===ae?"":`:${ae}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:K,port:ae,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Rl(){function E(){const m=document.createElement("p"),v=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function ag(E){const m=E.indexOf(":");return m<0?"":E.substr(0,m+1)}function oi(E){if(!E)return null;const m=Number(E);return isNaN(m)?null:m}class Hs{constructor(m,v){this.providerId=m,this.signInMethod=v}toJSON(){return Xe("not implemented")}_getIdTokenResponse(m){return Xe("not implemented")}_linkToIdToken(m,v){return Xe("not implemented")}_getReauthenticationResolver(m){return Xe("not implemented")}}function Pl(E,m){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:resetPassword",bt(E,m))})).apply(this,arguments)}function lh(E,m){return lg.apply(this,arguments)}function lg(){return(lg=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function V_(E,m){return uh.apply(this,arguments)}function uh(){return(uh=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:update",bt(E,m))})).apply(this,arguments)}function U_(E,m){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithPassword",bt(E,m))})).apply(this,arguments)}function ch(E,m){return ug.apply(this,arguments)}function ug(){return(ug=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:sendOobCode",bt(E,m))})).apply(this,arguments)}function zE(E,m){return cg.apply(this,arguments)}function cg(){return(cg=(0,f.Z)(function*(E,m){return ch(E,m)})).apply(this,arguments)}function dg(E,m){return hg.apply(this,arguments)}function hg(){return(hg=(0,f.Z)(function*(E,m){return ch(E,m)})).apply(this,arguments)}function fg(E,m){return pg.apply(this,arguments)}function pg(){return(pg=(0,f.Z)(function*(E,m){return ch(E,m)})).apply(this,arguments)}function GE(E,m){return gg.apply(this,arguments)}function gg(){return(gg=(0,f.Z)(function*(E,m){return ch(E,m)})).apply(this,arguments)}function mg(){return(mg=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithEmailLink",bt(E,m))})).apply(this,arguments)}function Ol(){return(Ol=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithEmailLink",bt(E,m))})).apply(this,arguments)}class sc extends Hs{constructor(m,v,I,A=null){super("password",I),this._email=m,this._password=v,this._tenantId=A}static _fromEmailAndPassword(m,v){return new sc(m,v,"password")}static _fromEmailAndCode(m,v,I=null){return new sc(m,v,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(m){var v=this;return(0,f.Z)(function*(){var I;switch(v.signInMethod){case"password":const A={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=m._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const O=yield an(m,A,"signInWithPassword");return U_(m,O)}return U_(m,A).catch(function(){var O=(0,f.Z)(function*(K){if("auth/missing-recaptcha-token"===K.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ae=yield an(m,A,"signInWithPassword");return U_(m,ae)}return Promise.reject(K)});return function(K){return O.apply(this,arguments)}}());case"emailLink":return function B_(E,m){return mg.apply(this,arguments)}(m,{email:v._email,oobCode:v._password});default:Ae(m,"internal-error")}})()}_linkToIdToken(m,v){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return lh(m,{idToken:v,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function yg(E,m){return Ol.apply(this,arguments)}(m,{idToken:v,email:I._email,oobCode:I._password});default:Ae(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function fo(E,m){return _g.apply(this,arguments)}function _g(){return(_g=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithIdp",bt(E,m))})).apply(this,arguments)}class Cs extends Hs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const v=new Cs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(v.idToken=m.idToken),m.accessToken&&(v.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(v.nonce=m.nonce),m.pendingToken&&(v.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(v.accessToken=m.oauthToken,v.secret=m.oauthTokenSecret):Ae("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:A}=v,O=(0,ce._T)(v,["providerId","signInMethod"]);if(!I||!A)return null;const K=new Cs(I,A);return K.idToken=O.idToken||void 0,K.accessToken=O.accessToken||void 0,K.secret=O.secret,K.nonce=O.nonce,K.pendingToken=O.pendingToken||null,K}_getIdTokenResponse(m){return fo(m,this.buildRequest())}_linkToIdToken(m,v){const I=this.buildRequest();return I.idToken=v,fo(m,I)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,fo(m,v)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),m.postBody=(0,z.xO)(v)}return m}}function dh(E,m){return oc.apply(this,arguments)}function oc(){return(oc=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:sendVerificationCode",bt(E,m))})).apply(this,arguments)}function Nl(){return(Nl=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithPhoneNumber",bt(E,m))})).apply(this,arguments)}function fh(){return(fh=(0,f.Z)(function*(E,m){const v=yield Ut(E,"POST","/v1/accounts:signInWithPhoneNumber",bt(E,m));if(v.temporaryProof)throw gr(E,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const j_={USER_NOT_FOUND:"user-not-found"};function ph(){return(ph=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithPhoneNumber",bt(E,Object.assign(Object.assign({},m),{operation:"REAUTH"})),j_)})).apply(this,arguments)}class _r extends Hs{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,v){return new _r({verificationId:m,verificationCode:v})}static _fromTokenResponse(m,v){return new _r({phoneNumber:m,temporaryProof:v})}_getIdTokenResponse(m){return function hh(E,m){return Nl.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,v){return function vg(E,m){return fh.apply(this,arguments)}(m,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function ac(E,m){return ph.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:v,verificationId:I,verificationCode:A}=this.params;return m&&v?{temporaryProof:m,phoneNumber:v}:{sessionInfo:I,code:A}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:v,verificationCode:I,phoneNumber:A,temporaryProof:O}=m;return I||v||A||O?new _r({verificationId:v,verificationCode:I,phoneNumber:A,temporaryProof:O}):null}}class go{constructor(m){var v,I,A,O,K,ae;const je=(0,z.zd)((0,z.pd)(m)),Ye=null!==(v=je.apiKey)&&void 0!==v?v:null,gt=null!==(I=je.oobCode)&&void 0!==I?I:null,Yt=function gh(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=je.mode)&&void 0!==A?A:null);ie(Ye&&gt&&Yt,"argument-error"),this.apiKey=Ye,this.operation=Yt,this.code=gt,this.continueUrl=null!==(O=je.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=je.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ae=je.tenantId)&&void 0!==ae?ae:null}static parseLink(m){const v=function WE(E){const m=(0,z.zd)((0,z.pd)(E)).link,v=m?(0,z.zd)((0,z.pd)(m)).deep_link_id:null,I=(0,z.zd)((0,z.pd)(E)).deep_link_id;return(I?(0,z.zd)((0,z.pd)(I)).link:null)||I||v||m||E}(m);try{return new go(v)}catch{return null}}}let H_=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(v,I){return sc._fromEmailAndPassword(v,I)}static credentialWithLink(v,I){const A=go.parseLink(I);return ie(A,"argument-error"),sc._fromEmailAndCode(v,A.code,A.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class wn{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ma extends wn{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class lc extends Ma{static credentialFromJSON(m){const v="string"==typeof m?JSON.parse(m):m;return ie("providerId"in v&&"signInMethod"in v,"argument-error"),Cs._fromParams(v)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ie(m.idToken||m.accessToken,"argument-error"),Cs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return lc.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return lc.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:v,oauthAccessToken:I,oauthTokenSecret:A,pendingToken:O,nonce:K,providerId:ae}=m;if(!I&&!A&&!v&&!O||!ae)return null;try{return new lc(ae)._credential({idToken:v,accessToken:I,nonce:K,pendingToken:O})}catch{return null}}}let Fl=(()=>{class E extends Ma{constructor(){super("facebook.com")}static credential(v){return Cs._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return E.credential(v.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),bi=(()=>{class E extends Ma{constructor(){super("google.com"),this.addScope("profile")}static credential(v,I){return Cs._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:I})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:I,oauthAccessToken:A}=v;if(!I&&!A)return null;try{return E.credential(I,A)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),qE=(()=>{class E extends Ma{constructor(){super("github.com")}static credential(v){return Cs._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return E.credential(v.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ds extends Hs{constructor(m,v){super(m,m),this.pendingToken=v}_getIdTokenResponse(m){return fo(m,this.buildRequest())}_linkToIdToken(m,v){const I=this.buildRequest();return I.idToken=v,fo(m,I)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,fo(m,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:A,pendingToken:O}=v;return I&&A&&O&&I===A?new Ds(I,O):null}static _create(m,v){return new Ds(m,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yh extends wn{constructor(m){ie(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return yh.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return yh.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const v=Ds.fromJSON(m);return ie(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:v,providerId:I}=m;if(!v||!I)return null;try{return Ds._create(I,v)}catch{return null}}}let ka=(()=>{class E extends Ma{constructor(){super("twitter.com")}static credential(v,I){return Cs._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:I})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:I,oauthTokenSecret:A}=v;if(!I||!A)return null;try{return E.credential(I,A)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function _h(E,m){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signUp",bt(E,m))})).apply(this,arguments)}class wi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,v,I,A=!1){return(0,f.Z)(function*(){const O=yield $n._fromIdTokenResponse(m,I,A),K=uc(I);return new wi({user:O,providerId:K,_tokenResponse:I,operationType:v})})()}static _forOperation(m,v,I){return(0,f.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const A=uc(I);return new wi({user:m,providerId:A,_tokenResponse:I,operationType:v})})()}}function uc(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Lt(E){return vh.apply(this,arguments)}function vh(){return(vh=(0,f.Z)(function*(E){var m;const v=Ln(E);if(yield v._initializationPromise,null!==(m=v.currentUser)&&void 0!==m&&m.isAnonymous)return new wi({user:v.currentUser,providerId:null,operationType:"signIn"});const I=yield _h(v,{returnSecureToken:!0}),A=yield wi._fromIdTokenResponse(v,"signIn",I,!0);return yield v._updateCurrentUser(A.user),A})).apply(this,arguments)}class bg extends z.ZR{constructor(m,v,I,A){var O;super(v.code,v.message),this.operationType=I,this.user=A,Object.setPrototypeOf(this,bg.prototype),this.customData={appName:m.name,tenantId:null!==(O=m.tenantId)&&void 0!==O?O:void 0,_serverResponse:v.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,v,I,A){return new bg(m,v,I,A)}}function wg(E,m,v,I){return("reauthenticate"===m?v._getReauthenticationResolver(E):v._getIdTokenResponse(E)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?bg._fromErrorAndOperation(E,O,m,I):O})}function Eg(E){return new Set(E.map(({providerId:m})=>m).filter(m=>!!m))}function $_(E,m){return Go.apply(this,arguments)}function Go(){return(Go=(0,f.Z)(function*(E,m){const v=(0,z.m9)(E);yield Ee(!0,v,m);const{providerUserInfo:I}=yield Qi(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[m]}),A=Eg(I||[]);return v.providerData=v.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function bh(E,m){return wh.apply(this,arguments)}function wh(){return(wh=(0,f.Z)(function*(E,m,v=!1){const I=yield Jt(E,m._linkToIdToken(E.auth,yield E.getIdToken()),v);return wi._forOperation(E,"link",I)})).apply(this,arguments)}function Ee(E,m,v){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(E,m,v){yield Ar(m);const A=!1===E?"provider-already-linked":"no-such-provider";ie(Eg(m.providerData).has(v)===E,m.auth,A)})).apply(this,arguments)}function Ig(E,m){return cc.apply(this,arguments)}function cc(){return(cc=(0,f.Z)(function*(E,m,v=!1){const{auth:I}=E,A="reauthenticate";try{const O=yield Jt(E,wg(I,A,m,E),v);ie(O.idToken,I,"internal-error");const K=Pn(O.idToken);ie(K,I,"internal-error");const{sub:ae}=K;return ie(E.uid===ae,I,"user-mismatch"),wi._forOperation(E,A,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ae(I,"user-mismatch"),O}})).apply(this,arguments)}function cr(E,m){return dc.apply(this,arguments)}function dc(){return(dc=(0,f.Z)(function*(E,m,v=!1){const I="signIn",A=yield wg(E,I,m),O=yield wi._fromIdTokenResponse(E,I,A);return v||(yield E._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Wo(E,m){return Li.apply(this,arguments)}function Li(){return(Li=(0,f.Z)(function*(E,m){return cr(Ln(E),m)})).apply(this,arguments)}function Eh(E,m){return hc.apply(this,arguments)}function hc(){return(hc=(0,f.Z)(function*(E,m){const v=(0,z.m9)(E);return yield Ee(!1,v,m.providerId),bh(v,m)})).apply(this,arguments)}function Cg(E,m){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,f.Z)(function*(E,m){return Ig((0,z.m9)(E),m)})).apply(this,arguments)}function ZE(E,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(E,m){return Ut(E,"POST","/v1/accounts:signInWithCustomToken",bt(E,m))})).apply(this,arguments)}function dr(E,m){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(E,m){const v=Ln(E),I=yield ZE(v,{token:m,returnSecureToken:!0}),A=yield wi._fromIdTokenResponse(v,"signIn",I);return yield v._updateCurrentUser(A.user),A})).apply(this,arguments)}class qo{constructor(m,v){this.factorId=m,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(m,v){return"phoneInfo"in v?Zo._fromServerResponse(m,v):"totpInfo"in v?Ss._fromServerResponse(m,v):Ae(m,"internal-error")}}class Zo extends qo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,v){return new Zo(v)}}class Ss extends qo{constructor(m){super("totp",m)}static _fromServerResponse(m,v){return new Ss(v)}}function Ll(E,m,v){var I;ie((null===(I=v.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),ie(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),m.continueUrl=v.url,m.dynamicLinkDomain=v.dynamicLinkDomain,m.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(ie(v.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),m.iOSBundleId=v.iOS.bundleId),v.android&&(ie(v.android.packageName.length>0,E,"missing-android-pkg-name"),m.androidInstallApp=v.android.installApp,m.androidMinimumVersionCode=v.android.minimumVersion,m.androidPackageName=v.android.packageName)}function z_(E,m,v){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,f.Z)(function*(E,m,v){var I;const A=Ln(E),O={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const K=yield an(A,O,"getOobCode",!0);v&&Ll(A,K,v),yield dg(A,K)}else v&&Ll(A,O,v),yield dg(A,O).catch(function(){var K=(0,f.Z)(function*(ae){if("auth/missing-recaptcha-token"!==ae.code)return Promise.reject(ae);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const je=yield an(A,O,"getOobCode",!0);v&&Ll(A,je,v),yield dg(A,je)}});return function(ae){return K.apply(this,arguments)}}())}),Dg.apply(this,arguments)}function KE(E,m,v){return fc.apply(this,arguments)}function fc(){return(fc=(0,f.Z)(function*(E,m,v){yield Pl((0,z.m9)(E),{oobCode:m,newPassword:v})})).apply(this,arguments)}function Ch(E,m){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,f.Z)(function*(E,m){yield V_((0,z.m9)(E),{oobCode:m})})).apply(this,arguments)}function pc(E,m){return Th.apply(this,arguments)}function Th(){return(Th=(0,f.Z)(function*(E,m){const v=(0,z.m9)(E),I=yield Pl(v,{oobCode:m}),A=I.requestType;switch(ie(A,v,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(I.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(I.mfaInfo,v,"internal-error");default:ie(I.email,v,"internal-error")}let O=null;return I.mfaInfo&&(O=qo._fromServerResponse(Ln(v),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function G_(E,m){return gc.apply(this,arguments)}function gc(){return(gc=(0,f.Z)(function*(E,m){const{data:v}=yield pc((0,z.m9)(E),m);return v.email})).apply(this,arguments)}function W_(E,m,v){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,f.Z)(function*(E,m,v){var I;const A=Ln(E),O={returnSecureToken:!0,email:m,password:v,clientType:"CLIENT_TYPE_WEB"};let K;if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Ye=yield an(A,O,"signUpPassword");K=_h(A,Ye)}else K=_h(A,O).catch(function(){var Ye=(0,f.Z)(function*(gt){if("auth/missing-recaptcha-token"===gt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Yt=yield an(A,O,"signUpPassword");return _h(A,Yt)}return Promise.reject(gt)});return function(gt){return Ye.apply(this,arguments)}}());const ae=yield K.catch(Ye=>Promise.reject(Ye)),je=yield wi._fromIdTokenResponse(A,"signIn",ae);return yield A._updateCurrentUser(je.user),je}),Sh.apply(this,arguments)}function q_(E,m,v){return Wo((0,z.m9)(E),H_.credential(m,v))}function Tg(E,m,v){return Ko.apply(this,arguments)}function Ko(){return Ko=(0,f.Z)(function*(E,m,v){var I;const A=Ln(E),O={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function K(ae,je){ie(je.handleCodeInApp,A,"argument-error"),je&&Ll(A,ae,je)}if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const ae=yield an(A,O,"getOobCode",!0);K(ae,v),yield fg(A,ae)}else K(O,v),yield fg(A,O).catch(function(){var ae=(0,f.Z)(function*(je){if("auth/missing-recaptcha-token"!==je.code)return Promise.reject(je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ye=yield an(A,O,"getOobCode",!0);K(Ye,v),yield fg(A,Ye)}});return function(je){return ae.apply(this,arguments)}}())}),Ko.apply(this,arguments)}function Vl(E,m){return"EMAIL_SIGNIN"===go.parseLink(m)?.operation}function Z_(E,m,v){return tr.apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E),A=H_.credentialWithLink(m,v||dt());return ie(A._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Wo(I,A)})).apply(this,arguments)}function mo(E,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:createAuthUri",bt(E,m))})).apply(this,arguments)}function K_(E,m){return xh.apply(this,arguments)}function xh(){return(xh=(0,f.Z)(function*(E,m){const I={identifier:m,continueUri:Kt()?dt():"http://localhost"},{signinMethods:A}=yield mo((0,z.m9)(E),I);return A||[]})).apply(this,arguments)}function Y_(E,m){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,f.Z)(function*(E,m){const v=(0,z.m9)(E),A={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};m&&Ll(v.auth,A,m);const{email:O}=yield zE(v.auth,A);O!==E.email&&(yield E.reload())})).apply(this,arguments)}function mc(E,m,v){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:m};v&&Ll(I.auth,O,v);const{email:K}=yield GE(I.auth,O);K!==E.email&&(yield E.reload())})).apply(this,arguments)}function Ul(E,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(E,m){return Rt(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function yo(E,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(E,{displayName:m,photoURL:v}){if(void 0===m&&void 0===v)return;const I=(0,z.m9)(E),O={idToken:yield I.getIdToken(),displayName:m,photoUrl:v,returnSecureToken:!0},K=yield Jt(I,Ul(I.auth,O));I.displayName=K.displayName||null,I.photoURL=K.photoUrl||null;const ae=I.providerData.find(({providerId:je})=>"password"===je);ae&&(ae.displayName=I.displayName,ae.photoURL=I.photoURL),yield I._updateTokensIfNecessary(K)})).apply(this,arguments)}function yc(E,m){return xs((0,z.m9)(E),m,null)}function Mh(E,m){return xs((0,z.m9)(E),null,m)}function xs(E,m,v){return _o.apply(this,arguments)}function _o(){return(_o=(0,f.Z)(function*(E,m,v){const{auth:I}=E,O={idToken:yield E.getIdToken(),returnSecureToken:!0};m&&(O.email=m),v&&(O.password=v);const K=yield Jt(E,lh(I,O));yield E._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Na{constructor(m,v,I={}){this.isNewUser=m,this.providerId=v,this.profile=I}}class Fa extends Na{constructor(m,v,I,A){super(m,v,I),this.username=A}}class kh extends Na{constructor(m,v){super(m,"facebook.com",v)}}class _c extends Fa{constructor(m,v){super(m,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Sg extends Na{constructor(m,v){super(m,"google.com",v)}}class nA extends Fa{constructor(m,v,I){super(m,"twitter.com",v,I)}}function Rh(E){const{user:m,_tokenResponse:v}=E;return m.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Q_(E){var m,v;if(!E)return null;const{providerId:I}=E,A=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},O=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&E?.idToken){const K=null===(v=null===(m=Pn(E.idToken))||void 0===m?void 0:m.firebase)||void 0===v?void 0:v.sign_in_provider;if(K)return new Na(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!I)return null;switch(I){case"facebook.com":return new kh(O,A);case"github.com":return new _c(O,A);case"google.com":return new Sg(O,A);case"twitter.com":return new nA(O,A,E.screenName||null);case"custom":case"anonymous":return new Na(O,null);default:return new Na(O,I,A)}}(v)}class As{constructor(m,v,I){this.type=m,this.credential=v,this.auth=I}static _fromIdtoken(m,v){return new As("enroll",m,v)}static _fromMfaPendingCredential(m){return new As("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var v,I;if(m?.multiFactorSession){if(null!==(v=m.multiFactorSession)&&void 0!==v&&v.pendingCredential)return As._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return As._fromIdtoken(m.multiFactorSession.idToken)}return null}}class vc{constructor(m,v,I){this.session=m,this.hints=v,this.signInResolver=I}static _fromError(m,v){const I=Ln(m),A=v.customData._serverResponse,O=(A.mfaInfo||[]).map(ae=>qo._fromServerResponse(I,ae));ie(A.mfaPendingCredential,I,"internal-error");const K=As._fromMfaPendingCredential(A.mfaPendingCredential);return new vc(K,O,function(){var ae=(0,f.Z)(function*(je){const Ye=yield je._process(I,K);delete A.mfaInfo,delete A.mfaPendingCredential;const gt=Object.assign(Object.assign({},A),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(v.operationType){case"signIn":const Yt=yield wi._fromIdTokenResponse(I,v.operationType,gt);return yield I._updateCurrentUser(Yt.user),Yt;case"reauthenticate":return ie(v.user,I,"internal-error"),wi._forOperation(v.user,v.operationType,gt);default:Ae(I,"internal-error")}});return function(je){return ae.apply(this,arguments)}}())}resolveSignIn(m){var v=this;return(0,f.Z)(function*(){return v.signInResolver(m)})()}}function nv(E,m){var v;const I=(0,z.m9)(E),A=m;return ie(m.customData.operationType,I,"argument-error"),ie(null===(v=A.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,I,"argument-error"),vc._fromError(I,A)}function rv(E,m){return Rt(E,"POST","/v2/accounts/mfaEnrollment:start",bt(E,m))}class Wl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(I=>qo._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Wl(m)}getSession(){var m=this;return(0,f.Z)(function*(){return As._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,v){var I=this;return(0,f.Z)(function*(){const A=m,O=yield I.getSession(),K=yield Jt(I.user,A._process(I.user.auth,O,v));return yield I.user._updateTokensIfNecessary(K),I.user.reload()})()}unenroll(m){var v=this;return(0,f.Z)(function*(){const I="string"==typeof m?m:m.uid,A=yield v.user.getIdToken();try{const O=yield Jt(v.user,function Gl(E,m){return Rt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",bt(E,m))}(v.user.auth,{idToken:A,mfaEnrollmentId:I}));v.enrolledFactors=v.enrolledFactors.filter(({uid:K})=>K!==I),yield v.user._updateTokensIfNecessary(O),yield v.user.reload()}catch(O){throw O}})()}}const La=new WeakMap;function bc(E){const m=(0,z.m9)(E);return La.has(m)||La.set(m,Wl._fromUser(m)),La.get(m)}const bo="__sak";class Oh{constructor(m,v){this.storageRetriever=m,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(bo,"1"),this.storage.removeItem(bo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,v){return this.storage.setItem(m,JSON.stringify(v)),Promise.resolve()}_get(m){const v=this.storage.getItem(m);return Promise.resolve(v?JSON.parse(v):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const av=(()=>{class E extends Oh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,I)=>this.onStorageEvent(v,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Nh(){const E=(0,z.z$)();return F(E)||me(E)}()&&function cn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const I of Object.keys(this.listeners)){const A=this.storage.getItem(I),O=this.localCache[I];A!==O&&v(I,O,A)}}onStorageEvent(v,I=!1){if(!v.key)return void this.forAllChangedKeys((ae,je,Ye)=>{this.notifyListeners(ae,Ye)});const A=v.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(A);if(v.newValue!==ae)null!==v.newValue?this.storage.setItem(A,v.newValue):this.storage.removeItem(A);else if(this.localCache[A]===v.newValue&&!I)return}const O=()=>{const ae=this.storage.getItem(A);!I&&this.localCache[A]===ae||this.notifyListeners(A,ae)},K=this.storage.getItem(A);!function tn(){return(0,z.w1)()&&10===document.documentMode}()||K===v.newValue||v.newValue===v.oldValue?O():setTimeout(O,10)}notifyListeners(v,I){this.localCache[v]=I;const A=this.listeners[v];if(A)for(const O of Array.from(A))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,I,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:I,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(I)}_removeListener(v,I){this.listeners[v]&&(this.listeners[v].delete(I),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,I){var A=()=>super._set,O=this;return(0,f.Z)(function*(){yield A().call(O,v,I),O.localCache[v]=JSON.stringify(I)})()}_get(v){var I=()=>super._get,A=this;return(0,f.Z)(function*(){const O=yield I().call(A,v);return A.localCache[v]=JSON.stringify(O),O})()}_remove(v){var I=()=>super._remove,A=this;return(0,f.Z)(function*(){yield I().call(A,v),delete A.localCache[v]})()}}return E.type="LOCAL",E})(),wo=(()=>{class E extends Oh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,I){}_removeListener(v,I){}}return E.type="SESSION",E})();let Ag=(()=>{class E{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const I=this.receivers.find(O=>O.isListeningto(v));if(I)return I;const A=new E(v);return this.receivers.push(A),A}isListeningto(v){return this.eventTarget===v}handleEvent(v){var I=this;return(0,f.Z)(function*(){const A=v,{eventId:O,eventType:K,data:ae}=A.data,je=I.handlersMap[K];if(!je?.size)return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const Ye=Array.from(je).map(function(){var Yt=(0,f.Z)(function*(ai){return ai(A.origin,ae)});return function(ai){return Yt.apply(this,arguments)}}()),gt=yield function lv(E){return Promise.all(E.map(function(){var m=(0,f.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(I){return{fulfilled:!1,reason:I}}});return function(v){return m.apply(this,arguments)}}()))}(Ye);A.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:gt})})()}_subscribe(v,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(I)}_unsubscribe(v,I){this.handlersMap[v]&&I&&this.handlersMap[v].delete(I),(!I||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function ql(E="",m=10){let v="";for(let I=0;I<m;I++)v+=Math.floor(10*Math.random());return E+v}class Zl{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,v,I=50){var A=this;return(0,f.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,ae;return new Promise((je,Ye)=>{const gt=ql("",20);O.port1.start();const Yt=setTimeout(()=>{Ye(new Error("unsupported_event"))},I);ae={messageChannel:O,onMessage(ai){const li=ai;if(li.data.eventId===gt)switch(li.data.status){case"ack":clearTimeout(Yt),K=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),je(li.data.response);break;default:clearTimeout(Yt),clearTimeout(K),Ye(new Error("invalid_response"))}}},A.handlers.add(ae),O.port1.addEventListener("message",ae.onMessage),A.target.postMessage({eventType:m,eventId:gt,data:v},[O.port2])}).finally(()=>{ae&&A.removeMessageHandler(ae)})})()}}function zn(){return window}function Kl(){return typeof zn().WorkerGlobalScope<"u"&&"function"==typeof zn().importScripts}function Va(){return(Va=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ua="firebaseLocalStorageDb",Xl="firebaseLocalStorage",Vh="fbase_key";class zs{constructor(m){this.request=m}toPromise(){return new Promise((m,v)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Mg(E,m){return E.transaction([Xl],m?"readwrite":"readonly").objectStore(Xl)}function vn(){const E=indexedDB.open(Ua,1);return new Promise((m,v)=>{E.addEventListener("error",()=>{v(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(Xl,{keyPath:Vh})}catch(A){v(A)}}),E.addEventListener("success",(0,f.Z)(function*(){const I=E.result;I.objectStoreNames.contains(Xl)?m(I):(I.close(),yield function YE(){const E=indexedDB.deleteDatabase(Ua);return new zs(E).toPromise()}(),m(yield vn()))}))})}function cv(E,m,v){return dv.apply(this,arguments)}function dv(){return(dv=(0,f.Z)(function*(E,m,v){const I=Mg(E,!0).put({[Vh]:m,value:v});return new zs(I).toPromise()})).apply(this,arguments)}function hv(){return(hv=(0,f.Z)(function*(E,m){const v=Mg(E,!1).get(m),I=yield new zs(v).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function QE(E,m){const v=Mg(E,!0).delete(m);return new zs(v).toPromise()}const XE=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,f.Z)(function*(){return v.db||(v.db=yield vn()),v.db})()}_withRetries(v){var I=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const O=yield I._openDb();return yield v(O)}catch(O){if(A++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,f.Z)(function*(){return Kl()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,f.Z)(function*(){v.receiver=Ag._getInstance(function Yl(){return Kl()?self:null}()),v.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(A,O){return{keyProcessed:(yield v._poll()).includes(O.key)}});return function(A,O){return I.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return I.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,f.Z)(function*(){var I,A;if(v.activeServiceWorker=yield function uv(){return Va.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Zl(v.activeServiceWorker);const O=yield v.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function wc(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:v},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const v=yield vn();return yield cv(v,bo,"1"),yield QE(v,bo),!0}catch{}return!1})()}_withPendingWrite(v){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield v()}finally{I.pendingWrites--}})()}_set(v,I){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(O=>cv(O,v,I)),A.localCache[v]=I,A.notifyServiceWorker(v)}))})()}_get(v){var I=this;return(0,f.Z)(function*(){const A=yield I._withRetries(O=>function rA(E,m){return hv.apply(this,arguments)}(O,v));return I.localCache[v]=A,A})()}_remove(v){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(A=>QE(A,v)),delete I.localCache[v],I.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,f.Z)(function*(){const I=yield v._withRetries(K=>{const ae=Mg(K,!1).getAll();return new zs(ae).toPromise()});if(!I)return[];if(0!==v.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:K,value:ae}of I)O.add(K),JSON.stringify(v.localCache[K])!==JSON.stringify(ae)&&(v.notifyListeners(K,ae),A.push(K));for(const K of Object.keys(v.localCache))v.localCache[K]&&!O.has(K)&&(v.notifyListeners(K,null),A.push(K));return A})()}notifyListeners(v,I){this.localCache[v]=I;const A=this.listeners[v];if(A)for(const O of Array.from(A))O(I)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(I)}_removeListener(v,I){this.listeners[v]&&(this.listeners[v].delete(I),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function JE(E,m){return Rt(E,"POST","/v2/accounts/mfaSignIn:start",bt(E,m))}const Ba=1e12;class br{constructor(m){this.auth=m,this.counter=Ba,this._widgets=new Map}render(m,v){const I=this.counter;return this._widgets.set(I,new Io(m,this.auth.name,v||{})),this.counter++,I}reset(m){var v;const I=m||Ba;null===(v=this._widgets.get(I))||void 0===v||v.delete(),this._widgets.delete(I)}getResponse(m){var v;return(null===(v=this._widgets.get(m||Ba))||void 0===v?void 0:v.getResponse())||""}execute(m){var v=this;return(0,f.Z)(function*(){var I;return null===(I=v._widgets.get(m||Ba))||void 0===I||I.execute(),""})()}}class Io{constructor(m,v,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof m?document.getElementById(m):m;ie(A,"argument-error",{appName:v}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bh(E){const m=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<E;I++)m.push(v.charAt(Math.floor(Math.random()*v.length)));return m.join("")}(50);const{callback:m,"expired-callback":v}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wr=Gr("rcb"),Ic=new be(3e4,6e4);class ja{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=zn().grecaptcha)||void 0===m||!m.render)}load(m,v=""){return ie(function eI(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(v),m,"argument-error"),this.shouldResolveImmediately(v)&&xt(zn().grecaptcha)?Promise.resolve(zn().grecaptcha):new Promise((I,A)=>{const O=zn().setTimeout(()=>{A(ye(m,"network-request-failed"))},Ic.get());zn()[wr]=()=>{zn().clearTimeout(O),delete zn()[wr];const ae=zn().grecaptcha;if(!ae||!xt(ae))return void A(ye(m,"internal-error"));const je=ae.render;ae.render=(Ye,gt)=>{const Yt=je(Ye,gt);return this.counter++,Yt},this.hostLanguage=v,I(ae)},Wt(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:wr,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(O),A(ye(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var v;return!(null===(v=zn().grecaptcha)||void 0===v||!v.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oA{load(m){return(0,f.Z)(function*(){return new br(m)})()}clearedOneInstance(){}}const tI="recaptcha",pv={theme:"light",type:"image"};class Ui{constructor(m,v=Object.assign({},pv),I){this.parameters=v,this.type=tI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(I),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof m?document.getElementById(m):m;ie(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oA:new ja,this.validateStartingState()}verify(){var m=this;return(0,f.Z)(function*(){m.assertNotDestroyed();const v=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(v)||new Promise(O=>{const K=ae=>{!ae||(m.tokenChangeListeners.delete(K),O(ae))};m.tokenChangeListeners.add(K),m.isInvisible&&I.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return v=>{if(this.tokenChangeListeners.forEach(I=>I(v)),"function"==typeof m)m(v);else if("string"==typeof m){const I=zn()[m];"function"==typeof I&&I(v)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,f.Z)(function*(){if(yield m.init(),!m.widgetId){let v=m.container;if(!m.isInvisible){const I=document.createElement("div");v.appendChild(I),v=I}m.widgetId=m.getAssertedRecaptcha().render(v,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,f.Z)(function*(){ie(Kt()&&!Kl(),m.auth,"internal-error"),yield function Cc(){let E=null;return new Promise(m=>{"complete"!==document.readyState?(E=()=>m(),window.addEventListener("load",E)):m()}).catch(m=>{throw E&&window.removeEventListener("load",E),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const v=yield function se(E){return ne.apply(this,arguments)}(m.auth);ie(v,m.auth,"internal-error"),m.parameters.sitekey=v})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Bi{constructor(m,v){this.verificationId=m,this.onConfirmation=v}confirm(m){const v=_r._fromVerification(this.verificationId,m);return this.onConfirmation(v)}}function gv(E,m,v){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,f.Z)(function*(E,m,v){const I=Ln(E),A=yield Tc(I,m,(0,z.m9)(v));return new Bi(A,O=>Wo(I,O))})).apply(this,arguments)}function nI(E,m,v){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);yield Ee(!1,I,"phone");const A=yield Tc(I.auth,m,(0,z.m9)(v));return new Bi(A,O=>Eh(I,O))})).apply(this,arguments)}function mv(E,m,v){return jh.apply(this,arguments)}function jh(){return(jh=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E),A=yield Tc(I.auth,m,(0,z.m9)(v));return new Bi(A,O=>Cg(I,O))})).apply(this,arguments)}function Tc(E,m,v){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,f.Z)(function*(E,m,v){var I;const A=yield v.verify();try{let O;if(ie("string"==typeof A,E,"argument-error"),ie(v.type===tI,E,"argument-error"),O="string"==typeof m?{phoneNumber:m}:m,"session"in O){const K=O.session;if("phoneNumber"in O)return ie("enroll"===K.type,E,"internal-error"),(yield rv(E,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ie("signin"===K.type,E,"internal-error");const ae=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ie(ae,E,"missing-multi-factor-info"),(yield JE(E,{mfaPendingCredential:K.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield dh(E,{phoneNumber:O.phoneNumber,recaptchaToken:A});return K}}finally{v._reset()}})).apply(this,arguments)}function $h(E,m){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(E,m){yield bh((0,z.m9)(E),m)})).apply(this,arguments)}let rI=(()=>{class E{constructor(v){this.providerId=E.PROVIDER_ID,this.auth=Ln(v)}verifyPhoneNumber(v,I){return Tc(this.auth,v,(0,z.m9)(I))}static credential(v,I){return _r._fromVerification(v,I)}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:I,temporaryProof:A}=v;return I&&A?_r._fromTokenResponse(I,A):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function ts(E,m){return m?yr(m):(ie(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class eu extends Hs{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return fo(m,this._buildIdpRequest())}_linkToIdToken(m,v){return fo(m,this._buildIdpRequest(v))}_getReauthenticationResolver(m){return fo(m,this._buildIdpRequest())}_buildIdpRequest(m){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(v.idToken=m),v}}function Sc(E){return cr(E.auth,new eu(E),E.bypassAuthState)}function iI(E){const{auth:m,user:v}=E;return ie(v,m,"internal-error"),Ig(v,new eu(E),E.bypassAuthState)}function yv(E){return zh.apply(this,arguments)}function zh(){return(zh=(0,f.Z)(function*(E){const{auth:m,user:v}=E;return ie(v,m,"internal-error"),bh(v,new eu(E),E.bypassAuthState)})).apply(this,arguments)}class Gh{constructor(m,v,I,A,O=!1){this.auth=m,this.resolver=I,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var m=this;return new Promise(function(){var v=(0,f.Z)(function*(I,A){m.pendingPromise={resolve:I,reject:A};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(O){m.reject(O)}});return function(I,A){return v.apply(this,arguments)}}())}onAuthEvent(m){var v=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:A,postBody:O,tenantId:K,error:ae,type:je}=m;if(ae)return void v.reject(ae);const Ye={auth:v.auth,requestUri:I,sessionId:A,tenantId:K||void 0,postBody:O||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(je)(Ye))}catch(gt){v.reject(gt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Sc;case"linkViaPopup":case"linkViaRedirect":return yv;case"reauthViaPopup":case"reauthViaRedirect":return iI;default:Ae(this.auth,"internal-error")}}resolve(m){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tu=new be(2e3,1e4);function za(E,m,v){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,f.Z)(function*(E,m,v){const I=Ln(E);Ge(E,m,wn);const A=ts(I,v);return new Qo(I,"signInViaPopup",m,A).executeNotNull()})).apply(this,arguments)}function nr(E,m,v){return xc.apply(this,arguments)}function xc(){return(xc=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);Ge(I.auth,m,wn);const A=ts(I.auth,v);return new Qo(I.auth,"reauthViaPopup",m,A,I).executeNotNull()})).apply(this,arguments)}function kg(E,m,v){return nu.apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);Ge(I.auth,m,wn);const A=ts(I.auth,v);return new Qo(I.auth,"linkViaPopup",m,A,I).executeNotNull()})).apply(this,arguments)}let Qo=(()=>{class E extends Gh{constructor(v,I,A,O,K){super(v,I,O,K),this.provider=A,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var v=this;return(0,f.Z)(function*(){const I=yield v.execute();return ie(I,v.auth,"internal-error"),I})()}onExecution(){var v=this;return(0,f.Z)(function*(){At(1===v.filter.length,"Popup operations only handle one event");const I=ql();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],I),v.authWindow.associatedEvent=I,v.resolver._originValidation(v.auth).catch(A=>{v.reject(A)}),v.resolver._isIframeWebStorageSupported(v.auth,A=>{A||v.reject(ye(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const v=()=>{var I,A;this.pollId=null!==(A=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,tu.get())};v()}}return E.currentPopupAction=null,E})();const ru=new Map;class vv extends Gh{constructor(m,v,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,v=this;return(0,f.Z)(function*(){let I=ru.get(v.auth._key());if(!I){try{const O=(yield function qh(E,m){return Xo.apply(this,arguments)}(v.resolver,v.auth))?yield m().call(v):null;I=()=>Promise.resolve(O)}catch(A){I=()=>Promise.reject(A)}ru.set(v.auth._key(),I)}return v.bypassAuthState||ru.set(v.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var v=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===m.type)return v().call(I,m);if("unknown"!==m.type){if(m.eventId){const A=yield I.auth._redirectUserForId(m.eventId);if(A)return I.user=A,v().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Xo(){return(Xo=(0,f.Z)(function*(E,m){const v=iu(m),I=Ga(E);if(!(yield I._isAvailable()))return!1;const A="true"===(yield I._get(v));return yield I._remove(v),A})).apply(this,arguments)}function Ac(E,m){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(E,m){return Ga(E)._set(iu(m),"true")})).apply(this,arguments)}function bv(){ru.clear()}function Zh(E,m){ru.set(E._key(),m)}function Ga(E){return yr(E._redirectPersistence)}function iu(E){return _i("pendingRedirect",E.config.apiKey,E.name)}function wv(E,m,v){return function Ev(E,m,v){return Kh.apply(this,arguments)}(E,m,v)}function Kh(){return(Kh=(0,f.Z)(function*(E,m,v){const I=Ln(E);Ge(E,m,wn),yield I._initializationPromise;const A=ts(I,v);return yield Ac(A,I),A._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function Wa(E,m,v){return function ea(E,m,v){return Ms.apply(this,arguments)}(E,m,v)}function Ms(){return(Ms=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);Ge(I.auth,m,wn),yield I.auth._initializationPromise;const A=ts(I.auth,v);yield Ac(A,I.auth);const O=yield qa(I);return A._openRedirect(I.auth,m,"reauthViaRedirect",O)})).apply(this,arguments)}function Iv(E,m,v){return function Mc(E,m,v){return su.apply(this,arguments)}(E,m,v)}function su(){return(su=(0,f.Z)(function*(E,m,v){const I=(0,z.m9)(E);Ge(I.auth,m,wn),yield I.auth._initializationPromise;const A=ts(I.auth,v);yield Ee(!1,I,m.providerId),yield Ac(A,I.auth);const O=yield qa(I);return A._openRedirect(I.auth,m,"linkViaRedirect",O)})).apply(this,arguments)}function Rg(E,m){return qr.apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(E,m){return yield Ln(E)._initializationPromise,kc(E,m,!1)})).apply(this,arguments)}function kc(E,m){return ou.apply(this,arguments)}function ou(){return(ou=(0,f.Z)(function*(E,m,v=!1){const I=Ln(E),A=ts(I,m),K=yield new vv(I,A,v).execute();return K&&!v&&(delete K.user._redirectEventId,yield I._persistUserIfCurrent(K.user),yield I._setRedirectUser(null,m)),K})).apply(this,arguments)}function qa(E){return au.apply(this,arguments)}function au(){return(au=(0,f.Z)(function*(E){const m=ql(`${E.uid}:::`);return E._redirectEventId=m,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),m})).apply(this,arguments)}class Pg{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let v=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(v=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Dv(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gs(E);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=m,v=!0)),v}sendToConsumer(m,v){var I;if(m.error&&!Gs(m)){const A=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";v.onError(ye(this.auth,A))}else v.onAuthEvent(m)}isEventForConsumer(m,v){const I=null===v.eventId||!!m.eventId&&m.eventId===v.eventId;return v.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cv(m))}saveEventToCache(m){this.cachedEventUids.add(Cv(m)),this.lastProcessedEventTime=Date.now()}}function Cv(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(m=>m).join("-")}function Gs({type:E,error:m}){return"unknown"===E&&"auth/no-auth-event"===m?.code}function Og(E){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,f.Z)(function*(E,m={}){return Rt(E,"GET","/v1/projects",m)})).apply(this,arguments)}const Qh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tv=/^https?/;function Rc(){return(Rc=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:m}=yield Og(E);for(const v of m)try{if(xv(v))return}catch{}Ae(E,"unauthorized-domain")})).apply(this,arguments)}function xv(E){const m=dt(),{protocol:v,hostname:I}=new URL(m);if(E.startsWith("chrome-extension://")){const K=new URL(E);return""===K.hostname&&""===I?"chrome-extension:"===v&&E.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===v&&K.hostname===I}if(!Tv.test(v))return!1;if(Qh.test(E))return I===E;const A=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(I)}const Fg=new be(3e4,6e4);function Av(){const E=zn().___jsl;if(E?.H)for(const m of Object.keys(E.H))if(E.H[m].r=E.H[m].r||[],E.H[m].L=E.H[m].L||[],E.H[m].r=[...E.H[m].L],E.CP)for(let v=0;v<E.CP.length;v++)E.CP[v]=null}let Xh=null;function Jh(E){return Xh=Xh||function Mv(E){return new Promise((m,v)=>{var I,A,O;function K(){Av(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Av(),v(ye(E,"network-request-failed"))},timeout:Fg.get()})}if(null!==(A=null===(I=zn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==A&&A.Iframe)m(gapi.iframes.getContext());else{if(null===(O=zn().gapi)||void 0===O||!O.load){const ae=Gr("iframefcb");return zn()[ae]=()=>{gapi.load?K():v(ye(E,"network-request-failed"))},Wt(`https://apis.google.com/js/api.js?onload=${ae}`).catch(je=>v(je))}K()}}).catch(m=>{throw Xh=null,m})}(E),Xh}const lu=new be(5e3,15e3),ef={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Er(E){const m=E.config;ie(m.authDomain,E,"auth-domain-config-required");const v=m.emulator?Me(m,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,I={apiKey:m.apiKey,appName:E.name,v:U.SDK_VERSION},A=Pc.get(E.config.apiHost);A&&(I.eid=A);const O=E._getFrameworks();return O.length&&(I.fw=O.join(",")),`${v}?${(0,z.xO)(I).slice(1)}`}function Ka(){return Ka=(0,f.Z)(function*(E){const m=yield Jh(E),v=zn().gapi;return ie(v,E,"internal-error"),m.open({where:document.body,url:Er(E),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ef,dontclear:!0},I=>new Promise(function(){var A=(0,f.Z)(function*(O,K){yield I.restyle({setHideOnLeave:!1});const ae=ye(E,"network-request-failed"),je=zn().setTimeout(()=>{K(ae)},lu.get());function Ye(){zn().clearTimeout(je),O(I)}I.ping(Ye).then(Ye,()=>{K(ae)})});return function(O,K){return A.apply(this,arguments)}}()))}),Ka.apply(this,arguments)}const kv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ws{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ta=encodeURIComponent("fac");function Nc(E,m,v,I,A,O){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(E,m,v,I,A,O){ie(E.config.authDomain,E,"auth-domain-config-required"),ie(E.config.apiKey,E,"invalid-api-key");const K={apiKey:E.config.apiKey,appName:E.name,authType:v,redirectUrl:I,v:U.SDK_VERSION,eventId:A};if(m instanceof wn){m.setDefaultLanguage(E.languageCode),K.providerId=m.providerId||"",(0,z.xb)(m.getCustomParameters())||(K.customParameters=JSON.stringify(m.getCustomParameters()));for(const[gt,Yt]of Object.entries(O||{}))K[gt]=Yt}if(m instanceof Ma){const gt=m.getScopes().filter(Yt=>""!==Yt);gt.length>0&&(K.scopes=gt.join(","))}E.tenantId&&(K.tid=E.tenantId);const ae=K;for(const gt of Object.keys(ae))void 0===ae[gt]&&delete ae[gt];const je=yield E._getAppCheckToken(),Ye=je?`#${ta}=${encodeURIComponent(je)}`:"";return`${Mr(E)}?${(0,z.xO)(ae).slice(1)}${Ye}`})).apply(this,arguments)}function Mr({config:E}){return E.emulator?Me(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}const ns="webStorageSupport",Ug=class cu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wo,this._completeRedirectFn=kc,this._overrideRedirectResult=Zh}_openPopup(m,v,I,A){var O=this;return(0,f.Z)(function*(){var K;At(null===(K=O.eventManagers[m._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ae=yield Nc(m,v,I,dt(),A);return function nf(E,m,v,I=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),K=Math.max((window.screen.availWidth-I)/2,0).toString();let ae="";const je=Object.assign(Object.assign({},kv),{width:I.toString(),height:A.toString(),top:O,left:K}),Ye=(0,z.z$)().toLowerCase();v&&(ae=P(Ye)?"_blank":v),L(Ye)&&(m=m||"http://localhost",je.scrollbars="yes");const gt=Object.entries(je).reduce((ai,[li,ia])=>`${ai}${li}=${ia},`,"");if(function it(E=(0,z.z$)()){var m;return me(E)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Ye)&&"_self"!==ae)return function Vg(E,m){const v=document.createElement("a");v.href=E,v.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(I)}(m||"",ae),new Ws(null);const Yt=window.open(m||"",ae,gt);ie(Yt,E,"popup-blocked");try{Yt.focus()}catch{}return new Ws(Yt)}(m,ae,ql())})()}_openRedirect(m,v,I,A){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(m),function $s(E){zn().location.href=E}(yield Nc(m,v,I,dt(),A)),new Promise(()=>{})})()}_initialize(m){const v=m._key();if(this.eventManagers[v]){const{manager:A,promise:O}=this.eventManagers[v];return A?Promise.resolve(A):(At(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(m);return this.eventManagers[v]={promise:I},I.catch(()=>{delete this.eventManagers[v]}),I}initAndGetManager(m){var v=this;return(0,f.Z)(function*(){const I=yield function tf(E){return Ka.apply(this,arguments)}(m),A=new Pg(m);return I.register("authEvent",O=>(ie(O?.authEvent,m,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[m._key()]={manager:A},v.iframes[m._key()]=I,A})()}_isIframeWebStorageSupported(m,v){this.iframes[m._key()].send(ns,{type:ns},A=>{var O;const K=null===(O=A?.[0])||void 0===O?void 0:O[ns];void 0!==K&&v(!!K),Ae(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const v=m._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Sv(E){return Rc.apply(this,arguments)}(m)),this.originValidationPromises[v]}get _shouldInitProactively(){return kt()||F()||me()}};class Fc extends class rf{constructor(m){this.factorId=m}_process(m,v,I){switch(v.type){case"enroll":return this._finalizeEnroll(m,v.credential,I);case"signin":return this._finalizeSignIn(m,v.credential);default:return Xe("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Fc(m)}_finalizeEnroll(m,v,I){return function xg(E,m){return Rt(E,"POST","/v2/accounts/mfaEnrollment:finalize",bt(E,m))}(m,{idToken:v,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,v){return function vr(E,m){return Rt(E,"POST","/v2/accounts/mfaSignIn:finalize",bt(E,m))}(m,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pv=(()=>{class E{constructor(){}static assertion(v){return Fc._fromCredential(v)}}return E.FACTOR_ID="phone",E})();var du="@firebase/auth";class sf{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var v=this;return(0,f.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const v=this.auth.onIdTokenChanged(I=>{m(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,v),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const v=this.internalListeners.get(m);!v||(this.internalListeners.delete(m),v(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,z.Pz)("authIdTokenMaxAge"),function Fv(E){(0,U._registerComponent)(new Ce.wA("auth",(m,{options:v})=>{const I=m.getProvider("app").getImmediate(),A=m.getProvider("heartbeat"),O=m.getProvider("app-check-internal"),{apiKey:K,authDomain:ae}=I.options;ie(K&&!K.includes(":"),"invalid-api-key",{appName:I.name});const je={apiKey:K,authDomain:ae,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vi(E)},Ye=new Ml(I,A,O,je);return function zo(E,m){const v=m?.persistence||[],I=(Array.isArray(v)?v:[v]).map(yr);m?.errorMap&&E._updateErrorMap(m.errorMap),E._initializeWithPersistence(I,m?.popupRedirectResolver)}(Ye,v),Ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,v,I)=>{m.getProvider("auth-internal").initialize()})),(0,U._registerComponent)(new Ce.wA("auth-internal",m=>{const v=Ln(m.getProvider("auth").getImmediate());return new sf(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,U.registerVersion)(du,"0.23.2",function Nv(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,U.registerVersion)(du,"0.23.2","esm2017")}("Browser")},2090:(_t,ke,j)=>{j.d(ke,{$s:()=>yr,BH:()=>we,G6:()=>Me,L:()=>He,LL:()=>tt,P0:()=>Tt,Pz:()=>ye,Sg:()=>Ge,UG:()=>Xe,US:()=>Ce,ZB:()=>ee,ZR:()=>Rt,aH:()=>Ae,b$:()=>Kt,eu:()=>ve,hl:()=>Le,jU:()=>At,m9:()=>_i,ne:()=>Jt,pd:()=>Pn,r3:()=>Qi,ru:()=>dt,tV:()=>Z,uI:()=>ie,vZ:()=>Ur,w1:()=>de,xO:()=>Xi,xb:()=>Aa,z$:()=>Ke,zI:()=>St,zd:()=>Pi});const ce=function($){const H=[];let L=0;for(let F=0;F<$.length;F++){let P=$.charCodeAt(F);P<128?H[L++]=P:P<2048?(H[L++]=P>>6|192,H[L++]=63&P|128):55296==(64512&P)&&F+1<$.length&&56320==(64512&$.charCodeAt(F+1))?(P=65536+((1023&P)<<10)+(1023&$.charCodeAt(++F)),H[L++]=P>>18|240,H[L++]=P>>12&63|128,H[L++]=P>>6&63|128,H[L++]=63&P|128):(H[L++]=P>>12|224,H[L++]=P>>6&63|128,H[L++]=63&P|128)}return H},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,H){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let P=0;P<$.length;P+=3){const Y=$[P],pe=P+1<$.length,We=pe?$[P+1]:0,pt=P+2<$.length,me=pt?$[P+2]:0;let tn=(15&We)<<2|me>>6,kt=63&me;pt||(kt=64,pe||(tn=64)),F.push(L[Y>>2],L[(3&Y)<<4|We>>4],L[tn],L[kt])}return F.join("")},encodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa($):this.encodeByteArray(ce($),H)},decodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?atob($):function($){const H=[];let L=0,F=0;for(;L<$.length;){const P=$[L++];if(P<128)H[F++]=String.fromCharCode(P);else if(P>191&&P<224){const Y=$[L++];H[F++]=String.fromCharCode((31&P)<<6|63&Y)}else if(P>239&&P<365){const pt=((7&P)<<18|(63&$[L++])<<12|(63&$[L++])<<6|63&$[L++])-65536;H[F++]=String.fromCharCode(55296+(pt>>10)),H[F++]=String.fromCharCode(56320+(1023&pt))}else{const Y=$[L++],pe=$[L++];H[F++]=String.fromCharCode((15&P)<<12|(63&Y)<<6|63&pe)}}return H.join("")}(this.decodeStringToByteArray($,H))},decodeStringToByteArray($,H){this.init_();const L=H?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let P=0;P<$.length;){const Y=L[$.charAt(P++)],We=P<$.length?L[$.charAt(P)]:0;++P;const me=P<$.length?L[$.charAt(P)]:64;++P;const it=P<$.length?L[$.charAt(P)]:64;if(++P,null==Y||null==We||null==me||null==it)throw new Pe;F.push(Y<<2|We>>4),64!==me&&(F.push(We<<4&240|me>>2),64!==it&&F.push(me<<6&192|it))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const He=function($){return function($){const H=ce($);return Ce.encodeByteArray(H,!0)}($).replace(/\./g,"")},Z=function($){try{return Ce.decodeString($,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function ee($,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return H}for(const L in H)!H.hasOwnProperty(L)||!ze(L)||($[L]=ee($[L],H[L]));return $}function ze($){return"__proto__"!==$}const _e=()=>{try{return function Ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=$&&Z($[1]);return H&&JSON.parse(H)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Tt=$=>{const H=($=>{var H,L;return null===(L=null===(H=_e())||void 0===H?void 0:H.emulatorHosts)||void 0===L?void 0:L[$]})($);if(!H)return;const L=H.lastIndexOf(":");if(L<=0||L+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const F=parseInt(H.substring(L+1),10);return"["===H[0]?[H.substring(1,L-1),F]:[H.substring(0,L),F]},Ae=()=>{var $;return null===($=_e())||void 0===$?void 0:$.config},ye=$=>{var H;return null===(H=_e())||void 0===H?void 0:H[`_${$}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,L)=>{this.resolve=H,this.reject=L})}wrapCallback(H){return(L,F)=>{L?this.reject(L):this.resolve(F),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(L):H(L,F))}}}function Ge($,H){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=H||"demo-project",P=$.iat||0,Y=$.sub||$.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pe=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:P,exp:P+3600,auth_time:P,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},$);return[He(JSON.stringify({alg:"none",type:"JWT"})),He(JSON.stringify(pe)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Xe(){var $;const H=null===($=_e())||void 0===$?void 0:$.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function At(){return"object"==typeof self&&self.self===self}function dt(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function de(){const $=Ke();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Me(){return!Xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Le(){try{return"object"==typeof indexedDB}catch{return!1}}function ve(){return new Promise(($,H)=>{try{let L=!0;const F="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(F);P.onsuccess=()=>{P.result.close(),L||self.indexedDB.deleteDatabase(F),$(!0)},P.onupgradeneeded=()=>{L=!1},P.onerror=()=>{var Y;H((null===(Y=P.error)||void 0===Y?void 0:Y.message)||"")}}catch(L){H(L)}})}function St(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Rt extends Error{constructor(H,L,F){super(L),this.code=H,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,Rt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(H,L,F){this.service=H,this.serviceName=L,this.errors=F}create(H,...L){const F=L[0]||{},P=`${this.service}/${H}`,Y=this.errors[H],pe=Y?function Xt($,H){return $.replace($t,(L,F)=>{const P=H[F];return null!=P?String(P):`<${F}?>`})}(Y,F):"Error";return new Rt(P,`${this.serviceName}: ${pe} (${P}).`,F)}}const $t=/\{\$([^}]+)}/g;function Qi($,H){return Object.prototype.hasOwnProperty.call($,H)}function Aa($){for(const H in $)if(Object.prototype.hasOwnProperty.call($,H))return!1;return!0}function Ur($,H){if($===H)return!0;const L=Object.keys($),F=Object.keys(H);for(const P of L){if(!F.includes(P))return!1;const Y=$[P],pe=H[P];if(lr(Y)&&lr(pe)){if(!Ur(Y,pe))return!1}else if(Y!==pe)return!1}for(const P of F)if(!L.includes(P))return!1;return!0}function lr($){return null!==$&&"object"==typeof $}function Xi($){const H=[];for(const[L,F]of Object.entries($))Array.isArray(F)?F.forEach(P=>{H.push(encodeURIComponent(L)+"="+encodeURIComponent(P))}):H.push(encodeURIComponent(L)+"="+encodeURIComponent(F));return H.length?"&"+H.join("&"):""}function Pi($){const H={};return $.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[P,Y]=F.split("=");H[decodeURIComponent(P)]=decodeURIComponent(Y)}}),H}function Pn($){const H=$.indexOf("?");if(!H)return"";const L=$.indexOf("#",H);return $.substring(H,L>0?L:void 0)}function Jt($,H){const L=new yt($,H);return L.subscribe.bind(L)}class yt{constructor(H,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{H(this)}).catch(F=>{this.error(F)})}next(H){this.forEachObserver(L=>{L.next(H)})}error(H){this.forEachObserver(L=>{L.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,L,F){let P;if(void 0===H&&void 0===L&&void 0===F)throw new Error("Missing Observer.");P=function en($,H){if("object"!=typeof $||null===$)return!1;for(const L of H)if(L in $&&"function"==typeof $[L])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:L,complete:F},void 0===P.next&&(P.next=ii),void 0===P.error&&(P.error=ii),void 0===P.complete&&(P.complete=ii);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,H)}sendOne(H,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{L(this.observers[H])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ii(){}function yr($,H=1e3,L=2){const F=H*Math.pow(L,$),P=Math.round(.5*F*(Math.random()-.5)*2);return Math.min(144e5,F+P)}function _i($){return $&&$._delegate?$._delegate:$}},2598:(_t,ke,j)=>{var f=j(4650);let z=null;function U(){return z}const Pe=new f.OlP("DocumentToken");let Re=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function He(){return(0,f.LFG)(q)}()},providedIn:"platform"}),n})();const Z=new f.OlP("Location Initialized");let q=(()=>{class n extends Re{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ee()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ee()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ze(){return new q((0,f.LFG)(Pe))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(ht)},providedIn:"root"}),n})();const _e=new f.OlP("appBaseHref");let ht=(()=>{class n extends ue{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+rt(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+rt(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Re),f.LFG(_e,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tt=(()=>{class n extends ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+rt(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+rt(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Re),f.LFG(_e,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=xe(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rt(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Ue,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ye(){return new Ae((0,f.LFG)(ue))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}var At=(()=>((At=At||{})[At.Format=0]="Format",At[At.Standalone=1]="Standalone",At))(),dt=(()=>((dt=dt||{})[dt.Narrow=0]="Narrow",dt[dt.Abbreviated=1]="Abbreviated",dt[dt.Wide=2]="Wide",dt[dt.Short=3]="Short",dt))(),Kt=(()=>((Kt=Kt||{})[Kt.Short=0]="Short",Kt[Kt.Medium=1]="Medium",Kt[Kt.Long=2]="Long",Kt[Kt.Full=3]="Full",Kt))(),ft=(()=>((ft=ft||{})[ft.Decimal=0]="Decimal",ft[ft.Group=1]="Group",ft[ft.List=2]="List",ft[ft.PercentSign=3]="PercentSign",ft[ft.PlusSign=4]="PlusSign",ft[ft.MinusSign=5]="MinusSign",ft[ft.Exponential=6]="Exponential",ft[ft.SuperscriptingExponent=7]="SuperscriptingExponent",ft[ft.PerMille=8]="PerMille",ft[ft.Infinity=9]="Infinity",ft[ft.NaN=10]="NaN",ft[ft.TimeSeparator=11]="TimeSeparator",ft[ft.CurrencyDecimal=12]="CurrencyDecimal",ft[ft.CurrencyGroup=13]="CurrencyGroup",ft))();function Rt(n,e){return ot((0,f.cg1)(n)[f.wAp.DateFormat],e)}function tt(n,e){return ot((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function Xt(n,e){return ot((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function $t(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ft.CurrencyDecimal)return t[f.wAp.NumberSymbols][ft.Decimal];if(e===ft.CurrencyGroup)return t[f.wAp.NumberSymbols][ft.Group]}return r}function ri(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ot(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Ur(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Pi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pn={},Tn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Jt=(()=>((Jt=Jt||{})[Jt.Short=0]="Short",Jt[Jt.ShortGMT=1]="ShortGMT",Jt[Jt.Long=2]="Long",Jt[Jt.Extended=3]="Extended",Jt))(),yt=(()=>((yt=yt||{})[yt.FullYear=0]="FullYear",yt[yt.Month=1]="Month",yt[yt.Date=2]="Date",yt[yt.Hours=3]="Hours",yt[yt.Minutes=4]="Minutes",yt[yt.Seconds=5]="Seconds",yt[yt.FractionalSeconds=6]="FractionalSeconds",yt[yt.Day=7]="Day",yt))(),It=(()=>((It=It||{})[It.DayPeriods=0]="DayPeriods",It[It.Days=1]="Days",It[It.Months=2]="Months",It[It.Eras=3]="Eras",It))();function en(n,e,t,r){let i=function P(n){if(pe(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(c=>+c);return ii(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Pi))return function Y(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,c=Number(n[5]||0)-r,d=Number(n[6]||0),g=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,c,d,g),e}(r)}const e=new Date(n);if(!pe(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ar(t,e)||e;let c,o=[];for(;e;){if(c=Tn.exec(e),!c){o.push(e);break}{o=o.concat(c.slice(1));const _=o.pop();if(!_)break;e=_}}let d=i.getTimezoneOffset();r&&(d=H(r,d),i=function F(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function L(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(H(e,i)-i))}(i,r,!0));let g="";return o.forEach(_=>{const w=function $(n){if(_i[n])return _i[n];let e;switch(n){case"G":case"GG":case"GGG":e=on(It.Eras,dt.Abbreviated);break;case"GGGG":e=on(It.Eras,dt.Wide);break;case"GGGGG":e=on(It.Eras,dt.Narrow);break;case"y":e=zt(yt.FullYear,1,0,!1,!0);break;case"yy":e=zt(yt.FullYear,2,0,!0,!0);break;case"yyy":e=zt(yt.FullYear,3,0,!1,!0);break;case"yyyy":e=zt(yt.FullYear,4,0,!1,!0);break;case"Y":e=si(1);break;case"YY":e=si(2,!0);break;case"YYY":e=si(3);break;case"YYYY":e=si(4);break;case"M":case"L":e=zt(yt.Month,1,1);break;case"MM":case"LL":e=zt(yt.Month,2,1);break;case"MMM":e=on(It.Months,dt.Abbreviated);break;case"MMMM":e=on(It.Months,dt.Wide);break;case"MMMMM":e=on(It.Months,dt.Narrow);break;case"LLL":e=on(It.Months,dt.Abbreviated,At.Standalone);break;case"LLLL":e=on(It.Months,dt.Wide,At.Standalone);break;case"LLLLL":e=on(It.Months,dt.Narrow,At.Standalone);break;case"w":e=Is(1);break;case"ww":e=Is(2);break;case"W":e=Is(1,!0);break;case"d":e=zt(yt.Date,1);break;case"dd":e=zt(yt.Date,2);break;case"c":case"cc":e=zt(yt.Day,1);break;case"ccc":e=on(It.Days,dt.Abbreviated,At.Standalone);break;case"cccc":e=on(It.Days,dt.Wide,At.Standalone);break;case"ccccc":e=on(It.Days,dt.Narrow,At.Standalone);break;case"cccccc":e=on(It.Days,dt.Short,At.Standalone);break;case"E":case"EE":case"EEE":e=on(It.Days,dt.Abbreviated);break;case"EEEE":e=on(It.Days,dt.Wide);break;case"EEEEE":e=on(It.Days,dt.Narrow);break;case"EEEEEE":e=on(It.Days,dt.Short);break;case"a":case"aa":case"aaa":e=on(It.DayPeriods,dt.Abbreviated);break;case"aaaa":e=on(It.DayPeriods,dt.Wide);break;case"aaaaa":e=on(It.DayPeriods,dt.Narrow);break;case"b":case"bb":case"bbb":e=on(It.DayPeriods,dt.Abbreviated,At.Standalone,!0);break;case"bbbb":e=on(It.DayPeriods,dt.Wide,At.Standalone,!0);break;case"bbbbb":e=on(It.DayPeriods,dt.Narrow,At.Standalone,!0);break;case"B":case"BB":case"BBB":e=on(It.DayPeriods,dt.Abbreviated,At.Format,!0);break;case"BBBB":e=on(It.DayPeriods,dt.Wide,At.Format,!0);break;case"BBBBB":e=on(It.DayPeriods,dt.Narrow,At.Format,!0);break;case"h":e=zt(yt.Hours,1,-12);break;case"hh":e=zt(yt.Hours,2,-12);break;case"H":e=zt(yt.Hours,1);break;case"HH":e=zt(yt.Hours,2);break;case"m":e=zt(yt.Minutes,1);break;case"mm":e=zt(yt.Minutes,2);break;case"s":e=zt(yt.Seconds,1);break;case"ss":e=zt(yt.Seconds,2);break;case"S":e=zt(yt.FractionalSeconds,1);break;case"SS":e=zt(yt.FractionalSeconds,2);break;case"SSS":e=zt(yt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Cn(Jt.Short);break;case"ZZZZZ":e=Cn(Jt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Cn(Jt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Cn(Jt.Long);break;default:return null}return _i[n]=e,e}(_);g+=w?w(i,t,d):"''"===_?"'":_.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),g}function ii(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ar(n,e){const t=function he(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(Pn[t]=Pn[t]||{},Pn[t][e])return Pn[t][e];let r="";switch(e){case"shortDate":r=Rt(n,Kt.Short);break;case"mediumDate":r=Rt(n,Kt.Medium);break;case"longDate":r=Rt(n,Kt.Long);break;case"fullDate":r=Rt(n,Kt.Full);break;case"shortTime":r=tt(n,Kt.Short);break;case"mediumTime":r=tt(n,Kt.Medium);break;case"longTime":r=tt(n,Kt.Long);break;case"fullTime":r=tt(n,Kt.Full);break;case"short":const i=Ar(n,"shortTime"),s=Ar(n,"shortDate");r=ur(Xt(n,Kt.Short),[i,s]);break;case"medium":const o=Ar(n,"mediumTime"),c=Ar(n,"mediumDate");r=ur(Xt(n,Kt.Medium),[o,c]);break;case"long":const d=Ar(n,"longTime"),g=Ar(n,"longDate");r=ur(Xt(n,Kt.Long),[d,g]);break;case"full":const _=Ar(n,"fullTime"),w=Ar(n,"fullDate");r=ur(Xt(n,Kt.Full),[_,w])}return r&&(Pn[t][e]=r),r}function ur(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Pt(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function zt(n,e,t=0,r=!1,i=!1){return function(s,o){let c=function Es(n,e){switch(n){case yt.FullYear:return e.getFullYear();case yt.Month:return e.getMonth();case yt.Date:return e.getDate();case yt.Hours:return e.getHours();case yt.Minutes:return e.getMinutes();case yt.Seconds:return e.getSeconds();case yt.FractionalSeconds:return e.getMilliseconds();case yt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||c>-t)&&(c+=t),n===yt.Hours)0===c&&-12===t&&(c=12);else if(n===yt.FractionalSeconds)return function Jn(n,e){return Pt(n,3).substring(0,e)}(c,e);const d=$t(o,ft.MinusSign);return Pt(c,e,d,r,i)}}function on(n,e,t=At.Format,r=!1){return function(i,s){return function Br(n,e,t,r,i,s){switch(t){case It.Months:return function Le(n,e,t){const r=(0,f.cg1)(n),s=ot([r[f.wAp.MonthsFormat],r[f.wAp.MonthsStandalone]],e);return ot(s,t)}(e,i,r)[n.getMonth()];case It.Days:return function Me(n,e,t){const r=(0,f.cg1)(n),s=ot([r[f.wAp.DaysFormat],r[f.wAp.DaysStandalone]],e);return ot(s,t)}(e,i,r)[n.getDay()];case It.DayPeriods:const o=n.getHours(),c=n.getMinutes();if(s){const g=function Qi(n){const e=(0,f.cg1)(n);return ri(e),(e[f.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Ur(r):[Ur(r[0]),Ur(r[1])])}(e),_=function ws(n,e,t){const r=(0,f.cg1)(n);ri(r);const s=ot([r[f.wAp.ExtraData][0],r[f.wAp.ExtraData][1]],e)||[];return ot(s,t)||[]}(e,i,r),w=g.findIndex(T=>{if(Array.isArray(T)){const[S,M]=T,R=o>=S.hours&&c>=S.minutes,N=o<M.hours||o===M.hours&&c<M.minutes;if(S.hours<M.hours){if(R&&N)return!0}else if(R||N)return!0}else if(T.hours===o&&T.minutes===c)return!0;return!1});if(-1!==w)return _[w]}return function be(n,e,t){const r=(0,f.cg1)(n),s=ot([r[f.wAp.DayPeriodsFormat],r[f.wAp.DayPeriodsStandalone]],e);return ot(s,t)}(e,i,r)[o<12?0:1];case It.Eras:return function ve(n,e){return ot((0,f.cg1)(n)[f.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Cn(n){return function(e,t,r){const i=-1*r,s=$t(t,ft.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Jt.Short:return(i>=0?"+":"")+Pt(o,2,s)+Pt(Math.abs(i%60),2,s);case Jt.ShortGMT:return"GMT"+(i>=0?"+":"")+Pt(o,1,s);case Jt.Long:return"GMT"+(i>=0?"+":"")+Pt(o,2,s)+":"+Pt(Math.abs(i%60),2,s);case Jt.Extended:return 0===r?"Z":(i>=0?"+":"")+Pt(o,2,s)+":"+Pt(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function yr(n){return ii(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Is(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=yr(t),o=function Oi(n){const e=ii(n,0,1).getDay();return ii(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),c=s.getTime()-o.getTime();i=1+Math.round(c/6048e5)}return Pt(i,n,$t(r,ft.MinusSign))}}function si(n,e=!1){return function(t,r){return Pt(yr(t).getFullYear(),n,$t(r,ft.MinusSign),e)}}const _i={};function H(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function pe(n){return n instanceof Date&&!isNaN(n.valueOf())}let an=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ln{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let js=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ln(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,o),kl(c,i)}});for(let i=0,s=r.length;i<s;i++){const c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{kl(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function kl(n,e){n.context.$implicit=e.item}let er=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ag,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Wr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Wr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ag{constructor(){this.$implicit=null,this.ngIf=null}}function Wr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}const gg=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let B_=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,s){if(null==t||""===t||t!=t)return null;try{return en(t,r,s||this.locale,i??this.defaultTimezone??void 0)}catch(o){throw function Fi(n,e){return new f.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(gg,24))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),j_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function go(n){return"server"===n}let Ma=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new lc((0,f.LFG)(Pe),window)}),n})();class lc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function bi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Fl(this.window.history)||Fl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Fl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ko extends class Tg extends class Ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Se(n){z||(z=n)}(new Ko)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Z_(){return Vl=Vl||document.querySelector("base"),Vl?Vl.getAttribute("href"):null}();return null==t?null:function mo(n){tr=tr||document.createElement("a"),tr.setAttribute("href",n);const e=tr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Vl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function oh(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let tr,Vl=null;const Dn=new f.OlP("TRANSITION_ID"),xh=[{provide:f.ip1,useFactory:function K_(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=U(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Dn,Pe,f.zs3],multi:!0}];let Ah=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const mc=new f.OlP("EventManagerPlugins");let Pa=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(mc),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ul{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=U().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Yo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n extends Yo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Oa),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Oa))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Oa(n){U().remove(n)}const yc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mh=/%COMP%/g;function _c(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?_c(n,i,t):(i=i.replace(Mh,n),t.push(i))}return t}function Sg(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rh=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Bl(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new J_(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new ev(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=_c(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pa),f.LFG(yo),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Bl{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(jl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(jl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=yc[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=yc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Sg(r)):this.eventManager.addEventListener(e,t,Sg(r))}}function jl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class J_ extends Bl{constructor(e,t,r,i){super(e),this.component=r;const s=_c(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Fa(n){return"_ngcontent-%COMP%".replace(Mh,n)}(i+"-"+r.id),this.hostAttr=function kh(n){return"_nghost-%COMP%".replace(Mh,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ev extends Bl{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=_c(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const c=document.createElement("style");c.textContent=s[o],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Hl=(()=>{class n extends Ul{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const tv=["alt","control","meta","shift"],$l={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let As=(()=>{class n extends Ul{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),tv.forEach(g=>{const _=r.indexOf(g);_>-1&&(r.splice(_,1),o+=g+".")}),o+=s,0!=r.length||0===s.length)return null;const d={};return d.domEventName=i,d.fullKey=o,d}static matchEventFullKeyCode(t,r){let i=$l[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),tv.forEach(o=>{o!==i&&(0,zl[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const bc=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function iv(){Ko.makeCurrent()},multi:!0},{provide:Pe,useFactory:function Wl(){return(0,f.RDi)(document),document},deps:[]}]),bo=new f.OlP(""),Oh=[{provide:f.rWj,useClass:class Y_{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let s=i.length,o=!1;const c=function(d){o=o||d,s--,0==s&&r(o)};i.forEach(function(d){d.whenStable(c)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Nh=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Gl(){return new f.qLn},deps:[]},{provide:mc,useClass:Hl,multi:!0,deps:[Pe,f.R0b,f.Lbi]},{provide:mc,useClass:As,multi:!0,deps:[Pe]},{provide:Rh,useClass:Rh,deps:[Pa,yo,f.AFp]},{provide:f.FYo,useExisting:Rh},{provide:Yo,useExisting:yo},{provide:yo,useClass:yo,deps:[Pe]},{provide:Pa,useClass:Pa,deps:[mc,f.R0b]},{provide:class mh{},useClass:Ah,deps:[]},[]];let Fh=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Dn,useExisting:f.AFp},xh]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bo,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Nh,...Oh],imports:[j_,f.hGG]}),n})(),wo=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Lh(){return new wo((0,f.LFG)(Pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;class Ec{}const Eo="*";function Ba(n,e){return{type:7,name:n,definitions:e,options:{}}}function br(n,e=null){return{type:4,styles:e,timings:n}}function Bh(n,e=null){return{type:2,steps:n,options:e}}function wr(n){return{type:6,styles:n,offset:null}}function ja(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Cc(n){Promise.resolve().then(n)}class Bi{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Cc(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class gv{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?Cc(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,c)=>Math.max(o,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Dc(n){return new f.vHH(3e3,!1)}function Wa(){return typeof window<"u"&&typeof window.document<"u"}function ea(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ms(n){switch(n.length){case 0:return new Bi;case 1:return n[0];default:return new gv(n)}}function Iv(n,e,t,r,i=new Map,s=new Map){const o=[],c=[];let d=-1,g=null;if(r.forEach(_=>{const w=_.get("offset"),T=w==d,S=T&&g||new Map;_.forEach((M,R)=>{let N=R,B=M;if("offset"!==R)switch(N=e.normalizePropertyName(N,o),B){case"!":B=i.get(R);break;case Eo:B=s.get(R);break;default:B=e.normalizeStyleValue(R,N,B,o)}S.set(N,B)}),T||c.push(S),g=S,d=w}),o.length)throw function ru(n){return new f.vHH(3502,!1)}();return c}function Mc(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&su(t,"start",n)));break;case"done":n.onDone(()=>r(t&&su(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&su(t,"destroy",n)))}}function su(n,e,t){const s=Rg(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Rg(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function qr(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function kc(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let ou=(n,e)=>!1,qa=(n,e,t)=>[],au=null;function Yh(n){const e=n.parentNode||n.host;return e===au?null:e}(ea()||typeof Element<"u")&&(Wa()?(au=(()=>document.documentElement)(),ou=(n,e)=>{for(;e;){if(e===n)return!0;e=Yh(e)}return!1}):ou=(n,e)=>n.contains(e),qa=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Gs=null,Dv=!1;const Tv=ou,Sv=qa;let xv=(()=>{class n{validateStyleProperty(t){return function Og(n){Gs||(Gs=function Qh(){return typeof document<"u"?document.body:null}()||{},Dv=!!Gs.style&&"WebkitAppearance"in Gs.style);let e=!0;return Gs.style&&!function Cv(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Gs.style,!e&&Dv&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Gs.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Tv(t,r)}getParentElement(t){return Yh(t)}query(t,r,i){return Sv(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,c=[],d){return new Bi(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Fg=(()=>{class n{}return n.NOOP=new xv,n})();const Jh="ng-enter",lu="ng-leave",Za="ng-trigger",uu=".ng-trigger",ef="ng-animating",Pc=".ng-animating";function Er(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tf(parseFloat(e[1]),e[2])}function tf(n,e){return"s"===e?1e3*n:n}function Ka(n,e,t){return n.hasOwnProperty("duration")?n:function kv(n,e,t){let i,s=0,o="";if("string"==typeof n){const c=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return e.push(Dc()),{duration:0,delay:0,easing:""};i=tf(parseFloat(c[1]),c[2]);const d=c[3];null!=d&&(s=tf(parseFloat(d),c[4]));const g=c[5];g&&(o=g)}else i=n;if(!t){let c=!1,d=e.length;i<0&&(e.push(function mv(){return new f.vHH(3100,!1)}()),c=!0),s<0&&(e.push(function jh(){return new f.vHH(3101,!1)}()),c=!0),c&&e.splice(d,0,Dc())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Ya(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Oc(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ws(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function nf(n,e,t){return t?e+":"+t+";":""}function Vg(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=nf(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=nf(0,Fc(t),n.style[t]));n.setAttribute("style",e)}function ks(n,e,t){n.style&&(e.forEach((r,i)=>{const s=rf(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),ea()&&Vg(n))}function Gn(n,e){n.style&&(e.forEach((t,r)=>{const i=rf(r);n.style[i]=""}),ea()&&Vg(n))}function ta(n){return Array.isArray(n)?1==n.length?n[0]:Bh(n):n}const na=new RegExp("{{\\s*(.+?)\\s*}}","g");function Mr(n){let e=[];if("string"==typeof n){let t;for(;t=na.exec(n);)e.push(t[1]);na.lastIndex=0}return e}function ns(n,e,t){const r=n.toString(),i=r.replace(na,(s,o)=>{let c=e[o];return null==c&&(t.push(function Hh(n){return new f.vHH(3003,!1)}()),c=""),c.toString()});return i==r?n:i}function cu(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Ug=/-+([a-z0-9])/g;function rf(n){return n.replace(Ug,(...e)=>e[1].toUpperCase())}function Fc(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function $h(n){return new f.vHH(3004,!1)}()}}function Lc(n,e){return window.getComputedStyle(n)[e]}function Bg(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Lv(n,e,t){if(":"==n[0]){const d=function jg(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function kg(n){return new f.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof d)return void e.push(d);n=d}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function xc(n){return new f.vHH(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(v(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(v(o,i))}(r,t,e)):t.push(n),t}const E=new Set(["true","1"]),m=new Set(["false","0"]);function v(n,e){const t=E.has(n)||m.has(n),r=E.has(e)||m.has(e);return(i,s)=>{let o="*"==n||n==i,c="*"==e||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?E.has(n):m.has(n)),!c&&r&&"boolean"==typeof s&&(c=s?E.has(e):m.has(e)),o&&c}}const I=":self",A=new RegExp(`s*${I}s*,?`,"g");function O(n,e,t,r){return new ae(n).build(e,t,r)}class ae{constructor(e){this._driver=e}build(e,t,r){const i=new gt(t);return this._resetContextStyleTimingState(i),Zr(this,ta(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function rI(){return new f.vHH(3006,!1)}()),e.definitions.forEach(c=>{if(this._resetContextStyleTimingState(t),0==c.type){const d=c,g=d.name;g.toString().split(/\s*,\s*/).forEach(_=>{d.name=_,s.push(this.visitState(d,t))}),d.name=g}else if(1==c.type){const d=this.visitTransition(c,t);r+=d.queryCount,i+=d.depCount,o.push(d)}else t.errors.push(function ts(){return new f.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(c=>{c instanceof Map&&c.forEach(d=>{Mr(d).forEach(g=>{o.hasOwnProperty(g)||s.add(g)})})}),s.size&&(cu(s.values()),t.errors.push(function eu(n,e){return new f.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Zr(this,ta(e.animation),t);return{type:1,matchers:Bg(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:li(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Zr(this,r,t)),options:li(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const c=Zr(this,o,t);return i=Math.max(i,t.currentTime),c});return t.currentTime=i,{type:3,steps:s,options:li(e.options)}}visitAnimate(e,t){const r=function ai(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return ia(Ka(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=ia(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Ka(t,e);return ia(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:wr({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,c=!1;if(!o){c=!0;const g={};r.easing&&(g.easing=r.easing),o=wr(g)}t.currentTime+=r.duration+r.delay;const d=this.visitStyle(o,t);d.isEmptyStep=c,i=d}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let c of i)"string"==typeof c?c===Eo?r.push(c):t.errors.push(new f.vHH(3002,!1)):r.push(Oc(c));let s=!1,o=null;return r.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(o=c.get("easing"),c.delete("easing")),!s))for(let d of c.values())if(d.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,d)=>{const g=t.collectedStyles.get(t.currentQuerySelector),_=g.get(d);let w=!0;_&&(s!=i&&s>=_.startTime&&i<=_.endTime&&(t.errors.push(function yv(n,e,t,r,i){return new f.vHH(3010,!1)}()),w=!1),s=_.startTime),w&&g.set(d,{startTime:s,endTime:i}),t.options&&function Nc(n,e,t){const r=e.params||{},i=Mr(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Tc(n){return new f.vHH(3001,!1)}())})}(c,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function zh(){return new f.vHH(3011,!1)}()),r;let s=0;const o=[];let c=!1,d=!1,g=0;const _=e.steps.map(B=>{const G=this._makeStyleAst(B,t);let X=null!=G.offset?G.offset:function Yt(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(G.styles),te=0;return null!=X&&(s++,te=G.offset=X),d=d||te<0||te>1,c=c||te<g,g=te,o.push(te),G});d&&t.errors.push(function Gh(){return new f.vHH(3012,!1)}()),c&&t.errors.push(function tu(){return new f.vHH(3200,!1)}());const w=e.steps.length;let T=0;s>0&&s<w?t.errors.push(function za(){return new f.vHH(3202,!1)}()):0==s&&(T=1/(w-1));const S=w-1,M=t.currentTime,R=t.currentAnimateTimings,N=R.duration;return _.forEach((B,G)=>{const X=T>0?G==S?1:T*G:o[G],te=X*N;t.currentTime=M+R.delay+te,R.duration=te,this._validateStyleAst(B,t),B.offset=X,r.styles.push(B)}),r}visitReference(e,t){return{type:8,animation:Zr(this,ta(e.animation),t),options:li(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:li(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:li(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function je(n){const e=!!n.split(/\s*,\s*/).find(t=>t==I);return e&&(n=n.replace(A,"")),n=n.replace(/@\*/g,uu).replace(/@\w+/g,t=>uu+"-"+t.slice(1)).replace(/:animating/g,Pc),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,qr(t.collectedStyles,t.currentQuerySelector,new Map);const c=Zr(this,ta(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:c,originalSelector:e.selector,options:li(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Wh(){return new f.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ka(e.timings,t.errors,!0);return{type:12,animation:Zr(this,ta(e.animation),t),timings:r,options:null}}}class gt{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function li(n){return n?(n=Ya(n)).params&&(n.params=function Ye(n){return n?Ya(n):null}(n.params)):n={},n}function ia(n,e,t){return{duration:n,delay:e,easing:t}}function Qa(n,e,t,r,i,s,o=null,c=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:c}}class sa{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const af=new RegExp(":enter","g"),uf=new RegExp(":leave","g");function rs(n,e,t,r,i,s=new Map,o=new Map,c,d,g=[]){return(new cf).buildKeyframes(n,e,t,r,i,s,o,c,d,g)}class cf{buildKeyframes(e,t,r,i,s,o,c,d,g,_=[]){g=g||new sa;const w=new fu(e,t,g,i,s,_,[]);w.options=d;const T=d.delay?Er(d.delay):0;w.currentTimeline.delayNextStep(T),w.currentTimeline.setStyles([o],null,w.errors,d),Zr(this,r,w);const S=w.timelines.filter(M=>M.containsAnimation());if(S.length&&c.size){let M;for(let R=S.length-1;R>=0;R--){const N=S[R];if(N.element===t){M=N;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([c],null,w.errors,d)}return S.length?S.map(M=>M.buildKeyframes()):[Qa(t,[],[],[],0,T,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Er(ns(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Er(r.duration):null,c=null!=r.delay?Er(r.delay):null;return 0!==o&&e.forEach(d=>{const g=t.appendInstructionToTimeline(d,o,c);s=Math.max(s,g.duration+g.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Zr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=hu);const o=Er(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Zr(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Er(e.options.delay):0;e.steps.forEach(o=>{const c=t.createSubContext(e.options);s&&c.delayNextStep(s),Zr(this,o,c),i=Math.max(i,c.currentTimeline.currentTime),r.push(c.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Ka(t.params?ns(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,c=t.createSubContext().currentTimeline;c.easing=r.easing,e.styles.forEach(d=>{c.forwardTime((d.offset||0)*s),c.setStyles(d.styles,d.easing,t.errors,t.options),c.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(c),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Er(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=hu);let o=r;const c=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=c.length;let d=null;c.forEach((g,_)=>{t.currentQueryIndex=_;const w=t.createSubContext(e.options,g);s&&w.delayNextStep(s),g===t.element&&(d=w.currentTimeline),Zr(this,e.animation,w),w.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,w.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),d&&(t.currentTimeline.mergeTimelineCollectedStyles(d),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),c=o*(t.currentQueryTotal-1);let d=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":d=c-d;break;case"full":d=r.currentStaggerTime}const _=t.currentTimeline;d&&_.delayNextStep(d);const w=_.currentTime;Zr(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-w+(i.startTime-r.currentTimeline.startTime)}}const hu={};class fu{constructor(e,t,r,i,s,o,c,d){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=d||new df(this._driver,t,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Er(r.duration)),null!=r.delay&&(i.delay=Er(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(c=>{(!t||!o.hasOwnProperty(c))&&(o[c]=ns(s[c],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new fu(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=hu,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new $g(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let c=[];if(i&&c.push(this.element),e.length>0){e=(e=e.replace(af,"."+this._enterClassName)).replace(uf,"."+this._leaveClassName);let g=this._driver.query(this.element,e,1!=r);0!==r&&(g=r<0?g.slice(g.length+r,g.length):g.slice(0,r)),c.push(...g)}return!s&&0==c.length&&o.push(function nr(n){return new f.vHH(3014,!1)}()),c}}class df{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new df(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Eo),this._currentKeyframe.set(t,Eo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function aI(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Eo)}else Ws(i,t)}),t}(e,this._globalTimelineStyles);for(let[c,d]of o){const g=ns(d,s,r);this._pendingStyles.set(c,g),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??Eo),this._updateStyle(c,g)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((c,d)=>{const g=Ws(c,new Map,this._backFill);g.forEach((_,w)=>{"!"===_?e.add(w):_===Eo&&t.add(w)}),r||g.set("offset",d/this.duration),i.push(g)});const s=e.size?cu(e.values()):[],o=t.size?cu(t.values()):[];if(r){const c=i[0],d=new Map(c);c.set("offset",0),d.set("offset",1),i=[c,d]}return Qa(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class $g extends df{constructor(e,t,r,i,s,o,c=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,c=t/o,d=Ws(e[0]);d.set("offset",0),s.push(d);const g=Ws(e[0]);g.set("offset",oI(c)),s.push(g);const _=e.length-1;for(let w=1;w<=_;w++){let T=Ws(e[w]);const S=T.get("offset");T.set("offset",oI((t+S*r)/o)),s.push(T)}r=o,t=0,i="",e=s}return Qa(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function oI(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class zg{}const uI=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Gg extends zg{normalizePropertyName(e,t){return rf(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(uI.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const c=r.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&i.push(function $a(n,e){return new f.vHH(3005,!1)}())}return o+s}}function hf(n,e,t,r,i,s,o,c,d,g,_,w,T){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:c,queriedElements:d,preStyleProps:g,postStyleProps:_,totalTime:w,errors:T}}const Wg={};class qg{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Vv(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,c,d,g,_){const w=[],T=this.ast.options&&this.ast.options.params||Wg,M=this.buildStyles(r,c&&c.params||Wg,w),R=d&&d.params||Wg,N=this.buildStyles(i,R,w),B=new Set,G=new Map,X=new Map,te="void"===i,re={params:ff(R,T),delay:this.ast.options?.delay},fe=_?[]:rs(e,t,this.ast.animation,s,o,M,N,re,g,w);let Ie=0;if(fe.forEach(ut=>{Ie=Math.max(ut.duration+ut.delay,Ie)}),w.length)return hf(t,this._triggerName,r,i,te,M,N,[],[],G,X,Ie,w);fe.forEach(ut=>{const Ft=ut.element,Zt=qr(G,Ft,new Set);ut.preStyleProps.forEach(Yn=>Zt.add(Yn));const sn=qr(X,Ft,new Set);ut.postStyleProps.forEach(Yn=>sn.add(Yn)),Ft!==t&&B.add(Ft)});const Ve=cu(B.values());return hf(t,this._triggerName,r,i,te,M,N,fe,Ve,G,X,Ie)}}function ff(n,e){const t=Ya(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class lA{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Ya(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,c)=>{o&&(o=ns(o,i,t));const d=this.normalizer.normalizePropertyName(c,t);o=this.normalizer.normalizeStyleValue(c,d,o,t),r.set(d,o)})}),r}}class uA{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new lA(i.style,i.options&&i.options.params||{},r))}),Uv(this.states,"true","1"),Uv(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new qg(e,i,this.states))}),this.fallbackTransition=function cA(n,e,t){return new qg(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,c)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Uv(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Bv=new sa;class Zg{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=O(this._driver,t,r,[]);if(r.length)throw function vv(n){return new f.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Iv(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const c=new Map;if(s?(o=rs(this._driver,t,s,Jh,lu,new Map,new Map,r,Bv,i),o.forEach(_=>{const w=qr(c,_.element,new Map);_.postStyleProps.forEach(T=>w.set(T,null))})):(i.push(function qh(){return new f.vHH(3300,!1)}()),o=[]),i.length)throw function Xo(n){return new f.vHH(3504,!1)}();c.forEach((_,w)=>{_.forEach((T,S)=>{_.set(S,this._driver.computeStyle(w,S,Eo))})});const g=Ms(o.map(_=>{const w=c.get(_.element);return this._buildPlayer(_,new Map,w)}));return this._playersById.set(e,g),g.onDestroy(()=>this.destroy(e)),this.players.push(g),g}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Ac(n){return new f.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=Rg(t,"","","");return Mc(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Kg="ng-animate-queued",jv="ng-animate-disabled",Hv=[],hI={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fI={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ei="__ng_removed";class pf{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function pA(n){return n??null}(r?e.value:e),r){const s=Ya(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Bc="void",Yg=new pf(Bc);class pI{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,qs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Jo(n,e){return new f.vHH(3302,!1)}();if(null==r||0==r.length)throw function bv(n){return new f.vHH(3303,!1)}();if(!function gA(n){return"start"==n||"done"==n}(r))throw function Zh(n,e){return new f.vHH(3400,!1)}();const s=qr(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const c=qr(this._engine.statesByElement,e,new Map);return c.has(t)||(qs(e,Za),qs(e,Za+"-"+t),c.set(t,Yg)),()=>{this._engine.afterFlush(()=>{const d=s.indexOf(o);d>=0&&s.splice(d,1),this._triggers.has(t)||c.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Ga(n){return new f.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new $v(this.id,t,e);let c=this._engine.statesByElement.get(e);c||(qs(e,Za),qs(e,Za+"-"+t),this._engine.statesByElement.set(e,c=new Map));let d=c.get(t);const g=new pf(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&d&&g.absorbOptions(d.options),c.set(t,g),d||(d=Yg),g.value!==Bc&&d.value===g.value){if(!function yI(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(d.params,g.params)){const R=[],N=s.matchStyles(d.value,d.params,R),B=s.matchStyles(g.value,g.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{Gn(e,N),ks(e,B)})}return}const T=qr(this._engine.playersByElement,e,[]);T.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let S=s.matchTransition(d.value,g.value,e,g.params),M=!1;if(!S){if(!i)return;S=s.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:S,fromState:d,toState:g,player:o,isFallbackTransition:M}),M||(qs(e,Kg),o.onStart(()=>{gf(e,Kg)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);const N=this._engine.playersByElement.get(e);if(N){let B=N.indexOf(o);B>=0&&N.splice(B,1)}}),this.players.push(o),T.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,uu,!0);r.forEach(i=>{if(i[Ei])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const c=[];if(s.forEach((d,g)=>{if(o.set(g,d.value),this._triggers.has(g)){const _=this.trigger(e,g,Bc,i);_&&c.push(_)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ms(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const d=this._triggers.get(o).fallbackTransition,g=r.get(o)||Yg,_=new pf(Bc),w=new $v(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:d,fromState:g,toState:_,player:w,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ei];(!s||s===hI)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){qs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(c=>{if(c.name==r.triggerName){const d=Rg(s,r.triggerName,r.fromState.value,r.toState.value);d._data=e,Mc(r.player,c.phase,d,c.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class gI{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new pI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,c=this.driver.getParentElement(t);for(;c;){const d=i.get(c);if(d){const g=r.indexOf(d);r.splice(g+1,0,e),o=!0;break}c=this.driver.getParentElement(c)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(Qg(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Qg(t))return;const s=t[Ei];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),qs(e,jv)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),gf(e,jv))}removeNode(e,t,r,i){if(Qg(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ei]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Qg(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,uu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Pc,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ms(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ei];if(t&&t.setForRemoval){if(e[Ei]=hI,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jv)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)qs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ms(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function iu(n){return new f.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new sa,i=[],s=new Map,o=[],c=new Map,d=new Map,g=new Map,_=new Set;this.disabledNodes.forEach($e=>{_.add($e);const nt=this.driver.query($e,".ng-animate-queued",!0);for(let vt=0;vt<nt.length;vt++)_.add(nt[vt])});const w=this.bodyNode,T=Array.from(this.statesByElement.keys()),S=mI(T,this.collectedEnterElements),M=new Map;let R=0;S.forEach(($e,nt)=>{const vt=Jh+R++;M.set(nt,vt),$e.forEach(Ot=>qs(Ot,vt))});const N=[],B=new Set,G=new Set;for(let $e=0;$e<this.collectedLeaveElements.length;$e++){const nt=this.collectedLeaveElements[$e],vt=nt[Ei];vt&&vt.setForRemoval&&(N.push(nt),B.add(nt),vt.hasAnimation?this.driver.query(nt,".ng-star-inserted",!0).forEach(Ot=>B.add(Ot)):G.add(nt))}const X=new Map,te=mI(T,Array.from(B));te.forEach(($e,nt)=>{const vt=lu+R++;X.set(nt,vt),$e.forEach(Ot=>qs(Ot,vt))}),e.push(()=>{S.forEach(($e,nt)=>{const vt=M.get(nt);$e.forEach(Ot=>gf(Ot,vt))}),te.forEach(($e,nt)=>{const vt=X.get(nt);$e.forEach(Ot=>gf(Ot,vt))}),N.forEach($e=>{this.processLeaveNode($e)})});const re=[],fe=[];for(let $e=this._namespaceList.length-1;$e>=0;$e--)this._namespaceList[$e].drainQueuedTransitions(t).forEach(vt=>{const Ot=vt.player,Qn=vt.element;if(re.push(Ot),this.collectedEnterElements.length){const Yi=Qn[Ei];if(Yi&&Yi.setForMove){if(Yi.previousTriggersValues&&Yi.previousTriggersValues.has(vt.triggerName)){const sg=Yi.previousTriggersValues.get(vt.triggerName),$o=this.statesByElement.get(vt.element);if($o&&$o.has(vt.triggerName)){const eA=$o.get(vt.triggerName);eA.value=sg,$o.set(vt.triggerName,eA)}}return void Ot.destroy()}}const bs=!w||!this.driver.containsElement(w,Qn),zr=X.get(Qn),Bs=M.get(Qn),An=this._buildInstruction(vt,r,Bs,zr,bs);if(An.errors&&An.errors.length)return void fe.push(An);if(bs)return Ot.onStart(()=>Gn(Qn,An.fromStyles)),Ot.onDestroy(()=>ks(Qn,An.toStyles)),void i.push(Ot);if(vt.isFallbackTransition)return Ot.onStart(()=>Gn(Qn,An.fromStyles)),Ot.onDestroy(()=>ks(Qn,An.toStyles)),void i.push(Ot);const sh=[];An.timelines.forEach(Yi=>{Yi.stretchStartingKeyframe=!0,this.disabledNodes.has(Yi.element)||sh.push(Yi)}),An.timelines=sh,r.append(Qn,An.timelines),o.push({instruction:An,player:Ot,element:Qn}),An.queriedElements.forEach(Yi=>qr(c,Yi,[]).push(Ot)),An.preStyleProps.forEach((Yi,sg)=>{if(Yi.size){let $o=d.get(sg);$o||d.set(sg,$o=new Set),Yi.forEach((eA,zL)=>$o.add(zL))}}),An.postStyleProps.forEach((Yi,sg)=>{let $o=g.get(sg);$o||g.set(sg,$o=new Set),Yi.forEach((eA,zL)=>$o.add(zL))})});if(fe.length){const $e=[];fe.forEach(nt=>{$e.push(function Ev(n,e){return new f.vHH(3505,!1)}())}),re.forEach(nt=>nt.destroy()),this.reportError($e)}const Ie=new Map,Ve=new Map;o.forEach($e=>{const nt=$e.element;r.has(nt)&&(Ve.set(nt,nt),this._beforeAnimationBuild($e.player.namespaceId,$e.instruction,Ie))}),i.forEach($e=>{const nt=$e.element;this._getPreviousPlayers(nt,!1,$e.namespaceId,$e.triggerName,null).forEach(Ot=>{qr(Ie,nt,[]).push(Ot),Ot.destroy()})});const ut=N.filter($e=>_I($e,d,g)),Ft=new Map;jc(Ft,this.driver,G,g,Eo).forEach($e=>{_I($e,d,g)&&ut.push($e)});const sn=new Map;S.forEach(($e,nt)=>{jc(sn,this.driver,new Set($e),d,"!")}),ut.forEach($e=>{const nt=Ft.get($e),vt=sn.get($e);Ft.set($e,new Map([...Array.from(nt?.entries()??[]),...Array.from(vt?.entries()??[])]))});const Yn=[],Ki=[],In={};o.forEach($e=>{const{element:nt,player:vt,instruction:Ot}=$e;if(r.has(nt)){if(_.has(nt))return vt.onDestroy(()=>ks(nt,Ot.toStyles)),vt.disabled=!0,vt.overrideTotalTime(Ot.totalTime),void i.push(vt);let Qn=In;if(Ve.size>1){let zr=nt;const Bs=[];for(;zr=zr.parentNode;){const An=Ve.get(zr);if(An){Qn=An;break}Bs.push(zr)}Bs.forEach(An=>Ve.set(An,Qn))}const bs=this._buildAnimation(vt.namespaceId,Ot,Ie,s,sn,Ft);if(vt.setRealPlayer(bs),Qn===In)Yn.push(vt);else{const zr=this.playersByElement.get(Qn);zr&&zr.length&&(vt.parentPlayer=Ms(zr)),i.push(vt)}}else Gn(nt,Ot.fromStyles),vt.onDestroy(()=>ks(nt,Ot.toStyles)),Ki.push(vt),_.has(nt)&&i.push(vt)}),Ki.forEach($e=>{const nt=s.get($e.element);if(nt&&nt.length){const vt=Ms(nt);$e.setRealPlayer(vt)}}),i.forEach($e=>{$e.parentPlayer?$e.syncPlayerEvents($e.parentPlayer):$e.destroy()});for(let $e=0;$e<N.length;$e++){const nt=N[$e],vt=nt[Ei];if(gf(nt,lu),vt&&vt.hasAnimation)continue;let Ot=[];if(c.size){let bs=c.get(nt);bs&&bs.length&&Ot.push(...bs);let zr=this.driver.query(nt,Pc,!0);for(let Bs=0;Bs<zr.length;Bs++){let An=c.get(zr[Bs]);An&&An.length&&Ot.push(...An)}}const Qn=Ot.filter(bs=>!bs.destroyed);Qn.length?WL(this,nt,Qn):this.processLeaveNode(nt)}return N.length=0,Yn.forEach($e=>{this.players.push($e),$e.onDone(()=>{$e.destroy();const nt=this.players.indexOf($e);this.players.splice(nt,1)}),$e.play()}),Yn}elementContainsData(e,t){let r=!1;const i=t[Ei];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const c=this.playersByQueriedElement.get(e);c&&(o=c)}else{const c=this.playersByElement.get(e);if(c){const d=!s||s==Bc;c.forEach(g=>{g.queued||!d&&g.triggerName!=i||o.push(g)})}}return(r||i)&&(o=o.filter(c=>!(r&&r!=c.namespaceId||i&&i!=c.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,c=t.isRemovalTransition?void 0:t.triggerName;for(const d of t.timelines){const g=d.element,_=g!==s,w=qr(r,g,[]);this._getPreviousPlayers(g,_,o,c,t.toState).forEach(S=>{const M=S.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),S.destroy(),w.push(S)})}Gn(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const c=t.triggerName,d=t.element,g=[],_=new Set,w=new Set,T=t.timelines.map(M=>{const R=M.element;_.add(R);const N=R[Ei];if(N&&N.removedBeforeQueried)return new Bi(M.duration,M.delay);const B=R!==d,G=function qL(n){const e=[];return mA(n,e),e}((r.get(R)||Hv).map(Ie=>Ie.getRealPlayer())).filter(Ie=>!!Ie.element&&Ie.element===R),X=s.get(R),te=o.get(R),re=Iv(0,this._normalizer,0,M.keyframes,X,te),fe=this._buildPlayer(M,re,G);if(M.subTimeline&&i&&w.add(R),B){const Ie=new $v(e,c,R);Ie.setRealPlayer(fe),g.push(Ie)}return fe});g.forEach(M=>{qr(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>function fA(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,M.element,M))}),_.forEach(M=>qs(M,ef));const S=Ms(T);return S.onDestroy(()=>{_.forEach(M=>gf(M,ef)),ks(d,t.toStyles)}),w.forEach(M=>{qr(i,M,[]).push(S)}),S}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Bi(e.duration,e.delay)}}class $v{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Bi,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Mc(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Qg(n){return n&&1===n.nodeType}function oa(n,e){const t=n.style.display;return n.style.display=e??"none",t}function jc(n,e,t,r,i){const s=[];t.forEach(d=>s.push(oa(d)));const o=[];r.forEach((d,g)=>{const _=new Map;d.forEach(w=>{const T=e.computeStyle(g,w,i);_.set(w,T),(!T||0==T.length)&&(g[Ei]=fI,o.push(g))}),n.set(g,_)});let c=0;return t.forEach(d=>oa(d,s[c++])),o}function mI(n,e){const t=new Map;if(n.forEach(c=>t.set(c,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(c){if(!c)return 1;let d=s.get(c);if(d)return d;const g=c.parentNode;return d=t.has(g)?g:i.has(g)?1:o(g),s.set(c,d),d}return e.forEach(c=>{const d=o(c);1!==d&&t.get(d).push(c)}),t}function qs(n,e){n.classList?.add(e)}function gf(n,e){n.classList?.remove(e)}function WL(n,e,t){Ms(t).onDone(()=>n.processLeaveNode(e))}function mA(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof gv?mA(r.players,e):e.push(r)}}function _I(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Xg{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new gI(e,t,r),this._timelineEngine=new Zg(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let c=this._triggerCache[o];if(!c){const d=[],_=O(this._driver,s,d,[]);if(d.length)throw function _v(n,e){return new f.vHH(3404,!1)}();c=function dI(n,e,t){return new uA(n,e,t)}(i,_,this._normalizer),this._triggerCache[o]=c}this._transitionEngine.registerTrigger(t,i,c)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=kc(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,c]=kc(r);return this._timelineEngine.listen(o,t,c,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let _A=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ks(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ks(this._element,this._initialStyles),this._endStyles&&(ks(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Gn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gn(this._element,this._endStyles),this._endStyles=null),ks(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function mf(n){let e=null;return n.forEach((t,r)=>{(function aa(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Hc{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Lc(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class vI{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Tv(e,t)}getParentElement(e){return Yh(e)}query(e,t,r){return Sv(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const d={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(d.easing=s);const g=new Map,_=o.filter(S=>S instanceof Hc);(function Pv(n,e){return 0===n||0===e})(r,i)&&_.forEach(S=>{S.currentSnapshot.forEach((M,R)=>g.set(R,M))});let w=function Rv(n){return n.length?n[0]instanceof Map?n:n.map(e=>Oc(e)):[]}(t).map(S=>Ws(S));w=function Ov(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(c=>o.set(c,Lc(n,c)))}}return e}(e,w,g);const T=function yA(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=mf(e[0]),e.length>1&&(r=mf(e[e.length-1]))):e instanceof Map&&(t=mf(e)),t||r?new _A(n,t,r):null}(e,w);return new Hc(e,w,d,T)}}let bI=(()=>{class n extends Ec{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Bh(t):t;return vA(this._renderer,null,r,"register",[i]),new wI(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(Pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class wI extends class Jl{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new ZL(this._id,e,t||{},this._renderer)}}class ZL{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return vA(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function vA(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Jg="@.disabled";let Gv=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const c=o?.parentNode(s);c&&o.removeChild(c,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let _=this._rendererCache.get(s);return _||(_=new bA("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,_)),_}const o=r.id,c=r.id+"-"+this._currentId;this._currentId++,this.engine.register(c,t);const d=_=>{Array.isArray(_)?_.forEach(d):this.engine.registerTrigger(o,c,t,_.name,_)};return r.data.animation.forEach(d),new KL(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,c]=s;o(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(Xg),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class bA{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Jg?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class KL extends bA{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Jg?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function EI(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function wA(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,c=>{this.factory.scheduleListenerCallback(c._data||-1,r,c)})}return this.delegate.listen(e,t,r)}}let EA=(()=>{class n extends Xg{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pe),f.LFG(Fg),f.LFG(zg),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Wv=[{provide:Ec,useClass:bI},{provide:zg,useFactory:function IA(){return new Gg}},{provide:Xg,useClass:EA},{provide:f.FYo,useFactory:function CA(n,e,t){return new Gv(n,e,t)},deps:[Rh,Xg,f.R0b]}],$c=[{provide:Fg,useFactory:()=>new vI},{provide:f.QbO,useValue:"BrowserAnimations"},...Wv],II=[{provide:Fg,useClass:xv},{provide:f.QbO,useValue:"NoopAnimations"},...Wv];let qv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?II:$c}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:$c,imports:[Fh]}),n})();var En=j(8996),Xa=j(7669);function mt(...n){const e=(0,Xa.yG)(n);return(0,En.D)(n,e)}var la=j(7579);class Ii extends la.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const em=(0,j(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Rs=j(9751);const{isArray:XL}=Array,{getPrototypeOf:JL,prototype:yf,keys:Zv}=Object;function Kv(n){if(1===n.length){const e=n[0];if(XL(e))return{args:e,keys:null};if(function CI(n){return n&&"object"==typeof n&&JL(n)===yf}(e)){const t=Zv(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var gu=j(4671),Nt=j(4004);const{isArray:DI}=Array;function tm(n){return(0,Nt.U)(e=>function TI(n,e){return DI(e)?n(...e):n(e)}(n,e))}function TA(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var jr=j(5403),Yv=j(9672);function Qv(...n){const e=(0,Xa.yG)(n),t=(0,Xa.jO)(n),{args:r,keys:i}=Kv(n);if(0===r.length)return(0,En.D)([],e);const s=new Rs.y(function SI(n,e,t=gu.y){return r=>{Ja(e,()=>{const{length:i}=n,s=new Array(i);let o=i,c=i;for(let d=0;d<i;d++)Ja(e,()=>{const g=(0,En.D)(n[d],e);let _=!1;g.subscribe((0,jr.x)(r,w=>{s[d]=w,_||(_=!0,c--),c||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>TA(i,o):gu.y));return t?s.pipe(tm(t)):s}function Ja(n,e,t){n?(0,Yv.f)(t,n,e):e()}var _f=j(8189);function zc(...n){return function Xv(){return(0,_f.J)(1)}()((0,En.D)(n,(0,Xa.yG)(n)))}var nm=j(8421);function rm(n){return new Rs.y(e=>{(0,nm.Xf)(n()).subscribe(e)})}var im=j(9635),Do=j(576);function Gc(n,e){const t=(0,Do.m)(n)?n:()=>n,r=i=>i.error(t());return new Rs.y(e?i=>e.schedule(r,0,i):r)}var ua=j(515),Jv=j(727),Kr=j(4482);function sm(){return(0,Kr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,jr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class mu extends Rs.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Kr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Jv.w0;const t=this.getSubject();e.add(this.source.subscribe((0,jr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Jv.w0.EMPTY)}return e}refCount(){return sm()(this)}}function Ir(n,e){return(0,Kr.e)((t,r)=>{let i=null,s=0,o=!1;const c=()=>o&&!i&&r.complete();t.subscribe((0,jr.x)(r,d=>{i?.unsubscribe();let g=0;const _=s++;(0,nm.Xf)(n(d,_)).subscribe(i=(0,jr.x)(r,w=>r.next(e?e(d,w,_,g++):w),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function vf(n){return n<=0?()=>ua.E:(0,Kr.e)((e,t)=>{let r=0;e.subscribe((0,jr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function om(...n){const e=(0,Xa.yG)(n);return(0,Kr.e)((t,r)=>{(e?zc(n,t,e):zc(n,t)).subscribe(r)})}function Zs(n,e){return(0,Kr.e)((t,r)=>{let i=0;t.subscribe((0,jr.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Yr=j(5577);function am(n){return(0,Kr.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function e0(n=SA){return(0,Kr.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function SA(){return new em}function To(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zs((i,s)=>n(i,s,r)):gu.y,vf(1),t?am(e):e0(()=>new em))}function Wc(n,e){return(0,Do.m)(e)?(0,Yr.z)(n,e,1):(0,Yr.z)(n,1)}function Qr(n,e,t){const r=(0,Do.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Kr.e)((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let c=!0;i.subscribe((0,jr.x)(s,d=>{var g;null===(g=r.next)||void 0===g||g.call(r,d),s.next(d)},()=>{var d;c=!1,null===(d=r.complete)||void 0===d||d.call(r),s.complete()},d=>{var g;c=!1,null===(g=r.error)||void 0===g||g.call(r,d),s.error(d)},()=>{var d,g;c&&(null===(d=r.unsubscribe)||void 0===d||d.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):gu.y}function Ps(n){return(0,Kr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,jr.x)(t,void 0,void 0,o=>{s=(0,nm.Xf)(n(o,Ps(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function xA(n,e,t,r,i){return(s,o)=>{let c=t,d=e,g=0;s.subscribe((0,jr.x)(o,_=>{const w=g++;d=c?n(d,_,w):(c=!0,_),r&&o.next(d)},i&&(()=>{c&&o.next(d),o.complete()})))}}function So(n,e){return(0,Kr.e)(xA(n,e,arguments.length>=2,!0))}function yu(n){return n<=0?()=>ua.E:(0,Kr.e)((e,t)=>{let r=[];e.subscribe((0,jr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function xI(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zs((i,s)=>n(i,s,r)):gu.y,yu(1),t?am(e):e0(()=>new em))}function t0(n){return(0,Kr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",bf=Symbol("RouteTitle");class MI{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function _u(n){return new MI(n)}function n0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],c=n[s];if(o.startsWith(":"))i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!lm(n[i],e[i]))return!1;return!0}function lm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function qc(n){return Array.prototype.concat.apply([],n)}function kI(n){return n.length>0?n[n.length-1]:null}function Xr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function el(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,En.D)(Promise.resolve(n)):mt(n)}const AA={exact:function PI(n,e,t){if(!nl(n.segments,e.segments)||!o0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!PI(n.children[r],e.children[r],t))return!1;return!0},subset:kA},vu={exact:function MA(n,e){return xo(n,e)},subset:function n2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lm(n[t],e[t]))},ignored:()=>!0};function Ao(n,e,t){return AA[t.paths](n.root,e.root,t.matrixParams)&&vu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kA(n,e,t){return s0(n,e,e.segments,t)}function s0(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!nl(i,t)||e.hasChildren()||!o0(i,t,r))}if(n.segments.length===t.length){if(!nl(n.segments,t)||!o0(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!kA(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(nl(n.segments,i)&&o0(n.segments,i,r)&&n.children[Qt])&&s0(n.children[Qt],e,s,r)}}function o0(n,e,t){return e.every((r,i)=>vu[t](n[i].parameters,r.parameters))}class tl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_u(this.queryParams)),this._queryParamMap}toString(){return OA.serialize(this)}}class ln{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wf(this)}}class Zc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=_u(this.parameters)),this._parameterMap}toString(){return LI(this)}}function nl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let OI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new is},providedIn:"root"}),n})();class is{parse(e){const t=new jI(e);return new tl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ef(e.root,!0)}`,r=function VI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${cm(t)}=${cm(i)}`).join("&"):`${cm(t)}=${cm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function NA(n){return encodeURI(n)}(e.fragment)}`:""}`}}const OA=new is;function wf(n){return n.segments.map(e=>LI(e)).join("/")}function Ef(n,e){if(!n.hasChildren())return wf(n);if(e){const t=n.children[Qt]?Ef(n.children[Qt],!1):"",r=[];return Xr(n.children,(i,s)=>{s!==Qt&&r.push(`${s}:${Ef(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function PA(n,e){let t=[];return Xr(n.children,(r,i)=>{i===Qt&&(t=t.concat(e(r,i)))}),Xr(n.children,(r,i)=>{i!==Qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Qt?[Ef(n.children[Qt],!1)]:[`${i}:${Ef(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${wf(n)}/${t[0]}`:`${wf(n)}/(${t.join("//")})`}}function NI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cm(n){return NI(n).replace(/%3B/gi,";")}function dm(n){return NI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hm(n){return decodeURIComponent(n)}function FI(n){return hm(n.replace(/\+/g,"%20"))}function LI(n){return`${dm(n.path)}${function Bt(n){return Object.keys(n).map(e=>`;${dm(e)}=${dm(n[e])}`).join("")}(n.parameters)}`}const UI=/^[^\/()?;=#]+/;function If(n){const e=n.match(UI);return e?e[0]:""}const FA=/^[^=?&#]+/,BI=/^[^&#]+/;class jI{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ln([],{}):new ln([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new ln(e,t)),r}parseSegment(){const e=If(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new Zc(hm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=If(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=If(this.remaining);i&&(r=i,this.capture(r))}e[hm(t)]=hm(r)}parseQueryParam(e){const t=function LA(n){const e=n.match(FA);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function VA(n){const e=n.match(BI);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=FI(t),s=FI(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=If(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Qt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Qt]:new ln([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function a0(n){return n.segments.length>0?new ln([],{[Qt]:n}):n}function fm(n){const e={};for(const r of Object.keys(n.children)){const s=fm(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function r2(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new ln(n.segments.concat(e.segments),e.children)}return n}(new ln(n.segments,e))}function rl(n){return n instanceof tl}function u0(n,e,t,r,i){if(0===t.length)return Df(e.root,e.root,e.root,r,i);const s=function c0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new HI(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return Xr(s.outlets,(d,g)=>{c[g]="string"==typeof d?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((c,d)=>{0==d&&"."===c||(0==d&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,s]},[]);return new HI(t,e,r)}(t);return s.toRoot()?Df(e.root,e.root,new ln([],{}),r,i):function o(d){const g=function Yc(n,e,t,r){if(n.isAbsolute)return new Tf(e.root,!0,0);if(-1===r)return new Tf(t,t===e.root,0);return function $I(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new Tf(r,!1,i-s)}(t,r+(Cf(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,d),_=g.processChildren?Sf(g.segmentGroup,g.index,s.commands):Qc(g.segmentGroup,g.index,s.commands);return Df(e.root,g.segmentGroup,_,r,i)}(n.snapshot?._lastPathIndex)}function Cf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gm(n){return"object"==typeof n&&null!=n&&n.outlets}function Df(n,e,t,r,i){let o,s={};r&&Xr(r,(d,g)=>{s[g]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),o=n===e?t:BA(n,e,t);const c=a0(fm(o));return new tl(c,s,i)}function BA(n,e,t){const r={};return Xr(n.children,(i,s)=>{r[s]=i===e?t:BA(i,e,t)}),new ln(n.segments,r)}class HI{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cf(r[0]))throw new f.vHH(4003,!1);const i=r.find(gm);if(i&&i!==kI(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Qc(n,e,t){if(n||(n=new ln([],{})),0===n.segments.length&&n.hasChildren())return Sf(n,e,t);const r=function GI(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],c=t[r];if(gm(c))break;const d=`${c}`,g=r<t.length-1?t[r+1]:null;if(i>0&&void 0===d)break;if(d&&g&&"object"==typeof g&&void 0===g.outlets){if(!qI(d,g,o))return s;r+=2}else{if(!qI(d,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new ln(n.segments.slice(0,r.pathIndex),{});return s.children[Qt]=new ln(n.segments.slice(r.pathIndex),n.children),Sf(s,0,i)}return r.match&&0===i.length?new ln(n.segments,{}):r.match&&!n.hasChildren()?d0(n,e,t):r.match?Sf(n,0,i):d0(n,e,t)}function Sf(n,e,t){if(0===t.length)return new ln(n.segments,{});{const r=function zI(n){return gm(n[0])?n[0].outlets:{[Qt]:n}}(t),i={};return Xr(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Qc(n.children[o],e,s))}),Xr(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new ln(n.segments,i)}}function d0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(gm(s)){const d=HA(s.outlets);return new ln(r,d)}if(0===i&&Cf(t[0])){r.push(new Zc(n.segments[e].path,WI(t[0]))),i++;continue}const o=gm(s)?s.outlets[Qt]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Cf(c)?(r.push(new Zc(o,WI(c))),i+=2):(r.push(new Zc(o,{})),i++)}return new ln(r,{})}function HA(n){const e={};return Xr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=d0(new ln([],{}),0,t))}),e}function WI(n){const e={};return Xr(n,(t,r)=>e[r]=`${t}`),e}function qI(n,e,t){return n==t.path&&xo(e,t.parameters)}class ca{constructor(e,t){this.id=e,this.url=t}}class mm extends ca{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bu extends ca{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xf extends ca{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class h0 extends ca{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class f0 extends ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class i2 extends ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p0 extends ca{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $A extends ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s2 extends ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xc{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ZI{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class KI{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ym{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ks{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YI{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QI{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Mo{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Af(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Af(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=_m(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _m(e,this._root).map(t=>t.value)}}function Af(n,e){if(n===e.value)return e;for(const t of e.children){const r=Af(n,t);if(r)return r}return null}function _m(n,e){if(n===e.value)return[e];for(const t of e.children){const r=_m(n,t);if(r.length)return r.unshift(e),r}return[]}class Ys{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class m0 extends Mo{constructor(e,t){super(e),this.snapshot=t,_0(this,e)}toString(){return this.snapshot.toString()}}function zA(n,e){const t=function vm(n,e){const o=new Jc([],{},{},"",{},Qt,e,null,n.root,-1,{});return new GA("",new Ys(o,[]))}(n,e),r=new Ii([new Zc("",{})]),i=new Ii({}),s=new Ii({}),o=new Ii({}),c=new Ii(""),d=new Qs(r,i,o,c,s,Qt,e,t.root);return d.snapshot=t.root,new m0(new Ys(d,[]),t)}class Qs{constructor(e,t,r,i,s,o,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.title=this.data?.pipe((0,Nt.U)(g=>g[bf]))??mt(void 0),this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Nt.U)(e=>_u(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Nt.U)(e=>_u(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bm(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function y0(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Jc{constructor(e,t,r,i,s,o,c,d,g,_,w,T){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.title=this.data?.[bf],this.routeConfig=d,this._urlSegment=g,this._lastPathIndex=_,this._correctedLastPathIndex=T??_,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_u(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_u(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class GA extends Mo{constructor(e,t){super(t),this.url=e,_0(this,t)}toString(){return XI(this._root)}}function _0(n,e){e.value._routerState=n,e.children.forEach(t=>_0(n,t))}function XI(n){const e=n.children.length>0?` { ${n.children.map(XI).join(", ")} } `:"";return`${n.value}${e}`}function v0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),xo(e.params,t.params)||n.params.next(t.params),function r0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),xo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function b0(n,e){const t=xo(n.params,e.params)&&function RA(n,e){return nl(n,e)&&n.every((t,r)=>xo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||b0(n.parent,e.parent))}function wm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function WA(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return wm(n,r,i);return wm(n,r)})}(n,e,t);return new Ys(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>wm(n,c)),o}}const r=function o2(n){return new Qs(new Ii(n.url),new Ii(n.params),new Ii(n.queryParams),new Ii(n.fragment),new Ii(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>wm(n,s));return new Ys(r,i)}}const Em="ngNavigationCancelingError";function w0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=rl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eC(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function eC(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Em]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Im(n){return qA(n)&&rl(n.url)}function qA(n){return n&&n[Em]}class a2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Cm,this.attachRef=null}}let Cm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new a2,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const E0=!1;let tC=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||Qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,E0);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,E0);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,E0);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,E0);this._activatedRoute=t;const i=this.location,o=t._futureSnapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,d=new l2(t,c,i.injector);if(r&&function u2(n){return!!n.resolveComponentFactory}(r)){const g=r.resolveComponentFactory(o);this.activated=i.createComponent(g,i.length,d)}else this.activated=i.createComponent(o,{index:i.length,injector:d,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cm),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class l2{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Qs?this.route:e===Cm?this.childContexts:this.parent.get(e,t)}}let nC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[tC],encapsulation:2}),n})();function ZA(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function D0(n){const e=n.children&&n.children.map(D0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=nC),t}function Rr(n){return n.outlet||Qt}function T0(n,e){const t=n.filter(r=>Rr(r)===e);return t.push(...n.filter(r=>Rr(r)!==e)),t}function kf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class sC{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),v0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Mf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Xr(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Mf(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new YI(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ym(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(v0(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),v0(c.route.value),this.activateChildRoutes(e,null,o.children)}else{const c=kf(i.snapshot),d=c?.get(f._Vd)??null;o.attachRef=null,o.route=i,o.resolver=d,o.injector=c,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class oC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Tm{constructor(e,t){this.component=e,this.route=t}}function Sm(n,e,t){const r=n._root;return ko(r,e?e._root:null,t,[r.value])}function il(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function ko(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Mf(e);return n.children.forEach(o=>{(function S0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const d=function xm(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!nl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!nl(n.url,e.url)||!xo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!b0(n,e)||!xo(n.queryParams,e.queryParams);default:return!b0(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new oC(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ko(n,e,s.component?c?c.children:null:t,r,i),d&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Tm(c.outlet.component,o))}else o&&td(e,c,i),i.canActivateChecks.push(new oC(r)),ko(n,null,s.component?c?c.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Xr(s,(o,c)=>td(o,t.getContext(c),i)),i}function td(n,e,t){const r=Mf(n),i=n.value;Xr(r,(s,o)=>{td(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Tm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function nd(n){return"function"==typeof n}function k0(n){return n instanceof em||"EmptyError"===n?.name}const Rf=Symbol("INITIAL_VALUE");function Eu(){return Ir(n=>Qv(n.map(e=>e.pipe(vf(1),om(Rf)))).pipe((0,Nt.U)(e=>{for(const t of e)if(!0!==t){if(t===Rf)return Rf;if(!1===t||t instanceof tl)return t}return!0}),Zs(e=>e!==Rf),vf(1)))}function dC(n){return(0,im.z)(Qr(e=>{if(rl(e))throw w0(0,e)}),(0,Nt.U)(e=>!0===e))}const Am={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hC(n,e,t,r,i){const s=Mm(n,e,t);return s.matched?function tM(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?mt(i.map(o=>{const c=il(o,n);return el(function d2(n){return n&&nd(n.canMatch)}(c)?c.canMatch(e,t):n.runInContext(()=>c(e,t)))})).pipe(Eu(),dC()):mt(!0)}(r=ZA(e,r),e,t).pipe((0,Nt.U)(o=>!0===o?s:{...Am})):mt(s)}function Mm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Am}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||n0)(t,n,e);if(!i)return{...Am};const s={};Xr(i.posParams,(c,d)=>{s[d]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function km(n,e,t,r,i="corrected"){if(t.length>0&&function pC(n,e,t){return t.some(r=>os(n,e,r)&&Rr(r)!==Qt)}(n,t,r)){const o=new ln(e,function fC(n,e,t,r){const i={};i[Qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Rr(s)!==Qt){const o=new ln([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Rr(s)]=o}return i}(n,e,r,new ln(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function rM(n,e,t){return t.some(r=>os(n,e,r))}(n,t,r)){const o=new ln(n.segments,function nM(n,e,t,r,i,s){const o={};for(const c of r)if(os(n,t,c)&&!i[Rr(c)]){const d=new ln([],{});d._sourceSegment=n,d._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Rr(c)]=d}return{...i,...o}}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new ln(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function os(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Rm(n,e,t,r){return!!(Rr(n)===r||r!==Qt&&os(e,t,n))&&("**"===n.path||Mm(e,n,t).matched)}function gC(n,e,t){return 0===e.length&&!n.children[t]}const Pm=!1;class P0{constructor(e){this.segmentGroup=e||null}}class O0{constructor(e){this.urlTree=e}}function Pf(n){return Gc(new P0(n))}function mC(n){return Gc(new O0(n))}class oM{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=km(this.urlTree.root,[],[],this.config).segmentGroup,t=new ln(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Qt).pipe((0,Nt.U)(s=>this.createUrlTree(fm(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ps(s=>{if(s instanceof O0)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof P0?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Qt).pipe((0,Nt.U)(i=>this.createUrlTree(fm(i),e.queryParams,e.fragment))).pipe(Ps(i=>{throw i instanceof P0?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,Pm)}createUrlTree(e,t,r){const i=a0(e);return new tl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Nt.U)(s=>new ln([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,En.D)(i).pipe(Wc(s=>{const o=r.children[s],c=T0(t,s);return this.expandSegmentGroup(e,c,o,s).pipe((0,Nt.U)(d=>({segment:d,outlet:s})))}),So((s,o)=>(s[o.outlet]=o.segment,s),{}),xI())}expandSegment(e,t,r,i,s,o){return(0,En.D)(r).pipe(Wc(c=>this.expandSegmentAgainstRoute(e,t,r,c,i,s,o).pipe(Ps(g=>{if(g instanceof P0)return mt(null);throw g}))),To(c=>!!c),Ps((c,d)=>{if(k0(c))return gC(t,i,s)?mt(new ln([],{})):Pf(t);throw c}))}expandSegmentAgainstRoute(e,t,r,i,s,o,c){return Rm(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):Pf(t):Pf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?mC(s):this.lineralizeSegments(r,s).pipe((0,Yr.z)(o=>{const c=new ln(o,{});return this.expandSegment(e,c,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:c,consumedSegments:d,remainingSegments:g,positionalParamSegments:_}=Mm(t,i,s);if(!c)return Pf(t);const w=this.applyRedirectCommands(d,i.redirectTo,_);return i.redirectTo.startsWith("/")?mC(w):this.lineralizeSegments(i,w).pipe((0,Yr.z)(T=>this.expandSegment(e,t,r,T.concat(g),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=ZA(r,e),r.loadChildren?(r._loadedRoutes?mt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Nt.U)(c=>(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,new ln(i,{})))):mt(new ln(i,{}))):hC(t,r,i,e).pipe(Ir(({matched:o,consumedSegments:c,remainingSegments:d})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Yr.z)(_=>{const w=_.injector??e,T=_.routes,{segmentGroup:S,slicedSegments:M}=km(t,c,d,T),R=new ln(S.segments,S.children);if(0===M.length&&R.hasChildren())return this.expandChildren(w,T,R).pipe((0,Nt.U)(X=>new ln(c,X)));if(0===T.length&&0===M.length)return mt(new ln(c,{}));const N=Rr(r)===s;return this.expandSegment(w,R,T,M,N?Qt:s,!0).pipe((0,Nt.U)(G=>new ln(c.concat(G.segments),G.children)))})):Pf(t)))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function eM(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?mt(!0):mt(i.map(o=>{const c=il(o,n);return el(function A0(n){return n&&nd(n.canLoad)}(c)?c.canLoad(e,t):n.runInContext(()=>c(e,t)))})).pipe(Eu(),dC())}(e,t,r).pipe((0,Yr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Qr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function N0(n){return Gc(eC(Pm,3))}())):mt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Qt])return Gc(new f.vHH(4e3,Pm));i=i.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new tl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[s]=t[c]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Xr(t.children,(c,d)=>{o[d]=this.createSegmentGroup(e,c,r,i)}),new ln(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,Pm);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Nm{}class g2{constructor(e,t,r,i,s,o,c,d){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=c,this.urlSerializer=d}recognize(){const e=km(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe((0,Nt.U)(t=>{if(null===t)return null;const r=new Jc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ys(r,t),s=new GA(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=bm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,En.D)(Object.keys(r.children)).pipe(Wc(i=>{const s=r.children[i],o=T0(t,i);return this.processSegmentGroup(e,o,s,i)}),So((i,s)=>i&&s?(i.push(...s),i):null),function e2(n,e=!1){return(0,Kr.e)((t,r)=>{let i=0;t.subscribe((0,jr.x)(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),am(null),xI(),(0,Nt.U)(i=>{if(null===i)return null;const s=L0(i);return function yC(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,En.D)(t).pipe(Wc(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),To(o=>!!o),Ps(o=>{if(k0(o))return gC(r,i,s)?mt([]):mt(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!Rm(t,r,i,s))return mt(null);let o;if("**"===t.path){const c=i.length>0?kI(i).parameters:{},d=Of(r)+i.length;o=mt({snapshot:new Jc(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,id(t),Rr(t),t.component??t._loadedComponent??null,t,Ro(r),d,bC(t),d),consumedSegments:[],remainingSegments:[]})}else o=hC(r,t,i,e).pipe((0,Nt.U)(({matched:c,consumedSegments:d,remainingSegments:g,parameters:_})=>{if(!c)return null;const w=Of(r)+d.length;return{snapshot:new Jc(d,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,id(t),Rr(t),t.component??t._loadedComponent??null,t,Ro(r),w,bC(t),w),consumedSegments:d,remainingSegments:g}}));return o.pipe(Ir(c=>{if(null===c)return mt(null);const{snapshot:d,consumedSegments:g,remainingSegments:_}=c;e=t._injector??e;const w=t._loadedInjector??e,T=function _C(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:S,slicedSegments:M}=km(r,g,_,T.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===M.length&&S.hasChildren())return this.processChildren(w,T,S).pipe((0,Nt.U)(N=>null===N?null:[new Ys(d,N)]));if(0===T.length&&0===M.length)return mt([new Ys(d,[])]);const R=Rr(t)===s;return this.processSegment(w,T,S,M,R?Qt:s).pipe((0,Nt.U)(N=>null===N?null:[new Ys(d,N)]))}))}}function vC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function L0(n){const e=[],t=new Set;for(const r of n){if(!vC(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=L0(r.children);e.push(new Ys(r.value,i))}return e.filter(r=>!t.has(r))}function Ro(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Of(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function id(n){return n.data||{}}function bC(n){return n.resolve||{}}function cM(n){return"string"==typeof n.title||null===n.title}function B0(n){return Ir(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,Nt.U)(()=>e)):mt(e)})}let dM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[bf]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(EC)},providedIn:"root"}),n})(),EC=(()=>{class n extends dM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(wo))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hM{}class j0 extends class IC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const sd=new f.OlP("",{providedIn:"root",factory:()=>({})}),H0=new f.OlP("ROUTES");let $0=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=el(t.loadComponent()).pipe(Qr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),t0(()=>{this.componentLoaders.delete(t)})),i=new mu(r,()=>new la.x).pipe(sm());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Nt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,g,_=!1;Array.isArray(c)?g=c:(d=c.create(t).injector,g=qc(d.get(H0,[],f.XFs.Self|f.XFs.Optional)));return{routes:g.map(D0),injector:d}}),t0(()=>{this.childrenLoaders.delete(r)})),o=new mu(s,()=>new la.x).pipe(sm());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return el(t()).pipe((0,Yr.z)(r=>r instanceof f.YKP||Array.isArray(r)?mt(r):(0,En.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class pM{}class gM{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Lm(n){throw n}function Iu(n,e,t){return e.parse("/")}const y2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function DC(){const n=(0,f.f3M)(OI),e=(0,f.f3M)(Cm),t=(0,f.f3M)(Ae),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),s=(0,f.f3M)(H0,{optional:!0})??[],o=(0,f.f3M)(sd,{optional:!0})??{},c=(0,f.f3M)(EC),d=(0,f.f3M)(dM,{optional:!0}),g=(0,f.f3M)(pM,{optional:!0}),_=(0,f.f3M)(hM,{optional:!0}),w=new Vn(null,n,e,t,r,i,qc(s));return g&&(w.urlHandlingStrategy=g),_&&(w.routeReuseStrategy=_),w.titleStrategy=d??c,function mM(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,w),w}let Vn=(()=>{class n{constructor(t,r,i,s,o,c,d){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new la.x,this.errorHandler=Lm,this.malformedUriErrorHandler=Iu,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>mt(void 0),this.urlHandlingStrategy=new gM,this.routeReuseStrategy=new j0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get($0),this.configLoader.onLoadEndListener=T=>this.triggerEvent(new ZI(T)),this.configLoader.onLoadStartListener=T=>this.triggerEvent(new Xc(T)),this.ngModule=o.get(f.h0i),this.console=o.get(f.c2e);const w=o.get(f.R0b);this.isNgZoneEnabled=w instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=function RI(){return new tl(new ln([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zA(this.currentUrlTree,this.rootComponentType),this.transitions=new Ii({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Zs(i=>0!==i.id),(0,Nt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ir(i=>{let s=!1,o=!1;return mt(i).pipe(Qr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ir(c=>{const d=this.browserUrlTree.toString(),g=!this.navigated||c.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Xs(c.source)&&(this.browserUrlTree=c.extractedUrl),mt(c).pipe(Ir(w=>{const T=this.transitions.getValue();return r.next(new mm(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),T!==this.transitions.getValue()?ua.E:Promise.resolve(w)}),function Om(n,e,t,r){return Ir(i=>function sM(n,e,t,r,i){return new oM(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Nt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qr(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},i.urlAfterRedirects=w.urlAfterRedirects}),function U0(n,e,t,r,i,s){return(0,Yr.z)(o=>function F0(n,e,t,r,i,s,o="emptyOnly",c="legacy"){return new g2(n,e,t,r,i,o,c,s).recognize().pipe(Ir(d=>null===d?function p2(n){return new Rs.y(e=>e.error(n))}(new Nm):mt(d)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i,s).pipe((0,Nt.U)(c=>({...o,targetSnapshot:c}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Qr(w=>{if(i.targetSnapshot=w.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const S=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(S,w)}this.browserUrlTree=w.urlAfterRedirects}const T=new f0(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);r.next(T)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:T,extractedUrl:S,source:M,restoredState:R,extras:N}=c,B=new mm(T,this.serializeUrl(S),M,R);r.next(B);const G=zA(S,this.rootComponentType).snapshot;return mt(i={...c,targetSnapshot:G,urlAfterRedirects:S,extras:{...N,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=c.rawUrl,c.resolve(null),ua.E}),Qr(c=>{const d=new i2(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),(0,Nt.U)(c=>i={...c,guards:Sm(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function QA(n,e){return(0,Yr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?mt({...t,guardsResult:!0}):function ss(n,e,t,r){return(0,En.D)(n).pipe((0,Yr.z)(i=>function cC(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?mt(s.map(c=>{const d=kf(e)??i,g=il(c,d);return el(function YA(n){return n&&nd(n.canDeactivate)}(g)?g.canDeactivate(n,e,t,r):d.runInContext(()=>g(n,e,t,r))).pipe(To())})).pipe(Eu()):mt(!0)}(i.component,i.route,t,e,r)),To(i=>!0!==i,!0))}(o,r,i,n).pipe((0,Yr.z)(c=>c&&function x0(n){return"boolean"==typeof n}(c)?function uC(n,e,t,r){return(0,En.D)(e).pipe(Wc(i=>zc(function f2(n,e){return null!==n&&e&&e(new KI(n)),mt(!0)}(i.route.parent,r),function XA(n,e){return null!==n&&e&&e(new Ks(n)),mt(!0)}(i.route,r),function R0(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function ed(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>rm(()=>mt(o.guards.map(d=>{const g=kf(o.node)??t,_=il(d,g);return el(function M0(n){return n&&nd(n.canActivateChild)}(_)?_.canActivateChild(r,n):g.runInContext(()=>_(r,n))).pipe(To())})).pipe(Eu())));return mt(s).pipe(Eu())}(n,i.path,t),function JA(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(s=>rm(()=>{const o=kf(e)??t,c=il(s,o);return el(function aC(n){return n&&nd(n.canActivate)}(c)?c.canActivate(e,n):o.runInContext(()=>c(e,n))).pipe(To())}));return mt(i).pipe(Eu())}(n,i.route,t))),To(i=>!0!==i,!0))}(r,s,n,e):mt(c)),(0,Nt.U)(c=>({...t,guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),Qr(c=>{if(i.guardsResult=c.guardsResult,rl(c.guardsResult))throw w0(0,c.guardsResult);const d=new p0(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(d)}),Zs(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),B0(c=>{if(c.guards.canActivateChecks.length)return mt(c).pipe(Qr(d=>{const g=new $A(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),Ir(d=>{let g=!1;return mt(d).pipe(function wC(n,e){return(0,Yr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let s=0;return(0,En.D)(i).pipe(Wc(o=>function aM(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!cM(i)&&(s[bf]=i.title),function lM(n,e,t,r){const i=function Ff(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return mt({});const s={};return(0,En.D)(i).pipe((0,Yr.z)(o=>function uM(n,e,t,r){const i=kf(e)??r,s=il(n,i);return el(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(To(),Qr(c=>{s[o]=c}))),yu(1),function AI(n){return(0,Nt.U)(()=>n)}(s),Ps(o=>k0(o)?ua.E:Gc(o)))}(s,n,e,r).pipe((0,Nt.U)(o=>(n._resolvedData=o,n.data=bm(n,t).resolve,i&&cM(i)&&(n.data[bf]=i.title),null)))}(o.route,r,n,e)),Qr(()=>s++),yu(1),(0,Yr.z)(o=>s===i.length?mt(t):ua.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Qr({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),Qr(d=>{const g=new s2(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}))}),B0(c=>{const d=g=>{const _=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(g.routeConfig).pipe(Qr(w=>{g.component=w}),(0,Nt.U)(()=>{})));for(const w of g.children)_.push(...d(w));return _};return Qv(d(c.targetSnapshot.root)).pipe(am(),vf(1))}),B0(()=>this.afterPreactivation()),(0,Nt.U)(c=>{const d=function JI(n,e,t){const r=wm(n,e._root,t?t._root:void 0);return new m0(r,e)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return i={...c,targetRouterState:d}}),Qr(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,Nt.U)(r=>(new sC(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),Qr({next(){s=!0},complete(){s=!0}}),t0(()=>{s||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ps(c=>{if(o=!0,qA(c)){Im(c)||(this.navigated=!0,this.restoreHistory(i,!0));const d=new xf(i.id,this.serializeUrl(i.extractedUrl),c.message,c.cancellationCode);if(r.next(d),Im(c)){const g=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xs(i.source)};this.scheduleNavigation(g,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new h0(i.id,this.serializeUrl(i.extractedUrl),c,i.targetSnapshot??void 0);r.next(d);try{i.resolve(this.errorHandler(c))}catch(g){i.reject(g)}}return ua.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const c={...s};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(D0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:d}=r,g=i||this.routerState.root,_=d?this.currentUrlTree.fragment:o;let w=null;switch(c){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),u0(g,this.currentUrlTree,t,w,_??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=rl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function yM(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...y2}:!1===r?{...Lf}:r,rl(t))return Ao(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Ao(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new bu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,d,g;o?(c=o.resolve,d=o.reject,g=o.promise):g=new Promise((T,S)=>{c=T,d=S});const _=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),w=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):w=0,this.setTransition({id:_,targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:d,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new xf(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return DC()},providedIn:"root"}),n})();function Xs(n){return"imperative"!==n}class as{}let od=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Zs(t=>t instanceof bu),Wc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,f.MMx)(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,c=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return(0,En.D)(i).pipe((0,_f.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):mt(null);const s=i.pipe((0,Yr.z)(o=>null===o?mt(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){const o=this.loader.loadComponent(r);return(0,En.D)([s,o]).pipe((0,_f.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Vn),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(as),f.LFG($0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sl=new f.OlP("");let Tu=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof QI&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new QI(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Js(n,e){return{\u0275kind:n,\u0275providers:e}}function ol(n){return[{provide:H0,multi:!0,useValue:n}]}function z0(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Vn),i=n.get(G0);1===n.get(Um)&&r.initialNavigation(),n.get(W0,null,f.XFs.Optional)?.setUpPreloading(),n.get(sl,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const G0=new f.OlP("",{factory:()=>new la.x}),Um=new f.OlP("",{providedIn:"root",factory:()=>1});const W0=new f.OlP("");function MC(n){return Js(0,[{provide:W0,useExisting:od},{provide:as,useExisting:n}])}const kC=new f.OlP("ROUTER_FORROOT_GUARD"),bM=[Ae,{provide:OI,useClass:is},{provide:Vn,useFactory:DC},Cm,{provide:Qs,useFactory:function Su(n){return n.routerState.root},deps:[Vn]},$0];function q0(){return new f.PXZ("Router",Vn)}let jm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[bM,[],ol(t),{provide:kC,useFactory:Z0,deps:[[Vn,new f.FiY,new f.tp0]]},{provide:sd,useValue:r||{}},r?.useHash?{provide:ue,useClass:Tt}:{provide:ue,useClass:ht},{provide:sl,useFactory:()=>{const n=(0,f.f3M)(Vn),e=(0,f.f3M)(Ma),t=(0,f.f3M)(sd);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Tu(n,e,t)}},r?.preloadingStrategy?MC(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:q0},r?.initialNavigation?EM(r):[],[{provide:zm,useFactory:z0},{provide:f.tb,multi:!0,useExisting:zm}]]}}static forChild(t){return{ngModule:n,providers:[ol(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(kC,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[nC]}),n})();function Z0(n){return"guarded"}function EM(n){return["disabled"===n.initialNavigation?Js(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Vn);return()=>{e.setUpLocationChangeListener()}}},{provide:Um,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Js(2,[{provide:Um,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(Z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(Vn),c=e.get(G0);(function i(s){e.get(Vn).events.pipe(Zs(c=>c instanceof bu||c instanceof xf||c instanceof h0),(0,Nt.U)(c=>c instanceof bu||c instanceof xf&&(0===c.code||1===c.code)&&null),Zs(c=>null!==c),vf(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),o.afterPreactivation=()=>(s(!0),r||c.closed?mt(void 0):c),o.initialNavigation()}))}}]).\u0275providers:[]]}const zm=new f.OlP(""),Y0=Ba("fadeInAnimation",[ja(":enter",[wr({opacity:0}),br("1000ms",wr({opacity:1}))]),ja(":leave",[br("500ms",wr({opacity:0}))])]),Bf=Ba("menuFadeInAnimation",[ja(":enter",[wr({opacity:0}),br("400ms",wr({opacity:1}))]),ja(":leave",[wr({opacity:1}),br("3000ms",wr({opacity:0}))])]),RC=Ba("videoFadeInAnimation",[ja(":enter",[wr({opacity:0}),br("500ms",wr({opacity:1}))]),ja(":leave",[wr({opacity:1}),br("500ms",wr({opacity:0}))])]);function xu(n){return n+.5|0}const eo=(n,e,t)=>Math.max(Math.min(n,t),e);function ad(n){return eo(xu(2.55*n),0,255)}function ha(n){return eo(xu(255*n),0,255)}function Po(n){return eo(xu(n/2.55)/100,0,1)}function Q0(n){return eo(xu(100*n),0,100)}const ls={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},X0=[..."0123456789ABCDEF"],CM=n=>X0[15&n],DM=n=>X0[(240&n)>>4]+X0[15&n],jf=n=>(240&n)>>4==(15&n);const FC=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function eb(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function LC(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function VC(n,e,t){const r=eb(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function BC(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),c=(s+o)/2;let d,g,_;return s!==o&&(_=s-o,g=c>.5?_/(2-s-o):_/(s+o),d=function UC(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}(t,r,i,_,s),d=60*d+.5),[0|d,g||0,c]}function tb(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(ha)}function nb(n,e,t){return tb(eb,n,e,t)}function Cr(n){return(n%360+360)%360}const rb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$C={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Hf;const AM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,ib=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,Au=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function $f(n,e,t){if(n){let r=BC(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,0===e?360:1)),r=nb(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function Gm(n,e){return n&&Object.assign(e||{},n)}function to(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ha(n[3]))):(e=Gm(n,{r:0,g:0,b:0,a:1})).a=ha(e.a),e}function kM(n){return"r"===n.charAt(0)?function MM(n){const e=AM.exec(n);let r,i,s,t=255;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?ad(o):eo(255*o,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?ad(r):eo(r,0,255)),i=255&(e[4]?ad(i):eo(i,0,255)),s=255&(e[6]?ad(s):eo(s,0,255)),{r,g:i,b:s,a:t}}}(n):function HC(n){const e=FC.exec(n);let r,t=255;if(!e)return;e[5]!==r&&(t=e[6]?ad(+e[5]):ha(+e[5]));const i=Cr(+e[2]),s=+e[3]/100,o=+e[4]/100;return r="hwb"===e[1]?function jC(n,e,t){return tb(VC,n,e,t)}(i,s,o):"hsv"===e[1]?function TM(n,e,t){return tb(LC,n,e,t)}(i,s,o):nb(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}(n)}class ud{constructor(e){if(e instanceof ud)return e;const t=typeof e;let r;"object"===t?r=to(e):"string"===t&&(r=function PC(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*ls[n[1]],g:255&17*ls[n[2]],b:255&17*ls[n[3]],a:5===e?17*ls[n[4]]:255}:(7===e||9===e)&&(t={r:ls[n[1]]<<4|ls[n[2]],g:ls[n[3]]<<4|ls[n[4]],b:ls[n[5]]<<4|ls[n[6]],a:9===e?ls[n[7]]<<4|ls[n[8]]:255})),t}(e)||function ld(n){Hf||(Hf=function zC(){const n={},e=Object.keys($C),t=Object.keys(rb);let r,i,s,o,c;for(r=0;r<e.length;r++){for(o=c=e[r],i=0;i<t.length;i++)s=t[i],c=c.replace(s,rb[s]);s=parseInt($C[o],16),n[c]=[s>>16&255,s>>8&255,255&s]}return n}(),Hf.transparent=[0,0,0,0]);const e=Hf[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||kM(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Gm(this._rgb);return e&&(e.a=Po(e.a)),e}set rgb(e){this._rgb=to(e)}rgbString(){return this._valid?function GC(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Po(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function NC(n){var e=(n=>jf(n.r)&&jf(n.g)&&jf(n.b)&&jf(n.a))(n)?CM:DM;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function xM(n){if(!n)return;const e=BC(n),t=e[0],r=Q0(e[1]),i=Q0(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Po(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,c=2*o-1,d=r.a-i.a,g=((c*d==-1?c:(c+d)/(1+c*d))+1)/2;s=1-g,r.r=255&g*r.r+s*i.r+.5,r.g=255&g*r.g+s*i.g+.5,r.b=255&g*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function b2(n,e,t){const r=Au(Po(n.r)),i=Au(Po(n.g)),s=Au(Po(n.b));return{r:ha(ib(r+t*(Au(Po(e.r))-r))),g:ha(ib(i+t*(Au(Po(e.g))-i))),b:ha(ib(s+t*(Au(Po(e.b))-s))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new ud(this.rgb)}alpha(e){return this._rgb.a=ha(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=xu(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return $f(this._rgb,2,e),this}darken(e){return $f(this._rgb,2,-e),this}saturate(e){return $f(this._rgb,1,e),this}desaturate(e){return $f(this._rgb,1,-e),this}rotate(e){return function SM(n,e){var t=BC(n);t[0]=Cr(t[0]+e),t=nb(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function Pr(){}const no=(()=>{let n=0;return()=>n++})();function dn(n){return null===n||typeof n>"u"}function Mn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function un(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function rr(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function us(n,e){return rr(n)?n:e}function Gt(n,e){return typeof n>"u"?e:n}const cd=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function kn(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function bn(n,e,t,r){let i,s,o;if(Mn(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(un(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function Wm(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function zf(n){if(Mn(n))return n.map(zf);if(un(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=zf(n[t[i]]);return e}return n}function ob(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function qm(n,e,t,r){if(!ob(n))return;const i=e[n],s=t[n];un(i)&&un(s)?Gf(i,s,r):e[n]=zf(s)}function Gf(n,e,t){const r=Mn(e)?e:[e],i=r.length;if(!un(n))return n;const s=(t=t||{}).merger||qm;let o;for(let c=0;c<i;++c){if(o=r[c],!un(o))continue;const d=Object.keys(o);for(let g=0,_=d.length;g<_;++g)s(d[g],n,o,t)}return n}function dd(n,e){return Gf(n,e,{merger:WC})}function WC(n,e,t){if(!ob(n))return;const r=e[n],i=t[n];un(r)&&un(i)?dd(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=zf(i))}const Wf={"":n=>n,x:n=>n.x,y:n=>n.y};function pa(n,e){return(Wf[e]||(Wf[e]=function ZC(n){const e=function ab(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}(n);return t=>{for(const r of e){if(""===r)break;t=t&&t[r]}return t}}(e)))(n)}function Zm(n){return n.charAt(0).toUpperCase()+n.slice(1)}const hd=n=>typeof n<"u",ga=n=>"function"==typeof n,lb=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},On=Math.PI,Nn=2*On,RM=Nn+On,Km=Number.POSITIVE_INFINITY,PM=On/180,hr=On/2,Mu=On/4,YC=2*On/3,al=Math.log10,Oo=Math.sign;function qf(n,e,t){return Math.abs(n-e)<t}function QC(n){const e=Math.round(n);n=qf(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(al(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function fd(n){return!isNaN(parseFloat(n))&&isFinite(n)}function XC(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ro(n){return n*(On/180)}function ub(n){return n*(180/On)}function cb(n){if(!rr(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function db(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*On&&(s+=Nn),{angle:s,distance:i}}function Ym(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function JC(n,e){return(n-e+RM)%Nn-On}function ji(n){return(n%Nn+Nn)%Nn}function pd(n,e,t,r){const i=ji(n),s=ji(e),o=ji(t),c=ji(s-i),d=ji(o-i),g=ji(i-s),_=ji(i-o);return i===s||i===o||r&&s===o||c>d&&g<_}function Or(n,e,t){return Math.max(e,Math.min(t,n))}function No(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function Qm(n,e,t){t=t||(o=>n[o]<e);let s,r=n.length-1,i=0;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const Fo=(n,e,t,r)=>Qm(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),ku=(n,e,t)=>Qm(n,t,r=>n[r][e]>=t),tD=["push","pop","shift","splice","unshift"];function LM(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),!(r.length>0)&&(tD.forEach(s=>{delete n[s]}),delete n._chartjs)}function Xm(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const hb=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function fb(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,hb.call(window,()=>{r=!1,n.apply(e,t)}))}}const Ct=n=>"start"===n?"left":"end"===n?"right":"center",ui=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function nD(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,_parsed:c}=n,d=o.axis,{min:g,max:_,minDefined:w,maxDefined:T}=o.getUserBounds();w&&(i=Or(Math.min(Fo(c,d,g).lo,t?r:Fo(e,d,o.getPixelForValue(g)).lo),0,r-1)),s=T?Or(Math.max(Fo(c,o.axis,_,!0).hi+1,t?0:Fo(e,d,o.getPixelForValue(_),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function Ru(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const Jm=n=>0===n||1===n,Zf=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*Nn/t),Kf=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Nn/t)+1,Rn={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*hr),easeOutSine:n=>Math.sin(n*hr),easeInOutSine:n=>-.5*(Math.cos(On*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>Jm(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Jm(n)?n:Zf(n,.075,.3),easeOutElastic:n=>Jm(n)?n:Kf(n,.075,.3),easeInOutElastic:n=>Jm(n)?n:n<.5?.5*Zf(2*n,.1125,.45):.5+.5*Kf(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-Rn.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*Rn.easeInBounce(2*n):.5*Rn.easeOutBounce(2*n-1)+.5};function rD(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function pb(n){return rD(n)?n:new ud(n)}function ey(n){return rD(n)?n:new ud(n).saturate(.5).darken(.1).hexString()}const UM=["x","y","borderWidth","radius","tension"],iD=["color","borderColor","backgroundColor"],gb=new Map;function Yf(n,e,t){return function BM(n,e){e=e||{};const t=n+JSON.stringify(e);let r=gb.get(t);return r||(r=new Intl.NumberFormat(n,e),gb.set(t,r)),r}(e,t).format(n)}const aD={values:n=>Mn(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const g=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(g<1e-4||g>1e15)&&(i="scientific"),s=function Qf(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const o=al(Math.abs(s)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),Yf(n,r,d)},logarithmic(n,e,t){if(0===n)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(al(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?aD.numeric.call(this,n,e,t):""}};var ty={formatters:aD};const Pu=Object.create(null),md=Object.create(null);function yd(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function ny(n,e,t){return"string"==typeof e?Gf(yd(n,e),t):Gf(yd(n,""),e)}class lD{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>ey(i.backgroundColor),this.hoverBorderColor=(r,i)=>ey(i.borderColor),this.hoverColor=(r,i)=>ey(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ny(this,e,t)}get(e){return yd(this,e)}describe(e,t){return ny(md,e,t)}override(e,t){return ny(Pu,e,t)}route(e,t,r,i){const s=yd(this,e),o=yd(this,r),c="_"+t;Object.defineProperties(s,{[c]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const d=this[c],g=o[i];return un(d)?Object.assign({},g,d):Gt(d,g)},set(d){this[c]=d}}})}apply(e){e.forEach(t=>t(this))}}var ir=new lD({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function sD(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),n.set("animations",{colors:{type:"color",properties:iD},numbers:{type:"number",properties:UM}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function oD(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function jM(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ty.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ll(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function HM(n,e,t,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0;const c=t.length;let d,g,_,w,T;for(d=0;d<c;d++)if(w=t[d],null==w||Mn(w)){if(Mn(w))for(g=0,_=w.length;g<_;g++)T=w[g],null!=T&&!Mn(T)&&(o=ll(n,i,s,o,T))}else o=ll(n,i,s,o,w);n.restore();const S=s.length/2;if(S>t.length){for(d=0;d<S;d++)delete i[s[d]];s.splice(0,S)}return o}function Ou(n,e,t){const r=n.currentDevicePixelRatio,i=0!==t?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function uD(n,e){(e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function ry(n,e,t,r){mb(n,e,t,r,null)}function mb(n,e,t,r,i){let s,o,c,d,g,_,w,T;const S=e.pointStyle,M=e.rotation,R=e.radius;let N=(M||0)*PM;if(S&&"object"==typeof S&&(s=S.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(t,r),n.rotate(N),n.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),void n.restore();if(!(isNaN(R)||R<=0)){switch(n.beginPath(),S){default:i?n.ellipse(t,r,i/2,R,0,0,Nn):n.arc(t,r,R,0,Nn),n.closePath();break;case"triangle":_=i?i/2:R,n.moveTo(t+Math.sin(N)*_,r-Math.cos(N)*R),N+=YC,n.lineTo(t+Math.sin(N)*_,r-Math.cos(N)*R),N+=YC,n.lineTo(t+Math.sin(N)*_,r-Math.cos(N)*R),n.closePath();break;case"rectRounded":g=.516*R,d=R-g,o=Math.cos(N+Mu)*d,w=Math.cos(N+Mu)*(i?i/2-g:d),c=Math.sin(N+Mu)*d,T=Math.sin(N+Mu)*(i?i/2-g:d),n.arc(t-w,r-c,g,N-On,N-hr),n.arc(t+T,r-o,g,N-hr,N),n.arc(t+w,r+c,g,N,N+hr),n.arc(t-T,r+o,g,N+hr,N+On),n.closePath();break;case"rect":if(!M){d=Math.SQRT1_2*R,_=i?i/2:d,n.rect(t-_,r-d,2*_,2*d);break}N+=Mu;case"rectRot":w=Math.cos(N)*(i?i/2:R),o=Math.cos(N)*R,c=Math.sin(N)*R,T=Math.sin(N)*(i?i/2:R),n.moveTo(t-w,r-c),n.lineTo(t+T,r-o),n.lineTo(t+w,r+c),n.lineTo(t-T,r+o),n.closePath();break;case"crossRot":N+=Mu;case"cross":w=Math.cos(N)*(i?i/2:R),o=Math.cos(N)*R,c=Math.sin(N)*R,T=Math.sin(N)*(i?i/2:R),n.moveTo(t-w,r-c),n.lineTo(t+w,r+c),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o);break;case"star":w=Math.cos(N)*(i?i/2:R),o=Math.cos(N)*R,c=Math.sin(N)*R,T=Math.sin(N)*(i?i/2:R),n.moveTo(t-w,r-c),n.lineTo(t+w,r+c),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o),N+=Mu,w=Math.cos(N)*(i?i/2:R),o=Math.cos(N)*R,c=Math.sin(N)*R,T=Math.sin(N)*(i?i/2:R),n.moveTo(t-w,r-c),n.lineTo(t+w,r+c),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o);break;case"line":o=i?i/2:Math.cos(N)*R,c=Math.sin(N)*R,n.moveTo(t-o,r-c),n.lineTo(t+o,r+c);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(N)*(i?i/2:R),r+Math.sin(N)*R);break;case!1:n.closePath()}n.fill(),e.borderWidth>0&&n.stroke()}}function Lo(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function iy(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Jf(n){n.restore()}function $M(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if("middle"===i){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else"after"===i!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function zM(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function I2(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,c=e+s.actualBoundingBoxRight,d=t-s.actualBoundingBoxAscent,g=t+s.actualBoundingBoxDescent,_=i.strikethrough?(d+g)/2:g;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,_),n.lineTo(c,_),n.stroke()}}function C2(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function _d(n,e,t,r,i,s={}){const o=Mn(e)?e:[e],c=s.strokeWidth>0&&""!==s.strokeColor;let d,g;for(n.save(),n.font=i.string,function E2(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),dn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,s),d=0;d<o.length;++d)g=o[d],s.backdrop&&C2(n,s.backdrop),c&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),dn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(g,t,r,s.maxWidth)),n.fillText(g,t,r,s.maxWidth),I2(n,t,r,g,s),r+=Number(i.lineHeight);n.restore()}function vd(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*On,On,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,On,hr,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,hr,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-hr,!0),n.lineTo(t+o.topLeft,r)}const sy=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,GM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function WM(n,e){const t=(""+n).match(sy);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const cD=n=>+n||0;function Nu(n,e){const t={},r=un(e),i=r?Object.keys(e):e,s=un(n)?r?o=>Gt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=cD(s(o));return t}function dD(n){return Nu(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Fu(n){return Nu(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ci(n){const e=dD(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Nr(n,e){let t=Gt((n=n||{}).size,(e=e||ir.font).size);"string"==typeof t&&(t=parseInt(t,10));let r=Gt(n.style,e.style);r&&!(""+r).match(GM)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Gt(n.family,e.family),lineHeight:WM(Gt(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Gt(n.weight,e.weight),string:""};return i.string=function Xf(n){return!n||dn(n.size)||dn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(i),i}function ep(n,e,t,r){let s,o,c,i=!0;for(s=0,o=n.length;s<o;++s)if(c=n[s],void 0!==c&&(void 0!==e&&"function"==typeof c&&(c=c(e),i=!1),void 0!==t&&Mn(c)&&(c=c[t%c.length],i=!1),void 0!==c))return r&&!i&&(r.cacheable=!1),c}function ul(n,e){return Object.assign(Object.create(n),e)}function yb(n,e=[""],t,r,i=(()=>n[0])){const s=t||n;typeof r>"u"&&(r=ly("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:c=>yb([c,...n],e,s,r)};return new Proxy(o,{deleteProperty:(c,d)=>(delete c[d],delete c._keys,delete n[0][d],!0),get:(c,d)=>vb(c,d,()=>function QM(n,e,t,r){let i;for(const s of e)if(i=ly(pD(s,n),t),typeof i<"u")return _b(n,i)?ay(t,r,n,i):i}(d,e,n,c)),getOwnPropertyDescriptor:(c,d)=>Reflect.getOwnPropertyDescriptor(c._scopes[0],d),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(c,d)=>_D(c).includes(d),ownKeys:c=>_D(c),set(c,d,g){const _=c._storage||(c._storage=i());return c[d]=_[d]=g,delete c._keys,!0}})}function Vo(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:fD(n,r),setContext:s=>Vo(n,s,t,r),override:s=>Vo(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,c)=>vb(s,o,()=>function qM(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let c=r[e];return ga(c)&&o.isScriptable(e)&&(c=function gD(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let d=e(s,o||r);return c.delete(n),_b(n,d)&&(d=ay(i._scopes,i,n,d)),d}(e,c,n,t)),Mn(c)&&c.length&&(c=function ZM(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:c}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(un(e[0])){const d=e,g=i._scopes.filter(_=>_!==d);e=[];for(const _ of d){const w=ay(g,i,n,_);e.push(Vo(w,s,o&&o[n],c))}}return e}(e,c,n,o.isIndexable)),_b(e,c)&&(c=Vo(c,i,s&&s[e],o)),c}(s,o,c)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,c)=>(n[o]=c,delete s[o],!0)})}function fD(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:ga(t)?t:()=>t,isIndexable:ga(r)?r:()=>r}}const pD=(n,e)=>n?n+Zm(e):e,_b=(n,e)=>un(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function vb(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const r=t();return n[e]=r,r}function oy(n,e,t){return ga(n)?n(e,t):n}const KM=(n,e)=>!0===n?e:"string"==typeof n?pa(e,n):void 0;function mD(n,e,t,r,i){for(const s of e){const o=KM(t,s);if(o){n.add(o);const c=oy(o._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==r)return c}else if(!1===o&&typeof r<"u"&&t!==r)return null}return!1}function ay(n,e,t,r){const i=e._rootScopes,s=oy(e._fallback,t,r),o=[...n,...i],c=new Set;c.add(r);let d=yD(c,o,t,s||t,r);return!(null===d||typeof s<"u"&&s!==t&&(d=yD(c,o,s,d,r),null===d))&&yb(Array.from(c),[""],i,s,()=>function YM(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return Mn(i)&&un(t)?t:i||{}}(e,t,r))}function yD(n,e,t,r,i){for(;t;)t=mD(n,e,t,r,i);return t}function ly(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function _D(n){let e=n._keys;return e||(e=n._keys=function vD(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}(n._scopes)),e}function bD(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r);let c,d,g,_;for(c=0,d=r;c<d;++c)g=c+t,_=e[g],o[c]={r:i.parse(pa(_,s),g)};return o}const XM=Number.EPSILON||1e-14,bd=(n,e)=>e<n.length&&!n[e].skip&&n[e],wD=n=>"x"===n?"y":"x";function JM(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,c=Ym(s,i),d=Ym(o,s);let g=c/(c+d),_=d/(c+d);g=isNaN(g)?0:g,_=isNaN(_)?0:_;const w=r*g,T=r*_;return{previous:{x:s.x-w*(o.x-i.x),y:s.y-w*(o.y-i.y)},next:{x:s.x+T*(o.x-i.x),y:s.y+T*(o.y-i.y)}}}function tp(n,e,t){return Math.max(Math.min(n,t),e)}function r1(n,e,t,r,i){let s,o,c,d;if(e.spanGaps&&(n=n.filter(g=>!g.skip)),"monotone"===e.cubicInterpolationMode)!function n1(n,e="x"){const t=wD(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,c,d,g=bd(n,0);for(o=0;o<r;++o)if(c=d,d=g,g=bd(n,o+1),d){if(g){const _=g[e]-d[e];i[o]=0!==_?(g[t]-d[t])/_:0}s[o]=c?g?Oo(i[o-1])!==Oo(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}(function e1(n,e,t){const r=n.length;let i,s,o,c,d,g=bd(n,0);for(let _=0;_<r-1;++_)if(d=g,g=bd(n,_+1),d&&g){if(qf(e[_],0,XM)){t[_]=t[_+1]=0;continue}i=t[_]/e[_],s=t[_+1]/e[_],c=Math.pow(i,2)+Math.pow(s,2),!(c<=9)&&(o=3/Math.sqrt(c),t[_]=i*o*e[_],t[_+1]=s*o*e[_])}})(n,i,s),function t1(n,e,t="x"){const r=wD(t),i=n.length;let s,o,c,d=bd(n,0);for(let g=0;g<i;++g){if(o=c,c=d,d=bd(n,g+1),!c)continue;const _=c[t],w=c[r];o&&(s=(_-o[t])/3,c[`cp1${t}`]=_-s,c[`cp1${r}`]=w-s*e[g]),d&&(s=(d[t]-_)/3,c[`cp2${t}`]=_+s,c[`cp2${r}`]=w+s*e[g])}}(n,s,e)}(n,i);else{let g=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)c=n[s],d=JM(g,c,n[Math.min(s+1,o-(r?0:1))%o],e.tension),c.cp1x=d.previous.x,c.cp1y=d.previous.y,c.cp2x=d.next.x,c.cp2y=d.next.y,g=c}e.capBezierPoints&&function ED(n,e){let t,r,i,s,o,c=Lo(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=c,c=t<r-1&&Lo(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=tp(i.cp1x,e.left,e.right),i.cp1y=tp(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=tp(i.cp2x,e.left,e.right),i.cp2y=tp(i.cp2y,e.top,e.bottom)))}(n,t)}function ID(){return typeof window<"u"&&typeof document<"u"}function uy(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function cy(n,e,t){let r;return"string"==typeof n?(r=parseInt(n,10),-1!==n.indexOf("%")&&(r=r/100*e.parentNode[t])):r=n,r}const dy=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),bb=["top","right","bottom","left"];function ma(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=bb[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Lu(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=dy(t),s="border-box"===i.boxSizing,o=ma(i,"padding"),c=ma(i,"border","width"),{x:d,y:g,box:_}=function wb(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let c,d,o=!1;if(((n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot))(i,s,n.target))c=i,d=s;else{const g=e.getBoundingClientRect();c=r.clientX-g.left,d=r.clientY-g.top,o=!0}return{x:c,y:d,box:o}}(n,t),w=o.left+(_&&c.left),T=o.top+(_&&c.top);let{width:S,height:M}=e;return s&&(S-=o.width+c.width,M-=o.height+c.height),{x:Math.round((d-w)/S*t.width/r),y:Math.round((g-T)/M*t.height/r)}}const wd=n=>Math.round(10*n)/10;function Eb(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0)}const Ed=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function Ib(n,e){const t=function i1(n,e){return dy(n).getPropertyValue(e)}(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Vu(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function D2(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:"middle"===r?t<.5?n.y:e.y:"after"===r?t<1?n.y:e.y:t>0?e.y:n.y}}function DD(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Vu(n,i,t),c=Vu(i,s,t),d=Vu(s,e,t),g=Vu(o,c,t),_=Vu(c,d,t);return Vu(g,_,t)}function cl(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,r)=>t-r,leftForLtr:(t,r)=>t-r}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function TD(n,e){let t,r;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function Db(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function hy(n){return"angle"===n?{between:pd,compare:JC,normalize:ji}:{between:No,compare:(e,t)=>e-t,normalize:e=>e}}function Tb({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t==0,style:i}}function Sb(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:c,between:d,normalize:g}=hy(r),{start:_,end:w,loop:T,style:S}=function SD(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:c}=hy(r),d=e.length;let T,S,{start:g,end:_,loop:w}=n;if(w){for(g+=d,_+=d,T=0,S=d;T<S&&o(c(e[g%d][r]),i,s);++T)g--,_--;g%=d,_%=d}return _<g&&(_+=d),{start:g,end:_,loop:w,style:n.style}}(n,e,t),M=[];let B,G,X,R=!1,N=null;for(let Ve=_,ut=_;Ve<=w;++Ve)G=e[Ve%o],!G.skip&&(B=g(G[r]),B!==X&&(R=d(B,i,s),null===N&&(R||d(i,X,B)&&0!==c(i,X))&&(N=0===c(B,i)?Ve:ut),null!==N&&(!R||0===c(s,B)||d(s,X,B))&&(M.push(Tb({start:N,end:Ve,loop:T,count:o,style:S})),N=null),ut=Ve,X=B));return null!==N&&M.push(Tb({start:N,end:w,loop:T,count:o,style:S})),M}function xb(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=Sb(r[i],n.points,e);s.length&&t.push(...s)}return t}function d1(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function MD(n,e){if(!e)return!1;const t=[],r=function(i,s){return rD(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}class h1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.duration;t.listeners[i].forEach(c=>c({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=hb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let d,o=s.length-1,c=!1;for(;o>=0;--o)d=s[o],d._active?(d._total>r.duration&&(r.duration=d._total),d.tick(e),c=!0):(s[o]=s[s.length-1],s.pop());c&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);!t||(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ya=new h1;const f1="transparent",T2={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const r=pb(n||f1),i=r.valid&&pb(e||f1);return i&&i.valid?i.mix(r,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class p1{constructor(e,t,r,i){const s=t[r];i=ep([e.to,i,s,e.from]);const o=ep([e.from,s,i]);this._active=!0,this._fn=e.fn||T2[e.type||typeof o],this._easing=Rn[e.easing]||Rn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ep([e.to,t,i,e.from]),this._from=ep([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,c=this._to;let d;if(this._active=s!==c&&(o||t<r),!this._active)return this._target[i]=c,void this._notify(!0);t<0?this._target[i]=s:(d=t/r%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[i]=this._fn(s,c,d))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class kD{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!un(e))return;const t=Object.keys(ir.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!un(s))return;const o={};for(const c of t)o[c]=s[c];(Mn(s.properties)&&s.properties||[i]).forEach(c=>{(c===i||!r.has(c))&&r.set(c,o)})})}_animateOptions(e,t){const r=t.options,i=function RD(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&function g1(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),c=Date.now();let d;for(d=o.length-1;d>=0;--d){const g=o[d];if("$"===g.charAt(0))continue;if("options"===g){i.push(...this._animateOptions(e,t));continue}const _=t[g];let w=s[g];const T=r.get(g);if(w){if(T&&w.active()){w.update(T,_,c);continue}w.cancel()}T&&T.duration?(s[g]=w=new p1(T,e,g,_),i.push(w)):e[g]=_}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(ya.add(this._chart,r),!0):void 0}}function Ab(n,e){const t=n&&n.options||{},r=t.reverse,i=void 0===t.min?e:0,s=void 0===t.max?e:0;return{start:r?s:i,end:r?i:s}}function PD(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function OD(n,e,t,r={}){const i=n.keys,s="single"===r.mode;let o,c,d,g;if(null!==e){for(o=0,c=i.length;o<c;++o){if(d=+i[o],d===t){if(r.all)continue;break}g=n.values[d],rr(g)&&(s||0===e||Oo(e)===Oo(g))&&(e+=g)}return e}}function ND(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function FD(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function Mb(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function kb(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:c}=r,d=s.axis,g=o.axis,_=function v1(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(s,o,r),w=e.length;let T;for(let S=0;S<w;++S){const M=e[S],{[d]:R,[g]:N}=M;T=(M._stacks||(M._stacks={}))[g]=FD(i,_,R),T[c]=N,T._top=Mb(T,o,!0,r.type),T._bottom=Mb(T,o,!1,r.type),(T._visualValues||(T._visualValues={}))[c]=N}}function fy(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function rp(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||void 0===s[r]||void 0===s[r][t])return;delete s[r][t],void 0!==s[r]._visualValues&&void 0!==s[r]._visualValues[t]&&delete s[r]._visualValues[t]}}}const UD=n=>"reset"===n||"none"===n,Rb=(n,e)=>e?n:Object.assign({},n);class io{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ND(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&rp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(w,T,S,M)=>"x"===w?T:"r"===w?M:S,s=t.xAxisID=Gt(r.xAxisID,fy(e,"x")),o=t.yAxisID=Gt(r.yAxisID,fy(e,"y")),c=t.rAxisID=Gt(r.rAxisID,fy(e,"r")),d=t.indexAxis,g=t.iAxisID=i(d,s,o,c),_=t.vAxisID=i(d,o,s,c);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(g),t.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&LM(this._data,this),e._stacked&&rp(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(un(t))this._data=function _1(n){const e=Object.keys(n),t=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],t[r]={x:s,y:n[s]};return t}(t);else if(r!==t){if(r){LM(r,this);const i=this._cachedMeta;rp(i),i._parsed=[]}t&&Object.isExtensible(t)&&function gd(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),tD.forEach(t=>{const r="_onData"+Zm(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(c=>{"function"==typeof c[r]&&c[r](...s)}),o}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=ND(t.vScale,t),t.stack!==r.stack&&(i=!0,rp(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&kb(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,c=s.axis;let _,w,T,d=0===e&&t===i.length||r._sorted,g=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=i,r._sorted=!0,T=i;else{T=Mn(i[e])?this.parseArrayData(r,i,e,t):un(i[e])?this.parseObjectData(r,i,e,t):this.parsePrimitiveData(r,i,e,t);const S=()=>null===w[c]||g&&w[c]<g[c];for(_=0;_<t;++_)r._parsed[_+e]=w=T[_],d&&(S()&&(d=!1),g=w);r._sorted=d}o&&kb(this,T)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:o}=e,c=s.axis,d=o.axis,g=s.getLabels(),_=s===o,w=new Array(i);let T,S,M;for(T=0,S=i;T<S;++T)M=T+r,w[T]={[c]:_||s.parse(g[M],M),[d]:o.parse(t[M],M)};return w}parseArrayData(e,t,r,i){const{xScale:s,yScale:o}=e,c=new Array(i);let d,g,_,w;for(d=0,g=i;d<g;++d)_=d+r,w=t[_],c[d]={x:s.parse(w[0],_),y:o.parse(w[1],_)};return c}parseObjectData(e,t,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,g=new Array(i);let _,w,T,S;for(_=0,w=i;_<w;++_)T=_+r,S=t[T],g[_]={x:s.parse(pa(S,c),T),y:o.parse(pa(S,d),T)};return g}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const s=this._cachedMeta,o=t[e.axis];return OD({keys:PD(this.chart,!0),values:t._stacks[e.axis]._visualValues},o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let o=null===s?NaN:s;const c=i&&r._stacks[t.axis];i&&c&&(i.values=c,o=OD(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,c=this._getOtherScale(e),d=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:PD(this.chart,!0),values:null})(t,r),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:w}=function np(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}(c);let T,S;function M(){S=i[T];const R=S[c.axis];return!rr(S[e.axis])||_>R||w<R}for(T=0;T<o&&(M()||(this.updateRangeFromParsed(g,e,S,d),!s));++T);if(s)for(T=o-1;T>=0;--T)if(!M()){this.updateRangeFromParsed(g,e,S,d);break}return g}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],rr(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function y1(n){let e,t,r,i;return un(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:!1===n}}(Gt(this.options.clip,function m1(n,e,t){if(!1===t)return!1;const r=Ab(n,t),i=Ab(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,i=r.data||[],s=this.chart.chartArea,o=[],c=this._drawStart||0,d=this._drawCount||i.length-c,g=this.options.drawActiveElementsOnTop;let _;for(r.dataset&&r.dataset.draw(e,s,c,d),_=c;_<c+d;++_){const w=i[_];w.hidden||(w.active&&g?o.push(w):w.draw(e,s))}for(_=0;_<o.length;++_)o[_].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=function VD(n,e,t){return ul(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function LD(n,e){return ul(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i="active"===t,s=this._cachedDataOpts,o=e+"-"+t,c=s[o],d=this.enableOptionSharing&&hd(r);if(c)return Rb(c,d);const g=this.chart.config,_=g.datasetElementScopeKeys(this._type,e),w=i?[`${e}Hover`,"hover",e,""]:[e,""],T=g.getOptionScopes(this.getDataset(),_),S=Object.keys(ir.elements[e]),R=g.resolveNamedOptions(T,S,()=>this.getContext(r,i,t),w);return R.$shared&&(R.$shared=d,s[o]=Object.freeze(Rb(R,d))),R}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,c=s[o];if(c)return c;let d;if(!1!==i.options.animation){const _=this.chart.config,w=_.datasetAnimationScopeKeys(this._type,t),T=_.getOptionScopes(this.getDataset(),w);d=_.createResolver(T,this.getContext(e,r,t))}const g=new kD(i,d&&d.animations);return d&&d._cacheable&&(s[o]=Object.freeze(g)),g}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||UD(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,i){UD(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!UD(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[c,d,g]of this._syncList)this[c](d,g);this._syncList=[];const i=r.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,o=e+t;let c;const d=g=>{for(g.length+=t,c=g.length-1;c>=o;c--)g[c]=g[c-t]};for(d(s),c=e;c<o;++c)s[c]=new this.dataElementType;this._parsing&&d(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&rp(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function w1(n){const e=n.iScale,t=function b1(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=Xm(r.sort((i,s)=>i-s))}return n._cache.$bar}(e,n.type);let i,s,o,c,r=e._length;const d=()=>{32767===o||-32768===o||(hd(c)&&(r=Math.min(r,Math.abs(o-c)||r)),c=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),d();for(c=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),d();return r}function so(n,e,t,r){return Mn(n)?function Pb(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),c=Math.max(i,s);let d=o,g=c;Math.abs(o)>Math.abs(c)&&(d=c,g=o),e[t.axis]=g,e._custom={barStart:d,barEnd:g,start:i,end:s,min:o,max:c}}(n,e,t,r):e[t.axis]=t.parse(n,r),e}function jD(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),c=i===s,d=[];let g,_,w,T;for(g=t,_=t+r;g<_;++g)T=e[g],w={},w[i.axis]=c||i.parse(o[g],g),d.push(so(T,w,s,g));return d}function sp(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function C1(n,e,t,r){let i=e.borderSkipped;const s={};if(!i)return void(n.borderSkipped=s);if(!0===i)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:c,reverse:d,top:g,bottom:_}=function I1(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}(n);"middle"===i&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=g:(t._bottom||0)===r?i=_:(s[HD(_,o,c,d)]=!0,i=g)),s[HD(i,o,c,d)]=!0,n.borderSkipped=s}function HD(n,e,t,r){return r?(n=function py(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=ap(n,t,e)):n=ap(n,e,t),n}function ap(n,e,t){return"start"===n?e:"end"===n?t:n}function D1(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}Ze(io,"defaults",{}),Ze(io,"datasetElementType",null),Ze(io,"dataElementType",null);class gy extends io{parsePrimitiveData(e,t,r,i){return jD(e,t,r,i)}parseArrayData(e,t,r,i){return jD(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,g="x"===s.axis?c:d,_="x"===o.axis?c:d,w=[];let T,S,M,R;for(T=r,S=r+i;T<S;++T)R=t[T],M={},M[s.axis]=s.parse(pa(R,g),T),w.push(so(pa(R,_),M,o,T));return w}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,s=this.getParsed(e),o=s._custom,c=sp(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const s="reset"===i,{index:o,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),g=c.isHorizontal(),_=this._getRuler(),{sharedOptions:w,includeOptions:T}=this._getSharedOptions(t,i);for(let S=t;S<t+r;S++){const M=this.getParsed(S),R=s||dn(M[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(S),N=this._calculateBarIndexPixels(S,_),B=(M._stacks||{})[c.axis],G={horizontal:g,base:R.base,enableBorderRadius:!B||sp(M._custom)||o===B._top||o===B._bottom,x:g?R.head:N.center,y:g?N.center:R.head,height:g?N.size:Math.abs(R.size),width:g?Math.abs(R.size):N.size};T&&(G.options=w||this.resolveDataElementOptions(S,e[S].active?"active":i));const X=G.options||e[S].options;C1(G,X,B,o),D1(G,X,_.ratio),this.updateElement(e[S],S,G,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,o=[],c=d=>{const g=d.controller.getParsed(t),_=g&&g[d.vScale.axis];if(dn(_)||isNaN(_))return!0};for(const d of i)if((void 0===t||!c(d))&&((!1===s||-1===o.indexOf(d.stack)||void 0===s&&void 0===d.stack)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,r){const i=this._getStacks(e,r),s=void 0!==t?i.indexOf(t):-1;return-1===s?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let s,o;for(s=0,o=t.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const c=e.barThickness;return{min:c||w1(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,c=s||0,d=this.getParsed(e),g=d._custom,_=sp(g);let M,R,w=d[t.axis],T=0,S=r?this.applyStack(t,d,r):w;S!==w&&(T=S-w,S=w),_&&(w=g.barStart,S=g.barEnd-g.barStart,0!==w&&Oo(w)!==Oo(g.barEnd)&&(T=0),T+=w);const N=dn(s)||_?T:s;let B=t.getPixelForValue(N);if(M=this.chart.getDataVisibility(e)?t.getPixelForValue(T+S):B,R=M-B,Math.abs(R)<o){R=function op(n,e,t){return 0!==n?Oo(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(R,t,c)*o,w===c&&(B-=R/2);const G=t.getPixelForDecimal(0),X=t.getPixelForDecimal(1),te=Math.min(G,X),re=Math.max(G,X);B=Math.max(Math.min(B,re),te),M=B+R,r&&!_&&(d._stacks[t.axis]._visualValues[i]=t.getValueForPixel(M)-t.getValueForPixel(B))}if(B===t.getPixelForValue(c)){const G=Oo(R)*t.getLineWidthForValue(c)/2;B+=G,R-=G}return{size:R,base:B,head:M,center:M+R/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,s=i.skipNull,o=Gt(i.maxBarThickness,1/0);let c,d;if(t.grouped){const g=s?this._getStackCount(e):t.stackCount,_="flex"===i.barThickness?function E1(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,c=n<i.length-1?i[n+1]:null;const d=t.categoryPercentage;null===o&&(o=s-(null===c?e.end-e.start:c-s)),null===c&&(c=s+s-o);const g=s-(s-Math.min(o,c))/2*d;return{chunk:Math.abs(c-o)/2*d/r,ratio:t.barPercentage,start:g}}(e,t,i,g):function ip(n,e,t,r){const i=t.barThickness;let s,o;return dn(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}(e,t,i,g),w=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);c=_.start+_.chunk*w+_.chunk/2,d=Math.min(o,_.chunk*_.ratio)}else c=r.getPixelForValue(this.getParsed(e)[r.axis],e),d=Math.min(o,t.min*t.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)null!==this.getParsed(s)[t.axis]&&r[s].draw(this._ctx)}}Ze(gy,"id","bar"),Ze(gy,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ze(gy,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class lp extends io{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,i){const s=super.parsePrimitiveData(e,t,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,t,r,i){const s=super.parseArrayData(e,t,r,i);for(let o=0;o<s.length;o++)s[o]._custom=Gt(t[r+o][2],this.resolveDataElementOptions(o+r).radius);return s}parseObjectData(e,t,r,i){const s=super.parseObjectData(e,t,r,i);for(let o=0;o<s.length;o++){const c=t[r+o];s[o]._custom=Gt(c&&c.r&&+c.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),c=i.getLabelForValue(o.x),d=s.getLabelForValue(o.y),g=o._custom;return{label:r[e]||"",value:"("+c+", "+d+(g?", "+g:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:c}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(t,i),_=o.axis,w=c.axis;for(let T=t;T<t+r;T++){const S=e[T],M=!s&&this.getParsed(T),R={},N=R[_]=s?o.getPixelForDecimal(.5):o.getPixelForValue(M[_]),B=R[w]=s?c.getBasePixel():c.getPixelForValue(M[w]);R.skip=isNaN(N)||isNaN(B),g&&(R.options=d||this.resolveDataElementOptions(T,S.active?"active":i),s&&(R.options.radius=0)),this.updateElement(S,T,R,i)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return"active"!==t&&(i.radius=0),i.radius+=Gt(r&&r._custom,s),i}}Ze(lp,"id","bubble"),Ze(lp,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ze(lp,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class _a extends io{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=r;else{let o,c,s=d=>+r[d];if(un(r[e])){const{key:d="value"}=this._parsing;s=g=>+pa(r[g],d)}for(o=e,c=e+t;o<c;++o)i._parsed[o]=s(o)}}_getRotation(){return ro(this.options.rotation-90)}_getCircumference(){return ro(this.options.circumference)}_getRotationExtents(){let e=Nn,t=-Nn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-o)/2,0),d=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/e)(this.options.cutout,c),1),g=this._getRingWeight(this.index),{circumference:_,rotation:w}=this._getRotationExtents(),{ratioX:T,ratioY:S,offsetX:M,offsetY:R}=function $D(n,e,t){let r=1,i=1,s=0,o=0;if(e<Nn){const c=n,d=c+e,g=Math.cos(c),_=Math.sin(c),w=Math.cos(d),T=Math.sin(d),S=(X,te,re)=>pd(X,c,d,!0)?1:Math.max(te,te*t,re,re*t),M=(X,te,re)=>pd(X,c,d,!0)?-1:Math.min(te,te*t,re,re*t),R=S(0,g,w),N=S(hr,_,T),B=M(On,g,w),G=M(On+hr,_,T);r=(R-B)/2,i=(N-G)/2,s=-(R+B)/2,o=-(N+G)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(w,_,d),G=Math.max(Math.min((r.width-o)/T,(r.height-o)/S)/2,0),X=cd(this.options.radius,G),re=(X-Math.max(X*d,0))/this._getVisibleDatasetWeightTotal();this.offsetX=M*X,this.offsetY=R*X,i.total=this.calculateTotal(),this.outerRadius=X-re*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-re*g,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Nn)}updateElements(e,t,r,i){const s="reset"===i,o=this.chart,c=o.chartArea,_=(c.left+c.right)/2,w=(c.top+c.bottom)/2,T=s&&o.options.animation.animateScale,S=T?0:this.innerRadius,M=T?0:this.outerRadius,{sharedOptions:R,includeOptions:N}=this._getSharedOptions(t,i);let G,B=this._getRotation();for(G=0;G<t;++G)B+=this._circumference(G,s);for(G=t;G<t+r;++G){const X=this._circumference(G,s),te=e[G],re={x:_+this.offsetX,y:w+this.offsetY,startAngle:B,endAngle:B+X,circumference:X,outerRadius:M,innerRadius:S};N&&(re.options=R||this.resolveDataElementOptions(G,te.active?"active":i)),B+=X,this.updateElement(te,G,re,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,r=0;for(i=0;i<t.length;i++){const s=e._parsed[i];null!==s&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Nn*(Math.abs(e)/t):0}getLabelAndValue(e){const r=this.chart,i=r.data.labels||[],s=Yf(this._cachedMeta._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,s,o,c,d;if(!e)for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,c=o.controller;break}if(!e)return 0;for(i=0,s=e.length;i<s;++i)d=c.resolveDataElementOptions(i),"inner"!==d.borderAlign&&(t=Math.max(t,d.borderWidth||0,d.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(Gt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ze(_a,"id","doughnut"),Ze(_a,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ze(_a,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ze(_a,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,o)=>{const d=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class up extends io{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:c,count:d}=nD(t,i,o);this._drawStart=c,this._drawCount=d,Ru(t)&&(c=0,d=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const g=this.resolveDatasetElementOptions(e);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:g},e),this.updateElements(i,c,d,e)}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:c,_stacked:d,_dataset:g}=this._cachedMeta,{sharedOptions:_,includeOptions:w}=this._getSharedOptions(t,i),T=o.axis,S=c.axis,{spanGaps:M,segment:R}=this.options,N=fd(M)?M:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||s||"none"===i,G=t+r,X=e.length;let te=t>0&&this.getParsed(t-1);for(let re=0;re<X;++re){const fe=e[re],Ie=B?fe:{};if(re<t||re>=G){Ie.skip=!0;continue}const Ve=this.getParsed(re),ut=dn(Ve[S]),Ft=Ie[T]=o.getPixelForValue(Ve[T],re),Zt=Ie[S]=s||ut?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,Ve,d):Ve[S],re);Ie.skip=isNaN(Ft)||isNaN(Zt)||ut,Ie.stop=re>0&&Math.abs(Ve[T]-te[T])>N,R&&(Ie.parsed=Ve,Ie.raw=g.data[re]),w&&(Ie.options=_||this.resolveDataElementOptions(re,fe.active?"active":i)),B||this.updateElement(fe,re,Ie,i),te=Ve}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ze(up,"id","line"),Ze(up,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ze(up,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class cp extends io{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,i=r.data.labels||[],s=Yf(this._cachedMeta._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,t,r,i){return bD.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(i/2,0),c=(s-Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(e,t,r,i){const s="reset"===i,o=this.chart,d=o.options.animation,g=this._cachedMeta.rScale,_=g.xCenter,w=g.yCenter,T=g.getIndexAngle(0)-.5*On;let M,S=T;const R=360/this.countVisibleElements();for(M=0;M<t;++M)S+=this._computeAngle(M,i,R);for(M=t;M<t+r;M++){const N=e[M];let B=S,G=S+this._computeAngle(M,i,R),X=o.getDataVisibility(M)?g.getDistanceFromCenterForValue(this.getParsed(M).r):0;S=G,s&&(d.animateScale&&(X=0),d.animateRotate&&(B=G=T));const te={x:_,y:w,innerRadius:0,outerRadius:X,startAngle:B,endAngle:G,options:this.resolveDataElementOptions(M,N.active?"active":i)};this.updateElement(N,M,te,i)}}countVisibleElements(){let t=0;return this._cachedMeta.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?ro(this.resolveDataElementOptions(e,t).angle||r):0}}Ze(cp,"id","polarArea"),Ze(cp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ze(cp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,o)=>{const d=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ob extends _a{}Ze(Ob,"id","pie"),Ze(Ob,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Nb extends io{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,i){return bD.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta,r=t.dataset,i=t.data||[],s=t.iScale.getLabels();if(r.points=i,"resize"!==e){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:s.length===i.length,options:o},e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,r,i){const s=this._cachedMeta.rScale,o="reset"===i;for(let c=t;c<t+r;c++){const d=e[c],g=this.resolveDataElementOptions(c,d.active?"active":i),_=s.getPointPositionForValue(c,this.getParsed(c).r),w=o?s.xCenter:_.x,T=o?s.yCenter:_.y,S={x:w,y:T,angle:_.angle,skip:isNaN(w)||isNaN(T),options:g};this.updateElement(d,c,S,i)}}}Ze(Nb,"id","radar"),Ze(Nb,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ze(Nb,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Id extends io{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),c=i.getLabelForValue(o.x),d=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+c+", "+d+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,i=this.chart._animationsDisabled;let{start:s,count:o}=nD(t,r,i);if(this._drawStart=s,this._drawCount=o,Ru(t)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:c,_dataset:d}=t;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!d._decimated,c.points=r;const g=this.resolveDatasetElementOptions(e);g.segment=this.options.segment,this.updateElement(c,void 0,{animated:!i,options:g},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:c,_stacked:d,_dataset:g}=this._cachedMeta,_=this.resolveDataElementOptions(t,i),w=this.getSharedOptions(_),T=this.includeOptions(i,w),S=o.axis,M=c.axis,{spanGaps:R,segment:N}=this.options,B=fd(R)?R:Number.POSITIVE_INFINITY,G=this.chart._animationsDisabled||s||"none"===i;let X=t>0&&this.getParsed(t-1);for(let te=t;te<t+r;++te){const re=e[te],fe=this.getParsed(te),Ie=G?re:{},Ve=dn(fe[M]),ut=Ie[S]=o.getPixelForValue(fe[S],te),Ft=Ie[M]=s||Ve?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,fe,d):fe[M],te);Ie.skip=isNaN(ut)||isNaN(Ft)||Ve,Ie.stop=te>0&&Math.abs(fe[S]-X[S])>B,N&&(Ie.parsed=fe,Ie.raw=g.data[te]),T&&(Ie.options=w||this.resolveDataElementOptions(te,re.active?"active":i)),G||this.updateElement(re,te,Ie,i),X=fe}this.updateSharedOptions(w,i,_)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let c=0;for(let d=t.length-1;d>=0;--d)c=Math.max(c,t[d].size(this.resolveDataElementOptions(d))/2);return c>0&&c}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!t.length)return i;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,s,o)/2}}Ze(Id,"id","scatter"),Ze(Id,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ze(Id,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Fb=Object.freeze({__proto__:null,BarController:gy,BubbleController:lp,DoughnutController:_a,LineController:up,PieController:Ob,PolarAreaController:cp,RadarController:Nb,ScatterController:Id});function dl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dp{constructor(e){Ze(this,"options"),this.options=e||{}}static override(e){Object.assign(dp.prototype,e)}init(){}formats(){return dl()}parse(){return dl()}format(){return dl()}add(){return dl()}diff(){return dl()}startOf(){return dl()}endOf(){return dl()}}var Lb__date=dp;function T1(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,c=i._cachedMeta.iScale;if(c&&e===c.axis&&"r"!==e&&o&&s.length){const d=c._reversePixels?ku:Fo;if(!r)return d(s,e,t);if(i._sharedOptions){const g=s[0],_="function"==typeof g.getRange&&g.getRange(e);if(_){const w=d(s,e,t-_),T=d(s,e,t+_);return{lo:w.lo,hi:T.hi}}}}return{lo:0,hi:s.length-1}}function hp(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let c=0,d=s.length;c<d;++c){const{index:g,data:_}=s[c],{lo:w,hi:T}=T1(s[c],e,o,i);for(let S=w;S<=T;++S){const M=_[S];M.skip||r(M,g,S)}}}function Vb(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||hp(n,t,e,function(c,d,g){!i&&!Lo(c,n.chartArea,0)||c.inRange(e.x,e.y,r)&&s.push({element:c,datasetIndex:d,index:g})},!0),s}function my(n,e,t,r,i,s){return s||n.isPointInArea(e)?"r"!==t||r?function Ub(n,e,t,r,i,s){let o=[];const c=function S1(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(t);let d=Number.POSITIVE_INFINITY;return hp(n,t,e,function g(_,w,T){const S=_.inRange(e.x,e.y,i);if(r&&!S)return;const M=_.getCenterPoint(i);if(!s&&!n.isPointInArea(M)&&!S)return;const N=c(e,M);N<d?(o=[{element:_,datasetIndex:w,index:T}],d=N):N===d&&o.push({element:_,datasetIndex:w,index:T})}),o}(n,e,t,r,i,s):function zD(n,e,t,r){let i=[];return hp(n,t,e,function s(o,c,d){const{startAngle:g,endAngle:_}=o.getProps(["startAngle","endAngle"],r),{angle:w}=db(o,{x:e.x,y:e.y});pd(w,g,_)&&i.push({element:o,datasetIndex:c,index:d})}),i}(n,e,t,i):[]}function Bb(n,e,t,r,i){const s=[],o="x"===t?"inXRange":"inYRange";let c=!1;return hp(n,t,e,(d,g,_)=>{d[o](e[t],i)&&(s.push({element:d,datasetIndex:g,index:_}),c=c||d.inRange(e.x,e.y,i))}),r&&!c?[]:s}var GD={evaluateInteractionItems:hp,modes:{index(n,e,t,r){const i=Lu(e,n),s=t.axis||"x",o=t.includeInvisible||!1,c=t.intersect?Vb(n,i,s,r,o):my(n,i,s,!1,r,o),d=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(g=>{const _=c[0].index,w=g.data[_];w&&!w.skip&&d.push({element:w,datasetIndex:g.index,index:_})}),d):[]},dataset(n,e,t,r){const i=Lu(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let c=t.intersect?Vb(n,i,s,r,o):my(n,i,s,!1,r,o);if(c.length>0){const d=c[0].datasetIndex,g=n.getDatasetMeta(d).data;c=[];for(let _=0;_<g.length;++_)c.push({element:g[_],datasetIndex:d,index:_})}return c},point:(n,e,t,r)=>Vb(n,Lu(e,n),t.axis||"xy",r,t.includeInvisible||!1),nearest:(n,e,t,r)=>my(n,Lu(e,n),t.axis||"xy",t.intersect,r,t.includeInvisible||!1),x:(n,e,t,r)=>Bb(n,Lu(e,n),"x",t.intersect,r),y:(n,e,t,r)=>Bb(n,Lu(e,n),"y",t.intersect,r)}};const jb=["left","top","right","bottom"];function fp(n,e){return n.filter(t=>t.pos===e)}function Hb(n,e){return n.filter(t=>-1===jb.indexOf(t.pos)&&t.box.axis===e)}function Cd(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Uu(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function qD(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function M1(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!un(i)){t.size&&(n[i]-=t.size);const w=r[t.stack]||{size:0,count:1};w.size=Math.max(w.size,t.horizontal?s.height:s.width),t.size=w.size/w.count,n[i]+=t.size}s.getPadding&&qD(o,s.getPadding());const c=Math.max(0,e.outerWidth-Uu(o,n,"left","right")),d=Math.max(0,e.outerHeight-Uu(o,n,"top","bottom")),g=c!==n.w,_=d!==n.h;return n.w=c,n.h=d,t.horizontal?{same:g,other:_}:{same:_,other:g}}function x2(n,e){const t=e.maxPadding;return function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}(n?["left","right"]:["top","bottom"])}function Dd(n,e,t,r){const i=[];let s,o,c,d,g,_;for(s=0,o=n.length,g=0;s<o;++s){c=n[s],d=c.box,d.update(c.width||e.w,c.height||e.h,x2(c.horizontal,e));const{same:w,other:T}=M1(e,t,c,r);g|=w&&i.length,_=_||T,d.fullSize||i.push(c)}return g&&Dd(i,e,t,r)||_}function pp(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function Td(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const c of n){const d=c.box,g=r[c.stack]||{count:1,placed:0,weight:1},_=c.stackWeight/g.weight||1;if(c.horizontal){const w=e.w*_,T=g.size||d.height;hd(g.start)&&(o=g.start),d.fullSize?pp(d,i.left,o,t.outerWidth-i.right-i.left,T):pp(d,e.left+g.placed,o,w,T),g.start=o,g.placed+=w,o=d.bottom}else{const w=e.h*_,T=g.size||d.width;hd(g.start)&&(s=g.start),d.fullSize?pp(d,s,i.top,T,t.outerHeight-i.bottom-i.top):pp(d,s,e.top+g.placed,T,w),g.start=s,g.placed+=w,s=d.right}}e.x=s,e.y=o}var di={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=ci(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),c=function Ci(n){const e=function x1(n){const e=[];let t,r,i,s,o,c;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],({position:s,options:{stack:o,stackWeight:c=1}}=i),e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:c});return e}(n),t=Cd(e.filter(g=>g.box.fullSize),!0),r=Cd(fp(e,"left"),!0),i=Cd(fp(e,"right")),s=Cd(fp(e,"top"),!0),o=Cd(fp(e,"bottom")),c=Hb(e,"x"),d=Hb(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(d).concat(o).concat(c),chartArea:fp(e,"chartArea"),vertical:r.concat(i).concat(d),horizontal:s.concat(o).concat(c)}}(n.boxes),d=c.vertical,g=c.horizontal;bn(n.boxes,R=>{"function"==typeof R.beforeLayout&&R.beforeLayout()});const _=d.reduce((R,N)=>N.box.options&&!1===N.box.options.display?R:R+1,0)||1,w=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/_,hBoxMaxHeight:o/2}),T=Object.assign({},i);qD(T,ci(r));const S=Object.assign({maxPadding:T,w:s,h:o,x:i.left,y:i.top},i),M=function A1(n,e){const t=function WD(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!jb.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,c;for(s=0,o=n.length;s<o;++s){c=n[s];const{fullSize:d}=c.box,g=t[c.stack],_=g&&c.stackWeight/g.weight;c.horizontal?(c.width=_?_*r:d&&e.availableWidth,c.height=i):(c.width=r,c.height=_?_*i:d&&e.availableHeight)}return t}(d.concat(g),w);Dd(c.fullSize,S,w,M),Dd(d,S,w,M),Dd(g,S,w,M)&&Dd(d,S,w,M),function S2(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(S),Td(c.leftAndTop,S,w,M),S.x+=S.w,S.y+=S.h,Td(c.rightAndBottom,S,w,M),n.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},bn(c.chartArea,R=>{const N=R.box;Object.assign(N,n.chartArea),N.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class yy{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class k1 extends yy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const gp="$chartjs",R1={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ZD=n=>null===n||""===n,_y=!!Ed&&{passive:!0};function YD(n,e,t){n.canvas.removeEventListener(e,t,_y)}function Sd(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function A2(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const c of s)o=o||Sd(c.addedNodes,r),o=o&&!Sd(c.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function QD(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const c of s)o=o||Sd(c.removedNodes,r),o=o&&!Sd(c.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const mp=new Map;let $b=0;function Bu(){const n=window.devicePixelRatio;n!==$b&&($b=n,mp.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function zb(n,e,t){const r=n.canvas,i=r&&uy(r);if(!i)return;const s=fb((c,d)=>{const g=i.clientWidth;t(c,d),g<i.clientWidth&&t()},window),o=new ResizeObserver(c=>{const d=c[0],g=d.contentRect.width,_=d.contentRect.height;0===g&&0===_||s(g,_)});return o.observe(i),function O1(n,e){mp.size||window.addEventListener("resize",Bu),mp.set(n,e)}(n,s),o}function JD(n,e,t){t&&t.disconnect(),"resize"===e&&function XD(n){mp.delete(n),mp.size||window.removeEventListener("resize",Bu)}(n)}function N1(n,e,t){const r=n.canvas,i=fb(s=>{null!==n.ctx&&t(function vy(n,e){const t=R1[n.type]||n.type,{x:r,y:i}=Lu(n,e);return{type:t,chart:e,native:n,x:void 0!==r?r:null,y:void 0!==i?i:null}}(s,n))},n);return function KD(n,e,t){n.addEventListener(e,t,_y)}(r,e,i),i}class M2 extends yy{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function P1(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[gp]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",ZD(i)){const s=Ib(n,"width");void 0!==s&&(n.width=s)}if(ZD(r))if(""===n.style.height)n.height=n.width/(e||2);else{const s=Ib(n,"height");void 0!==s&&(n.height=s)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[gp])return!1;const r=t[gp].initial;["height","width"].forEach(s=>{const o=r[s];dn(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[gp],!0}addEventListener(e,t,r){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:A2,detach:QD,resize:zb}[t]||N1)(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];i&&(({attach:JD,detach:JD,resize:JD}[t]||YD)(e,t,i),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return function o1(n,e,t,r){const i=dy(n),s=ma(i,"margin"),o=cy(i.maxWidth,n,"clientWidth")||Km,c=cy(i.maxHeight,n,"clientHeight")||Km,d=function s1(n,e,t){let r,i;if(void 0===e||void 0===t){const s=uy(n);if(s){const o=s.getBoundingClientRect(),c=dy(s),d=ma(c,"border","width"),g=ma(c,"padding");e=o.width-g.width-d.width,t=o.height-g.height-d.height,r=cy(c.maxWidth,s,"clientWidth"),i=cy(c.maxHeight,s,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:r||Km,maxHeight:i||Km}}(n,e,t);let{width:g,height:_}=d;if("content-box"===i.boxSizing){const T=ma(i,"border","width"),S=ma(i,"padding");g-=S.width+T.width,_-=S.height+T.height}return g=Math.max(0,g-s.width),_=Math.max(0,r?g/r:_-s.height),g=wd(Math.min(g,o,d.maxWidth)),_=wd(Math.min(_,c,d.maxHeight)),g&&!_&&(_=wd(g/2)),(void 0!==e||void 0!==t)&&r&&d.height&&_>d.height&&(_=d.height,g=wd(Math.floor(_*r))),{width:g,height:_}}(e,t,r,i)}isAttached(e){const t=uy(e);return!(!t||!t.isConnected)}}class oo{constructor(){Ze(this,"x"),Ze(this,"y"),Ze(this,"active",!1),Ze(this,"options"),Ze(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return fd(this.x)&&fd(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function yp(n,e,t,r,i){const s=Gt(r,0),o=Math.min(Gt(i,n.length),n.length);let d,g,_,c=0;for(t=Math.ceil(t),i&&(d=i-r,t=d/Math.floor(d/t)),_=s;_<0;)c++,_=Math.round(s+c*t);for(g=Math.max(s,0);g<o;g++)g===_&&(e.push(n[g]),c++,_=Math.round(s+c*t))}Ze(oo,"defaults",{}),Ze(oo,"defaultRoutes");const Gb=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t,rT=(n,e)=>Math.min(e||n,n);function Wb(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function iT(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,c=1e-6;let g,d=n.getPixelForTick(i);if(!(t&&(g=1===r?Math.max(d-s,o-d):0===e?(n.getPixelForTick(1)-d)/2:(d-n.getPixelForTick(i-1))/2,d+=i<e?g:-g,d<s-c||d>o+c)))return d}function xd(n){return n.drawTicks?n.tickLength:0}function oT(n,e){if(!n.display)return 0;const t=Nr(n.font,e),r=ci(n.padding);return(Mn(n.text)?n.text.length:1)*t.lineHeight+r.height}function aT(n,e,t){let r=Ct(n);return(t&&"right"!==e||!t&&"right"===e)&&(r=(n=>"left"===n?"right":"right"===n?"left":n)(r)),r}class Ad extends oo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=us(e,Number.POSITIVE_INFINITY),t=us(t,Number.NEGATIVE_INFINITY),r=us(r,Number.POSITIVE_INFINITY),i=us(i,Number.NEGATIVE_INFINITY),{min:us(e,r),max:us(t,i),minDefined:rr(e),maxDefined:rr(t)}}getMinMax(e){let o,{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:t,max:r};const c=this.getMatchingVisibleMetas();for(let d=0,g=c.length;d<g;++d)o=c[d].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:us(t,us(r,t)),max:us(r,us(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){kn(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function hD(n,e,t){const{min:r,max:i}=n,s=cd(e,(i-r)/2),o=(c,d)=>t&&0===c?0:c+d;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?Wb(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function L1(n,e){const t=n.options.ticks,r=function eT(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?function V1(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}(e):[],o=s.length,c=s[0],d=s[o-1],g=[];if(o>i)return function nT(n,e,t,r){let o,i=0,s=t[0];for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}(e,g,s,o/i),g;const _=function tT(n,e,t){const r=function U1(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}(n),i=e.length/t;if(!r)return Math.max(i,1);const s=function OM(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r==0&&(e.push(r),e.push(n/r));return t===(0|t)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}(r);for(let o=0,c=s.length-1;o<c;o++){const d=s[o];if(d>i)return d}return Math.max(i,1)}(s,e,i);if(o>0){let w,T;const S=o>1?Math.round((d-c)/(o-1)):null;for(yp(e,g,_,dn(S)?0:c-S,c),w=0,T=o-1;w<T;w++)yp(e,g,_,s[w],s[w+1]);return yp(e,g,_,d,dn(S)?e.length:d+S),g}return yp(e,g,_),g}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,r,e=this.options.reverse;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){kn(this.options.afterUpdate,[this])}beforeSetDimensions(){kn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){kn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),kn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){kn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=kn(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){kn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){kn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=rT(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let c,d,g,o=i;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal())return void(this.labelRotation=i);const _=this._getLabelSizes(),w=_.widest.width,T=_.highest.height,S=Or(this.chart.width-w,0,this.maxWidth);c=e.offset?this.maxWidth/r:S/(r-1),w+6>c&&(c=S/(r-(e.offset?.5:1)),d=this.maxHeight-xd(e.grid)-t.padding-oT(e.title,this.chart.options.font),g=Math.sqrt(w*w+T*T),o=ub(Math.min(Math.asin(Or((_.highest.height+6)/c,-1,1)),Math.asin(Or(d/g,-1,1))-Math.asin(Or(T/g,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){kn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){kn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const d=oT(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=xd(s)+d):(e.height=this.maxHeight,e.width=xd(s)+d),r.display&&this.ticks.length){const{first:g,last:_,widest:w,highest:T}=this._getLabelSizes(),S=2*r.padding,M=ro(this.labelRotation),R=Math.cos(M),N=Math.sin(M);c?e.height=Math.min(this.maxHeight,e.height+(r.mirror?0:N*w.width+R*T.height)+S):e.width=Math.min(this.maxWidth,e.width+(r.mirror?0:R*w.width+N*T.height)+S),this._calculatePadding(g,_,N,R)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:c}=this.options,d=0!==this.labelRotation,g="top"!==c&&"x"===this.axis;if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,S=0;d?g?(T=i*e.width,S=r*t.height):(T=r*e.height,S=i*t.width):"start"===s?S=t.width:"end"===s?T=e.width:"inner"!==s&&(T=e.width/2,S=t.width/2),this.paddingLeft=Math.max((T-_+o)*this.width/(this.width-_),0),this.paddingRight=Math.max((S-w+o)*this.width/(this.width-w),0)}else{let _=t.height/2,w=e.height/2;"start"===s?(_=0,w=e.height):"end"===s&&(_=t.height,w=0),this.paddingTop=_+o,this.paddingBottom=w+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){kn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)dn(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=Wb(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],c=[],d=Math.floor(t/rT(t,r));let w,T,S,M,R,N,B,G,X,te,re,g=0,_=0;for(w=0;w<t;w+=d){if(M=e[w].label,R=this._resolveTickFontOptions(w),i.font=N=R.string,B=s[N]=s[N]||{data:{},gc:[]},G=R.lineHeight,X=te=0,dn(M)||Mn(M)){if(Mn(M))for(T=0,S=M.length;T<S;++T)re=M[T],!dn(re)&&!Mn(re)&&(X=ll(i,B.data,B.gc,X,re),te+=G)}else X=ll(i,B.data,B.gc,X,M),te=G;o.push(X),c.push(te),g=Math.max(X,g),_=Math.max(te,_)}!function sT(n,e){bn(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}(s,t);const fe=o.indexOf(g),Ie=c.indexOf(_),Ve=ut=>({width:o[ut]||0,height:c[ut]||0});return{first:Ve(0),last:Ve(t-1),widest:Ve(fe),highest:Ve(Ie),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function eD(n){return Or(n,-32768,32767)}(this._alignToPixels?Ou(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function k2(n,e,t){return ul(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=function j1(n,e){return ul(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ro(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,c=s?s.widest.width+o:0,d=s?s.highest.height+o:0;return this.isHorizontal()?d*r>c*i?c/r:d/i:d*i<c*r?d/r:c/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:c}=i,d=s.offset,g=this.isHorizontal(),w=this.ticks.length+(d?1:0),T=xd(s),S=[],M=c.setContext(this.getContext()),R=M.display?M.width:0,N=R/2,B=function($e){return Ou(r,$e,R)};let G,X,te,re,fe,Ie,Ve,ut,Ft,Zt,sn,Yn;if("top"===o)G=B(this.bottom),Ie=this.bottom-T,ut=G-N,Zt=B(e.top)+N,Yn=e.bottom;else if("bottom"===o)G=B(this.top),Zt=e.top,Yn=B(e.bottom)-N,Ie=G+N,ut=this.top+T;else if("left"===o)G=B(this.right),fe=this.right-T,Ve=G-N,Ft=B(e.left)+N,sn=e.right;else if("right"===o)G=B(this.left),Ft=e.left,sn=B(e.right)-N,fe=G+N,Ve=this.left+T;else if("x"===t){if("center"===o)G=B((e.top+e.bottom)/2+.5);else if(un(o)){const $e=Object.keys(o)[0];G=B(this.chart.scales[$e].getPixelForValue(o[$e]))}Zt=e.top,Yn=e.bottom,Ie=G+N,ut=Ie+T}else if("y"===t){if("center"===o)G=B((e.left+e.right)/2);else if(un(o)){const $e=Object.keys(o)[0];G=B(this.chart.scales[$e].getPixelForValue(o[$e]))}fe=G-N,Ve=fe-T,Ft=e.left,sn=e.right}const Ki=Gt(i.ticks.maxTicksLimit,w),In=Math.max(1,Math.ceil(w/Ki));for(X=0;X<w;X+=In){const $e=this.getContext(X),nt=s.setContext($e),vt=c.setContext($e),Ot=nt.lineWidth,Qn=nt.color,bs=vt.dash||[],zr=vt.dashOffset,Bs=nt.tickWidth,An=nt.tickColor,sh=nt.tickBorderDash||[],ig=nt.tickBorderDashOffset;te=iT(this,X,d),void 0!==te&&(re=Ou(r,te,Ot),g?fe=Ve=Ft=sn=re:Ie=ut=Zt=Yn=re,S.push({tx1:fe,ty1:Ie,tx2:Ve,ty2:ut,x1:Ft,y1:Zt,x2:sn,y2:Yn,width:Ot,color:Qn,borderDash:bs,borderDashOffset:zr,tickWidth:Bs,tickColor:An,tickBorderDash:sh,tickBorderDashOffset:ig}))}return this._ticksLength=w,this._borderValue=G,S}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:g,padding:_,mirror:w}=s,T=xd(r.grid),S=T+_,M=w?-_:S,R=-ro(this.labelRotation),N=[];let B,G,X,te,re,fe,Ie,Ve,ut,Ft,Zt,sn,Yn="middle";if("top"===i)fe=this.bottom-M,Ie=this._getXAxisLabelAlignment();else if("bottom"===i)fe=this.top+M,Ie=this._getXAxisLabelAlignment();else if("left"===i){const In=this._getYAxisLabelAlignment(T);Ie=In.textAlign,re=In.x}else if("right"===i){const In=this._getYAxisLabelAlignment(T);Ie=In.textAlign,re=In.x}else if("x"===t){if("center"===i)fe=(e.top+e.bottom)/2+S;else if(un(i)){const In=Object.keys(i)[0];fe=this.chart.scales[In].getPixelForValue(i[In])+S}Ie=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)re=(e.left+e.right)/2-S;else if(un(i)){const In=Object.keys(i)[0];re=this.chart.scales[In].getPixelForValue(i[In])}Ie=this._getYAxisLabelAlignment(T).textAlign}"y"===t&&("start"===d?Yn="top":"end"===d&&(Yn="bottom"));const Ki=this._getLabelSizes();for(B=0,G=c.length;B<G;++B){X=c[B],te=X.label;const In=s.setContext(this.getContext(B));Ve=this.getPixelForTick(B)+s.labelOffset,ut=this._resolveTickFontOptions(B),Ft=ut.lineHeight,Zt=Mn(te)?te.length:1;const $e=Zt/2,nt=In.color,vt=In.textStrokeColor,Ot=In.textStrokeWidth;let bs,Qn=Ie;if(o?(re=Ve,"inner"===Ie&&(Qn=B===G-1?this.options.reverse?"left":"right":0===B?this.options.reverse?"right":"left":"center"),sn="top"===i?"near"===g||0!==R?-Zt*Ft+Ft/2:"center"===g?-Ki.highest.height/2-$e*Ft+Ft:Ft/2-Ki.highest.height:"near"===g||0!==R?Ft/2:"center"===g?Ki.highest.height/2-$e*Ft:Ki.highest.height-Zt*Ft,w&&(sn*=-1),0!==R&&!In.showLabelBackdrop&&(re+=Ft/2*Math.sin(R))):(fe=Ve,sn=(1-Zt)*Ft/2),In.showLabelBackdrop){const zr=ci(In.backdropPadding),Bs=Ki.heights[B],An=Ki.widths[B];let sh=sn-zr.top,ig=0-zr.left;switch(Yn){case"middle":sh-=Bs/2;break;case"bottom":sh-=Bs}switch(Ie){case"center":ig-=An/2;break;case"right":ig-=An}bs={left:ig,top:sh,width:An+zr.width,height:Bs+zr.height,color:In.backdropColor}}N.push({label:te,font:ut,textOffset:sn,options:{rotation:R,color:nt,strokeColor:vt,strokeWidth:Ot,textAlign:Qn,textBaseline:Yn,translation:[re,fe],backdrop:bs}})}return N}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ro(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,c=e+s,d=this._getLabelSizes().widest.width;let g,_;return"left"===t?i?(_=this.right+s,"near"===r?g="left":"center"===r?(g="center",_+=d/2):(g="right",_+=d)):(_=this.right-c,"near"===r?g="right":"center"===r?(g="center",_-=d/2):(g="left",_=this.left)):"right"===t?i?(_=this.left+s,"near"===r?g="right":"center"===r?(g="center",_-=d/2):(g="left",_-=d)):(_=this.left+c,"near"===r?g="left":"center"===r?(g="center",_+=d/2):(g="right",_=this.right)):g="right",{textAlign:g,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const c=(d,g,_)=>{!_.width||!_.color||(r.save(),r.lineWidth=_.width,r.strokeStyle=_.color,r.setLineDash(_.borderDash||[]),r.lineDashOffset=_.borderDashOffset,r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(g.x,g.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const d=i[s];t.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const c=i.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let g,_,w,T;this.isHorizontal()?(g=Ou(e,this.left,o)-o/2,_=Ou(e,this.right,c)+c/2,w=T=d):(w=Ou(e,this.top,o)-o/2,T=Ou(e,this.bottom,c)+c/2,g=_=d),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(g,w),t.lineTo(_,T),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&iy(r,i);const s=this.getLabelItems(e);for(const o of s)_d(r,o.label,0,o.textOffset,o.font,o.options);i&&Jf(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=Nr(r.font),o=ci(r.padding),c=r.align;let d=s.lineHeight/2;"bottom"===t||"center"===t||un(t)?(d+=o.bottom,Mn(r.text)&&(d+=s.lineHeight*(r.text.length-1))):d+=o.top;const{titleX:g,titleY:_,maxWidth:w,rotation:T}=function R2(n,e,t,r){const{top:i,left:s,bottom:o,right:c,chart:d}=n,{chartArea:g,scales:_}=d;let T,S,M,w=0;const R=o-i,N=c-s;if(n.isHorizontal()){if(S=ui(r,s,c),un(t)){const B=Object.keys(t)[0];M=_[B].getPixelForValue(t[B])+R-e}else M="center"===t?(g.bottom+g.top)/2+R-e:Gb(n,t,e);T=c-s}else{if(un(t)){const B=Object.keys(t)[0];S=_[B].getPixelForValue(t[B])-N+e}else S="center"===t?(g.left+g.right)/2-N+e:Gb(n,t,e);M=ui(r,o,i),w="left"===t?-hr:hr}return{titleX:S,titleY:M,maxWidth:T,rotation:w}}(this,d,t,c);_d(e,r.text,0,0,s,{color:r.color,maxWidth:w,rotation:T,textAlign:aT(c,t,i),textBaseline:"middle",translation:[g,_]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Gt(e.grid&&e.grid.z,-1),i=Gt(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Ad.prototype.draw?[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const c=t[s];c[r]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){return Nr(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qb{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function N2(n){return"id"in n&&"defaults"in n})(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,function P2(n,e,t){const r=Gf(Object.create(null),[t?ir.get(t):{},ir.get(e),n.defaults]);ir.set(e,r),n.defaultRoutes&&function O2(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),c=o.pop(),d=o.join(".");ir.route(s,i,d,c)})}(e,n.defaultRoutes),n.descriptors&&ir.describe(e,n.descriptors)}(e,o,r),this.override&&ir.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in ir[i]&&(delete ir[i][r],this.override&&delete Pu[r])}}class F2{constructor(){this.controllers=new qb(io,"datasets",!0),this.elements=new qb(oo,"elements"),this.plugins=new qb(Object,"plugins"),this.scales=new qb(Ad,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):bn(i,o=>{const c=r||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,t,r){const i=Zm(e);kn(r["before"+i],[],r),t[e](r),kn(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var va=new F2;class by{constructor(){this._init=[]}notify(e,t,r,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin;if(!1===kn(o[r],[t,i,s.options],o)&&i.cancelable)return!1}return!0}invalidate(){dn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=Gt(r.options&&r.options.plugins,{}),s=function L2(n){const e={},t=[],r=Object.keys(va.plugins.items);for(let s=0;s<r.length;s++)t.push(va.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];-1===t.indexOf(o)&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}(r);return!1!==i||t?function wy(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const c of e){const d=c.id,g=lT(r[d],i);null!==g&&s.push({plugin:c,options:uT(n.config,{plugin:c,local:t[d]},g,o)})}return s}(e,s,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(c=>!o.some(d=>c.plugin.id===d.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function lT(n,e){return e||!1!==n?!0===n?{}:n:null}function uT(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ey(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(ir.datasets[n]||{}).indexAxis||"x"}function Kb(n){if("x"===n||"y"===n||"r"===n)return n}function H1(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function Iy(n,...e){if(Kb(n))return n;for(const t of e){const r=t.axis||H1(t.position)||n.length>1&&Kb(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function $1(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function cT(n){const e=n.options||(n.options={});e.plugins=Gt(e.plugins,{}),e.scales=function G1(n,e){const t=Pu[n.type]||{scales:{}},r=e.scales||{},i=Ey(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const c=r[o];if(!un(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=Iy(o,c,function z1(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return $1(n,"x",t[0])||$1(n,"y",t[0])}return{}}(o,n),ir.scales[c.type]),g=function Zb(n,e){return n===e?"_index_":"_value_"}(d,i),_=t.scales||{};s[o]=dd(Object.create(null),[{axis:d},c,_[d],_[g]])}),n.data.datasets.forEach(o=>{const c=o.type||n.type,d=o.indexAxis||Ey(c,e),_=(Pu[c]||{}).scales||{};Object.keys(_).forEach(w=>{const T=function V2(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(w,d),S=o[T+"AxisID"]||T;s[S]=s[S]||Object.create(null),dd(s[S],[{axis:T},r[S],_[w]])})}),Object.keys(s).forEach(o=>{const c=s[o];dd(c,[ir.scales[c.type],ir.scale])}),s}(n,e)}function _p(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const q1=new Map,Z1=new Set;function Yb(n,e){let t=q1.get(n);return t||(t=e(),q1.set(n,t),Z1.add(t)),t}const vp=(n,e,t)=>{const r=pa(e,t);void 0!==r&&n.add(r)};class K1{constructor(e){this._config=function W1(n){return(n=n||{}).data=_p(n.data),cT(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=_p(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Yb(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Yb(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Yb(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return Yb(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),c=o.get(t);if(c)return c;const d=new Set;t.forEach(_=>{e&&(d.add(e),_.forEach(w=>vp(d,e,w))),_.forEach(w=>vp(d,i,w)),_.forEach(w=>vp(d,Pu[s]||{},w)),_.forEach(w=>vp(d,ir,w)),_.forEach(w=>vp(d,md,w))});const g=Array.from(d);return 0===g.length&&g.push(Object.create(null)),Z1.has(t)&&o.set(t,g),g}chartOptionScopes(){const{options:e,type:t}=this;return[e,Pu[t]||{},ir.datasets[t]||{},{type:t},ir,md]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:c}=dT(this._resolverCache,e,i);let d=o;(function Y1(n,e){const{isScriptable:t,isIndexable:r}=fD(n);for(const i of e){const s=t(i),o=r(i),c=(o||s)&&n[i];if(s&&(ga(c)||U2(c))||o&&Mn(c))return!0}return!1})(o,t)&&(s.$shared=!1,d=Vo(o,r=ga(r)?r():r,this.createResolver(e,r,c)));for(const g of t)s[g]=d[g];return s}createResolver(e,t,r=[""],i){const{resolver:s}=dT(this._resolverCache,e,r);return un(t)?Vo(s,t,void 0,i):s}}function dT(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:yb(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},r.set(i,s)),s}const U2=n=>un(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||ga(n[t]),!1),fT=["top","bottom","left","right","chartArea"];function Q1(n,e){return"top"===n||"bottom"===n||-1===fT.indexOf(n)&&"x"===e}function Os(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function pT(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),kn(t&&t.onComplete,[n],e)}function Qb(n){const e=n.chart,t=e.options.animation;kn(t&&t.onProgress,[n],e)}function gT(n){return ID()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Di={},mT=n=>{const e=gT(n);return Object.values(Di).filter(t=>t.canvas===e).pop()};function Xb(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function Cy(n,e,t){return n.options.clip?n[t]:e[t]}class Uo{static register(...e){va.add(...e),ew()}static unregister(...e){va.remove(...e),ew()}constructor(e,t){const r=this.config=new K1(t),i=gT(e),s=mT(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function F1(n){return!ID()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?k1:M2}(i)),this.platform.updateConfig(r);const c=this.platform.acquireContext(i,o.aspectRatio),d=c&&c.canvas,g=d&&d.height,_=d&&d.width;this.id=no(),this.ctx=c,this.canvas=d,this.width=_,this.height=g,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new by,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function w2(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}(w=>this.update(w),o.resizeDelay||0),this._dataChanges=[],Di[this.id]=this,c&&d?(ya.listen(this,"complete",pT),ya.listen(this,"progress",Qb),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return dn(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return va}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Eb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return uD(this.canvas,this.ctx),this}stop(){return ya.stop(this),this}resize(e,t){ya.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,o=this.platform.getMaximumSize(this.canvas,e,t,r.maintainAspectRatio&&this.aspectRatio),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Eb(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),kn(r.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){bn(this.options.scales||{},(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,c)=>(o[c]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const c=t[o],d=Iy(o,c),g="r"===d,_="x"===d;return{options:c,dposition:g?"chartArea":_?"bottom":"left",dtype:g?"radialLinear":_?"category":"linear"}}))),bn(s,o=>{const c=o.options,d=c.id,g=Iy(d,c),_=Gt(c.type,o.dtype);(void 0===c.position||Q1(c.position,g)!==Q1(o.dposition))&&(c.position=o.dposition),i[d]=!0;let w=null;d in r&&r[d].type===_?w=r[d]:(w=new(va.getScale(_))({id:d,type:_,ctx:this.ctx,chart:this}),r[w.id]=w),w.init(c,e)}),bn(i,(o,c)=>{o||delete r[c]}),bn(r,o=>{di.configure(this,o,o.options),di.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(Os("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{0===t.filter(s=>s===r._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const c=s.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=c,o.indexAxis=s.indexAxis||Ey(c,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const d=va.getController(c),{datasetElementType:g,dataElementType:_}=ir.datasets[c];Object.assign(d,{dataElementType:va.getElement(_),datasetElementType:g&&va.getElement(g)}),o.controller=new d(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){bn(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let g=0,_=this.data.datasets.length;g<_;g++){const{controller:w}=this.getDatasetMeta(g),T=!i&&-1===s.indexOf(w);w.buildOrUpdateElements(T),o=Math.max(+w.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||bn(s,g=>{g.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Os("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){bn(this.scales,e=>{di.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!lb(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t)Xb(e,i,"_removeElements"===r?-s:s)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,c)=>c+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!lb(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;di.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],bn(this.boxes,i=>{r&&"chartArea"===i.position||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,ga(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ya.has(this)?this.attached&&!ya.running(this)&&ya.start(this):(this.draw(),pT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,i=!r.disabled,s=function Jb(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:Cy(t,e,"left"),right:Cy(t,e,"right"),top:Cy(r,e,"top"),bottom:Cy(r,e,"bottom")}:e}(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&iy(t,{left:!1===r.left?0:s.left-r.left,right:!1===r.right?this.width:s.right+r.right,top:!1===r.top?0:s.top-r.top,bottom:!1===r.bottom?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Jf(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Lo(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=GD.modes[t];return"function"==typeof s?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=ul(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);hd(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ya.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),uD(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Di[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,c)=>{s.offsetX=o,s.offsetY=c,this._eventHandler(s)};bn(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(d,g)=>{t.addEventListener(this,d,g),e[d]=g},i=(d,g)=>{e[d]&&(t.removeEventListener(this,d,g),delete e[d])},s=(d,g)=>{this.canvas&&this.resize(d,g)};let o;const c=()=>{i("attach",c),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",c)},t.isAttached(this.canvas)?c():o()}unbindEvents(){bn(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},bn(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,c,d;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),c=0,d=e.length;c<d;++c){o=e[c];const g=o&&this.getDatasetMeta(o.datasetIndex).controller;g&&g[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[o],index:o}});!Wm(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(d,g)=>d.filter(_=>!g.some(w=>_.datasetIndex===w.datasetIndex&&_.index===w.index)),o=s(t,e),c=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,i))return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,c=this._getActiveElements(e,i,r,t),d=function KC(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),g=function X1(n,e,t,r){return t&&"mouseout"!==n.type?r?e:n:null}(e,this._lastEvent,r,d);r&&(this._lastEvent=null,kn(s.onHover,[e,c,this],this),d&&kn(s.onClick,[e,c,this],this));const _=!Wm(c,i);return(_||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=g,_}_getActiveElements(e,t,r,i){if("mouseout"===e.type)return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}function ew(){return bn(Uo.instances,n=>n._plugins.invalidate())}function Md(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function bp(n,e,t,r,i,s){const{x:o,y:c,startAngle:d,pixelMargin:g,innerRadius:_}=e,w=Math.max(e.outerRadius+r+t-g,0),T=_>0?_+r+t+g:0;let S=0;const M=i-d;if(r){const nt=((_>0?_-r:0)+(w>0?w-r:0))/2;S=(M-(0!==nt?M*nt/(nt+r):M))/2}const N=(M-Math.max(.001,M*w-t/On)/w)/2,B=d+N+S,G=i-N-S,{outerStart:X,outerEnd:te,innerStart:re,innerEnd:fe}=function _T(n,e,t,r){const i=function yT(n){return Nu(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),c=d=>{const g=(t-Math.min(s,d))*r/2;return Or(d,0,Math.min(s,g))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:Or(i.innerStart,0,o),innerEnd:Or(i.innerEnd,0,o)}}(e,T,w,G-B),Ie=w-X,Ve=w-te,ut=B+X/Ie,Ft=G-te/Ve,Zt=T+re,sn=T+fe,Yn=B+re/Zt,Ki=G-fe/sn;if(n.beginPath(),s){const In=(ut+Ft)/2;if(n.arc(o,c,w,ut,In),n.arc(o,c,w,In,Ft),te>0){const Ot=Md(Ve,Ft,o,c);n.arc(Ot.x,Ot.y,te,Ft,G+hr)}const $e=Md(sn,G,o,c);if(n.lineTo($e.x,$e.y),fe>0){const Ot=Md(sn,Ki,o,c);n.arc(Ot.x,Ot.y,fe,G+hr,Ki+Math.PI)}const nt=(G-fe/T+(B+re/T))/2;if(n.arc(o,c,T,G-fe/T,nt,!0),n.arc(o,c,T,nt,B+re/T,!0),re>0){const Ot=Md(Zt,Yn,o,c);n.arc(Ot.x,Ot.y,re,Yn+Math.PI,B-hr)}const vt=Md(Ie,B,o,c);if(n.lineTo(vt.x,vt.y),X>0){const Ot=Md(Ie,ut,o,c);n.arc(Ot.x,Ot.y,X,B-hr,ut)}}else{n.moveTo(o,c);const In=Math.cos(ut)*w+o,$e=Math.sin(ut)*w+c;n.lineTo(In,$e);const nt=Math.cos(Ft)*w+o,vt=Math.sin(Ft)*w+c;n.lineTo(nt,vt)}n.closePath()}Ze(Uo,"defaults",ir),Ze(Uo,"instances",Di),Ze(Uo,"overrides",Pu),Ze(Uo,"registry",va),Ze(Uo,"version","4.4.0"),Ze(Uo,"getChart",mT);class Ns extends oo{constructor(t){super(),Ze(this,"circumference"),Ze(this,"endAngle"),Ze(this,"fullCircles"),Ze(this,"innerRadius"),Ze(this,"outerRadius"),Ze(this,"pixelMargin"),Ze(this,"startAngle"),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:c}=db(s,{x:t,y:r}),{startAngle:d,endAngle:g,innerRadius:_,outerRadius:w,circumference:T}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),S=(this.options.spacing+this.options.borderWidth)/2,R=Gt(T,g-d)>=Nn||pd(o,d,g),N=No(c,_+S,w+S);return R&&N}getCenterPoint(t){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:c,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:g,spacing:_}=this.options,w=(s+o)/2,T=(c+d+_+g)/2;return{x:r+Math.cos(w)*T,y:i+Math.sin(w)*T}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,c=r.circular;if(this.pixelMargin="inner"===r.borderAlign?.33:0,this.fullCircles=i>Nn?Math.floor(i/Nn):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const d=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(d)*s,Math.sin(d)*s);const _=s*(1-Math.sin(Math.min(On,i||0)));t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,function ek(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:c}=e;let d=e.endAngle;if(s){bp(n,e,t,r,d,i);for(let g=0;g<s;++g)n.fill();isNaN(c)||(d=o+(c%Nn||Nn))}bp(n,e,t,r,d,i),n.fill()}(t,this,_,o,c),function tw(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:c,options:d}=e,{borderWidth:g,borderJoinStyle:_,borderDash:w,borderDashOffset:T}=d,S="inner"===d.borderAlign;if(!g)return;n.setLineDash(w||[]),n.lineDashOffset=T,S?(n.lineWidth=2*g,n.lineJoin=_||"round"):(n.lineWidth=g,n.lineJoin=_||"bevel");let M=e.endAngle;if(s){bp(n,e,t,r,M,i);for(let R=0;R<s;++R)n.stroke();isNaN(c)||(M=o+(c%Nn||Nn))}S&&function J1(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:c,innerRadius:d}=e;let g=i/c;n.beginPath(),n.arc(s,o,c,r-g,t+g),d>i?(g=i/d,n.arc(s,o,d,t+g,r-g,!0)):n.arc(s,o,i,t+hr,r-hr),n.closePath(),n.clip()}(n,e,M),s||(bp(n,e,t,r,M,i),n.stroke())}(t,this,_,o,c),t.restore()}}function nw(n,e,t=e){n.lineCap=Gt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Gt(t.borderDash,e.borderDash)),n.lineDashOffset=Gt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Gt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Gt(t.borderWidth,e.borderWidth),n.strokeStyle=Gt(t.borderColor,e.borderColor)}function rw(n,e,t){n.lineTo(t.x,t.y)}function vT(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:c}=e,d=Math.max(i,o),g=Math.min(s,c);return{count:r,start:d,loop:e.loop,ilen:g<d&&!(i<o&&s<o||i>c&&s>c)?r+g-d:g-d}}function B2(n,e,t,r){const{points:i,options:s}=e,{count:o,start:c,loop:d,ilen:g}=vT(i,t,r),_=function ba(n){return n.stepped?$M:n.tension||"monotone"===n.cubicInterpolationMode?zM:rw}(s);let S,M,R,{move:w=!0,reverse:T}=r||{};for(S=0;S<=g;++S)M=i[(c+(T?g-S:S))%o],!M.skip&&(w?(n.moveTo(M.x,M.y),w=!1):_(n,R,M,T,s.stepped),R=M);return d&&(M=i[(c+(T?g:0))%o],_(n,R,M,T,s.stepped)),!!d}function tk(n,e,t,r){const i=e.points,{count:s,start:o,ilen:c}=vT(i,t,r),{move:d=!0,reverse:g}=r||{};let T,S,M,R,N,B,_=0,w=0;const G=te=>(o+(g?c-te:te))%s,X=()=>{R!==N&&(n.lineTo(_,N),n.lineTo(_,R),n.lineTo(_,B))};for(d&&(S=i[G(0)],n.moveTo(S.x,S.y)),T=0;T<=c;++T){if(S=i[G(T)],S.skip)continue;const te=S.x,re=S.y,fe=0|te;fe===M?(re<R?R=re:re>N&&(N=re),_=(w*_+te)/++w):(X(),n.lineTo(te,re),M=fe,w=0,R=N=re),B=re}X()}function iw(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?B2:tk}Ze(Ns,"id","arc"),Ze(Ns,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ze(Ns,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ze(Ns,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const j2="function"==typeof Path2D;class hl extends oo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(r1(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,t),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function c1(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:c}=function l1(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}(t,i,s,r);return function xD(n,e,t,r){return r&&r.setContext&&t?function AD(n,e,t,r){const i=n._chart.getContext(),s=d1(n.options),{_datasetIndex:o,options:{spanGaps:c}}=n,d=t.length,g=[];let _=s,w=e[0].start,T=w;function S(M,R,N,B){const G=c?-1:1;if(M!==R){for(M+=d;t[M%d].skip;)M-=G;for(;t[R%d].skip;)R+=G;M%d!=R%d&&(g.push({start:M%d,end:R%d,loop:N,style:B}),_=B,w=R%d)}}for(const M of e){w=c?w:M.start;let N,R=t[w%d];for(T=w+1;T<=M.end;T++){const B=t[T%d];N=d1(r.setContext(ul(i,{type:"segment",p0:R,p1:B,p0DataIndex:(T-1)%d,p1DataIndex:T%d,datasetIndex:o}))),MD(N,_)&&S(w,T-1,M.loop,_),R=B,_=N}w<T-1&&S(w,T-1,M.loop,_)}return g}(n,e,t,r):e}(n,!0===r?[{start:o,end:c,loop:s}]:function u1(n,e,t,r){const i=n.length,s=[];let d,o=e,c=n[e];for(d=e+1;d<=t;++d){const g=n[d%i];g.skip||g.stop?c.skip||(s.push({start:e%i,end:(d-1)%i,loop:r=!1}),e=o=g.stop?d:null):(o=d,c.skip&&(e=d)),c=g}return null!==o&&s.push({start:e%i,end:o%i,loop:r}),s}(t,o,c<o?c+i:c,!!n._fullLoop&&0===o&&c===i-1),t,e)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,o=xb(this,{property:t,start:i,end:i});if(!o.length)return;const c=[],d=function nk(n){return n.stepped?D2:n.tension||"monotone"===n.cubicInterpolationMode?DD:Vu}(r);let g,_;for(g=0,_=o.length;g<_;++g){const{start:w,end:T}=o[g],S=s[w],M=s[T];if(S===M){c.push(S);continue}const N=d(S,M,Math.abs((i-S[t])/(M[t]-S[t])),r.stepped);N[t]=e[t],c.push(N)}return 1===c.length?c[0]:c}pathSegment(e,t,r){return iw(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=iw(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const c of i)o&=s(e,this,c,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function wT(n,e,t,r){j2&&!e.options.segment?function rk(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),nw(n,e.options),n.stroke(i)}(n,e,t,r):function bT(n,e,t,r){const{segments:i,options:s}=e,o=iw(e);for(const c of i)nw(n,s,c.style),n.beginPath(),o(n,e,c,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}(n,e,t,r)}(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function sw(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}Ze(hl,"id","line"),Ze(hl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ze(hl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ze(hl,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class ow extends oo{constructor(t){super(),Ze(this,"parsed"),Ze(this,"skip"),Ze(this,"stop"),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-c,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return sw(this,t,"x",r)}inYRange(t,r){return sw(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){let r=(t=t||this.options||{}).radius||0;return r=Math.max(r,r&&t.hoverRadius||0),2*(r+(r&&t.borderWidth||0))}draw(t,r){const i=this.options;this.skip||i.radius<.1||!Lo(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,ry(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Dy(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let c,d,g,_,w;return n.horizontal?(w=o/2,c=Math.min(t,i),d=Math.max(t,i),g=r-w,_=r+w):(w=s/2,c=t-w,d=t+w,g=Math.min(r,i),_=Math.max(r,i)),{left:c,top:g,right:d,bottom:_}}function wa(n,e,t,r){return n?0:Or(e,t,r)}function Ty(n,e,t,r){const i=null===e,s=null===t,c=n&&!(i&&s)&&Dy(n,r);return c&&(i||No(e,c.left,c.right))&&(s||No(t,c.top,c.bottom))}function xy(n,e){n.rect(e.x,e.y,e.w,e.h)}function Ay(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0;return{x:n.x+r,y:n.y+i,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-r),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-i),radius:n.radius}}Ze(ow,"id","point"),Ze(ow,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ze(ow,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class My extends oo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=function CT(n){const e=Dy(n),t=e.right-e.left,r=e.bottom-e.top,i=function ET(n,e,t){const i=n.borderSkipped,s=dD(n.options.borderWidth);return{t:wa(i.top,s.top,0,t),r:wa(i.right,s.right,0,e),b:wa(i.bottom,s.bottom,0,t),l:wa(i.left,s.left,0,e)}}(n,t/2,r/2),s=function IT(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Fu(i),o=Math.min(e,t),c=n.borderSkipped,d=r||un(i);return{topLeft:wa(!d||c.top||c.left,s.topLeft,0,o),topRight:wa(!d||c.top||c.right,s.topRight,0,o),bottomLeft:wa(!d||c.bottom||c.left,s.bottomLeft,0,o),bottomRight:wa(!d||c.bottom||c.right,s.bottomRight,0,o)}}(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}(this),c=function Sy(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?vd:xy;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),c(e,Ay(o,t,s)),e.clip(),c(e,Ay(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),c(e,Ay(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return Ty(this,e,t,r)}inXRange(e,t){return Ty(this,e,null,t)}inYRange(e,t){return Ty(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Ze(My,"id","bar"),Ze(My,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ze(My,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var DT=Object.freeze({__proto__:null,ArcElement:Ns,BarElement:My,LineElement:hl,PointElement:ow});const ky=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],TT=ky.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function ST(n){return ky[n%ky.length]}function ik(n){return TT[n%TT.length]}function AT(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}var z2={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=n.config,{elements:s}=i;if(!t.forceOverride&&(AT(r)||function $2(n){return n&&(n.borderColor||n.backgroundColor)}(i)||s&&AT(s)))return;const o=function ok(n){let e=0;return(t,r)=>{const i=n.getDatasetMeta(r).controller;i instanceof _a?e=function xT(n,e){return n.backgroundColor=n.data.map(()=>ST(e++)),e}(t,e):i instanceof cp?e=function sk(n,e){return n.backgroundColor=n.data.map(()=>ik(e++)),e}(t,e):i&&(e=function H2(n,e){return n.borderColor=ST(e),n.backgroundColor=ik(e),++e}(t,e))}}(n);r.forEach(o)}};function ak(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function MT(n){n.data.datasets.forEach(e=>{ak(e)})}var lk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void MT(n);const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:c}=i,d=n.getDatasetMeta(s),g=o||i.data;if("y"===ep([c,n.options.indexAxis])||!d.controller.supportsDecimation)return;const _=n.scales[d.xAxisID];if("linear"!==_.type&&"time"!==_.type||n.options.parsing)return;let M,{start:w,count:T}=function Ry(n,e){const t=e.length;let i,r=0;const{iScale:s}=n,{min:o,max:c,minDefined:d,maxDefined:g}=s.getUserBounds();return d&&(r=Or(Fo(e,s.axis,o).lo,0,t-1)),i=g?Or(Fo(e,s.axis,c).hi+1,r,t)-r:t-r,{start:r,count:i}}(d,g);if(T<=(t.threshold||4*r))ak(i);else{switch(dn(o)&&(i._data=g,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(R){this._data=R}})),t.algorithm){case"lttb":M=function G2(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const o=[],c=(t-2)/(s-2);let d=0;const g=e+t-1;let w,T,S,M,R,_=e;for(o[d++]=n[_],w=0;w<s-2;w++){let G,N=0,B=0;const X=Math.floor((w+1)*c)+1+e,te=Math.min(Math.floor((w+2)*c)+1,t)+e,re=te-X;for(G=X;G<te;G++)N+=n[G].x,B+=n[G].y;N/=re,B/=re;const fe=Math.floor(w*c)+1+e,Ie=Math.min(Math.floor((w+1)*c)+1,t)+e,{x:Ve,y:ut}=n[_];for(S=M=-1,G=fe;G<Ie;G++)M=.5*Math.abs((Ve-N)*(n[G].y-ut)-(Ve-n[G].x)*(B-ut)),M>S&&(S=M,T=n[G],R=G);o[d++]=T,_=R}return o[d++]=n[g],o}(g,w,T,r,t);break;case"min-max":M=function W2(n,e,t,r){let o,c,d,g,_,w,T,S,M,R,i=0,s=0;const N=[],G=n[e].x,te=n[e+t-1].x-G;for(o=e;o<e+t;++o){c=n[o],d=(c.x-G)/te*r,g=c.y;const re=0|d;if(re===_)g<M?(M=g,w=o):g>R&&(R=g,T=o),i=(s*i+c.x)/++s;else{const fe=o-1;if(!dn(w)&&!dn(T)){const Ie=Math.min(w,T),Ve=Math.max(w,T);Ie!==S&&Ie!==fe&&N.push({...n[Ie],x:i}),Ve!==S&&Ve!==fe&&N.push({...n[Ve],x:i})}o>0&&fe!==S&&N.push(n[fe]),N.push(c),_=re,s=0,M=R=g,w=T=S=o}}return N}(g,w,T,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=M}})},destroy(n){MT(n)}};function Py(n,e,t,r){if(r)return;let i=e[n],s=t[n];return"angle"===n&&(i=ji(i),s=ji(s)),{property:n,start:i,end:s}}function Oy(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Ny(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function Fy(n,e){let t=[],r=!1;return Mn(n)?(r=!0,t=n):t=function ju(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:c})=>{c=Oy(o,c,i);const d=i[o],g=i[c];null!==r?(s.push({x:d.x,y:r}),s.push({x:g.x,y:r})):null!==t&&(s.push({x:t,y:d.y}),s.push({x:t,y:g.y}))}),s}(n,e),t.length?new hl({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function kT(n){return n&&!1!==n.fill}function aw(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!rr(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function lw(n,e,t){const r=function K2(n){const e=n.options,t=e.fill;let r=Gt(t&&t.target,t);return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(n);if(un(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return rr(i)&&Math.floor(i)===i?function Ly(n,e,t,r){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=r)&&t}(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function ck(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:c,point:d}=dk(s,e,"x");if(!(!d||o&&c))if(o)r.unshift(d);else if(n.push(d),!c)break}n.push(...r)}function dk(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let c=!1,d=!1;for(let g=0;g<s.length;g++){const _=s[g],w=o[_.start][t],T=o[_.end][t];if(No(i,w,T)){c=i===w,d=i===T;break}}return{first:c,last:d,point:r}}class PT{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return e.arc(i,s,o,(t=t||{start:0,end:Nn}).end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function uw(n,e,t){const r=function hk(n){const{chart:e,fill:t,line:r}=n;if(rr(t))return function OT(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function Y2(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,c=function RT(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}(e,t);c.push(Fy({x:null,y:e.bottom},r));for(let d=0;d<s.length;d++){const g=s[d];for(let _=g.start;_<=g.end;_++)ck(i,o[_],c)}return new hl({points:i,options:{}})}(n);if("shape"===t)return!0;const i=function NT(n){return(n.scale||{}).getPointPositionForValue?function fk(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=function Z2(n,e,t){let r;return r="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:un(n)?n.value:e.getBaseValue(),r}(t,e,s),c=[];if(r.grid.circular){const d=e.getPointPositionForValue(0,s);return new PT({x:d.x,y:d.y,radius:e.getDistanceFromCenterForValue(o)})}for(let d=0;d<i;++d)c.push(e.getPointPositionForValue(d,o));return c}(n):function FT(n){const{scale:e={},fill:t}=n,r=function q2(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:un(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(rr(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}(n)}(n);return i instanceof PT?i:Fy(i,r)}(e),{line:i,scale:s,axis:o}=e,c=i.options,d=c.fill,g=c.backgroundColor,{above:_=g,below:w=g}=d||{};r&&i.points.length&&(iy(n,t),function LT(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:c}=e,d=t._loop?"angle":e.axis;n.save(),"x"===d&&s!==i&&(Vy(n,r,o.top),pk(n,{line:t,target:r,color:i,scale:c,property:d}),n.restore(),n.save(),Vy(n,r,o.bottom)),pk(n,{line:t,target:r,color:s,scale:c,property:d}),n.restore()}(n,{line:i,target:r,above:_,below:w,area:t,scale:s,axis:o}),Jf(n))}function Vy(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const c of r){const{start:d,end:g}=c,_=i[d],w=i[Oy(d,g,i)];s?(n.moveTo(_.x,_.y),s=!1):(n.lineTo(_.x,t),n.lineTo(_.x,_.y)),o=!!e.pathSegment(n,c,{move:o}),o?n.closePath():n.lineTo(w.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function pk(n,e){const{line:t,target:r,property:i,color:s,scale:o}=e,c=function uk(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const c of r){let{start:d,end:g}=c;g=Oy(d,g,i);const _=Py(t,i[d],i[g],c.loop);if(!e.segments){o.push({source:c,target:_,start:i[d],end:i[g]});continue}const w=xb(e,_);for(const T of w){const S=Py(t,s[T.start],s[T.end],T.loop),M=Sb(c,i,S);for(const R of M)o.push({source:R,target:T,start:{[t]:Ny(_,S,"start",Math.max)},end:{[t]:Ny(_,S,"end",Math.min)}})}}return o}(t,r,i);for(const{source:d,target:g,start:_,end:w}of c){const{style:{backgroundColor:T=s}={}}=d,S=!0!==r;n.save(),n.fillStyle=T,VT(n,o,S&&Py(i,_,w)),n.beginPath();const M=!!t.pathSegment(n,d);let R;if(S){M?n.closePath():Uy(n,r,w,i);const N=!!r.pathSegment(n,g,{move:M,reverse:!0});R=M&&N,R||Uy(n,r,_,i)}n.closePath(),n.fill(R?"evenodd":"nonzero"),n.restore()}}function VT(n,e,t){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:c}=t||{};"x"===s&&(n.beginPath(),n.rect(o,r,c-o,i-r),n.clip())}function Uy(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var gk={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,c,d;for(o=0;o<r;++o)s=n.getDatasetMeta(o),c=s.dataset,d=null,c&&c.options&&c instanceof hl&&(d={visible:n.isDatasetVisible(o),index:o,fill:lw(c,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:c}),s.$filler=d,i.push(d);for(o=0;o<r;++o)d=i[o],d&&!1!==d.fill&&(d.fill=aw(i,o,t.propagate))},beforeDraw(n,e,t){const r="beforeDraw"===t.drawTime,i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const c=i[o].$filler;!c||(c.line.updateControlPoints(s,c.axis),r&&c.fill&&uw(n.ctx,c,s))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;kT(s)&&uw(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!kT(r)||"beforeDatasetDraw"!==t.drawTime||uw(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const UT=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}};class mk extends oo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=kn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,i=Nr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=UT(r,s);let g,_;t.font=i.string,this.isHorizontal()?(g=this.maxWidth,_=this._fitRows(o,s,c,d)+10):(_=this.maxHeight,g=this._fitCols(o,i,c,d)+10),this.width=Math.min(g,e.maxWidth||this.maxWidth),this.height=Math.min(_,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],g=this.lineWidths=[0],_=i+c;let w=e;s.textAlign="left",s.textBaseline="middle";let T=-1,S=-_;return this.legendItems.forEach((M,R)=>{const N=r+t/2+s.measureText(M.text).width;(0===R||g[g.length-1]+N+2*c>o)&&(w+=_,g[g.length-(R>0?0:1)]=0,S+=_,T++),d[R]={left:0,top:S,row:T,width:N,height:i},g[g.length-1]+=N+c}),w}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],g=this.columnSizes=[],_=o-e;let w=c,T=0,S=0,M=0,R=0;return this.legendItems.forEach((N,B)=>{const{itemWidth:G,itemHeight:X}=function yk(n,e,t,r,i){const s=function _k(n,e,t,r){let i=n.text;return i&&"string"!=typeof i&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}(r,n,e,t),o=function vk(n,e,t){let r=n;return"string"!=typeof e.text&&(r=bk(e,t)),r}(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}(r,t,s,N,i);B>0&&S+X+2*c>_&&(w+=T+c,g.push({width:T,height:S}),M+=T+c,R++,T=S=0),d[B]={left:M,top:S,col:R,width:G,height:X},T=Math.max(T,G),S+=X+c}),w+=T,g.push({width:T,height:S}),w}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=cl(s,this.left,this.width);if(this.isHorizontal()){let c=0,d=ui(r,this.left+i,this.right-this.lineWidths[c]);for(const g of t)c!==g.row&&(c=g.row,d=ui(r,this.left+i,this.right-this.lineWidths[c])),g.top+=this.top+e+i,g.left=o.leftForLtr(o.x(d),g.width),d+=g.width+i}else{let c=0,d=ui(r,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const g of t)g.col!==c&&(c=g.col,d=ui(r,this.top+e+i,this.bottom-this.columnSizes[c].height)),g.top=d,g.left+=this.left+i,g.left=o.leftForLtr(o.x(g.left),g.width),d+=g.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;iy(e,this),this._draw(),Jf(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,c=ir.color,d=cl(e.rtl,this.left,this.width),g=Nr(o.font),{padding:_}=o,w=g.size,T=w/2;let S;this.drawTitle(),i.textAlign=d.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=g.string;const{boxWidth:M,boxHeight:R,itemHeight:N}=UT(o,w),X=this.isHorizontal(),te=this._computeTitleHeight();S=X?{x:ui(s,this.left+_,this.right-r[0]),y:this.top+_+te,line:0}:{x:this.left+_,y:ui(s,this.top+te+_,this.bottom-t[0].height),line:0},TD(this.ctx,e.textDirection);const re=N+_;this.legendItems.forEach((fe,Ie)=>{i.strokeStyle=fe.fontColor,i.fillStyle=fe.fontColor;const Ve=i.measureText(fe.text).width,ut=d.textAlign(fe.textAlign||(fe.textAlign=o.textAlign)),Ft=M+T+Ve;let Zt=S.x,sn=S.y;d.setWidth(this.width),X?Ie>0&&Zt+Ft+_>this.right&&(sn=S.y+=re,S.line++,Zt=S.x=ui(s,this.left+_,this.right-r[S.line])):Ie>0&&sn+re>this.bottom&&(Zt=S.x=Zt+t[S.line].width+_,S.line++,sn=S.y=ui(s,this.top+te+_,this.bottom-t[S.line].height)),function(fe,Ie,Ve){if(isNaN(M)||M<=0||isNaN(R)||R<0)return;i.save();const ut=Gt(Ve.lineWidth,1);if(i.fillStyle=Gt(Ve.fillStyle,c),i.lineCap=Gt(Ve.lineCap,"butt"),i.lineDashOffset=Gt(Ve.lineDashOffset,0),i.lineJoin=Gt(Ve.lineJoin,"miter"),i.lineWidth=ut,i.strokeStyle=Gt(Ve.strokeStyle,c),i.setLineDash(Gt(Ve.lineDash,[])),o.usePointStyle){const Ft={radius:R*Math.SQRT2/2,pointStyle:Ve.pointStyle,rotation:Ve.rotation,borderWidth:ut},Zt=d.xPlus(fe,M/2);mb(i,Ft,Zt,Ie+T,o.pointStyleWidth&&M)}else{const Ft=Ie+Math.max((w-R)/2,0),Zt=d.leftForLtr(fe,M),sn=Fu(Ve.borderRadius);i.beginPath(),Object.values(sn).some(Yn=>0!==Yn)?vd(i,{x:Zt,y:Ft,w:M,h:R,radius:sn}):i.rect(Zt,Ft,M,R),i.fill(),0!==ut&&i.stroke()}i.restore()}(d.x(Zt),sn,fe),Zt=((n,e,t,r)=>n===(r?"left":"right")?t:"center"===n?(e+t)/2:e)(ut,Zt+M+T,X?Zt+Ft:this.right,e.rtl),function(fe,Ie,Ve){_d(i,Ve.text,fe,Ie+N/2,g,{strikethrough:Ve.hidden,textAlign:d.textAlign(Ve.textAlign)})}(d.x(Zt),sn,fe),X?S.x+=Ft+_:S.y+="string"!=typeof fe.text?bk(fe,g.lineHeight)+_:re}),Db(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Nr(t.font),i=ci(t.padding);if(!t.display)return;const s=cl(e.rtl,this.left,this.width),o=this.ctx,c=t.position,g=i.top+r.size/2;let _,w=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),_=this.top+g,w=ui(e.align,w,this.right-T);else{const M=this.columnSizes.reduce((R,N)=>Math.max(R,N.height),0);_=g+ui(e.align,this.top,this.bottom-M-e.labels.padding-this._computeTitleHeight())}const S=ui(c,w,w+T);o.textAlign=s.textAlign(Ct(c)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,_d(o,t.text,S,_,r)}_computeTitleHeight(){const e=this.options.title,t=Nr(e.font),r=ci(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(No(e,this.left,this.right)&&No(t,this.top,this.bottom))for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],No(e,i.left,i.left+i.width)&&No(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function X2(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,s=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(i,r);i&&!s&&kn(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&kn(t.onHover,[e,r,this],this)}else r&&kn(t.onClick,[e,r,this],this)}}function bk(n,e){return e*(n.text?n.text.length:0)}var J2={id:"legend",_element:mk,start(n,e,t){const r=n.legend=new mk({ctx:n.ctx,options:t,chart:n});di.configure(n,r,t),di.addBox(n,r)},stop(n){di.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;di.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const g=d.controller.getStyle(t?0:void 0),_=ci(g.borderWidth);return{text:e[d.index].label,fillStyle:g.backgroundColor,fontColor:s,hidden:!d.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:g.borderColor,pointStyle:r||g.pointStyle,rotation:g.rotation,textAlign:i||g.textAlign,borderRadius:o&&(c||g.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class BT extends oo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=Mn(r.text)?r.text.length:1;this._padding=ci(r.padding);const s=i*Nr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,c=o.align;let g,_,w,d=0;return this.isHorizontal()?(_=ui(c,r,s),w=t+e,g=s-r):("left"===o.position?(_=r+e,w=ui(c,i,t),d=-.5*On):(_=s-e,w=ui(c,t,i),d=.5*On),g=i-t),{titleX:_,titleY:w,maxWidth:g,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Nr(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:d,rotation:g}=this._drawArgs(s);_d(e,t.text,0,0,r,{color:t.color,maxWidth:d,rotation:g,textAlign:Ct(t.align),textBaseline:"middle",translation:[o,c]})}}var wk={id:"title",_element:BT,start(n,e,t){!function eV(n,e){const t=new BT({ctx:n.ctx,options:e,chart:n});di.configure(n,t,e),di.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){di.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;di.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const cw=new WeakMap;var tV={id:"subtitle",start(n,e,t){const r=new BT({ctx:n.ctx,options:t,chart:n});di.configure(n,r,t),di.addBox(n,r),cw.set(n,r)},stop(n){di.removeBox(n,cw.get(n)),cw.delete(n)},beforeUpdate(n,e,t){const r=cw.get(n);di.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const By={average(n){if(!n.length)return!1;let e,t,r=0,i=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();r+=c.x,i+=c.y,++s}}return{x:r/s,y:i/s}},nearest(n,e){if(!n.length)return!1;let s,o,c,t=e.x,r=e.y,i=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const d=n[s].element;if(d&&d.hasValue()){const _=Ym(e,d.getCenterPoint());_<i&&(i=_,c=d)}}if(c){const d=c.tooltipPosition();t=d.x,r=d.y}return{x:t,y:r}}};function Ea(n,e){return e&&(Mn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function fl(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function nV(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:c}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:c,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function a(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:c}=e,d=Nr(e.bodyFont),g=Nr(e.titleFont),_=Nr(e.footerFont),w=s.length,T=i.length,S=r.length,M=ci(e.padding);let R=M.height,N=0,B=r.reduce((te,re)=>te+re.before.length+re.lines.length+re.after.length,0);B+=n.beforeBody.length+n.afterBody.length,w&&(R+=w*g.lineHeight+(w-1)*e.titleSpacing+e.titleMarginBottom),B&&(R+=S*(e.displayColors?Math.max(c,d.lineHeight):d.lineHeight)+(B-S)*d.lineHeight+(B-1)*e.bodySpacing),T&&(R+=e.footerMarginTop+T*_.lineHeight+(T-1)*e.footerSpacing);let G=0;const X=function(te){N=Math.max(N,t.measureText(te).width+G)};return t.save(),t.font=g.string,bn(n.title,X),t.font=d.string,bn(n.beforeBody.concat(n.afterBody),X),G=e.displayColors?o+2+e.boxPadding:0,bn(r,te=>{bn(te.before,X),bn(te.lines,X),bn(te.after,X)}),G=0,t.font=_.string,bn(n.footer,X),t.restore(),N+=M.width,{width:N,height:R}}function h(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:c,right:d}}=n;let g="center";return"center"===r?g=i<=(c+d)/2?"left":"right":i<=s/2?g="left":i>=o-s/2&&(g="right"),function u(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if("left"===n&&i+s+o>e.width||"right"===n&&i-s-o<0)return!0}(g,n,e,t)&&(g="center"),g}function p(n,e,t){const r=t.yAlign||e.yAlign||function l(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||h(n,e,t,r),yAlign:r}}function C(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:c,yAlign:d}=t,g=i+s,{topLeft:_,topRight:w,bottomLeft:T,bottomRight:S}=Fu(o);let M=function y(n,e){let{x:t,width:r}=n;return"right"===e?t-=r:"center"===e&&(t-=r/2),t}(e,c);const R=function b(n,e,t){let{y:r,height:i}=n;return"top"===e?r+=t:r-="bottom"===e?i+t:i/2,r}(e,d,g);return"center"===d?"left"===c?M+=g:"right"===c&&(M-=g):"left"===c?M-=Math.max(_,T)+i:"right"===c&&(M+=Math.max(w,S)+i),{x:Or(M,0,r.width-e.width),y:Or(R,0,r.height-e.height)}}function D(n,e,t){const r=ci(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-r.right:n.x+r.left}function x(n){return Ea([],fl(n))}function V(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const W={beforeTitle:Pr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Pr,beforeBody:Pr,beforeLabel:Pr,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return dn(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Pr,afterBody:Pr,beforeFooter:Pr,footer:Pr,afterFooter:Pr};function J(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?W[e].call(t,r):i}class ge extends oo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new kD(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=function k(n,e,t){return ul(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=J(r,"beforeTitle",this,e),s=J(r,"title",this,e),o=J(r,"afterTitle",this,e);let c=[];return c=Ea(c,fl(i)),c=Ea(c,fl(s)),c=Ea(c,fl(o)),c}getBeforeBody(e,t){return x(J(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return bn(e,s=>{const o={before:[],lines:[],after:[]},c=V(r,s);Ea(o.before,fl(J(c,"beforeLabel",this,s))),Ea(o.lines,J(c,"label",this,s)),Ea(o.after,fl(J(c,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,t){return x(J(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=J(r,"beforeFooter",this,e),s=J(r,"footer",this,e),o=J(r,"afterFooter",this,e);let c=[];return c=Ea(c,fl(i)),c=Ea(c,fl(s)),c=Ea(c,fl(o)),c}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],o=[];let d,g,c=[];for(d=0,g=t.length;d<g;++d)c.push(nV(this.chart,t[d]));return e.filter&&(c=c.filter((_,w,T)=>e.filter(_,w,T,r))),e.itemSort&&(c=c.sort((_,w)=>e.itemSort(_,w,r))),bn(c,_=>{const w=V(e.callbacks,_);i.push(J(w,"labelColor",this,_)),s.push(J(w,"labelPointStyle",this,_)),o.push(J(w,"labelTextColor",this,_))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=c,c}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(i.length){const c=By[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const d=this._size=a(this,r),g=Object.assign({},c,d),_=p(this.chart,r,g),w=C(r,g,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,s={opacity:1,x:w.x,y:w.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:c}=r,{topLeft:d,topRight:g,bottomLeft:_,bottomRight:w}=Fu(c),{x:T,y:S}=e,{width:M,height:R}=t;let N,B,G,X,te,re;return"center"===s?(te=S+R/2,"left"===i?(N=T,B=N-o,X=te+o,re=te-o):(N=T+M,B=N+o,X=te-o,re=te+o),G=N):(B="left"===i?T+Math.max(d,_)+o:"right"===i?T+M-Math.max(g,w)-o:this.caretX,"top"===s?(X=S,te=X-o,N=B-o,G=B+o):(X=S+R,te=X+o,N=B+o,G=B-o),re=X),{x1:N,x2:B,x3:G,y1:X,y2:te,y3:re}}drawTitle(e,t,r){const i=this.title,s=i.length;let o,c,d;if(s){const g=cl(r.rtl,this.x,this.width);for(e.x=D(this,r.titleAlign,r),t.textAlign=g.textAlign(r.titleAlign),t.textBaseline="middle",o=Nr(r.titleFont),c=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,d=0;d<s;++d)t.fillText(i[d],g.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,d+1===s&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,t,r,i,s){const o=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:d,boxWidth:g}=s,_=Nr(s.bodyFont),w=D(this,"left",s),T=i.x(w),M=t.y+(d<_.lineHeight?(_.lineHeight-d)/2:0);if(s.usePointStyle){const R={radius:Math.min(g,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},N=i.leftForLtr(T,g)+g/2,B=M+d/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,ry(e,R,N,B),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ry(e,R,N,B)}else{e.lineWidth=un(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const R=i.leftForLtr(T,g),N=i.leftForLtr(i.xPlus(T,1),g-2),B=Fu(o.borderRadius);Object.values(B).some(G=>0!==G)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,vd(e,{x:R,y:M,w:g,h:d,radius:B}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),vd(e,{x:N,y:M+1,w:g-2,h:d-2,radius:B}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(R,M,g,d),e.strokeRect(R,M,g,d),e.fillStyle=o.backgroundColor,e.fillRect(N,M+1,g-2,d-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:c,boxHeight:d,boxWidth:g,boxPadding:_}=r,w=Nr(r.bodyFont);let T=w.lineHeight,S=0;const M=cl(r.rtl,this.x,this.width),R=function(Ve){t.fillText(Ve,M.x(e.x+S),e.y+T/2),e.y+=T+s},N=M.textAlign(o);let B,G,X,te,re,fe,Ie;for(t.textAlign=o,t.textBaseline="middle",t.font=w.string,e.x=D(this,N,r),t.fillStyle=r.bodyColor,bn(this.beforeBody,R),S=c&&"right"!==N?"center"===o?g/2+_:g+2+_:0,te=0,fe=i.length;te<fe;++te){for(B=i[te],G=this.labelTextColors[te],t.fillStyle=G,bn(B.before,R),X=B.lines,c&&X.length&&(this._drawColorBox(t,e,te,M,r),T=Math.max(w.lineHeight,d)),re=0,Ie=X.length;re<Ie;++re)R(X[re]),T=w.lineHeight;bn(B.after,R)}S=0,T=w.lineHeight,bn(this.afterBody,R),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let o,c;if(s){const d=cl(r.rtl,this.x,this.width);for(e.x=D(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=d.textAlign(r.footerAlign),t.textBaseline="middle",o=Nr(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,c=0;c<s;++c)t.fillText(i[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:o}=this,{x:c,y:d}=e,{width:g,height:_}=r,{topLeft:w,topRight:T,bottomLeft:S,bottomRight:M}=Fu(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+w,d),"top"===o&&this.drawCaret(e,t,r,i),t.lineTo(c+g-T,d),t.quadraticCurveTo(c+g,d,c+g,d+T),"center"===o&&"right"===s&&this.drawCaret(e,t,r,i),t.lineTo(c+g,d+_-M),t.quadraticCurveTo(c+g,d+_,c+g-M,d+_),"bottom"===o&&this.drawCaret(e,t,r,i),t.lineTo(c+S,d+_),t.quadraticCurveTo(c,d+_,c,d+_-S),"center"===o&&"left"===s&&this.drawCaret(e,t,r,i),t.lineTo(c,d+w),t.quadraticCurveTo(c,d,c+w,d),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=By[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=a(this,e),d=Object.assign({},o,this._size),g=p(t,e,d),_=C(e,d,g,t);(i._to!==_.x||s._to!==_.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=ci(t.padding);t.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),TD(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Db(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:c,index:d})=>{const g=this.chart.getDatasetMeta(c);if(!g)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:g.data[d],index:d}}),s=!Wm(r,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),c=this._positionChanged(o,e),d=t||!Wm(o,s)||c;return d&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),d}_getActiveElements(e,t,r,i){const s=this.options;if("mouseout"===e.type)return[];if(!i)return t;const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,o=By[s.position].call(this,e,t);return!1!==o&&(r!==o.x||i!==o.y)}}Ze(ge,"positioners",By);var Be={id:"tooltip",_element:ge,positioners:By,afterInit(n,e,t){t&&(n.tooltip=new ge({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:W},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},qe=Object.freeze({__proto__:null,Colors:z2,Decimation:lk,Filler:gk,Legend:J2,SubTitle:tV,Title:wk,Tooltip:Be});function Mt(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class gn extends Ad{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(dn(e))return null;const r=this.getLabels();return((n,e)=>null===n?null:Or(Math.round(n),0,e))(t=isFinite(t)&&r[t]===e?t:function Dt(n,e,t,r){const i=n.indexOf(e);return-1===i?((n,e,t,r)=>("string"==typeof e?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,r):i!==n.lastIndexOf(e)?t:i}(r,e,Gt(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return Mt.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function pl(n,e,{horizontal:t,minRotation:r}){const i=ro(r),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.min(e/s,.75*e*(""+n).length)}Ze(gn,"id","category"),Ze(gn,"defaults",{ticks:{callback:Mt}});class kd extends Ad{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return dn(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=d=>i=t?i:d,c=d=>s=r?s:d;if(e){const d=Oo(i),g=Oo(s);d<0&&g<0?c(0):d>0&&g>0&&o(0)}if(i===s){let d=0===s?1:Math.abs(.05*s);c(s+d),e||o(i-d)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let i,{maxTicksLimit:t,stepSize:r}=e;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const o=function Un(n,e){const t=[],{bounds:i,step:s,min:o,max:c,precision:d,count:g,maxTicks:_,maxDigits:w,includeBounds:T}=n,S=s||1,M=_-1,{min:R,max:N}=e,B=!dn(o),G=!dn(c),X=!dn(g),te=(N-R)/(w+1);let fe,Ie,Ve,ut,re=QC((N-R)/M/S)*S;if(re<1e-14&&!B&&!G)return[{value:R},{value:N}];ut=Math.ceil(N/re)-Math.floor(R/re),ut>M&&(re=QC(ut*re/M/S)*S),dn(d)||(fe=Math.pow(10,d),re=Math.ceil(re*fe)/fe),"ticks"===i?(Ie=Math.floor(R/re)*re,Ve=Math.ceil(N/re)*re):(Ie=R,Ve=N),B&&G&&s&&function NM(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((c-o)/s,re/1e3)?(ut=Math.round(Math.min((c-o)/re,_)),re=(c-o)/ut,Ie=o,Ve=c):X?(Ie=B?o:Ie,Ve=G?c:Ve,ut=g-1,re=(Ve-Ie)/ut):(ut=(Ve-Ie)/re,ut=qf(ut,Math.round(ut),re/1e3)?Math.round(ut):Math.ceil(ut));const Ft=Math.max(cb(re),cb(Ie));fe=Math.pow(10,dn(d)?Ft:d),Ie=Math.round(Ie*fe)/fe,Ve=Math.round(Ve*fe)/fe;let Zt=0;for(B&&(T&&Ie!==o?(t.push({value:o}),Ie<o&&Zt++,qf(Math.round((Ie+Zt*re)*fe)/fe,o,pl(o,te,n))&&Zt++):Ie<o&&Zt++);Zt<ut;++Zt){const sn=Math.round((Ie+Zt*re)*fe)/fe;if(G&&sn>c)break;t.push({value:sn})}return G&&T&&Ve!==c?t.length&&qf(t[t.length-1].value,c,pl(c,te,n))?t[t.length-1].value=c:t.push({value:c}):(!G||Ve===c)&&t.push({value:Ve}),t}({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&XC(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Yf(e,this.chart.options.locale,this.options.ticks.format)}}class wp extends kd{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=rr(e)?e:0,this.max=rr(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=ro(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ze(wp,"id","linear"),Ze(wp,"defaults",{ticks:{callback:ty.formatters.numeric}});const Hu=n=>Math.floor(al(n)),Ia=(n,e)=>Math.pow(10,Hu(n)+e);function jy(n){return n/Math.pow(10,Hu(n))==1}function Hy(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}class Ep extends Ad{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=kd.prototype.parse.apply(this,[e,t]);if(0!==r)return rr(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=rr(e)?Math.max(0,e):null,this.max=rr(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!rr(this._userMin)&&(this.min=e===Ia(this.min,0)?Ia(this.min,-1):Ia(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=c=>r=e?r:c,o=c=>i=t?i:c;r===i&&(r<=0?(s(1),o(10)):(s(Ia(r,-1)),o(Ia(i,1)))),r<=0&&s(Ia(i,-1)),i<=0&&o(Ia(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,r=function hw(n,{min:e,max:t}){e=us(n.min,e);const r=[],i=Hu(e);let s=function dw(n,e){let r=Hu(e-n);for(;Hy(n,e,r)>10;)r++;for(;Hy(n,e,r)<10;)r--;return Math.min(r,Hu(n))}(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const c=Math.pow(10,s),d=i>s?Math.pow(10,i):0,g=Math.round((e-d)*o)/o,_=Math.floor((e-d)/c/10)*c*10;let w=Math.floor((g-_)/Math.pow(10,s)),T=us(n.min,Math.round((d+_+w*Math.pow(10,s))*o)/o);for(;T<t;)r.push({value:T,major:jy(T),significand:w}),w>=10?w=w<15?15:20:w++,w>=20&&(s++,w=2,o=s>=0?1:o),T=Math.round((d+_+w*Math.pow(10,s))*o)/o;const S=us(n.max,T);return r.push({value:S,major:jy(S),significand:w}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&XC(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return void 0===e?"0":Yf(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=al(e),this._valueRange=al(this.max)-al(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(al(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Ek(n){const e=n.ticks;if(e.display&&n.display){const t=ci(e.backdropPadding);return Gt(e.font&&e.font.size,ir.font.size)+t.height}return 0}function X6(n,e,t){return t=Mn(t)?t:[t],{w:HM(n,e.string,t),h:t.length*e.lineHeight}}function rV(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function e3(n,e,t,r,i){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let c=0,d=0;r.start<e.l?(c=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-c)):r.end>e.r&&(c=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+c)),i.start<e.t?(d=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-d)):i.end>e.b&&(d=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+d))}function t3(n,e,t){const r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:c}=t,d=n.getPointPosition(e,r+i+o,s),g=Math.round(ub(ji(d.angle+hr))),_=function o3(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}(d.y,c.h,g),w=function i3(n){return 0===n||180===n?"center":n<180?"left":"right"}(g),T=function s3(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}(d.x,c.w,w);return{visible:!0,x:d.x,y:_,textAlign:w,left:T,top:_,right:T+c.w,bottom:_+c.h}}function n3(n,e){if(!e)return!0;const{left:t,top:r,right:i,bottom:s}=n;return!(Lo({x:t,y:r},e)||Lo({x:t,y:s},e)||Lo({x:i,y:r},e)||Lo({x:i,y:s},e))}function a3(n,e,t){const{left:r,top:i,right:s,bottom:o}=t,{backdropColor:c}=e;if(!dn(c)){const d=Fu(e.borderRadius),g=ci(e.backdropPadding);n.fillStyle=c;const _=r-g.left,w=i-g.top,T=s-r+g.width,S=o-i+g.height;Object.values(d).some(M=>0!==M)?(n.beginPath(),vd(n,{x:_,y:w,w:T,h:S,radius:d}),n.fill()):n.fillRect(_,w,T,S)}}function iV(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Nn);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}Ze(Ep,"id","logarithmic"),Ze(Ep,"defaults",{ticks:{callback:ty.formatters.logarithmic,major:{enabled:!0}}});class fw extends kd{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ci(Ek(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=rr(e)&&!isNaN(e)?e:0,this.max=rr(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ek(this.options))}generateTickLabels(e){kd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=kn(this.options.pointLabels.callback,[t,r],this);return i||0===i?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?function J6(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,c=o.centerPointLabels?On/s:0;for(let d=0;d<s;d++){const g=o.setContext(n.getPointLabelContext(d));i[d]=g.padding;const _=n.getPointPosition(d,n.drawingArea+i[d],c),w=Nr(g.font),T=X6(n.ctx,w,n._pointLabels[d]);r[d]=T;const S=ji(n.getIndexAngle(d)+c),M=Math.round(ub(S));e3(t,e,S,rV(M,_.x,T.w,0,180),rV(M,_.y,T.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function r3(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:c}=s.pointLabels,d={extra:Ek(s)/2,additionalAngle:o?On/i:0};let g;for(let _=0;_<i;_++){d.padding=t[_],d.size=e[_];const w=t3(n,_,d);r.push(w),"auto"===c&&(w.visible=n3(w,g),w.visible&&(g=w))}return r}(n,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){return ji(e*(Nn/(this._pointLabels.length||1))+ro(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(dn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(dn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function c3(n,e,t){return ul(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-hr+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),iV(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length;let c,d,g;if(t.pointLabels.display&&function l3(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=n._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(n.getPointLabelContext(i));a3(t,o,s);const c=Nr(o.font),{x:d,y:g,textAlign:_}=s;_d(t,n._pointLabels[i],d,g+c.lineHeight/2,c,{color:o.color,textAlign:_,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach((_,w)=>{if(0!==w){d=this.getDistanceFromCenterForValue(_.value);const T=this.getContext(w),S=i.setContext(T),M=s.setContext(T);!function u3(n,e,t,r,i){const s=n.ctx,o=e.circular,{color:c,lineWidth:d}=e;!o&&!r||!c||!d||t<0||(s.save(),s.strokeStyle=c,s.lineWidth=d,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),iV(n,t,o,r),s.closePath(),s.stroke(),s.restore())}(this,S,d,o,M)}}),r.display){for(e.save(),c=o-1;c>=0;c--){const _=r.setContext(this.getPointLabelContext(c)),{color:w,lineWidth:T}=_;!T||!w||(e.lineWidth=T,e.strokeStyle=w,e.setLineDash(_.borderDash),e.lineDashOffset=_.borderDashOffset,d=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),g=this.getPointPosition(c,d),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(g.x,g.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((c,d)=>{if(0===d&&!t.reverse)return;const g=r.setContext(this.getContext(d)),_=Nr(g.font);if(s=this.getDistanceFromCenterForValue(this.ticks[d].value),g.showLabelBackdrop){e.font=_.string,o=e.measureText(c.label).width,e.fillStyle=g.backdropColor;const w=ci(g.backdropPadding);e.fillRect(-o/2-w.left,-s-_.size/2-w.top,o+w.width,_.size+w.height)}_d(e,c.label,0,-s,_,{color:g.color,strokeColor:g.textStrokeColor,strokeWidth:g.textStrokeWidth})}),e.restore()}drawTitle(){}}Ze(fw,"id","radialLinear"),Ze(fw,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ty.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Ze(fw,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ze(fw,"descriptors",{angleLines:{_fallback:"grid"}});const jT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fs=Object.keys(jT);function sV(n,e){return n-e}function oV(n,e){if(dn(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return"function"==typeof r&&(o=r(o)),rr(o)||(o="string"==typeof r?t.parse(o,r):t.parse(o)),null===o?null:(i&&(o="week"!==i||!fd(s)&&!0!==s?t.startOf(o,i):t.startOf(o,"isoWeek",s)),+o)}function aV(n,e,t,r){const i=Fs.length;for(let s=Fs.indexOf(n);s<i-1;++s){const o=jT[Fs[s]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(c*o.size))<=r)return Fs[s]}return Fs[i-1]}function lV(n,e,t){if(t){if(t.length){const{lo:r,hi:i}=Qm(t,e);n[t[r]>=e?t[r]:t[i]]=!0}}else n[e]=!0}function uV(n,e,t){const r=[],i={},s=e.length;let o,c;for(o=0;o<s;++o)c=e[o],i[c]=o,r.push({value:c,major:!1});return 0!==s&&t?function f3(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let c,d;for(c=s;c<=o;c=+i.add(c,1,r))d=t[c],d>=0&&(e[d].major=!0);return e}(n,r,i,t):r}class pw extends Ad{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new Lb__date(e.adapters.date);i.init(t),dd(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:oV(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:c}=this.getUserBounds();function d(g){!o&&!isNaN(g.min)&&(i=Math.min(i,g.min)),!c&&!isNaN(g.max)&&(s=Math.max(s,g.max))}(!o||!c)&&(d(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&d(this.getMinMax(!1))),i=rr(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=rr(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,c=function FM(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}(i,s,this.max);return this._unit=t.unit||(r.autoSkip?aV(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function d3(n,e,t,r,i){for(let s=Fs.length-1;s>=Fs.indexOf(t);s--){const o=Fs[s];if(jT[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return Fs[t?Fs.indexOf(t):0]}(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function h3(n){for(let e=Fs.indexOf(n)+1,t=Fs.length;e<t;++e)if(jT[Fs[e]].common)return Fs[e]}(this._unit):void 0,this.initOffsets(i),e.reverse&&c.reverse(),uV(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i,s,t=0,r=0;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),t=1===e.length?1-i:(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),r=1===e.length?s:(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Or(t,0,o),r=Or(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||aV(s.minUnit,t,r,this._getLabelCapacity(t)),c=Gt(i.ticks.stepSize,1),d="week"===o&&s.isoWeekday,g=fd(d)||!0===d,_={};let T,S,w=t;if(g&&(w=+e.startOf(w,"isoWeek",d)),w=+e.startOf(w,g?"day":o),e.diff(r,t,o)>1e5*c)throw new Error(t+" and "+r+" are too far apart with stepSize of "+c+" "+o);const M="data"===i.ticks.source&&this.getDataTimestamps();for(T=w,S=0;T<r;T=+e.add(T,c,o),S++)lV(_,T,M);return(T===r||"ticks"===i.bounds||1===S)&&lV(_,T,M),Object.keys(_).sort(sV).map(R=>+R)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}format(e,t){return this._adapter.format(e,t||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,t,r,i){const s=this.options,o=s.ticks.callback;if(o)return kn(o,[e,t,r],this);const c=s.time.displayFormats,d=this._unit,g=this._majorUnit,w=g&&c[g],T=r[t];return this._adapter.format(e,i||(g&&w&&T&&T.major?w:d&&c[d]))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=ro(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:r*s+c*o,h:r*o+c*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,uV(this,[e],this._majorUnit),i),o=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let t,r,e=this._cache.data||[];if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(oV(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Xm(e.sort(sV))}}function HT(n,e,t){let s,o,c,d,r=0,i=n.length-1;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Fo(n,"pos",e)),({pos:s,time:c}=n[r]),({pos:o,time:d}=n[i])):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Fo(n,"time",e)),({time:s,pos:c}=n[r]),({time:o,pos:d}=n[i]));const g=o-s;return g?c+(d-c)*(e-s)/g:c}Ze(pw,"id","time"),Ze(pw,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Ik extends pw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=HT(t,this.min),this._tableRange=HT(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,c,d,g,_;for(o=0,c=e.length;o<c;++o)g=e[o],g>=t&&g<=r&&i.push(g);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,c=i.length;o<c;++o)_=i[o+1],d=i[o-1],g=i[o],Math.round((_+d)/2)!==g&&s.push({time:g,pos:o/(c-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||1===r.length)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(HT(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return HT(this._table,r*this._tableRange+this._minPos,!0)}}Ze(Ik,"id","timeseries"),Ze(Ik,"defaults",pw.defaults);const g3=[Fb,DT,qe,Object.freeze({__proto__:null,CategoryScale:gn,LinearScale:wp,LogarithmicScale:Ep,RadialLinearScale:fw,TimeScale:pw,TimeSeriesScale:Ik})];let Ck=(()=>{class n{constructor(){this.isMenuOpenHeader=new Ii(!1),this.isMenuOpenHeader$=this.isMenuOpenHeader.asObservable(),this.isMenuOpenFooter=new Ii(!1),this.isMenuOpenFooter$=this.isMenuOpenFooter.asObservable(),this.isHeaderBorder=new Ii(!1),this.isHeaderBorder$=this.isHeaderBorder.asObservable(),this.isSM=new Ii(!1),this.isSM$=this.isSM.asObservable()}setIsMenuOpenHeader(t){this.isMenuOpenHeader.next(t)}setIsMenuOpenFooter(t){this.isMenuOpenFooter.next(t)}setIsHeaderBorder(t){this.isHeaderBorder.next(t)}setIsSM(t){this.isSM.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class m3 extends Jv.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const $T={setInterval(n,e,...t){const{delegate:r}=$T;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=$T;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var y3=j(8737);class cV extends m3{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return $T.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&$T.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,y3.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Dk={now:()=>(Dk.delegate||Date).now(),delegate:void 0};class gw{constructor(e,t=gw.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}gw.now=Dk.now;class dV extends gw{constructor(e,t=gw.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Tk=new dV(cV);var rn=j(6881);(0,rn.registerVersion)("firebase","9.22.0","app");var Q=j(5861),at=j(2090),ao=j(4859),Ca=j(1877);let hV,fV;const pV=new WeakMap,Sk=new WeakMap,gV=new WeakMap,xk=new WeakMap,Ak=new WeakMap;let Mk={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Sk.get(n);if("objectStoreNames"===e)return n.objectStoreNames||gV.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rd(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function x3(n){return"function"==typeof n?function S3(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function I3(){return fV||(fV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(kk(this),e),Rd(pV.get(this))}:function(...e){return Rd(n.apply(kk(this),e))}:function(e,...t){const r=n.call(kk(this),e,...t);return gV.set(r,e.sort?e.sort():[e]),Rd(r)}}(n):(n instanceof IDBTransaction&&function D3(n){if(Sk.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Sk.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function E3(){return hV||(hV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Mk):n)}function Rd(n){if(n instanceof IDBRequest)return function C3(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Rd(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&pV.set(t,n)}).catch(()=>{}),Ak.set(e,n),e}(n);if(xk.has(n))return xk.get(n);const e=x3(n);return e!==n&&(xk.set(n,e),Ak.set(e,n)),e}const kk=n=>Ak.get(n),M3=["get","getKey","getAll","getAllKeys","count"],k3=["put","add","delete","clear"],Rk=new Map;function mV(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Rk.get(e))return Rk.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=k3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!M3.includes(t))return;const s=function(){var o=(0,Q.Z)(function*(c,...d){const g=this.transaction(c,i?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(d.shift())),(yield Promise.all([_[t](...d),i&&g.done]))[0]});return function(d){return o.apply(this,arguments)}}();return Rk.set(e,s),s}!function T3(n){Mk=n(Mk)}(n=>({...n,get:(e,t,r)=>mV(e,t)||n.get(e,t,r),has:(e,t)=>!!mV(e,t)||n.has(e,t)}));const yV="@firebase/installations",vV="w:0.6.4",bV="FIS_v2",$u=new at.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function wV(n){return n instanceof at.ZR&&n.code.includes("request-failed")}function Ok({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function EV(n){return{token:n.token,requestStatus:2,expiresIn:L3(n.expiresIn),creationTime:Date.now()}}function Nk(n,e){return Fk.apply(this,arguments)}function Fk(){return(Fk=(0,Q.Z)(function*(n,e){const r=(yield e.json()).error;return $u.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function IV({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function CV(n,{refreshToken:e}){const t=IV(n);return t.append("Authorization",function V3(n){return`${bV} ${n}`}(e)),t}function Lk(n){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,Q.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function L3(n){return Number(n.replace("s","000"))}function U3(n,e){return Uk.apply(this,arguments)}function Uk(){return(Uk=(0,Q.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Ok(n),i=IV(n),s=e.getImmediate({optional:!0});if(s){const g=yield s.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:bV,appId:n.appId,sdkVersion:vV})},d=yield Lk(()=>fetch(r,c));if(d.ok){const g=yield d.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:EV(g.authToken)}}throw yield Nk("Create Installation",d)})).apply(this,arguments)}function DV(n){return new Promise(e=>{setTimeout(e,n)})}const j3=/^[cdef][\w-]{21}$/;function H3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function $3(n){return function B3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return j3.test(t)?t:""}catch{return""}}function $y(n){return`${n.appName}!${n.appId}`}const zy=new Map;function TV(n,e){const t=$y(n);SV(t,e),function W3(n,e){const t=function xV(){return!Ip&&"BroadcastChannel"in self&&(Ip=new BroadcastChannel("[Firebase] FID Change"),Ip.onmessage=n=>{SV(n.data.key,n.data.fid)}),Ip}();t&&t.postMessage({key:n,fid:e}),function AV(){0===zy.size&&Ip&&(Ip.close(),Ip=null)}()}(t,e)}function SV(n,e){const t=zy.get(n);if(t)for(const r of t)r(e)}let Ip=null;const Cp="firebase-installations-store";let jk=null;function Hk(){return jk||(jk=function A3(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),c=Rd(o);return r&&o.addEventListener("upgradeneeded",d=>{r(Rd(o.result),d.oldVersion,d.newVersion,Rd(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",()=>i())}).catch(()=>{}),c}("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Cp)}})),jk}function zT(n,e){return $k.apply(this,arguments)}function $k(){return($k=(0,Q.Z)(function*(n,e){const t=$y(n),i=(yield Hk()).transaction(Cp,"readwrite"),s=i.objectStore(Cp),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&TV(n,e.fid),e})).apply(this,arguments)}function zk(n){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,Q.Z)(function*(n){const e=$y(n),r=(yield Hk()).transaction(Cp,"readwrite");yield r.objectStore(Cp).delete(e),yield r.done})).apply(this,arguments)}function mw(n,e){return Wk.apply(this,arguments)}function Wk(){return(Wk=(0,Q.Z)(function*(n,e){const t=$y(n),i=(yield Hk()).transaction(Cp,"readwrite"),s=i.objectStore(Cp),o=yield s.get(t),c=e(o);return void 0===c?yield s.delete(t):yield s.put(c,t),yield i.done,c&&(!o||o.fid!==c.fid)&&TV(n,c.fid),c})).apply(this,arguments)}function qk(n){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,Q.Z)(function*(n){let e;const t=yield mw(n.appConfig,r=>{const i=K3(r),s=Y3(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function K3(n){return kV(n||{fid:H3(),registrationStatus:0})}function Y3(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject($u.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Q3(n,e){return Kk.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:X3(n)}:{installationEntry:e}}function Kk(){return(Kk=(0,Q.Z)(function*(n,e){try{const t=yield U3(n,e);return zT(n.appConfig,t)}catch(t){throw wV(t)&&409===t.customData.serverCode?yield zk(n.appConfig):yield zT(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function X3(n){return Yk.apply(this,arguments)}function Yk(){return(Yk=(0,Q.Z)(function*(n){let e=yield MV(n.appConfig);for(;1===e.registrationStatus;)yield DV(100),e=yield MV(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield qk(n);return r||t}return e})).apply(this,arguments)}function MV(n){return mw(n,e=>{if(!e)throw $u.create("installation-not-found");return kV(e)})}function kV(n){return function J3(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function e5(n,e){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,Q.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=t5(n,t),i=CV(n,t),s=e.getImmediate({optional:!0});if(s){const g=yield s.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:vV,appId:n.appId}})},d=yield Lk(()=>fetch(r,c));if(d.ok)return EV(yield d.json());throw yield Nk("Generate Auth Token",d)})).apply(this,arguments)}function t5(n,{fid:e}){return`${Ok(n)}/${e}/authTokens:generate`}function Xk(n){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,Q.Z)(function*(n,e=!1){let t;const r=yield mw(n.appConfig,s=>{if(!PV(s))throw $u.create("not-registered");const o=s.authToken;if(!e&&i5(o))return s;if(1===o.requestStatus)return t=n5(n,e),s;{if(!navigator.onLine)throw $u.create("app-offline");const c=o5(s);return t=r5(n,c),c}});return t?yield t:r.authToken})).apply(this,arguments)}function n5(n,e){return eR.apply(this,arguments)}function eR(){return(eR=(0,Q.Z)(function*(n,e){let t=yield RV(n.appConfig);for(;1===t.authToken.requestStatus;)yield DV(100),t=yield RV(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Xk(n,e):r})).apply(this,arguments)}function RV(n){return mw(n,e=>{if(!PV(e))throw $u.create("not-registered");return function a5(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function r5(n,e){return tR.apply(this,arguments)}function tR(){return(tR=(0,Q.Z)(function*(n,e){try{const t=yield e5(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield zT(n.appConfig,r),t}catch(t){if(!wV(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield zT(n.appConfig,r)}else yield zk(n.appConfig);throw t}})).apply(this,arguments)}function PV(n){return void 0!==n&&2===n.registrationStatus}function i5(n){return 2===n.requestStatus&&!function s5(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function o5(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function nR(){return(nR=(0,Q.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield qk(e);return r?r.catch(console.error):Xk(e).catch(console.error),t.fid})).apply(this,arguments)}function rR(){return(rR=(0,Q.Z)(function*(n,e=!1){const t=n;return yield c5(t),(yield Xk(t,e)).token})).apply(this,arguments)}function c5(n){return iR.apply(this,arguments)}function iR(){return(iR=(0,Q.Z)(function*(n){const{registrationPromise:e}=yield qk(n);e&&(yield e)})).apply(this,arguments)}function aR(n){return $u.create("missing-app-config-values",{valueName:n})}const OV="installations",g5=n=>{const e=n.getProvider("app").getImmediate(),t=function f5(n){if(!n||!n.options)throw aR("App Configuration");if(!n.name)throw aR("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw aR(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,rn._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},m5=n=>{const e=n.getProvider("app").getImmediate(),t=(0,rn._getProvider)(e,OV).getImmediate();return{getId:()=>function l5(n){return nR.apply(this,arguments)}(t),getToken:i=>function u5(n){return rR.apply(this,arguments)}(t,i)}};(function y5(){(0,rn._registerComponent)(new ao.wA(OV,g5,"PUBLIC")),(0,rn._registerComponent)(new ao.wA("installations-internal",m5,"PRIVATE"))})(),(0,rn.registerVersion)(yV,"0.6.4"),(0,rn.registerVersion)(yV,"0.6.4","esm2017");const lR="@firebase/remote-config",Ls=new at.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class x5{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,Q.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function A5(n=navigator){return n.languages&&n.languages[0]||n.language}class M5{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return(0,Q.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:A5()},g={method:"POST",headers:c,body:JSON.stringify(d)},_=fetch(o,g),w=new Promise((B,G)=>{e.signal.addEventListener(()=>{const X=new Error("The operation was aborted.");X.name="AbortError",G(X)})});let T;try{yield Promise.race([_,w]),T=yield _}catch(B){let G="fetch-client-network";throw"AbortError"===B?.name&&(G="fetch-timeout"),Ls.create(G,{originalErrorMessage:B?.message})}let S=T.status;const M=T.headers.get("ETag")||void 0;let R,N;if(200===T.status){let B;try{B=yield T.json()}catch(G){throw Ls.create("fetch-client-parse",{originalErrorMessage:G?.message})}R=B.entries,N=B.state}if("INSTANCE_STATE_UNSPECIFIED"===N?S=500:"NO_CHANGE"===N?S=304:("NO_TEMPLATE"===N||"EMPTY_CONFIG"===N)&&(R={}),304!==S&&200!==S)throw Ls.create("fetch-status",{httpStatus:S});return{status:S,eTag:M,config:R}})()}}class P5{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,Q.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,Q.Z)(function*(){yield function k5(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function R5(n){if(!(n instanceof at.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+(0,at.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class F5{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function WT(n,e){const t=n.target.error||void 0;return Ls.create(e,{originalErrorMessage:t&&t?.message})}const Dp="app_namespace_store";class B5{constructor(e,t,r,i=function U5(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(WT(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Dp,{keyPath:"compositeKey"})}}catch(t){e(Ls.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,Q.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const c=r.transaction([Dp],"readonly").objectStore(Dp),d=t.createCompositeKey(e);try{const g=c.get(d);g.onerror=_=>{s(WT(_,"storage-get"))},g.onsuccess=_=>{const w=_.target.result;i(w?w.value:void 0)}}catch(g){s(Ls.create("storage-get",{originalErrorMessage:g?.message}))}})})()}set(e,t){var r=this;return(0,Q.Z)(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const d=i.transaction([Dp],"readwrite").objectStore(Dp),g=r.createCompositeKey(e);try{const _=d.put({compositeKey:g,value:t});_.onerror=w=>{o(WT(w,"storage-set"))},_.onsuccess=()=>{s()}}catch(_){o(Ls.create("storage-set",{originalErrorMessage:_?.message}))}})})()}delete(e){var t=this;return(0,Q.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const c=r.transaction([Dp],"readwrite").objectStore(Dp),d=t.createCompositeKey(e);try{const g=c.delete(d);g.onerror=_=>{s(WT(_,"storage-delete"))},g.onsuccess=()=>{i()}}catch(g){s(Ls.create("storage-delete",{originalErrorMessage:g?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class j5{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,Q.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const c=yield i;c&&(e.activeConfig=c)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function $5(){return fR.apply(this,arguments)}function fR(){return(fR=(0,Q.Z)(function*(){if(!(0,at.hl)())return!1;try{return yield(0,at.eu)()}catch{return!1}})).apply(this,arguments)}let VV,UV;!function H5(){(0,rn._registerComponent)(new ao.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ls.create("registration-window");if(!(0,at.hl)())throw Ls.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:c}=r.options;if(!s)throw Ls.create("registration-project-id");if(!o)throw Ls.create("registration-api-key");if(!c)throw Ls.create("registration-app-id");const d=new B5(c,r.name,t=t||"firebase"),g=new j5(d),_=new Ca.Yd(lR);_.logLevel=Ca.in.ERROR;const w=new M5(i,rn.SDK_VERSION,t,s,o,c),T=new P5(w,d),S=new x5(T,d,g,_),M=new F5(r,S,g,d,_);return function D5(n){const e=(0,at.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(M),M},"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(lR,"0.4.4"),(0,rn.registerVersion)(lR,"0.4.4","esm2017")}();const BV=new WeakMap,pR=new WeakMap,jV=new WeakMap,gR=new WeakMap,mR=new WeakMap;let yR={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return pR.get(n);if("objectStoreNames"===e)return n.objectStoreNames||jV.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zu(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Q5(n){return"function"==typeof n?function Y5(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W5(){return UV||(UV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(_R(this),e),zu(BV.get(this))}:function(...e){return zu(n.apply(_R(this),e))}:function(e,...t){const r=n.call(_R(this),e,...t);return jV.set(r,e.sort?e.sort():[e]),zu(r)}}(n):(n instanceof IDBTransaction&&function Z5(n){if(pR.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});pR.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function G5(){return VV||(VV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,yR):n)}function zu(n){if(n instanceof IDBRequest)return function q5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(zu(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&BV.set(t,n)}).catch(()=>{}),mR.set(e,n),e}(n);if(gR.has(n))return gR.get(n);const e=Q5(n);return e!==n&&(gR.set(n,e),mR.set(e,n)),e}const _R=n=>mR.get(n);function HV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),c=zu(o);return r&&o.addEventListener("upgradeneeded",d=>{r(zu(o.result),d.oldVersion,d.newVersion,zu(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",()=>i())}).catch(()=>{}),c}function vR(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),zu(t).then(()=>{})}const X5=["get","getKey","getAll","getAllKeys","count"],J5=["put","add","delete","clear"],bR=new Map;function $V(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(bR.get(e))return bR.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=J5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!X5.includes(t))return;const s=function(){var o=(0,Q.Z)(function*(c,...d){const g=this.transaction(c,i?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(d.shift())),(yield Promise.all([_[t](...d),i&&g.done]))[0]});return function(d){return o.apply(this,arguments)}}();return bR.set(e,s),s}!function K5(n){yR=n(yR)}(n=>({...n,get:(e,t,r)=>$V(e,t)||n.get(e,t,r),has:(e,t)=>!!$V(e,t)||n.has(e,t)}));const eG="/firebase-messaging-sw.js",tG="/firebase-cloud-messaging-push-scope",zV="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",GV="google.c.a.c_id",rG="google.c.a.c_l",iG="google.c.a.ts",sG="google.c.a.e";var Gy=(()=>{return(n=Gy||(Gy={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",Gy;var n})();function Gu(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oG(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const wR="fcm_token_details_db",WV="fcm_token_object_Store";function lG(n){return ER.apply(this,arguments)}function ER(){return ER=(0,Q.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(wR))return null;let e=null;return(yield HV(wR,5,{upgrade:(r=(0,Q.Z)(function*(i,s,o,c){var d;if(s<2||!i.objectStoreNames.contains(WV))return;const g=c.objectStore(WV),_=yield g.index("fcmSenderId").get(n);if(yield g.clear(),_)if(2===s){const w=_;if(!w.auth||!w.p256dh||!w.endpoint)return;e={token:w.fcmToken,createTime:null!==(d=w.createTime)&&void 0!==d?d:Date.now(),subscriptionOptions:{auth:w.auth,p256dh:w.p256dh,endpoint:w.endpoint,swScope:w.swScope,vapidKey:"string"==typeof w.vapidKey?w.vapidKey:Gu(w.vapidKey)}}}else if(3===s){const w=_;e={token:w.fcmToken,createTime:w.createTime,subscriptionOptions:{auth:Gu(w.auth),p256dh:Gu(w.p256dh),endpoint:w.endpoint,swScope:w.swScope,vapidKey:Gu(w.vapidKey)}}}else if(4===s){const w=_;e={token:w.fcmToken,createTime:w.createTime,subscriptionOptions:{auth:Gu(w.auth),p256dh:Gu(w.p256dh),endpoint:w.endpoint,swScope:w.swScope,vapidKey:Gu(w.vapidKey)}}}}),function(s,o,c,d){return r.apply(this,arguments)})})).close(),yield vR(wR),yield vR("fcm_vapid_details_db"),yield vR("undefined"),uG(e)?e:null;var r}),ER.apply(this,arguments)}function uG(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Tp="firebase-messaging-store";let IR=null;function CR(){return IR||(IR=HV("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Tp)}})),IR}function qV(n){return DR.apply(this,arguments)}function DR(){return(DR=(0,Q.Z)(function*(n){const e=AR(n),r=yield(yield CR()).transaction(Tp).objectStore(Tp).get(e);if(r)return r;{const i=yield lG(n.appConfig.senderId);if(i)return yield TR(n,i),i}})).apply(this,arguments)}function TR(n,e){return SR.apply(this,arguments)}function SR(){return(SR=(0,Q.Z)(function*(n,e){const t=AR(n),i=(yield CR()).transaction(Tp,"readwrite");return yield i.objectStore(Tp).put(e,t),yield i.done,e})).apply(this,arguments)}function hG(n){return xR.apply(this,arguments)}function xR(){return(xR=(0,Q.Z)(function*(n){const e=AR(n),r=(yield CR()).transaction(Tp,"readwrite");yield r.objectStore(Tp).delete(e),yield r.done})).apply(this,arguments)}function AR({appConfig:n}){return n.appId}const Ti=new at.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pG(n,e){return MR.apply(this,arguments)}function MR(){return(MR=(0,Q.Z)(function*(n,e){const t=yield OR(n),r=KV(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(PR(n.appConfig),i)).json()}catch(o){throw Ti.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Ti.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Ti.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function gG(n,e){return kR.apply(this,arguments)}function kR(){return(kR=(0,Q.Z)(function*(n,e){const t=yield OR(n),r=KV(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${PR(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Ti.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Ti.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Ti.create("token-update-no-token");return s.token})).apply(this,arguments)}function ZV(n,e){return RR.apply(this,arguments)}function RR(){return(RR=(0,Q.Z)(function*(n,e){const r={method:"DELETE",headers:yield OR(n)};try{const s=yield(yield fetch(`${PR(n.appConfig)}/${e}`,r)).json();if(s.error)throw Ti.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Ti.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function PR({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function OR(n){return NR.apply(this,arguments)}function NR(){return(NR=(0,Q.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function KV({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==zV&&(i.web.applicationPubKey=r),i}const mG=6048e5;function yG(n){return FR.apply(this,arguments)}function FR(){return(FR=(0,Q.Z)(function*(n){const e=yield vG(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Gu(e.getKey("auth")),p256dh:Gu(e.getKey("p256dh"))},r=yield qV(n.firebaseDependencies);if(r){if(bG(r.subscriptionOptions,t))return Date.now()>=r.createTime+mG?_G(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield ZV(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return QV(n.firebaseDependencies,t)}return QV(n.firebaseDependencies,t)})).apply(this,arguments)}function YV(n){return LR.apply(this,arguments)}function LR(){return(LR=(0,Q.Z)(function*(n){const e=yield qV(n.firebaseDependencies);e&&(yield ZV(n.firebaseDependencies,e.token),yield hG(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function _G(n,e){return VR.apply(this,arguments)}function VR(){return(VR=(0,Q.Z)(function*(n,e){try{const t=yield gG(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield TR(n.firebaseDependencies,r),t}catch(t){throw yield YV(n),t}})).apply(this,arguments)}function QV(n,e){return UR.apply(this,arguments)}function UR(){return(UR=(0,Q.Z)(function*(n,e){const r={token:yield pG(n,e),createTime:Date.now(),subscriptionOptions:e};return yield TR(n,r),r.token})).apply(this,arguments)}function vG(n,e){return BR.apply(this,arguments)}function BR(){return(BR=(0,Q.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:oG(e)})})).apply(this,arguments)}function bG(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function XV(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function wG(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function EG(n,e){!e.data||(n.data=e.data)}(e,n),function IG(n,e){var t,r,i,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const c=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;c&&(n.fcmOptions.link=c);const d=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;d&&(n.fcmOptions.analyticsLabel=d)}(e,n),e}function CG(n){return"object"==typeof n&&!!n&&GV in n}function JV(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function jR(n){return Ti.create("missing-app-config-values",{valueName:n})}JV("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),JV("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class TG{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function DG(n){if(!n||!n.options)throw jR("App Configuration Object");if(!n.name)throw jR("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw jR(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function eU(n){return HR.apply(this,arguments)}function HR(){return(HR=(0,Q.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(eG,{scope:tG}),n.swRegistration.update().catch(()=>{})}catch(e){throw Ti.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function SG(n,e){return $R.apply(this,arguments)}function $R(){return($R=(0,Q.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield eU(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Ti.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function xG(n,e){return zR.apply(this,arguments)}function zR(){return(zR=(0,Q.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=zV)})).apply(this,arguments)}function GR(){return(GR=(0,Q.Z)(function*(n,e){if(!navigator)throw Ti.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ti.create("permission-blocked");return yield xG(n,e?.vapidKey),yield SG(n,e?.serviceWorkerRegistration),yG(n)})).apply(this,arguments)}function AG(n,e,t){return WR.apply(this,arguments)}function WR(){return(WR=(0,Q.Z)(function*(n,e,t){const r=MG(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[GV],message_name:t[rG],message_time:t[iG],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function MG(n){switch(n){case Gy.NOTIFICATION_CLICKED:return"notification_open";case Gy.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qR(){return(qR=(0,Q.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Gy.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(XV(t)):n.onMessageHandler.next(XV(t)));const r=t.data;CG(r)&&"1"===r[sG]&&(yield AG(n,t.messageType,r))})).apply(this,arguments)}const nU="@firebase/messaging",RG=n=>{const e=new TG(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function kG(n,e){return qR.apply(this,arguments)}(e,t)),e},PG=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function tU(n,e){return GR.apply(this,arguments)}(e,r)}};function iU(){return ZR.apply(this,arguments)}function ZR(){return(ZR=(0,Q.Z)(function*(){try{yield(0,at.eu)()}catch{return!1}return typeof window<"u"&&(0,at.hl)()&&(0,at.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function OG(){(0,rn._registerComponent)(new ao.wA("messaging",RG,"PUBLIC")),(0,rn._registerComponent)(new ao.wA("messaging-internal",PG,"PRIVATE")),(0,rn.registerVersion)(nU,"0.12.4"),(0,rn.registerVersion)(nU,"0.12.4","esm2017")}();const qT="analytics",LG="firebase_id",BG="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",QR="https://www.googletagmanager.com/gtag/js",hi=new Ca.Yd("@firebase/analytics"),cs=new at.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function HG(n){if(!n.startsWith(QR)){const e=cs.create("invalid-gtag-resource",{gtagURL:n});return hi.warn(e.message),""}return n}function sU(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function zG(n,e){const t=function $G(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:HG}),r=document.createElement("script"),i=`${QR}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function WG(n,e,t,r,i,s){return XR.apply(this,arguments)}function XR(){return(XR=(0,Q.Z)(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const d=(yield sU(t)).find(g=>g.measurementId===i);d&&(yield e[d.appId])}}catch(c){hi.error(c)}n("config",i,s)})).apply(this,arguments)}function qG(n,e,t,r,i){return JR.apply(this,arguments)}function JR(){return(JR=(0,Q.Z)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const c=yield sU(t);for(const d of o){const g=c.find(w=>w.measurementId===d),_=g&&e[g.appId];if(!_){s=[];break}s.push(_)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){hi.error(s)}})).apply(this,arguments)}function YG(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(QR)&&t.src.includes(n))return t;return null}const oU=new class JG{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function eW(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function tW(n){return eP.apply(this,arguments)}function eP(){return(eP=(0,Q.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:eW(r)},s=BG.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let c="";try{const d=yield o.json();null!==(e=d.error)&&void 0!==e&&e.message&&(c=d.error.message)}catch{}throw cs.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()})).apply(this,arguments)}function nW(n){return tP.apply(this,arguments)}function tP(){return(tP=(0,Q.Z)(function*(n,e=oU,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw cs.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw cs.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new sW;return setTimeout((0,Q.Z)(function*(){c.abort()}),void 0!==t?t:6e4),aU({appId:r,apiKey:i,measurementId:s},o,c,e)})).apply(this,arguments)}function aU(n,e,t){return nP.apply(this,arguments)}function nP(){return(nP=(0,Q.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=oU){var s;const{appId:o,measurementId:c}=n;try{yield rW(r,e)}catch(d){if(c)return hi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:o,measurementId:c};throw d}try{const d=yield tW(n);return i.deleteThrottleMetadata(o),d}catch(d){const g=d;if(!iW(g)){if(i.deleteThrottleMetadata(o),c)return hi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:o,measurementId:c};throw d}const _=503===Number(null===(s=g?.customData)||void 0===s?void 0:s.httpStatus)?(0,at.$s)(t,i.intervalMillis,30):(0,at.$s)(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return i.setThrottleMetadata(o,w),hi.debug(`Calling attemptFetch again in ${_} millis`),aU(n,w,r,i)}})).apply(this,arguments)}function rW(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(cs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function iW(n){if(!(n instanceof at.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class sW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let rP,cP;function iP(){return(iP=(0,Q.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function lU(n){cP=n}function uU(n){rP=n}function hW(){return dP.apply(this,arguments)}function dP(){return(dP=(0,Q.Z)(function*(){if(!(0,at.hl)())return hi.warn(cs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,at.eu)()}catch(n){return hi.warn(cs.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function hP(){return(hP=(0,Q.Z)(function*(n,e,t,r,i,s,o){var c;const d=nW(n);d.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&hi.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>hi.error(S)),e.push(d);const g=hW().then(S=>{if(S)return r.getId()}),[_,w]=yield Promise.all([d,g]);YG(s)||zG(s,_.measurementId),cP&&(i("consent","default",cP),lU(void 0)),i("js",new Date);const T=null!==(c=o?.config)&&void 0!==c?c:{};return T.origin="firebase",T.update=!0,null!=w&&(T[LG]=w),i("config",_.measurementId,T),rP&&(i("set",rP),uU(void 0)),_.measurementId})).apply(this,arguments)}class pW{constructor(e){this.app=e}_delete(){return delete gl[this.app.options.appId],Promise.resolve()}}let gl={},cU=[];const dU={};let fU,ml,ZT="dataLayer",fP=!1;function mW(n,e,t){!function gW(){const n=[];if((0,at.ru)()&&n.push("This is a browser extension environment."),(0,at.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=cs.create("invalid-analytics-context",{errorInfo:e});hi.warn(t.message)}}();const r=n.options.appId;if(!r)throw cs.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw cs.create("no-api-key");hi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gl[r])throw cs.create("already-exists",{id:r});if(!fP){!function GG(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(ZT);const{wrappedGtag:s,gtagCore:o}=function KG(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function ZG(n,e,t,r){function s(){return(s=(0,Q.Z)(function*(o,...c){try{if("event"===o){const[d,g]=c;yield qG(n,e,t,d,g)}else if("config"===o){const[d,g]=c;yield WG(n,e,t,r,d,g)}else if("consent"===o){const[d]=c;n("consent","update",d)}else if("get"===o){const[d,g,_]=c;n("get",d,g,_)}else if("set"===o){const[d]=c;n("set",d)}else n(o,...c)}catch(d){hi.error(d)}})).apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(gl,cU,dU,ZT,"gtag");ml=s,fU=o,fP=!0}return gl[r]=function fW(n,e,t,r,i,s,o){return hP.apply(this,arguments)}(n,cU,dU,e,fU,ZT,t),new pW(n)}function _W(){return pP.apply(this,arguments)}function pP(){return(pP=(0,Q.Z)(function*(){if((0,at.ru)()||!(0,at.zI)()||!(0,at.hl)())return!1;try{return yield(0,at.eu)()}catch{return!1}})).apply(this,arguments)}const pU="@firebase/analytics";!function bW(){(0,rn._registerComponent)(new ao.wA(qT,(e,{options:t})=>mW(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,rn._registerComponent)(new ao.wA("analytics-internal",function n(e){try{const t=e.getProvider(qT).getImmediate();return{logEvent:(r,i,s)=>function vW(n,e,t,r){n=(0,at.m9)(n),function oW(n,e,t,r,i){return iP.apply(this,arguments)}(ml,gl[n.app.options.appId],e,t,r).catch(i=>hi.error(i))}(t,r,i,s)}}catch(t){throw cs.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,rn.registerVersion)(pU,"0.10.0"),(0,rn.registerVersion)(pU,"0.10.0","esm2017")}();const IW=new class EW extends dV{}(class wW extends cV{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var Sp=j(5363),yw=j(9468);const KT=new f.GfV("7.5.0"),mP="__angularfire_symbol__analyticsIsSupportedValue",yP="__angularfire_symbol__analyticsIsSupported",_P="__angularfire_symbol__remoteConfigIsSupportedValue",vP="__angularfire_symbol__remoteConfigIsSupported",bP="__angularfire_symbol__messagingIsSupportedValue",wP="__angularfire_symbol__messagingIsSupported";globalThis[yP]||(globalThis[yP]=_W().then(n=>globalThis[mP]=n).catch(()=>globalThis[mP]=!1)),globalThis[wP]||(globalThis[wP]=iU().then(n=>globalThis[bP]=n).catch(()=>globalThis[bP]=!1)),globalThis[vP]||(globalThis[vP]=$5().then(n=>globalThis[_P]=n).catch(()=>globalThis[_P]=!1));const CP=(n,e)=>{const t=e?[e]:(0,rn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Wy(){}class mU{constructor(e,t=IW){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class CW{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wy,{},Wy,Wy)),t.pipe(Qr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _w=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new mU(Zone.current)),this.insideAngular=t.run(()=>new mU(Zone.current,Tk)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xp(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function DW(n){return xp().ngZone.runOutsideAngular(()=>n())}function Ap(n){return xp().ngZone.run(()=>n())}function yU(n){return n.pipe((0,Sp.Q)(xp().outsideAngular))}function ds(n){return xp(),function TW(n){return function(t){return(t=t.lift(new CW(n.ngZone))).pipe((0,yw.R)(n.outsideAngular),(0,Sp.Q)(n.insideAngular))}}(xp())(n)}const SW=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Ap(()=>n.apply(void 0,r))},qy=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=Ap(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wy,{},Wy,Wy)))),r[s]=SW(r[s],t));const i=DW(()=>n.apply(this,r));if(!e){if(i instanceof Rs.y){const s=xp();return i.pipe((0,yw.R)(s.outsideAngular),(0,Sp.Q)(s.insideAngular))}return Ap(()=>i)}return i instanceof Rs.y?i.pipe(ds):i instanceof Promise?Ap(()=>new Promise((s,o)=>i.then(c=>Ap(()=>s(c)),c=>Ap(()=>o(c))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Ap(()=>i)};var hs=j(2011),_U=j(3942);const vU="firebasestorage.googleapis.com",bU="storageBucket";class fr extends at.ZR{constructor(e,t,r=0){super(DP(e),`Firebase Storage: ${t} (${DP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return DP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Bn=(()=>{return(n=Bn||(Bn={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Bn;var n})();function DP(n){return"storage/"+n}function TP(){return new fr(Bn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function wU(){return new fr(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EU(){return new fr(Bn.CANCELED,"User canceled the upload/download.")}function IU(){return new fr(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zy(n){return new fr(Bn.INVALID_ARGUMENT,n)}function CU(){return new fr(Bn.APP_DELETED,"The Firebase app was deleted.")}function DU(n){return new fr(Bn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vw(n,e){return new fr(Bn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function bw(n){throw new fr(Bn.INTERNAL_ERROR,"Internal error: "+n)}class Hi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Hi.makeFromUrl(e,t)}catch{return new Hi(e,"")}if(""===r.path)return r;throw function LW(n){return new fr(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function g(te){te.path_=decodeURIComponent(te.path)}const w=t.replace(/[.]/g,"\\."),X=[{regex:c,indices:{bucket:1,path:3},postModify:function s(te){"/"===te.path.charAt(te.path.length-1)&&(te.path_=te.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${w}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:g},{regex:new RegExp(`^https?://${t===vU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let te=0;te<X.length;te++){const re=X[te],fe=re.regex.exec(e);if(fe){let Ve=fe[re.indices.path];Ve||(Ve=""),r=new Hi(fe[re.indices.bucket],Ve),re.postModify(r);break}}if(null==r)throw function FW(n){return new fr(Bn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class HW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function YT(n){return"string"==typeof n||n instanceof String}function TU(n){return SP()&&n instanceof Blob}function SP(){return typeof Blob<"u"&&!(0,at.UG)()}function xP(n,e,t,r){if(r<e)throw Zy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Zy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Wu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function SU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Pd=(()=>{return(n=Pd||(Pd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Pd;var n})();function xU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class ZW{constructor(e,t,r,i,s,o,c,d,g,_,w,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=w,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,M)=>{this.resolve_=S,this.reject_=M,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());!function GW(n){return void 0!==n}(d)?s():s(d)}catch(d){o(d)}else if(null!==c){const d=TP();d.serverResponse=c.getErrorText(),o(this.errorCallback_?this.errorCallback_(c,d):d)}else o(i.canceled?this.appDelete_?CU():EU():wU())};this.canceled_?t(0,new QT(!1,null,!0)):this.backoffId_=function $W(n,e,t){let r=1,i=null,s=null,o=!1,c=0;function d(){return 2===c}let g=!1;function _(...N){g||(g=!0,e.apply(null,N))}function w(N){i=setTimeout(()=>{i=null,n(S,d())},N)}function T(){s&&clearTimeout(s)}function S(N,...B){if(g)return void T();if(N)return T(),void _.call(null,N,...B);if(d()||o)return T(),void _.call(null,N,...B);let X;r<64&&(r*=2),1===c?(c=2,X=0):X=1e3*(r+Math.random()),w(X)}let M=!1;function R(N){M||(M=!0,T(),!g&&(null!==i?(N||(c=2),clearTimeout(i),w(0)):N||(c=1)))}return w(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new QT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Pd.NO_ERROR,d=s.getStatus();if(!c||xU(d,this.additionalRetryCodes_)&&this.retry){const _=s.getErrorCode()===Pd.ABORT;return void r(!1,new QT(!1,null,_))}const g=-1!==this.successCodes_.indexOf(d);r(!0,new QT(g,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function zW(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class QT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function tq(...n){const e=function eq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(SP())return new Blob(n);throw new fr(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const lo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class AP{constructor(e,t){this.data=e,this.contentType=t||null}}function MP(n,e){switch(n){case lo.RAW:return new AP(AU(e));case lo.BASE64:case lo.BASE64URL:return new AP(MU(n,e));case lo.DATA_URL:return new AP(function sq(n){const e=new kU(n);return e.base64?MU(lo.BASE64,e.rest):function iq(n){let e;try{e=decodeURIComponent(n)}catch{throw vw(lo.DATA_URL,"Malformed data URL.")}return AU(e)}(e.rest)}(e),function oq(n){return new kU(n).contentType}(e))}throw TP()}function AU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function MU(n,e){switch(n){case lo.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw vw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case lo.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw vw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function rq(n){if(typeof atob>"u")throw function jW(n){return new fr(Bn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:vw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class kU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw vw(lo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function aq(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class yl{constructor(e,t){let r=0,i="";TU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(TU(this.data_)){const i=function nq(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new yl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new yl(r,!0)}}static getBlob(...e){if(SP()){const t=e.map(r=>r instanceof yl?r.data_:r);return new yl(tq.apply(null,t))}{const t=e.map(o=>YT(o)?MP(lo.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new yl(i,!0)}}uploadData(){return this.data_}}function kP(n){let e;try{e=JSON.parse(n)}catch{return null}return function qW(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function RU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function cq(n,e){return e}class fs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||cq}}let XT=null;function ww(){if(XT)return XT;const n=[];n.push(new fs("bucket")),n.push(new fs("generation")),n.push(new fs("metageneration")),n.push(new fs("name","fullPath",!0));const t=new fs("name");t.xform=function e(s,o){return function dq(n){return!YT(n)||n.length<2?n:RU(n)}(o)},n.push(t);const i=new fs("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new fs("timeCreated")),n.push(new fs("updated")),n.push(new fs("md5Hash",null,!0)),n.push(new fs("cacheControl",null,!0)),n.push(new fs("contentDisposition",null,!0)),n.push(new fs("contentEncoding",null,!0)),n.push(new fs("contentLanguage",null,!0)),n.push(new fs("contentType",null,!0)),n.push(new fs("metadata","customMetadata",!0)),XT=n,XT}function PU(n,e,t){const r=kP(e);return null===r?null:function fq(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function hq(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Hi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function RP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const OU="prefixes";class _l{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function vl(n){if(!n)throw TP()}function JT(n,e){return function t(r,i){const s=PU(n,i,e);return vl(null!==s),s}}function Ky(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function OW(){return new fr(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function PW(){return new fr(Bn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function RW(n){return new fr(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function NW(n){return new fr(Bn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Ew(n){const e=Ky(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function kW(n){return new fr(Bn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function FU(n,e,t){const i=Wu(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,c=new _l(i,"GET",JT(n,t),o);return c.errorHandler=Ew(e),c}function vq(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const c=Wu(e.bucketOnlyServerUrl(),n.host,n._protocol),g=n.maxOperationRetryTime,_=new _l(c,"GET",function yq(n,e){return function t(r,i){const s=function mq(n,e,t){const r=kP(t);return null===r?null:function gq(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[OU])for(const i of t[OU]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new Hi(e,s));r.prefixes.push(o)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Hi(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return vl(null!==s),s}}(n,e.bucket),g);return _.urlParams=s,_.errorHandler=Ky(e),_}function VU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Iq(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class eS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function PP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{vl(!1)}return vl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Sq={STATE_CHANGED:"state_changed"},ps={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function OP(n){switch(n){case"running":case"pausing":case"canceling":return ps.RUNNING;case"paused":return ps.PAUSED;case"success":return ps.SUCCESS;case"canceled":return ps.CANCELED;default:return ps.ERROR}}class xq{constructor(e,t,r){if(function WW(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Yy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Mq extends class Aq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw bw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Da(){return new Mq}class HU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ww(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Bn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(xU(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=wU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Bn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Cq(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=VU(e,r,i),c={name:o.fullPath},d=Wu(s,n.host,n._protocol),_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},w=RP(o,t),M=new _l(d,"POST",function S(R){let N;PP(R);try{N=R.getResponseHeader("X-Goog-Upload-URL")}catch{vl(!1)}return vl(YT(N)),N},n.maxUploadRetryTime);return M.urlParams=c,M.headers=_,M.body=w,M.errorHandler=Ky(e),M}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Da,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Dq(n,e,t,r){const d=new _l(t,"POST",function s(g){const _=PP(g,["active","final"]);let w=null;try{w=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{vl(!1)}w||vl(!1);const T=Number(w);return vl(!isNaN(T)),new eS(T,r.size(),"final"===_)},n.maxUploadRetryTime);return d.headers={"X-Goog-Upload-Command":"query"},d.errorHandler=Ky(e),d}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Da,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new eS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Tq(n,e,t,r,i,s,o,c){const d=new eS(0,0);if(o?(d.current=o.current,d.total=o.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw function UW(){return new fr(Bn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const g=d.total-d.current;let _=g;i>0&&(_=Math.min(_,i));const w=d.current;let S="";S=0===_?"finalize":g===_?"upload, finalize":"upload";const M={"X-Goog-Upload-Command":S,"X-Goog-Upload-Offset":`${d.current}`},R=r.slice(w,w+_);if(null===R)throw IU();const X=new _l(t,"POST",function N(te,re){const fe=PP(te,["active","final"]),Ie=d.current+_,Ve=r.size();let ut;return ut="final"===fe?JT(e,s)(te,re):null,new eS(Ie,Ve,"final"===fe,ut)},e.maxUploadRetryTime);return X.headers=M,X.body=R.uploadData(),X.progressCallback=c||null,X.errorHandler=Ky(n),X}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(d){return this._error=d,void this._transition("error")}const c=this._ref.storage._makeRequest(o,Da,i,s,!1);this._request=c,c.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=FU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Da,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function UU(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},d=function c(){let X="";for(let te=0;te<2;te++)X+=Math.random().toString().slice(2);return X}();o["Content-Type"]="multipart/related; boundary="+d;const g=VU(e,r,i),_=RP(g,t),S=yl.getBlob("--"+d+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_+"\r\n--"+d+"\r\nContent-Type: "+g.contentType+"\r\n\r\n",r,"\r\n--"+d+"--");if(null===S)throw IU();const M={name:g.fullPath},R=Wu(s,n.host,n._protocol),B=n.maxUploadRetryTime,G=new _l(R,"POST",JT(n,t),B);return G.urlParams=M,G.headers=o,G.body=S.uploadData(),G.errorHandler=Ky(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Da,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=EU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=OP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new xq(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(OP(this._state)){case ps.SUCCESS:Yy(this._resolve.bind(null,this.snapshot))();break;case ps.CANCELED:case ps.ERROR:Yy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(OP(this._state)){case ps.RUNNING:case ps.PAUSED:e.next&&Yy(e.next.bind(e,this.snapshot))();break;case ps.SUCCESS:e.complete&&Yy(e.complete.bind(e))();break;default:e.error&&Yy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Mp{constructor(e,t){this._service=e,this._location=t instanceof Hi?t:Hi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mp(e,t)}get root(){const e=new Hi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RU(this._location.path)}get storage(){return this._service}get parent(){const e=function lq(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Hi(this._location.bucket,e);return new Mp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw DU(e)}}function zU(n,e,t){return NP.apply(this,arguments)}function NP(){return(NP=(0,Q.Z)(function*(n,e,t){const i=yield GU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield zU(n,e,i.nextPageToken))})).apply(this,arguments)}function GU(n,e){null!=e&&"number"==typeof e.maxResults&&xP("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=vq(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Da)}function Hq(n){n._throwIfRoot("getDownloadURL");const e=function bq(n,e,t){const i=Wu(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,c=new _l(i,"GET",function _q(n,e){return function t(r,i){const s=PU(n,i,e);return vl(null!==s),function pq(n,e,t,r){const i=kP(e);if(null===i||!YT(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(g=>{const w=n.fullPath;return Wu("/b/"+o(n.bucket)+"/o/"+o(w),t,r)+SU({alt:"media",token:g})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return c.errorHandler=Ew(e),c}(n.storage,n._location,ww());return n.storage.makeRequestWithTokens(e,Da).then(t=>{if(null===t)throw function BW(){return new fr(Bn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function WU(n,e){const t=function uq(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Hi(n._location.bucket,t);return new Mp(n.storage,r)}function qU(n,e){if(n instanceof FP){const t=n;if(null==t._bucket)throw function VW(){return new fr(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bU+"' property when initializing the app?")}();const r=new Mp(t,t._bucket);return null!=e?qU(r,e):r}return void 0!==e?WU(n,e):n}function Wq(n,e){if(e&&function zq(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof FP)return function Gq(n,e){return new Mp(n,e)}(n,e);throw Zy("To use ref(service, url), the first argument must be a Storage instance.")}return qU(n,e)}function ZU(n,e){const t=e?.[bU];return null==t?null:Hi.makeFromBucketSpec(t,n)}class FP{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=vU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Hi.makeFromBucketSpec(i,this._host):ZU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Hi.makeFromBucketSpec(this._url,e):ZU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Q.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Q.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mp(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new HW(CU());{const o=function JW(n,e,t,r,i,s,o=!0){const c=SU(n.urlParams),d=n.url+c,g=Object.assign({},n.headers);return function QW(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function KW(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function YW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(g,s),function XW(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new ZW(d,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,Q.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const KU="@firebase/storage",QU="storage";function XU(n,e,t){return function Lq(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new HU(n,new yl(e),t)}(n=(0,at.m9)(n),e,t)}function JU(n){return Hq(n=(0,at.m9)(n))}function eB(n){return function $q(n){n._throwIfRoot("deleteObject");const e=function Eq(n,e){const r=Wu(e.fullServerUrl(),n.host,n._protocol),c=new _l(r,"DELETE",function o(d,g){},n.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=Ew(e),c}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Da)}(n=(0,at.m9)(n))}function LP(n,e){return Wq(n=(0,at.m9)(n),e)}function Jq(n=(0,rn.getApp)(),e){n=(0,at.m9)(n);const r=(0,rn._getProvider)(n,QU).getImmediate({identifier:e}),i=(0,at.P0)("storage");return i&&tB(r,...i),r}function tB(n,e,t,r={}){!function qq(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,at.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function e9(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new FP(t,r,i,e,rn.SDK_VERSION)}!function t9(){(0,rn._registerComponent)(new ao.wA(QU,e9,"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(KU,"0.11.2",""),(0,rn.registerVersion)(KU,"0.11.2","esm2017")}();class tS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class nB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new tS(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new tS(o,this,this._ref)):{next:t.next?o=>t.next(new tS(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class rB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new qu(e,this._service))}get items(){return this._delegate.items.map(e=>new qu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class qu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Xq(n,e){return WU(n,e)}(this._delegate,e);return new qu(t,this.storage)}get root(){return new qu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new qu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new nB(XU(this._delegate,e,t),this)}putString(e,t=lo.RAW,r){this._throwIfRoot("putString");const i=MP(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new nB(new HU(this._delegate,new yl(i.data,!0),s),this)}listAll(){return function Qq(n){return function Uq(n){const e={prefixes:[],items:[]};return zU(n,e).then(()=>e)}(n=(0,at.m9)(n))}(this._delegate).then(e=>new rB(e,this.storage))}list(e){return function Yq(n,e){return GU(n=(0,at.m9)(n),e)}(this._delegate,e||void 0).then(t=>new rB(t,this.storage))}getMetadata(){return function Zq(n){return function Bq(n){n._throwIfRoot("getMetadata");const e=FU(n.storage,n._location,ww());return n.storage.makeRequestWithTokens(e,Da)}(n=(0,at.m9)(n))}(this._delegate)}updateMetadata(e){return function Kq(n,e){return function jq(n,e){n._throwIfRoot("updateMetadata");const t=function wq(n,e,t,r){const s=Wu(e.fullServerUrl(),n.host,n._protocol),c=RP(t,r),g=n.maxOperationRetryTime,_=new _l(s,"PATCH",JT(n,r),g);return _.headers={"Content-Type":"application/json; charset=utf-8"},_.body=c,_.errorHandler=Ew(e),_}(n.storage,n._location,e,ww());return n.storage.makeRequestWithTokens(t,Da)}(n=(0,at.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return JU(this._delegate)}delete(){return this._throwIfRoot("delete"),eB(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw DU(e)}}class iB{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(sB(e))throw Zy("ref() expected a child path but got a URL, use refFromURL instead.");return new qu(LP(this._delegate,e),this)}refFromURL(e){if(!sB(e))throw Zy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hi.makeFromUrl(e,this._delegate.host)}catch{throw Zy("refFromUrl() expected a valid full URL but got an invalid one.")}return new qu(LP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){tB(this._delegate,e,t,r)}}function sB(n){return/^[A-Za-z]+:\/\//.test(n)}function s9(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new iB(t,r)}!function o9(n){const e={TaskState:ps,TaskEvent:Sq,StringFormat:lo,Storage:iB,Reference:qu};n.INTERNAL.registerComponent(new ao.wA("storage-compat",s9,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(_U.Z);class Qy{constructor(e){return e}}class oB{constructor(){return(0,rn.getApps)()}}const VP=new f.OlP("angularfire2._apps"),l9={provide:Qy,useFactory:function a9(n){return n&&1===n.length?n[0]:new Qy((0,rn.getApp)())},deps:[[new f.FiY,VP]]},u9={provide:oB,deps:[[new f.FiY,VP]]};function c9(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Qy(r)}}let d9=(()=>{class n{constructor(t){(0,rn.registerVersion)("angularfire",KT.full,"core"),(0,rn.registerVersion)("angularfire",KT.full,"app"),(0,rn.registerVersion)("angular",f.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[l9,u9]}),n})();function h9(n,...e){return{ngModule:d9,providers:[{provide:VP,useFactory:c9(n),multi:!0,deps:[f.R0b,f.zs3,_w,...e]}]}}const f9=qy(rn.initializeApp,!0),UP=new Map,aB={activated:!1,tokenObservers:[]},p9={initialized:!1,enabled:!1};function Dr(n){return UP.get(n)||Object.assign({},aB)}function nS(){return p9}class b9{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Q.Z)(function*(){t.stop();try{t.pending=new at.BH,yield function w9(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new at.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Si=new at.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jP(n){if(!Dr(n).activated)throw Si.create("use-before-activation",{appName:n.name})}function sS(n,e){return $P.apply(this,arguments)}function $P(){return($P=(0,Q.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const w=yield i.getHeartbeatsHeader();w&&(r["X-Firebase-Client"]=w)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,c;try{o=yield fetch(n,s)}catch(w){throw Si.create("fetch-network-error",{originalErrorMessage:w?.message})}if(200!==o.status)throw Si.create("fetch-status-error",{httpStatus:o.status});try{c=yield o.json()}catch(w){throw Si.create("fetch-parse-error",{originalErrorMessage:w?.message})}const d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const g=1e3*Number(d[1]),_=Date.now();return{token:c.token,expireTimeMillis:_+g,issuedAtTimeMillis:_}})).apply(this,arguments)}function uB(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Iw="firebase-app-check-store";let oS=null;function dB(){return oS||(oS=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Si.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Iw,{keyPath:"compositeKey"})}}catch(t){e(Si.create("storage-open",{originalErrorMessage:t?.message}))}}),oS)}function zP(){return(zP=(0,Q.Z)(function*(n,e){const r=(yield dB()).transaction(Iw,"readwrite"),s=r.objectStore(Iw).put({compositeKey:n,value:e});return new Promise((o,c)=>{s.onsuccess=d=>{o()},r.onerror=d=>{var g;c(Si.create("storage-set",{originalErrorMessage:null===(g=d.target.error)||void 0===g?void 0:g.message}))}})})).apply(this,arguments)}const Cw=new Ca.Yd("@firebase/app-check");function qP(n,e){return(0,at.hl)()?function x9(n,e){return function hB(n,e){return zP.apply(this,arguments)}(function pB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Cw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function KP(){return nS().enabled}function YP(){return QP.apply(this,arguments)}function QP(){return(QP=(0,Q.Z)(function*(){const n=nS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const O9={error:"UNKNOWN_ERROR"};function N9(n){return at.US.encodeString(JSON.stringify(n),!1)}function aS(n){return XP.apply(this,arguments)}function XP(){return(XP=(0,Q.Z)(function*(n,e=!1){const t=n.app;jP(t);const r=Dr(t);let s,i=r.token;if(i&&!Xy(i)&&(r.token=void 0,i=void 0),!i){const d=yield r.cachedTokenPromise;d&&(Xy(d)?i=d:yield qP(t,void 0))}if(!e&&i&&Xy(i))return{token:i.token};let c,o=!1;if(KP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sS(uB(t,yield YP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const d=yield r.exchangeTokenPromise;return yield qP(t,d),r.token=d,{token:d.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Dr(t).exchangeTokenPromise}catch(d){"appCheck/throttled"===d.code?Cw.warn(d.message):Cw.error(d),s=d}return i?s?c=Xy(i)?{token:i.token,internalError:s}:yB(s):(c={token:i.token},r.token=i,yield qP(t,i)):c=yB(s),o&&mB(t,c),c})).apply(this,arguments)}function tO(n,e){const t=Dr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function gB(n){const{app:e}=n,t=Dr(e);let r=t.tokenRefresher;r||(r=function L9(n){const{app:e}=n;return new b9((0,Q.Z)(function*(){let r;if(r=Dr(e).token?yield aS(n,!0):yield aS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Dr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mB(n,e){const t=Dr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Xy(n){return n.expireTimeMillis-Date.now()>0}function yB(n){return{token:N9(O9),error:n}}class V9{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Dr(this.app);for(const t of e)tO(this.app,t.next);return Promise.resolve()}}const DB="app-check-internal";!function X9(){(0,rn._registerComponent)(new ao.wA("app-check",n=>function U9(n,e){return new V9(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DB).initialize()})),(0,rn._registerComponent)(new ao.wA(DB,n=>function B9(n){return{getToken:e=>aS(n,e),addTokenListener:e=>function eO(n,e,t,r){const{app:i}=n,s=Dr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Xy(s.token)){const c=s.token;Promise.resolve().then(()=>{t({token:c.token}),gB(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>gB(n))}(n,"INTERNAL",e),removeTokenListener:e=>tO(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rn.registerVersion)("@firebase/app-check","0.7.0")}();class Dw{constructor(){return CP("app-check")}}typeof window<"u"&&window;var r8=j(9260);function SB(n){const e=function i8(n){return new Rs.y(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function _3(n,e=Tk){return(0,Kr.e)((t,r)=>{let i=null,s=null,o=null;const c=()=>{if(i){i.unsubscribe(),i=null;const g=s;s=null,r.next(g)}};function d(){const g=o+n,_=e.now();if(_<g)return i=this.schedule(void 0,g-_),void r.add(i);c()}t.subscribe((0,jr.x)(r,g=>{s=g,o=e.now(),i||(i=e.schedule(d,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Nt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function uS(n){return{getDownloadURL:()=>mt(void 0).pipe(yU,Ir(()=>n.getDownloadURL()),ds),getMetadata:()=>mt(void 0).pipe(yU,Ir(()=>n.getMetadata()),ds),delete:()=>(0,En.D)(n.delete()),child:e=>uS(n.child(e)),updateMetadata:e=>(0,En.D)(n.updateMetadata(e)),put:(e,t)=>SB(n.put(e,t)),putString:(e,t,r)=>SB(n.putString(e,t,r)),list:e=>(0,En.D)(n.list(e)),listAll:()=>(0,En.D)(n.listAll())}}const s8=new f.OlP("angularfire2.storageBucket"),o8=new f.OlP("angularfire2.storage.maxUploadRetryTime"),a8=new f.OlP("angularfire2.storage.maxOperationRetryTime"),l8=new f.OlP("angularfire2.storage.use-emulator");let u8=(()=>{class n{constructor(t,r,i,s,o,c,d,g,_,w){const T=(0,hs.on)(t,o,r);this.storage=(0,hs.cc)(`${T.name}.storage.${i}`,"AngularFireStorage",T.name,()=>{const S=o.runOutsideAngular(()=>T.storage(i||void 0)),M=_;return M&&S.useEmulator(...M),d&&S.setMaxUploadRetryTime(d),g&&S.setMaxOperationRetryTime(g),S},[d,g])}ref(t){return uS(this.storage.ref(t))}refFromURL(t){return uS(this.storage.refFromURL(t))}upload(t,r,i){return uS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hs.Dh),f.LFG(hs.xv,8),f.LFG(s8,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(_w),f.LFG(o8,8),f.LFG(a8,8),f.LFG(l8,8),f.LFG(Dw,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function oO(){return(0,Kr.e)((n,e)=>{let t,r=!1;n.subscribe((0,jr.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function d8(n,e){return n===e}j(9568);var st,h8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ta={},aO=aO||{},Ht=h8||self;function cS(){}function dS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Tw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var lO="closure_uid_"+(1e9*Math.random()>>>0),p8=0;function g8(n,e,t){return n.call.apply(n.bind,arguments)}function m8(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function $i(n,e,t){return($i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g8:m8).apply(null,arguments)}function hS(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function fi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),c=2;c<arguments.length;c++)o[c-2]=arguments[c];return e.prototype[i].apply(r,o)}}function Od(){this.s=this.s,this.o=this.o}Od.prototype.s=!1,Od.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function f8(n){Object.prototype.hasOwnProperty.call(n,lO)&&n[lO]||(n[lO]=++p8)}(this)},Od.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xB=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function uO(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AB(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(dS(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function zi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}zi.prototype.h=function(){this.defaultPrevented=!0};var _8=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",cS,e),Ht.removeEventListener("test",cS,e)}catch{}return n}();function fS(n){return/^[\s\xa0]*$/.test(n)}var MB=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function cO(n,e){return n<e?-1:n>e?1:0}function pS(){var n=Ht.navigator;return n&&(n=n.userAgent)?n:""}function bl(n){return-1!=pS().indexOf(n)}function dO(n){return dO[" "](n),n}function kB(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}dO[" "]=cS;var gS,n,v8=bl("Opera"),Jy=bl("Trident")||bl("MSIE"),RB=bl("Edge"),hO=RB||Jy,PB=bl("Gecko")&&!(-1!=pS().toLowerCase().indexOf("webkit")&&!bl("Edge"))&&!(bl("Trident")||bl("MSIE"))&&!bl("Edge"),b8=-1!=pS().toLowerCase().indexOf("webkit")&&!bl("Edge");function OB(){var n=Ht.document;return n?n.documentMode:void 0}e:{var fO="",pO=(n=pS(),PB?/rv:([^\);]+)(\)|;)/.exec(n):RB?/Edge\/([\d\.]+)/.exec(n):Jy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):b8?/WebKit\/(\S+)/.exec(n):v8?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(pO&&(fO=pO?pO[1]:""),Jy){var gO=OB();if(null!=gO&&gO>parseFloat(fO)){gS=String(gO);break e}}gS=fO}var w8={},I8=Ht.document&&Jy&&(OB()||parseInt(gS,10))||void 0;function Sw(n,e){if(zi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(PB){e:{try{dO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:C8[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sw.$.h.call(this)}}fi(Sw,zi);var C8={2:"touch",3:"pen",4:"mouse"};Sw.prototype.h=function(){Sw.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var xw="closure_listenable_"+(1e6*Math.random()|0),D8=0;function T8(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++D8,this.fa=this.ia=!1}function mS(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function yO(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function FB(n){const e={};for(const t in n)e[t]=n[t];return e}const LB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function VB(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<LB.length;s++)t=LB[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function yS(n){this.src=n,this.g={},this.h=0}function _O(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=xB(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(mS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vO(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}yS.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=vO(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new T8(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var bO="closure_lm_"+(1e6*Math.random()|0),wO={};function UB(n,e,t,r,i){if(r&&r.once)return jB(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)UB(n,e[s],t,r,i);return null}return t=DO(t),n&&n[xw]?n.O(e,t,Tw(r)?!!r.capture:!!r,i):BB(n,e,t,!1,r,i)}function BB(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Tw(i)?!!i.capture:!!i,c=IO(n);if(c||(n[bO]=c=new yS(n)),(t=c.add(e,t,r,o,s)).proxy)return t;if(r=function S8(){const e=x8;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)_8||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent($B(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jB(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)jB(n,e[s],t,r,i);return null}return t=DO(t),n&&n[xw]?n.P(e,t,Tw(r)?!!r.capture:!!r,i):BB(n,e,t,!0,r,i)}function HB(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)HB(n,e[s],t,r,i);else r=Tw(r)?!!r.capture:!!r,t=DO(t),n&&n[xw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vO(s=n.g[e],t,r,i))&&(mS(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=IO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vO(e,t,r,i)),(t=-1<n?e[n]:null)&&EO(t))}function EO(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[xw])_O(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($B(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=IO(e))?(_O(t,n),0==t.h&&(t.src=null,e[bO]=null)):mS(n)}}}function $B(n){return n in wO?wO[n]:wO[n]="on"+n}function x8(n,e){if(n.fa)n=!0;else{e=new Sw(e,this);var t=n.listener,r=n.la||n.src;n.ia&&EO(n),n=t.call(r,e)}return n}function IO(n){return(n=n[bO])instanceof yS?n:null}var CO="__closure_events_fn_"+(1e9*Math.random()>>>0);function DO(n){return"function"==typeof n?n:(n[CO]||(n[CO]=function(e){return n.handleEvent(e)}),n[CO])}function pi(){Od.call(this),this.i=new yS(this),this.S=this,this.J=null}function xi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new zi(e,n);else if(e instanceof zi)e.target=e.target||n;else{var i=e;VB(e=new zi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=_S(o,r,!0,e)&&i}if(i=_S(o=e.g=n,r,!0,e)&&i,i=_S(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=_S(o=e.g=t[s],r,!1,e)&&i}function _S(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var c=o.listener,d=o.la||o.src;o.ia&&_O(n.i,o),i=!1!==c.call(d,r)&&i}}return i&&!r.defaultPrevented}fi(pi,Od),pi.prototype[xw]=!0,pi.prototype.removeEventListener=function(n,e,t,r){HB(this,n,e,t,r)},pi.prototype.N=function(){if(pi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)mS(t[r]);delete n.g[e],n.h--}}this.J=null},pi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},pi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var TO=Ht.JSON.stringify;function A8(){var n=WB;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var SO,zB=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new k8,n=>n.reset());class k8{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function R8(n){Ht.setTimeout(()=>{throw n},0)}function GB(n,e){SO||function P8(){var n=Ht.Promise.resolve(void 0);SO=function(){n.then(O8)}}(),xO||(SO(),xO=!0),WB.add(n,e)}var xO=!1,WB=new class M8{constructor(){this.h=this.g=null}add(e,t){const r=zB.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function O8(){for(var n;n=A8();){try{n.h.call(n.g)}catch(t){R8(t)}var e=zB;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}xO=!1}function vS(n,e){pi.call(this),this.h=n||1,this.g=e||Ht,this.j=$i(this.qb,this),this.l=Date.now()}function AO(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function MO(n,e,t){if("function"==typeof n)t&&(n=$i(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$i(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ht.setTimeout(n,e||0)}function qB(n){n.g=MO(()=>{n.g=null,n.i&&(n.i=!1,qB(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}fi(vS,pi),(st=vS.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xi(this,"tick"),this.ga&&(AO(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){vS.$.N.call(this),AO(this),delete this.g};class N8 extends Od{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qB(this)}N(){super.N(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aw(n){Od.call(this),this.h=n,this.g={}}fi(Aw,Od);var ZB=[];function KB(n,e,t,r){Array.isArray(t)||(t&&(ZB[0]=t.toString()),t=ZB);for(var i=0;i<t.length;i++){var s=UB(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function YB(n){yO(n.g,function(e,t){this.g.hasOwnProperty(t)&&EO(e)},n),n.g={}}function bS(){this.g=!0}function e_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function U8(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return TO(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Aw.prototype.N=function(){Aw.$.N.call(this),YB(this)},Aw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bS.prototype.Ea=function(){this.g=!1},bS.prototype.info=function(){};var kp={},QB=null;function wS(){return QB=QB||new pi}function XB(n){zi.call(this,kp.Ta,n)}function Mw(n){const e=wS();xi(e,new XB(e))}function JB(n,e){zi.call(this,kp.STAT_EVENT,n),this.stat=e}function gs(n){const e=wS();xi(e,new JB(e,n))}function ej(n,e){zi.call(this,kp.Ua,n),this.size=e}function kw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},e)}kp.Ta="serverreachability",fi(XB,zi),kp.STAT_EVENT="statevent",fi(JB,zi),kp.Ua="timingevent",fi(ej,zi);var ES={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},tj={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function kO(){}function rj(){}kO.prototype.h=null;var OO,Rw={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function RO(){zi.call(this,"d")}function PO(){zi.call(this,"c")}function IS(){}function Pw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Aw(this),this.P=B8,this.V=new vS(n=hO?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new ij}function ij(){this.i=null,this.g="",this.h=!1}fi(RO,zi),fi(PO,zi),fi(IS,kO),IS.prototype.g=function(){return new XMLHttpRequest},IS.prototype.i=function(){return{}},OO=new IS;var B8=45e3,NO={},CS={};function FO(n,e,t){n.L=1,n.v=xS(Zu(e)),n.s=t,n.S=!0,sj(n,null)}function sj(n,e){n.G=Date.now(),Ow(n),n.A=Zu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),gj(t.i,"t",r),n.C=0,t=n.l.I,n.h=new ij,n.g=Uj(n.l,t?e:null,!n.s),0<n.O&&(n.M=new N8($i(n.Pa,n,n.g),n.O)),KB(n.U,n.g,"readystatechange",n.nb),e=n.I?FB(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Mw(),function F8(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",c=s.split("&"),d=0;d<c.length;d++){var g=c[d].split("=");if(1<g.length){var _=g[0];g=g[1];var w=_.split("_");o=2<=w.length&&"type"==w[1]?o+(_+"=")+g+"&":o+(_+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function oj(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function aj(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=j8(n,t),i==CS){4==e&&(n.o=4,gs(14),r=!1),e_(n.j,n.m,null,"[Incomplete Response]");break}if(i==NO){n.o=4,gs(15),e_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}e_(n.j,n.m,i,null),LO(n,i)}oj(n)&&i!=CS&&i!=NO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,gs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),GO(e),e.L=!0,gs(11))):(e_(n.j,n.m,t,"[Invalid Chunked Response]"),Rp(n),Nw(n))}function j8(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?CS:(t=Number(e.substring(t,r)),isNaN(t)?NO:(r+=1)+t>e.length?CS:(e=e.substr(r,t),n.C=r+t,e))}function Ow(n){n.Y=Date.now()+n.P,lj(n,n.P)}function lj(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kw($i(n.lb,n),e)}function DS(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function Nw(n){0==n.l.H||n.J||Nj(n.l,n)}function Rp(n){DS(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,AO(n.V),YB(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function LO(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||VO(t.h,n)))if(!n.K&&VO(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;OS(t),RS(t)}zO(t),gs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=kw($i(t.ib,t),6e3));if(1>=_j(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Op(t,11)}else if((n.K||t.g==n)&&OS(t),!fS(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(t.V=g[0],g=g[1],2==t.H)if("c"==g[0]){t.J=g[1],t.oa=g[2];const _=g[3];null!=_&&(t.qa=_,t.j.info("VER="+t.qa));const w=g[4];null!=w&&(t.Ga=w,t.j.info("SVER="+t.Ga));const T=g[5];null!=T&&"number"==typeof T&&0<T&&(t.K=r=1.5*T,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const S=n.g;if(S){const M=S.g?S.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(M){var s=r.h;s.g||-1==M.indexOf("spdy")&&-1==M.indexOf("quic")&&-1==M.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(UO(s,s.h),s.h=null))}if(r.F){const R=S.g?S.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(r.Da=R,sr(r.G,r.F,R))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=Vj(r,r.I?r.oa:null,r.Y),o.K){vj(r.h,o);var c=o,d=r.K;d&&c.setTimeout(d),c.B&&(DS(c),Ow(c)),r.g=o}else Pj(r);0<t.i.length&&PS(t)}else"stop"!=g[0]&&"close"!=g[0]||Op(t,7);else 3==t.H&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?Op(t,7):$O(t):"noop"!=g[0]&&t.l&&t.l.Aa(g),t.A=0)}Mw()}catch{}}function uj(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dS(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function $8(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(dS(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function H8(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(dS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(st=Pw.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==Ku(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const _=Ku(this.g);var e=this.g.Ia();if(this.g.da(),!(3>_)&&(3!=_||hO||this.g&&(this.h.h||this.g.ja()||Sj(this.g)))){this.J||4!=_||7==e||Mw(),DS(this);var t=this.g.da();this.aa=t;t:if(oj(this)){var r=Sj(this.g);n="";var i=r.length,s=4==Ku(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rp(this),Nw(this);var o="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function L8(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,_,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var c,d=this.g;if((c=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fS(c)){var g=c;break t}}g=null}if(!(t=g)){this.i=!1,this.o=3,gs(12),Rp(this),Nw(this);break e}e_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,LO(this,t)}this.S?(aj(this,_,o),hO&&this.i&&3==_&&(KB(this.U,this.V,"tick",this.mb),this.V.start())):(e_(this.j,this.m,o,null),LO(this,o)),4==_&&Rp(this),this.i&&!this.J&&(4==_?Nj(this.l,this):(this.i=!1,Ow(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,gs(12)):(this.o=0,gs(13)),Rp(this),Nw(this)}}}catch{}},st.mb=function(){if(this.g){var n=Ku(this.g),e=this.g.ja();this.C<e.length&&(DS(this),aj(this,n,e),this.i&&4!=n&&Ow(this))}},st.cancel=function(){this.J=!0,Rp(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function V8(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Mw(),gs(17)),Rp(this),this.o=2,Nw(this)):lj(this,this.Y-n)};var cj=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Pp){this.h=void 0!==e?e:n.h,TS(this,n.j),this.s=n.s,this.g=n.g,SS(this,n.m),this.l=n.l,e=n.i;var t=new Vw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),dj(this,t),this.o=n.o}else n&&(t=String(n).match(cj))?(this.h=!!e,TS(this,t[1]||"",!0),this.s=Fw(t[2]||""),this.g=Fw(t[3]||"",!0),SS(this,t[4]),this.l=Fw(t[5]||"",!0),dj(this,t[6]||"",!0),this.o=Fw(t[7]||"")):(this.h=!!e,this.i=new Vw(null,this.h))}function Zu(n){return new Pp(n)}function TS(n,e,t){n.j=t?Fw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function SS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dj(n,e,t){e instanceof Vw?(n.i=e,function Y8(n,e){e&&!n.j&&(Nd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(fj(this,r),gj(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Lw(e,Z8)),n.i=new Vw(e,n.h))}function sr(n,e,t){n.i.set(e,t)}function xS(n){return sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Fw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,G8),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function G8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lw(e,hj,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Lw(e,hj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Lw(t,"/"==t.charAt(0)?q8:W8,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lw(t,K8)),n.join("")};var hj=/[#\/\?@]/g,W8=/[#\?:]/g,q8=/[#\?]/g,Z8=/[#\?@]/g,K8=/#/g;function Vw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Nd(n){n.g||(n.g=new Map,n.h=0,n.i&&function z8(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fj(n,e){Nd(n),e=t_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function pj(n,e){return Nd(n),e=t_(n,e),n.g.has(e)}function gj(n,e,t){fj(n,e),0<t.length&&(n.i=null,n.g.set(t_(n,e),uO(t)),n.h+=t.length)}function t_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function mj(n){this.l=n||X8,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ka&&Ht.g.Ka()&&Ht.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=Vw.prototype).add=function(n,e){Nd(this),this.i=null,n=t_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){Nd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.sa=function(){Nd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},st.Z=function(n){Nd(this);let e=[];if("string"==typeof n)pj(this,n)&&(e=e.concat(this.g.get(t_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return Nd(this),this.i=null,pj(this,n=t_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var X8=10;function yj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function _j(n){return n.h?1:n.g?n.g.size:0}function VO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function UO(n,e){n.g?n.g.add(e):n.h=e}function vj(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function bj(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return uO(n.i)}function BO(){}function J8(){this.g=new BO}function e7(n,e,t){const r=t||"";try{uj(n,function(i,s){let o=i;Tw(i)&&(o=TO(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function AS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Uw(n){this.l=n.fc||null,this.j=n.ob||!1}function MS(n,e){pi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=jO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mj.prototype.cancel=function(){if(this.i=bj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},BO.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},BO.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},fi(Uw,kO),Uw.prototype.g=function(){return new MS(this.l,this.j)},Uw.prototype.i=function(n){return function(){return n}}({}),fi(MS,pi);var jO=0;function wj(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Bw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jw(n)}function jw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=MS.prototype).open=function(n,e){if(this.readyState!=jO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jw(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ht).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bw(this)),this.readyState=jO},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jw(this)),this.g&&(this.readyState=3,jw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ht.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wj(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bw(this):jw(this),3==this.readyState&&wj(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,Bw(this))},st.Ya=function(n){this.g&&(this.response=n,Bw(this))},st.ka=function(){this.g&&Bw(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(MS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var n7=Ht.JSON.parse;function Tr(n){pi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ej,this.L=this.M=!1}fi(Tr,pi);var Ej="",r7=/^https?$/i,i7=["POST","PUT"];function Ij(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cj(n),kS(n)}function Cj(n){n.F||(n.F=!0,xi(n,"complete"),xi(n,"error"))}function Dj(n){if(n.h&&typeof aO<"u"&&(!n.C[1]||4!=Ku(n)||2!=n.da()))if(n.v&&4==Ku(n))MO(n.La,0,n);else if(xi(n,"readystatechange"),4==Ku(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(cj)[1]||null;if(!i&&Ht.self&&Ht.self.location){var s=Ht.self.location.protocol;i=s.substr(0,s.length-1)}r=!r7.test(i?i.toLowerCase():"")}t=r}if(t)xi(n,"complete"),xi(n,"success");else{n.m=6;try{var o=2<Ku(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",Cj(n)}}finally{kS(n)}}}function kS(n,e){if(n.g){Tj(n);const t=n.g,r=n.C[0]?cS:null;n.g=null,n.C=null,e||xi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Tj(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function Ku(n){return n.g?n.g.readyState:0}function Sj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Ej:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xj(n){let e="";return yO(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function HO(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=xj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):sr(n,e,t))}function Hw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Aj(n){this.Ga=0,this.i=[],this.j=new bS,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Hw("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Hw("baseRetryDelayMs",5e3,n),this.hb=Hw("retryDelaySeedMs",1e4,n),this.eb=Hw("forwardChannelMaxRetries",2,n),this.xa=Hw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new mj(n&&n.concurrentRequestLimit),this.Ja=new J8,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function $O(n){if(Mj(n),3==n.H){var e=n.W++,t=Zu(n.G);sr(t,"SID",n.J),sr(t,"RID",e),sr(t,"TYPE","terminate"),$w(n,t),(e=new Pw(n,n.j,e,void 0)).L=2,e.v=xS(Zu(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(t=Ht.navigator.sendBeacon(e.v.toString(),"")),!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=Uj(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ow(e)}Lj(n)}function RS(n){n.g&&(GO(n),n.g.cancel(),n.g=null)}function Mj(n){RS(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),OS(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function PS(n){yj(n.h)||n.m||(n.m=!0,GB(n.Na,n),n.C=0)}function kj(n,e){var t;t=e?e.m:n.W++;const r=Zu(n.G);sr(r,"SID",n.J),sr(r,"RID",t),sr(r,"AID",n.V),$w(n,r),n.o&&n.s&&HO(r,n.o,n.s),t=new Pw(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=Rj(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),UO(n.h,t),FO(t,r,e)}function $w(n,e){n.ma&&yO(n.ma,function(t,r){sr(e,r,t)}),n.l&&uj({},function(t,r){sr(e,r,t)})}function Rj(n,e,t){t=Math.min(n.i.length,t);var r=n.l?$i(n.l.Va,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let c=!0;for(let d=0;d<t;d++){let g=i[d].h;const _=i[d].g;if(g-=s,0>g)s=Math.max(0,i[d].h-100),c=!1;else try{e7(_,o,"req"+g+"_")}catch{r&&r(_)}}if(c){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function Pj(n){n.g||n.u||(n.ba=1,GB(n.Ma,n),n.A=0)}function zO(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kw($i(n.Ma,n),Fj(n,n.A)),n.A++,0))}function GO(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function Oj(n){n.g=new Pw(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Zu(n.wa);sr(e,"RID","rpc"),sr(e,"SID",n.J),sr(e,"CI",n.M?"0":"1"),sr(e,"AID",n.V),sr(e,"TYPE","xmlhttp"),$w(n,e),n.o&&n.s&&HO(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=xS(Zu(e)),t.s=null,t.S=!0,sj(t,n)}function OS(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function Nj(n,e){var t=null;if(n.g==e){OS(n),GO(n),n.g=null;var r=2}else{if(!VO(n.h,e))return;t=e.F,vj(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;xi(r=wS(),new ej(r,t)),PS(n)}else Pj(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function o7(n,e){return!(_j(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kw($i(n.Na,n,e),Fj(n,n.C)),n.C++,0)))}(n,e)||2==r&&zO(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Op(n,5);break;case 4:Op(n,10);break;case 3:Op(n,6);break;default:Op(n,2)}}function Fj(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Op(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=$i(n.pb,n);t||(t=new Pp("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||TS(t,"https"),xS(t)),function t7(n,e){const t=new bS;if(Ht.Image){const r=new Image;r.onload=hS(AS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hS(AS,t,r,"TestLoadImage: error",!1,e),r.onabort=hS(AS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hS(AS,t,r,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else gs(2);n.H=0,n.l&&n.l.za(e),Lj(n),Mj(n)}function Lj(n){if(n.H=0,n.pa=[],n.l){const e=bj(n.h);(0!=e.length||0!=n.i.length)&&(AB(n.pa,e),AB(n.pa,n.i),n.h.i.length=0,uO(n.i),n.i.length=0),n.l.ya()}}function Vj(n,e,t){var r=t instanceof Pp?Zu(t):new Pp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),SS(r,r.m);else{var i=Ht.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Pp(null,void 0);r&&TS(s,r),e&&(s.g=e),i&&SS(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&sr(r,t,e),sr(r,"VER",n.qa),$w(n,r),r}function Uj(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tr(t&&n.Ha&&!n.va?new Uw({ob:!0}):n.va)).Oa(n.I),e}function Bj(){}function NS(){if(Jy&&!(10<=Number(I8)))throw Error("Environmental error: no available transport.")}function uo(n,e){pi.call(this),this.g=new Aj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!fS(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fS(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new n_(this)}function jj(n){RO.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Hj(){PO.call(this),this.status=1}function n_(n){this.g=n}function Sa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function WO(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Sn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(st=Tr.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():OO.g(),this.C=function nj(n){return n.h||(n.h=n.i())}(this.u?this.u:OO),this.g.onreadystatechange=$i(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void Ij(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Ht.FormData&&n instanceof Ht.FormData,!(0<=xB(i7,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Tj(this),0<this.B&&((this.L=function s7(n){return Jy&&function E8(){return kB(w8,9,function(){let n=0;const e=MB(String(gS)).split("."),t=MB("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=cO(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||cO(0==i[2].length,0==s[2].length)||cO(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$i(this.ua,this)):this.A=MO(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Ij(this,s)}},st.ua=function(){typeof aO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xi(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,xi(this,"complete"),xi(this,"abort"),kS(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kS(this,!0)),Tr.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?Dj(this):this.kb())},st.kb=function(){Dj(this)},st.da=function(){try{return 2<Ku(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),n7(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=Aj.prototype).qa=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Pw(this,this.j,n,void 0);let s=this.s;if(this.U&&(s?(s=FB(s),VB(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Rj(this,i,e),sr(t=Zu(this.G),"RID",n),sr(t,"CVER",22),this.F&&sr(t,"X-HTTP-Session-Id",this.F),$w(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(xj(s)))+"&"+e:this.o&&HO(t,this.o,s)),UO(this.h,i),this.bb&&sr(t,"TYPE","init"),this.P?(sr(t,"$req",e),sr(t,"SID","null"),i.ba=!0,FO(i,t,null)):FO(i,t,e),this.H=2}}else 3==this.H&&(n?kj(this,n):0==this.i.length||yj(this.h)||kj(this))},st.Ma=function(){if(this.u=null,Oj(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=kw($i(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,gs(10),RS(this),Oj(this))},st.ib=function(){null!=this.v&&(this.v=null,RS(this),zO(this),gs(19))},st.pb=function(n){n?(this.j.info("Successfully pinged google.com"),gs(2)):(this.j.info("Failed to ping google.com"),gs(1))},(st=Bj.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.Va=function(){},NS.prototype.g=function(n,e){return new uo(n,e)},fi(uo,pi),uo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;gs(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=Vj(n,null,n.Y),PS(n)},uo.prototype.close=function(){$O(this.g)},uo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=TO(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&PS(e)},uo.prototype.N=function(){this.g.l=null,delete this.j,$O(this.g),delete this.g,uo.$.N.call(this)},fi(jj,RO),fi(Hj,PO),fi(n_,Bj),n_.prototype.Ba=function(){xi(this.g,"a")},n_.prototype.Aa=function(n){xi(this.g,new jj(n))},n_.prototype.za=function(n){xi(this.g,new Hj)},n_.prototype.ya=function(){xi(this.g,"b")},fi(Sa,function a7(){this.blockSize=-1}),Sa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Sa.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)WO(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){WO(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){WO(this,r),i=0;break}}this.h=i,this.i+=e},Sa.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var l7={};function qO(n){return-128<=n&&128>n?kB(l7,n,function(e){return new Sn([0|e],0>e?-1:0)}):new Sn([0|n],0>n?-1:0)}function wl(n){if(isNaN(n)||!isFinite(n))return r_;if(0>n)return Ai(wl(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=ZO;return new Sn(e,0)}var ZO=4294967296,r_=qO(0),KO=qO(1),zj=qO(16777216);function Yu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Bo(n){return-1==n.h}function Ai(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Sn(t,~n.h).add(KO)}function FS(n,e){return n.add(Ai(e))}function LS(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function zw(n,e){this.g=n,this.h=e}function VS(n,e){if(Yu(e))throw Error("division by zero");if(Yu(n))return new zw(r_,r_);if(Bo(n))return e=VS(Ai(n),e),new zw(Ai(e.g),Ai(e.h));if(Bo(e))return e=VS(n,Ai(e)),new zw(Ai(e.g),e.h);if(30<n.g.length){if(Bo(n)||Bo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=KO,r=e;0>=r.X(n);)t=Gj(t),r=Gj(r);var i=i_(t,1),s=i_(r,1);for(r=i_(r,2),t=i_(t,2);!Yu(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=i_(r,1),t=i_(t,1)}return e=FS(n,i.R(e)),new zw(i,e)}for(i=r_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=wl(t)).R(e);Bo(o)||0<o.X(n);)o=(s=wl(t-=r)).R(e);Yu(s)&&(s=KO),i=i.add(s),n=FS(n,o)}return new zw(i,n)}function Gj(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Sn(t,n.h)}function i_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Sn(i,n.h)}(st=Sn.prototype).ea=function(){if(Bo(this))return-Ai(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:ZO+r)*e,e*=ZO}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Yu(this))return"0";if(Bo(this))return"-"+Ai(this).toString(n);for(var e=wl(Math.pow(n,6)),t=this,r="";;){var i=VS(t,e).g,s=((0<(t=FS(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Yu(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return Bo(n=FS(this,n))?-1:Yu(n)?0:1},st.abs=function(){return Bo(this)?Ai(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new Sn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(Yu(this)||Yu(n))return r_;if(Bo(this))return Bo(n)?Ai(this).R(Ai(n)):Ai(Ai(this).R(n));if(Bo(n))return Ai(this.R(Ai(n)));if(0>this.X(zj)&&0>n.X(zj))return wl(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),c=n.D(i)>>>16,d=65535&n.D(i);t[2*r+2*i]+=o*d,LS(t,2*r+2*i),t[2*r+2*i+1]+=s*d,LS(t,2*r+2*i+1),t[2*r+2*i+1]+=o*c,LS(t,2*r+2*i+1),t[2*r+2*i+2]+=s*c,LS(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Sn(t,0)},st.gb=function(n){return VS(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Sn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Sn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Sn(t,this.h^n.h)},NS.prototype.createWebChannel=NS.prototype.g,uo.prototype.send=uo.prototype.u,uo.prototype.open=uo.prototype.m,uo.prototype.close=uo.prototype.close,ES.NO_ERROR=0,ES.TIMEOUT=8,ES.HTTP_ERROR=6,tj.COMPLETE="complete",rj.EventType=Rw,Rw.OPEN="a",Rw.CLOSE="b",Rw.ERROR="c",Rw.MESSAGE="d",pi.prototype.listen=pi.prototype.O,Tr.prototype.listenOnce=Tr.prototype.P,Tr.prototype.getLastError=Tr.prototype.Sa,Tr.prototype.getLastErrorCode=Tr.prototype.Ia,Tr.prototype.getStatus=Tr.prototype.da,Tr.prototype.getResponseJson=Tr.prototype.Wa,Tr.prototype.getResponseText=Tr.prototype.ja,Tr.prototype.send=Tr.prototype.ha,Tr.prototype.setWithCredentials=Tr.prototype.Oa,Sa.prototype.digest=Sa.prototype.l,Sa.prototype.reset=Sa.prototype.reset,Sa.prototype.update=Sa.prototype.j,Sn.prototype.add=Sn.prototype.add,Sn.prototype.multiply=Sn.prototype.R,Sn.prototype.modulo=Sn.prototype.gb,Sn.prototype.compare=Sn.prototype.X,Sn.prototype.toNumber=Sn.prototype.ea,Sn.prototype.toString=Sn.prototype.toString,Sn.prototype.getBits=Sn.prototype.D,Sn.fromNumber=wl,Sn.fromString=function $j(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ai($j(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=wl(Math.pow(e,8)),r=r_,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=wl(Math.pow(e,s)),r=r.R(s).add(wl(o))):r=(r=r.R(t)).add(wl(o))}return r};var u7=Ta.createWebChannelTransport=function(){return new NS},c7=Ta.getStatEventTarget=function(){return wS()},YO=Ta.ErrorCode=ES,d7=Ta.EventType=tj,h7=Ta.Event=kp,Wj=Ta.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},f7=Ta.FetchXmlHttpFactory=Uw,US=Ta.WebChannel=rj,p7=Ta.XhrIo=Tr,g7=Ta.Md5=Sa,s_=Ta.Integer=Sn;const qj="@firebase/firestore";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let o_="9.22.0";const Fd=new Ca.Yd("@firebase/firestore");function QO(){return Fd.logLevel}function Fe(n,...e){if(Fd.logLevel<=Ca.in.DEBUG){const t=e.map(XO);Fd.debug(`Firestore (${o_}): ${n}`,...t)}}function Fr(n,...e){if(Fd.logLevel<=Ca.in.ERROR){const t=e.map(XO);Fd.error(`Firestore (${o_}): ${n}`,...t)}}function jo(n,...e){if(Fd.logLevel<=Ca.in.WARN){const t=e.map(XO);Fd.warn(`Firestore (${o_}): ${n}`,...t)}}function XO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${o_}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function wt(n,e){n||lt()}function et(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends at.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class v7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class b7{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let o=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jr,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const g=o;e.enqueueRetryable((0,Q.Z)(function*(){yield g.promise,yield s(r.currentUser)}))},d=g=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new Zj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new gi(e)}}class w7{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class E7{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new w7(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I7{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new Kj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function C7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Yj{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=C7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function a_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Qj(n){return n+"\0"}class or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new or(0,0))}static max(){return new Et(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gw{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends Gw{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const D7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends Gw{construct(e,t,r){return new Sr(e,t,r)}static isValidIdentifier(e){return D7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new De(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new De(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if("\\"!==d&&"."!==d&&"`"!==d)throw new De(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else"`"===c?(o=!o,i++):"."!==c||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new De(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(t)}static emptyPath(){return new Sr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(mn.fromString(e))}static fromName(e){return new Qe(mn.fromString(e).popFirst(5))}static empty(){return new Qe(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new mn(e.slice()))}}class BS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function JO(n){return n.fields.find(e=>2===e.kind)}function Np(n){return n.fields.filter(e=>2!==e.kind)}BS.UNKNOWN_ID=-1;class jS{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ww{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ww(0,co.min())}}function Xj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(1e9===r?new or(t+1,0):new or(t,r));return new co(i,Qe.empty(),e)}function Jj(n){return new co(n.readTime,n.key,-1)}class co{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new co(Et.min(),Qe.empty(),-1)}static max(){return new co(Et.max(),Qe.empty(),-1)}}function eN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const eH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ld(n){return tN.apply(this,arguments)}function tN(){return tN=(0,Q.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==eH)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),tN.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},d=>r(d))}),o=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let d=0;d<s;d++){const g=d;t(e[g]).next(_=>{o[g]=_,++c,c===s&&r(o)},_=>i(_))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class HS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Jr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new qw(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=nN(r.target.error);this.v.reject(new qw(e,i))}}static open(e,t,r,i){try{return new HS(t,e.transaction(i,r))}catch(s){throw new qw(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new A7(t)}}class xa{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===xa.S((0,at.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Fp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,at.hl)())return!1;if(xa.C())return!0;const e=(0,at.z$)(),t=xa.S(e),r=0<t&&t<10,i=xa.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Q.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new qw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;i("VersionError"===c.name?new De(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new De(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new qw(e,c))},s.onupgradeneeded=o=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.V.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Q.Z)(function*(){const o="readonly"===t;let c=0;for(;;){++c;try{s.db=yield s.$(e);const d=HS.open(s.db,e,o?"readonly":"readwrite",r),g=i(d).next(_=>(d.P(),_)).catch(_=>(d.abort(_),oe.reject(_))).toPromise();return g.catch(()=>{}),yield d.R,g}catch(d){const g=d,_="FirebaseError"!==g.name&&c<3;if(Fe("SimpleDb","Transaction failed with error:",g.message,"Retrying:",_),s.close(),!_)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class x7{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Fp(this.L.delete())}}class qw extends De{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vd(n){return"IndexedDbTransactionError"===n.name}class A7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fp(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Fp(this.store.add(e))}get(e){return Fp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Fp(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Fp(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(o,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new oe((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,o,c)=>c.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=s=>{const o=nN(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(c=>{c?o.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const d=new x7(c),g=t(c.primaryKey,c.value,d);if(g instanceof oe){const _=g.catch(w=>(d.done(),oe.reject(w)));r.push(_)}d.isDone?i():null===d.K?c.continue():c.continue(d.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fp(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=nN(r.target.error);t(i)}})}let nH=!1;function nN(n){const e=xa.S((0,at.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nH||(nH=!0,setTimeout(()=>{throw r},0)),r}}return n}class M7{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Q.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Vd(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ld(r)}yield t.et(6e4)}))}}class k7{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Q.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return oe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Fe("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,i).next(c=>{i-=c,r.add(o)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(i,s)).next(c=>(Fe("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>o.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=Jj(s);eN(o,r)>0&&(r=o)}),new co(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ho=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Zw(n){return null==n}function Kw(n){return 0===n&&1/n==-1/0}function rH(n){return"number"==typeof n&&Number.isInteger(n)&&!Kw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iH(e)),e=R7(n.get(t),e);return iH(e)}function R7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function iH(n){return n+"\x01\x01"}function El(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&lt(),n.charAt(o+1)){case"\x01":const c=n.substring(s,o);let d;0===i.length?d=c:(i+=c,d=i,i=""),r.push(d);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:lt()}s=o+2}return new mn(r)}const sH=["userId","batchId"];function $S(n,e){return[n,Gi(e)]}function oH(n,e,t){return[n,Gi(e),t]}const P7={},O7=["prefixPath","collectionGroup","readTime","documentId"],N7=["prefixPath","collectionGroup","documentId"],F7=["collectionGroup","readTime","prefixPath","documentId"],L7=["canonicalId","targetId"],V7=["targetId","path"],U7=["path","targetId"],B7=["collectionId","parent"],j7=["indexId","uid"],H7=["uid","sequenceNumber"],$7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],z7=["indexId","uid","orderedDocumentKey"],G7=["userId","collectionPath","documentId"],W7=["userId","collectionPath","largestBatchId"],q7=["userId","collectionGroup","largestBatchId"],aH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Z7=[...aH,"documentOverlays"],lH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uH=lH,K7=[...uH,"indexConfiguration","indexState","indexEntries"];class rN extends tH{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function mi(n,e){const t=et(n);return xa.M(t.ht,e)}function cH(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ud(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jn{constructor(e,t){this.comparator=e,this.root=t||Mi.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mi.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zS(this.root,e,this.comparator,!1)}getReverseIterator(){return new zS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zS(this.root,e,this.comparator,!0)}}class zS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Mi.RED,this.left=i??Mi.EMPTY,this.right=s??Mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Mi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Mi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Mi.EMPTY=null,Mi.RED=!0,Mi.BLACK=!1,Mi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Mi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hH(this.data.getIterator())}getIteratorFrom(e){return new hH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wn(this.comparator);return t.data=e,t}}class hH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function l_(n){return n.hasNext()?n.getNext():void 0}class Vs{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new Vs([])}unionWith(e){let t=new Wn(Sr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return a_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class fH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new fH("Invalid base64 string: "+i):i}}(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const Q7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bd(n){if(wt(!!n),"string"==typeof n){let e=0;const t=Q7.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xr(n.seconds),nanos:xr(n.nanos)}}function xr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Qu(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function GS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function WS(n){const e=n.mapValue.fields.__previous_value__;return GS(e)?WS(e):e}function Yw(n){const e=Bd(n.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}class X7{constructor(e,t,r,i,s,o,c,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=g}}class jd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jd&&e.projectId===this.projectId&&e.database===this.database}}const Hd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qS={nullValue:"NULL_VALUE"};function $d(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?GS(n)?4:yH(n)?9007199254740991:10:lt()}function Il(n,e){if(n===e)return!0;const t=$d(n);if(t!==$d(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yw(n).isEqual(Yw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Bd(r.timestampValue),o=Bd(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Qu(n.bytesValue).isEqual(Qu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return xr(r.geoPointValue.latitude)===xr(i.geoPointValue.latitude)&&xr(r.geoPointValue.longitude)===xr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xr(r.integerValue)===xr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=xr(r.doubleValue),o=xr(i.doubleValue);return s===o?Kw(s)===Kw(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return a_(n.arrayValue.values||[],e.arrayValue.values||[],Il);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(cH(s)!==cH(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===o[c]||!Il(s[c],o[c])))return!1;return!0}(n,e);default:return lt()}var i}function Qw(n,e){return void 0!==(n.values||[]).find(t=>Il(t,e))}function zd(n,e){if(n===e)return 0;const t=$d(n),r=$d(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=xr(i.integerValue||i.doubleValue),c=xr(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(n,e);case 3:return pH(n.timestampValue,e.timestampValue);case 4:return pH(Yw(n),Yw(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(i,s){const o=Qu(i),c=Qu(s);return o.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const g=jt(o[d],c[d]);if(0!==g)return g}return jt(o.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=jt(xr(i.latitude),xr(s.latitude));return 0!==o?o:jt(xr(i.longitude),xr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],c=s.values||[];for(let d=0;d<o.length&&d<c.length;++d){const g=zd(o[d],c[d]);if(g)return g}return jt(o.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Hd.mapValue&&s===Hd.mapValue)return 0;if(i===Hd.mapValue)return 1;if(s===Hd.mapValue)return-1;const o=i.fields||{},c=Object.keys(o),d=s.fields||{},g=Object.keys(d);c.sort(),g.sort();for(let _=0;_<c.length&&_<g.length;++_){const w=jt(c[_],g[_]);if(0!==w)return w;const T=zd(o[c[_]],d[g[_]]);if(0!==T)return T}return jt(c.length,g.length)}(n.mapValue,e.mapValue);default:throw lt()}}function pH(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=Bd(n),r=Bd(e),i=jt(t.seconds,r.seconds);return 0!==i?i:jt(t.nanos,r.nanos)}function u_(n){return iN(n)}function iN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Bd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Qu(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=iN(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${iN(r.fields[c])}`;return s+"}"}(n.mapValue):lt();var e}function Lp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sN(n){return!!n&&"integerValue"in n}function Xw(n){return!!n&&"arrayValue"in n}function gH(n){return!!n&&"nullValue"in n}function mH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function KS(n){return!!n&&"mapValue"in n}function Jw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ud(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function J7(n){return"nullValue"in n?qS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lp(jd.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function eZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lp(jd.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Hd:lt()}function _H(n,e){const t=zd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vH(n,e){const t=zd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!KS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jw(t)}setAll(e){let t=Sr.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=Jw(o):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());KS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Il(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];KS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ud(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ki(Jw(this.value))}}function bH(n){const e=[];return Ud(n.fields,(t,r)=>{const i=new Sr([t]);if(KS(r)){const s=bH(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vs(e)}class qn{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new qn(e,0,Et.min(),Et.min(),Et.min(),ki.empty(),0)}static newFoundDocument(e,t,r,i){return new qn(e,1,t,Et.min(),r,i,0)}static newNoDocument(e,t){return new qn(e,2,t,Et.min(),Et.min(),ki.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,Et.min(),Et.min(),ki.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gd{constructor(e,t){this.position=e,this.inclusive=t}}function wH(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Qe.comparator(Qe.fromName(o.referenceValue),t.key):zd(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function EH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Il(n.position[t],e.position[t]))return!1;return!0}class c_{constructor(e,t="asc"){this.field=e,this.dir=t}}function tZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class IH{}class hn extends IH{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nZ(e,t,r):"array-contains"===t?new sZ(e,r):"in"===t?new AH(e,r):"not-in"===t?new oZ(e,r):"array-contains-any"===t?new aZ(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new rZ(e,r):new iZ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(zd(t,this.value)):null!==t&&$d(this.value)===$d(t)&&this.matchesComparison(zd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class xn extends IH{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new xn(e,t)}matches(e){return d_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function d_(n){return"and"===n.op}function oN(n){return"or"===n.op}function aN(n){return CH(n)&&d_(n)}function CH(n){for(const e of n.filters)if(e instanceof xn)return!1;return!0}function lN(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+u_(n.value);if(aN(n))return n.filters.map(e=>lN(e)).join(",");{const e=n.filters.map(t=>lN(t)).join(",");return`${n.op}(${e})`}}function DH(n,e){return n instanceof hn?(t=n,(r=e)instanceof hn&&t.op===r.op&&t.field.isEqual(r.field)&&Il(t.value,r.value)):n instanceof xn?function(t,r){return r instanceof xn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&DH(s,r.filters[o]),!0)}(n,e):void lt();var t,r}function TH(n,e){const t=n.filters.concat(e);return xn.create(t,n.op)}function SH(n){return n instanceof hn?`${(e=n).field.canonicalString()} ${e.op} ${u_(e.value)}`:n instanceof xn?function(e){return e.op.toString()+" {"+e.getFilters().map(SH).join(" ,")+"}"}(n):"Filter";var e}class nZ extends hn{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class rZ extends hn{constructor(e,t){super(e,"in",t),this.keys=xH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iZ extends hn{constructor(e,t){super(e,"not-in",t),this.keys=xH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class sZ extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xw(t)&&Qw(t.arrayValue,this.value)}}class AH extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qw(this.value.arrayValue,t)}}class oZ extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qw(this.value.arrayValue,t)}}class aZ extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qw(this.value.arrayValue,r))}}class lZ{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.dt=null}}function uN(n,e=null,t=[],r=[],i=null,s=null,o=null){return new lZ(n,e,t,r,i,s,o)}function Vp(n){const e=et(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lN(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Zw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>u_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>u_(r)).join(",")),e.dt=t}return e.dt}function eE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EH(n.startAt,e.startAt)&&EH(n.endAt,e.endAt)}function YS(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function QS(n,e){return n.filters.filter(t=>t instanceof hn&&t.field.isEqual(e))}function MH(n,e,t){let r=qS,i=!0;for(const s of QS(n,e)){let o=qS,c=!0;switch(s.op){case"<":case"<=":o=J7(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,c=!1;break;case"!=":case"not-in":o=qS}_H({value:r,inclusive:i},{value:o,inclusive:c})<0&&(r=o,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];_H({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function kH(n,e,t){let r=Hd,i=!0;for(const s of QS(n,e)){let o=Hd,c=!0;switch(s.op){case">=":case">":o=eZ(s.value),c=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,c=!1;break;case"!=":case"not-in":o=Hd}vH({value:r,inclusive:i},{value:o,inclusive:c})>0&&(r=o,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];vH({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Xu{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=d,this.wt=null,this._t=null}}function RH(n,e,t,r,i,s,o,c){return new Xu(n,e,t,r,i,s,o,c)}function h_(n){return new Xu(n)}function PH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function cN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function XS(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function dN(n){return null!==n.collectionGroup}function Up(n){const e=et(n);if(null===e.wt){e.wt=[];const t=XS(e),r=cN(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new c_(t)),e.wt.push(new c_(Sr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new c_(Sr.keyField(),s))}}}return e.wt}function ms(n){const e=et(n);if(!e._t)if("F"===e.limitType)e._t=uN(e.path,e.collectionGroup,Up(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Up(e))t.push(new c_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Gd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Gd(e.startAt.position,e.startAt.inclusive):null;e._t=uN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function hN(n,e){e.getFirstInequalityField(),XS(n);const t=n.filters.concat([e]);return new Xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function JS(n,e,t){return new Xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tE(n,e){return eE(ms(n),ms(e))&&n.limitType===e.limitType}function OH(n){return`${Vp(ms(n))}|lt:${n.limitType}`}function fN(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>SH(r)).join(", ")}]`),Zw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>u_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>u_(r)).join(",")),`Target(${t})`}(ms(n))}; limitType=${n.limitType})`}function nE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Up(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const c=wH(i,s,o);return i.inclusive?c<=0:c<0}(t.startAt,Up(t),r)||t.endAt&&!function(i,s,o){const c=wH(i,s,o);return i.inclusive?c>=0:c>0}(t.endAt,Up(t),r)));var t,r}function NH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FH(n){return(e,t)=>{let r=!1;for(const i of Up(n)){const s=uZ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function uZ(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,s,o){const c=s.data.field(i),d=o.data.field(i);return null!==c&&null!==d?zd(c,d):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}class Ju{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ud(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return dH(this.inner)}size(){return this.innerSize}}const cZ=new jn(Qe.comparator);function Us(){return cZ}const LH=new jn(Qe.comparator);function rE(...n){let e=LH;for(const t of n)e=e.insert(t.key,t);return e}function VH(n){let e=LH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cl(){return iE()}function UH(){return iE()}function iE(){return new Ju(n=>n.toString(),(n,e)=>n.isEqual(e))}const dZ=new jn(Qe.comparator),hZ=new Wn(Qe.comparator);function qt(...n){let e=hZ;for(const t of n)e=e.add(t);return e}const fZ=new Wn(jt);function pN(){return fZ}function BH(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kw(e)?"-0":e}}function jH(n){return{integerValue:""+n}}function HH(n,e){return rH(e)?jH(e):BH(n,e)}class ex{constructor(){this._=void 0}}function pZ(n,e,t){return n instanceof f_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&GS(i)&&(i=WS(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Bp?zH(n,e):n instanceof jp?GH(n,e):function(r,i){const s=$H(r,i),o=WH(s)+WH(r.gt);return sN(s)&&sN(r.gt)?jH(o):BH(r.serializer,o)}(n,e)}function gZ(n,e,t){return n instanceof Bp?zH(n,e):n instanceof jp?GH(n,e):t}function $H(n,e){return n instanceof p_?sN(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class f_ extends ex{}class Bp extends ex{constructor(e){super(),this.elements=e}}function zH(n,e){const t=qH(e);for(const r of n.elements)t.some(i=>Il(i,r))||t.push(r);return{arrayValue:{values:t}}}class jp extends ex{constructor(e){super(),this.elements=e}}function GH(n,e){let t=qH(e);for(const r of n.elements)t=t.filter(i=>!Il(i,r));return{arrayValue:{values:t}}}class p_ extends ex{constructor(e,t){super(),this.serializer=e,this.gt=t}}function WH(n){return xr(n.integerValue||n.doubleValue)}function qH(n){return Xw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class sE{constructor(e,t){this.field=e,this.transform=t}}class yZ{constructor(e,t){this.version=e,this.transformResults=t}}class ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tx(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class nx{}function ZH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new m_(n.key,ar.none()):new g_(n.key,n.data,ar.none());{const t=n.data,r=ki.empty();let i=new Wn(Sr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new ec(n.key,r,new Vs(i.toArray()),ar.none())}}function _Z(n,e,t){n instanceof g_?function(r,i,s){const o=r.value.clone(),c=QH(r.fieldTransforms,i,s.transformResults);o.setAll(c),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof ec?function(r,i,s){if(!tx(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=QH(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(YH(r)),c.setAll(o),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function oE(n,e,t,r){return n instanceof g_?function(i,s,o,c){if(!tx(i.precondition,s))return o;const d=i.value.clone(),g=XH(i.fieldTransforms,c,s);return d.setAll(g),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof ec?function(i,s,o,c){if(!tx(i.precondition,s))return o;const d=XH(i.fieldTransforms,c,s),g=s.data;return g.setAll(YH(i)),g.setAll(d),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(_=>_.field))}(n,e,t,r):(o=t,tx(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function vZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=$H(r.transform,i||null);null!=s&&(null===t&&(t=ki.empty()),t.set(r.field,s))}return t||null}function KH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&a_(t,r,(i,s)=>function mZ(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bp&&r instanceof Bp||t instanceof jp&&r instanceof jp?a_(t.elements,r.elements,Il):t instanceof p_&&r instanceof p_?Il(t.gt,r.gt):t instanceof f_&&r instanceof f_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class g_ extends nx{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ec extends nx{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function YH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function QH(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,gZ(o,c,t[i]))}return r}function XH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,pZ(s,o,e))}return r}class m_ extends nx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gN extends nx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_Z(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=oE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=oE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=UH();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;const d=ZH(o,c);null!==d&&r.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&a_(this.mutations,e.mutations,(t,r)=>KH(t,r))&&a_(this.baseMutations,e.baseMutations,(t,r)=>KH(t,r))}}class yN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=dZ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yN(e,t,r,i)}}class _N{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var $r,yn;function JH(n){switch(n){default:return lt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function e$(n){if(void 0===n)return Fr("GRPC error has no .code"),le.UNKNOWN;switch(n){case $r.OK:return le.OK;case $r.CANCELLED:return le.CANCELLED;case $r.UNKNOWN:return le.UNKNOWN;case $r.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case $r.INTERNAL:return le.INTERNAL;case $r.UNAVAILABLE:return le.UNAVAILABLE;case $r.UNAUTHENTICATED:return le.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case $r.NOT_FOUND:return le.NOT_FOUND;case $r.ALREADY_EXISTS:return le.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return le.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case $r.ABORTED:return le.ABORTED;case $r.OUT_OF_RANGE:return le.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return le.UNIMPLEMENTED;case $r.DATA_LOSS:return le.DATA_LOSS;default:return lt()}}(yn=$r||($r={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class vN{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return rx}static getOrCreateInstance(){return null===rx&&(rx=new vN),rx}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let rx=null;function t$(){return new TextEncoder}const EZ=new s_([4294967295,4294967295],0);function n$(n){const e=t$().encode(n),t=new g7;return t.update(e),new Uint8Array(t.digest())}function r$(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new s_([t,r],0),new s_([i,s],0)]}class bN{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new aE(`Invalid padding: ${t}`);if(r<0)throw new aE(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new aE(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new aE(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=s_.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(s_.fromNumber(r)));return 1===i.compare(EZ)&&(i=new s_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=n$(e),[r,i]=r$(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new bN(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(0===this.It)return;const t=n$(e),[r,i]=r$(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class aE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,uE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lE(Et.min(),i,new jn(jt),Us(),qt())}}class uE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new uE(r,t,qt(),qt(),qt())}}class ix{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class i${constructor(e,t){this.targetId=e,this.Vt=t}}class s${constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class o${constructor(){this.St=0,this.Dt=l$(),this.Ct=ei.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qt(),t=qt(),r=qt();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new uE(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=l$()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class IZ{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Us(),this.zt=a$(),this.Wt=new jn(jt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(YS(o))if(0===i){const c=new Qe(o.path);this.Yt(r,c,qn.newNoDocument(c,Et.min()))}else wt(1===i);else{const c=this.ie(r);if(c!==i){const d=this.re(e,c);0!==d&&(this.ee(r),this.Wt=this.Wt.insert(r,2===d?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=vN.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(g,_,w){var T,S,M,R,N,B;const G={localCacheCount:_,existenceFilterCount:w.count},X=w.unchangedNames;return X&&(G.bloomFilter={applied:0===g,hashCount:null!==(T=X?.hashCount)&&void 0!==T?T:0,bitmapLength:null!==(R=null===(M=null===(S=X?.bits)||void 0===S?void 0:S.bitmap)||void 0===M?void 0:M.length)&&void 0!==R?R:0,padding:null!==(B=null===(N=X?.bits)||void 0===N?void 0:N.padding)&&void 0!==B?B:0}),G}(d,c,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=r;let d,g;try{d=Qu(s).toUint8Array()}catch(_){if(_ instanceof fH)return jo("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw _}try{g=new bN(d,o,c)}catch(_){return jo(_ instanceof aE?"BloomFilter error: ":"Applying bloom filter failed: ",_),1}return 0===g.It?1:i!==t-this.oe(e.targetId,g)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(c)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const c=this.se(o);if(c){if(s.current&&YS(c.target)){const d=new Qe(c.target.path);null!==this.jt.get(d)||this.ae(o,d)||this.Yt(o,d,qn.newNoDocument(d,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let r=qt();this.zt.forEach((s,o)=>{let c=!0;o.forEachWhile(d=>{const g=this.se(d);return!g||"TargetPurposeLimboResolution"===g.purpose||(c=!1,!1)}),c&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new lE(e,t,this.Wt,this.jt,r);return this.jt=Us(),this.zt=a$(),this.Wt=new jn(jt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new o$,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Wn(jt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new o$),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function a$(){return new jn(Qe.comparator)}function l$(){return new jn(Qe.comparator)}const CZ={asc:"ASCENDING",desc:"DESCENDING"},DZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TZ={and:"AND",or:"OR"};class SZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wN(n,e){return n.useProto3Json||Zw(e)?e:{value:e}}function y_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u$(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xZ(n,e){return y_(n,e.toTimestamp())}function Lr(n){return wt(!!n),Et.fromTimestamp(function(e){const t=Bd(e);return new or(t.seconds,t.nanos)}(n))}function EN(n,e){return(t=n,new mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function c$(n){const e=mn.fromString(n);return wt(v$(e)),e}function cE(n,e){return EN(n.databaseId,e.path)}function Dl(n,e){const t=c$(e);if(t.get(1)!==n.databaseId.projectId)throw new De(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(h$(t))}function IN(n,e){return EN(n.databaseId,e)}function d$(n){const e=c$(n);return 4===e.length?mn.emptyPath():h$(e)}function dE(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function h$(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function f$(n,e,t){return{name:cE(n,e),fields:t.value.mapValue.fields}}function p$(n,e,t){const r=Dl(n,e.name),i=Lr(e.updateTime),s=e.createTime?Lr(e.createTime):Et.min(),o=new ki({mapValue:{fields:e.fields}}),c=qn.newFoundDocument(r,i,s,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function hE(n,e){let t;if(e instanceof g_)t={update:f$(n,e.key,e.value)};else if(e instanceof m_)t={delete:cE(n,e.key)};else if(e instanceof ec)t={update:f$(n,e.key,e.data),updateMask:FZ(e.fieldMask)};else{if(!(e instanceof gN))return lt();t={verify:cE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof f_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Bp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof jp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof p_)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:xZ(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function CN(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ar.updateTime(Lr(i.updateTime)):void 0!==i.exists?ar.exists(i.exists):ar.none():ar.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let c=null;"setToServerValue"in o?(wt("REQUEST_TIME"===o.setToServerValue),c=new f_):"appendMissingElements"in o?c=new Bp(o.appendMissingElements.values||[]):"removeAllFromArray"in o?c=new jp(o.removeAllFromArray.values||[]):"increment"in o?c=new p_(s,o.increment):lt();const d=Sr.fromServerFormat(o.fieldPath);return new sE(d,c)}(n,i)):[];var i;if(e.update){const i=Dl(n,e.update.name),s=new ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Vs((e.updateMask.fieldPaths||[]).map(g=>Sr.fromServerFormat(g)));return new ec(i,s,o,t,r)}return new g_(i,s,t,r)}if(e.delete){const i=Dl(n,e.delete);return new m_(i,t)}if(e.verify){const i=Dl(n,e.verify);return new gN(i,t)}return lt()}function g$(n,e){return{documents:[IN(n,e.path)]}}function DN(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=IN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=IN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(d){if(0!==d.length)return _$(xn.create(d,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(d){if(0!==d.length)return d.map(g=>{return{field:Wd((_=g).field),direction:PZ(_.dir)};var _})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=wN(n,e.limit);var c,d;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt={before:!(d=e.endAt).inclusive,values:d.position}),t}function m$(n){let e=d$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let s=[];t.where&&(s=function(_){const w=y$(_);return w instanceof xn&&aN(w)?w.getFilters():[w]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new c_(__((w=_).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let c=null;t.limit&&(c=function(_){let w;return w="object"==typeof _?_.value:_,Zw(w)?null:w}(t.limit));let d=null;var _;t.startAt&&(d=new Gd((_=t.startAt).values||[],!!_.before));let g=null;return t.endAt&&(g=function(_){return new Gd(_.values||[],!_.before)}(t.endAt)),RH(e,i,o,s,c,"F",d,g)}function y$(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=__(e.unaryFilter.field);return hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=__(e.unaryFilter.field);return hn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=__(e.unaryFilter.field);return hn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=__(e.unaryFilter.field);return hn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(n):void 0!==n.fieldFilter?hn.create(__((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return xn.create(e.compositeFilter.filters.map(t=>y$(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return lt()}}(e.compositeFilter.op))}(n):lt();var e}function PZ(n){return CZ[n]}function OZ(n){return DZ[n]}function NZ(n){return TZ[n]}function Wd(n){return{fieldPath:n.canonicalString()}}function __(n){return Sr.fromServerFormat(n.fieldPath)}function _$(n){return n instanceof hn?function(e){if("=="===e.op){if(mH(e.value))return{unaryFilter:{field:Wd(e.field),op:"IS_NAN"}};if(gH(e.value))return{unaryFilter:{field:Wd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mH(e.value))return{unaryFilter:{field:Wd(e.field),op:"IS_NOT_NAN"}};if(gH(e.value))return{unaryFilter:{field:Wd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wd(e.field),op:OZ(e.op),value:e.value}}}(n):n instanceof xn?function(e){const t=e.getFilters().map(r=>_$(r));return 1===t.length?t[0]:{compositeFilter:{op:NZ(e.op),filters:t}}}(n):lt()}function FZ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function v$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class tc{constructor(e,t,r,i,s=Et.min(),o=Et.min(),c=ei.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new tc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class b${constructor(e){this.fe=e}}function w$(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:cE(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:y_(i,s.version.toTimestamp()),createTime:y_(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hp(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:Hp(e.version)}}var i,s;return r}function sx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $p(n){const e=new or(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function zp(n,e){const t=(e.baseMutations||[]).map(s=>CN(n.fe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>CN(n.fe,s)),i=or.fromMillis(e.localWriteTimeMs);return new mN(e.batchId,i,t,r)}function fE(n){const e=$p(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$p(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=ms(h_(d$(i.documents[0])))):r=ms(m$(n.query)),new tc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ei.fromBase64String(n.resumeToken))}function E$(n,e){const t=Hp(e.snapshotVersion),r=Hp(e.lastLimboFreeSnapshotVersion);let i;i=YS(e.target)?g$(n.fe,e.target):DN(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vp(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function TN(n){const e=m$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?JS(e,e.limit,"L"):e}function SN(n,e){return new _N(e.largestBatchId,CN(n.fe,e.overlayMutation))}function I$(n,e){const t=e.path.lastSegment();return[n,Gi(e.path.popLast()),t]}function C$(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Hp(r.readTime),documentKey:Gi(r.documentKey.path),largestBatchId:r.largestBatchId}}class VZ{getBundleMetadata(e,t){return D$(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$p(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return D$(e).put({bundleId:(r=t).id,createTime:Hp(Lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return T$(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:TN(i.bundledQuery),readTime:$p(i.readTime)};var i})}saveNamedQuery(e,t){return T$(e).put({name:(r=t).name,readTime:Hp(Lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function D$(n){return mi(n,"bundles")}function T$(n){return mi(n,"namedQueries")}class ox{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new ox(e,t.uid||"")}getOverlay(e,t){return pE(e).get(I$(this.userId,t)).next(r=>r?SN(this.serializer,r):null)}getOverlays(e,t){const r=Cl();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const c=new _N(t,o);i.push(this.we(e,c))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Gi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(pE(e).J("collectionPathOverlayIndex",c))}),oe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Cl(),s=Gi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return pE(e).j("collectionPathOverlayIndex",o).next(c=>{for(const d of c){const g=SN(this.serializer,d);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Cl();let o;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pE(e).X({index:"collectionGroupOverlayIndex",range:c},(d,g,_)=>{const w=SN(this.serializer,g);s.size()<i||w.largestBatchId===o?(s.set(w.getKey(),w),o=w.largestBatchId):_.done()}).next(()=>s)}we(e,t){return pE(e).put(function(r,i,s){const[o,c,d]=I$(i,s.mutation.key);return{userId:i,collectionPath:c,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:hE(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function pE(n){return mi(n,"documentOverlays")}class Gp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(xr(e.integerValue));else if("doubleValue"in e){const r=xr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Kw(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Qu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?yH(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):lt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function UZ(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function S$(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=UZ(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Gp.Ve=new Gp;class BZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=S$(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=S$(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class jZ{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class HZ{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class gE{constructor(){this.je=new BZ,this.ze=new jZ(this.je),this.We=new HZ(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Wp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wp(this.indexId,this.documentKey,this.arrayValue,r)}}function qd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=x$(n.arrayValue,e.arrayValue),0!==t?t:(t=x$(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function x$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class $Z{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){wt(e.collectionGroup===this.collectionId);const t=JO(e);if(void 0!==t&&!this.en(t))return!1;const r=Np(e);let i=0,s=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const o=r[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],o))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function A$(n){var e,t;if(wt(n instanceof hn||n instanceof xn),n instanceof hn){if(n instanceof AH){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>hn.create(n.field,"==",s)))||[];return xn.create(i,"or")}return n}const r=n.filters.map(i=>A$(i));return xn.create(r,n.op)}function zZ(n){if(0===n.getFilters().length)return[];const e=MN(A$(n));return wt(M$(e)),xN(e)||AN(e)?[e]:e.getFilters()}function xN(n){return n instanceof hn}function AN(n){return n instanceof xn&&aN(n)}function M$(n){return xN(n)||AN(n)||function(e){if(e instanceof xn&&oN(e)){for(const t of e.getFilters())if(!xN(t)&&!AN(t))return!1;return!0}return!1}(n)}function MN(n){if(wt(n instanceof hn||n instanceof xn),n instanceof hn)return n;if(1===n.filters.length)return MN(n.filters[0]);const e=n.filters.map(r=>MN(r));let t=xn.create(e,n.op);return t=ax(t),M$(t)?t:(wt(t instanceof xn),wt(d_(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>kN(r,i)))}function kN(n,e){let t;return wt(n instanceof hn||n instanceof xn),wt(e instanceof hn||e instanceof xn),t=n instanceof hn?e instanceof hn?xn.create([n,e],"and"):k$(n,e):e instanceof hn?k$(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),d_(r)&&d_(i))return TH(r,i.getFilters());const s=oN(r)?r:i,o=oN(r)?i:r,c=s.filters.map(d=>kN(d,o));return xn.create(c,"or")}(n,e),ax(t)}function k$(n,e){if(d_(e))return TH(e,n.getFilters());{const t=e.filters.map(r=>kN(n,r));return xn.create(t,"or")}}function ax(n){if(wt(n instanceof hn||n instanceof xn),n instanceof hn)return n;const e=n.getFilters();if(1===e.length)return ax(e[0]);if(CH(n))return n;const t=e.map(i=>ax(i)),r=[];return t.forEach(i=>{i instanceof hn?r.push(i):i instanceof xn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:xn.create(r,n.op)}class GZ{constructor(){this.rn=new RN}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(co.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(co.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class RN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Wn(mn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wn(mn.comparator)).toArray()}}const lx=new Uint8Array(0);class WZ{constructor(e,t){this.user=e,this.databaseId=t,this.on=new RN,this.un=new Ju(r=>Vp(r),(r,i)=>eE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:Gi(i)};return R$(e).put(s)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Qj(t),""],!1,!0);return R$(e).j(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(El(o.parent))}return r})}addFieldIndex(e,t){const r=ux(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var o;delete i.indexId;const s=r.add(i);if(t.indexState){const o=yE(e);return s.next(c=>{o.put(C$(c,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ux(e),i=yE(e),s=mE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=mE(e);let i=!0;const s=new Map;return oe.forEach(this.cn(t),o=>this.an(e,o).next(c=>{i&&(i=!!c),s.set(o,c)})).next(()=>{if(i){let o=qt();const c=[];return oe.forEach(s,(d,g)=>{var _;Fe("IndexedDbIndexManager",`Using index ${_=d,`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`} to execute ${Vp(t)}`);const w=function(X,te){const re=JO(te);if(void 0===re)return null;for(const fe of QS(X,re.fieldPath))switch(fe.op){case"array-contains-any":return fe.value.arrayValue.values||[];case"array-contains":return[fe.value]}return null}(g,d),T=function(X,te){const re=new Map;for(const fe of Np(te))for(const Ie of QS(X,fe.fieldPath))switch(Ie.op){case"==":case"in":re.set(fe.fieldPath.canonicalString(),Ie.value);break;case"not-in":case"!=":return re.set(fe.fieldPath.canonicalString(),Ie.value),Array.from(re.values())}return null}(g,d),S=function(X,te){const re=[];let fe=!0;for(const Ie of Np(te)){const Ve=0===Ie.kind?MH(X,Ie.fieldPath,X.startAt):kH(X,Ie.fieldPath,X.startAt);re.push(Ve.value),fe&&(fe=Ve.inclusive)}return new Gd(re,fe)}(g,d),M=function(X,te){const re=[];let fe=!0;for(const Ie of Np(te)){const Ve=0===Ie.kind?kH(X,Ie.fieldPath,X.endAt):MH(X,Ie.fieldPath,X.endAt);re.push(Ve.value),fe&&(fe=Ve.inclusive)}return new Gd(re,fe)}(g,d),R=this.hn(d,g,S),N=this.hn(d,g,M),B=this.ln(d,g,T),G=this.fn(d.indexId,w,R,S.inclusive,N,M.inclusive,B);return oe.forEach(G,X=>r.H(X,t.limit).next(te=>{te.forEach(re=>{const fe=Qe.fromSegments(re.documentKey);o.has(fe)||(o=o.add(fe),c.push(fe))})}))}).next(()=>c)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:zZ(xn.create(e.filters,"and")).map(r=>uN(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,o,c){const d=(null!=t?t.length:1)*Math.max(r.length,s.length),g=d/(null!=t?t.length:1),_=[];for(let w=0;w<d;++w){const T=t?this.dn(t[w/g]):lx,S=this.wn(e,T,r[w%g],i),M=this._n(e,T,s[w%g],o),R=c.map(N=>this.wn(e,T,N,!0));_.push(...this.createRange(S,M,R))}return _}wn(e,t,r,i){const s=new Wp(e,Qe.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new Wp(e,Qe.empty(),t,r);return i?s.Je():s}an(e,t){const r=new $Z(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const c of s)r.tn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,s=>this.an(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let d=new Wn(Sr.comparator),g=!1;for(const _ of c.filters)for(const w of _.getFlattenedFilters())w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?g=!0:d=d.add(w.field));for(const _ of c.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new gE;for(const i of Np(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.He(i.kind);Gp.Ve._e(s,o)}return r.Qe()}dn(e){const t=new gE;return Gp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new gE;return Gp.Ve._e(Lp(this.databaseId,t),r.He(function(i){const s=Np(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new gE);let s=0;for(const o of Np(e)){const c=r[s++];for(const d of i)if(this.yn(t,o.fieldPath)&&Xw(c))i=this.pn(i,o,c);else{const g=d.He(o.kind);Gp.Ve._e(c,g)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const c of i){const d=new gE;d.seed(c.Qe()),Gp.Ve._e(o,d.He(t.kind)),s.push(d)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof hn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ux(e),i=yE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const o=[];return oe.forEach(s,c=>i.get([c.indexId,this.uid]).next(d=>{o.push(function(g,_){const w=_?new Ww(_.sequenceNumber,new co($p(_.readTime),new Qe(El(_.documentKey)),_.largestBatchId)):Ww.empty(),T=g.fields.map(([S,M])=>new jS(Sr.fromServerFormat(S),M));return new BS(g.indexId,g.collectionGroup,T,w)}(c,d))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ux(e),s=yE(e);return this.Tn(e).next(o=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>oe.forEach(c,d=>s.put(C$(d.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?oe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),oe.forEach(c,d=>this.En(e,i,d).next(g=>{const _=this.An(s,d);return g.isEqual(_)?oe.resolve():this.vn(e,s,d,g,_)}))))})}Rn(e,t,r,i){return mE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return mE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=mE(e);let s=new Wn(qd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(o,c)=>{s=s.add(new Wp(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}An(e,t){let r=new Wn(qd);const i=this.mn(t,e);if(null==i)return r;const s=JO(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Xw(o))for(const c of o.arrayValue.values||[])r=r.add(new Wp(t.indexId,e.key,this.dn(c),i))}else r=r.add(new Wp(t.indexId,e.key,lx,i));return r}vn(e,t,r,i,s){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,d,g,_,w){const T=c.getIterator(),S=d.getIterator();let M=l_(T),R=l_(S);for(;M||R;){let N=!1,B=!1;if(M&&R){const G=g(M,R);G<0?B=!0:G>0&&(N=!0)}else null!=M?B=!0:N=!0;N?(_(R),R=l_(S)):B?(w(M),M=l_(T)):(M=l_(T),R=l_(S))}}(i,s,qd,c=>{o.push(this.Rn(e,t,r,c))},c=>{o.push(this.Pn(e,t,r,c))}),oe.waitFor(o)}Tn(e){let t=1;return yE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,c)=>qd(o,c)).filter((o,c,d)=>!c||0!==qd(o,d[c-1]));const i=[];i.push(e);for(const o of r){const c=qd(o,e),d=qd(o,t);if(0===c)i[0]=e.Je();else if(c>0&&d<0)i.push(o),i.push(o.Je());else if(d>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,lx,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,lx,[]]))}return s}bn(e,t){return qd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(P$)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||lt())).next(P$)}}function R$(n){return mi(n,"collectionParents")}function mE(n){return mi(n,"indexEntries")}function ux(n){return mi(n,"indexConfiguration")}function yE(n){return mi(n,"indexState")}function P$(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;eN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new co(e.readTime,e.documentKey,t)}const O$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Wi(e,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function N$(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let c=0;const d=r.X({range:o},(_,w,T)=>(c++,T.delete()));s.push(d.next(()=>{wt(1===c)}));const g=[];for(const _ of t.mutations){const w=oH(e,_.key.path,t.batchId);s.push(i.delete(w)),g.push(_.key)}return oe.waitFor(s).next(()=>g)}function cx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Wi.DEFAULT_COLLECTION_PERCENTILE=10,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wi.DEFAULT=new Wi(41943040,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wi.DISABLED=new Wi(-1,0,0);class dx{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){wt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new dx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zd(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=v_(e),o=Zd(e);return o.add({}).next(c=>{wt("number"==typeof c);const d=new mN(c,t,r,i),g=function(T,S,M){const R=M.baseMutations.map(B=>hE(T.fe,B)),N=M.mutations.map(B=>hE(T.fe,B));return{userId:S,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:R,mutations:N}}(this.serializer,this.userId,d),_=[];let w=new Wn((T,S)=>jt(T.canonicalString(),S.canonicalString()));for(const T of i){const S=oH(this.userId,T.key.path,c);w=w.add(T.key.path.popLast()),_.push(o.put(g)),_.push(s.put(S,P7))}return w.forEach(T=>{_.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Vn[c]=d.keys()}),oe.waitFor(_).next(()=>d)})}lookupMutationBatch(e,t){return Zd(e).get(t).next(r=>r?(wt(r.userId===this.userId),zp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Zd(e).X({index:"userMutationsIndex",range:i},(o,c,d)=>{c.userId===this.userId&&(wt(c.batchId>=r),s=zp(this.serializer,c)),d.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zd(e).j("userMutationsIndex",t).next(r=>r.map(i=>zp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$S(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return v_(e).X({range:i},(o,c,d)=>{const[g,_,w]=o,T=El(_);if(g===this.userId&&t.path.isEqual(T))return Zd(e).get(w).next(S=>{if(!S)throw lt();wt(S.userId===this.userId),s.push(zp(this.serializer,S))});d.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(jt);const i=[];return t.forEach(s=>{const o=$S(this.userId,s.path),c=IDBKeyRange.lowerBound(o),d=v_(e).X({range:c},(g,_,w)=>{const[T,S,M]=g,R=El(S);T===this.userId&&s.path.isEqual(R)?r=r.add(M):w.done()});i.push(d)}),oe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=$S(this.userId,r),o=IDBKeyRange.lowerBound(s);let c=new Wn(jt);return v_(e).X({range:o},(d,g,_)=>{const[w,T,S]=d,M=El(T);w===this.userId&&r.isPrefixOf(M)?M.length===i&&(c=c.add(S)):_.done()}).next(()=>this.Dn(e,c))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Zd(e).get(s).next(o=>{if(null===o)throw lt();wt(o.userId===this.userId),r.push(zp(this.serializer,o))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return N$(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return v_(e).X({range:r},(s,o,c)=>{if(s[0]===this.userId){const d=El(s[1]);i.push(d)}else c.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return F$(e,this.userId,t)}xn(e){return L$(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function F$(n,e,t){const r=$S(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return v_(n).X({range:s,Y:!0},(c,d,g)=>{const[_,w,T]=c;_===e&&w===i&&(o=!0),g.done()}).next(()=>o)}function Zd(n){return mi(n,"mutations")}function v_(n){return mi(n,"documentMutations")}function L$(n){return mi(n,"mutationQueues")}class qp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new qp(0)}static Mn(){return new qp(-1)}}class qZ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new qp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Et.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>b_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return b_(e).X((o,c)=>{const d=fE(c);d.sequenceNumber<=t&&null===r.get(d.targetId)&&(i++,s.push(this.removeTargetData(e,d)))}).next(()=>oe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return b_(e).X((r,i)=>{const s=fE(i);t(s)})}$n(e){return V$(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return V$(e).put("targetGlobalKey",t)}Fn(e,t){return b_(e).put(E$(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return b_(e).X({range:i,index:"queryTargetsIndex"},(o,c,d)=>{const g=fE(c);eE(t,g.target)&&(s=g,d.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Kd(e);return t.forEach(o=>{const c=Gi(o.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,o))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Kd(e);return oe.forEach(t,s=>{const o=Gi(s.path);return oe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Kd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Kd(e);let s=qt();return i.X({range:r,Y:!0},(o,c,d)=>{const g=El(o[1]),_=new Qe(g);s=s.add(_)}).next(()=>s)}containsKey(e,t){const r=Gi(t.path),i=IDBKeyRange.bound([r],[Qj(r)],!1,!0);let s=0;return Kd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([o,c],d,g)=>{0!==o&&(s++,g.done())}).next(()=>s>0)}le(e,t){return b_(e).get(t).next(r=>r?fE(r):null)}}function b_(n){return mi(n,"targets")}function V$(n){return mi(n,"targetGlobal")}function Kd(n){return mi(n,"targetDocuments")}function U$([n,e],[t,r]){const i=jt(n,t);return 0===i?jt(e,r):i}class ZZ{constructor(e){this.Ln=e,this.buffer=new Wn(U$),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();U$(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class B${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Q.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Vd(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ld(r)}yield t.Qn(3e5)}))}}class KZ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(ho.ct);const r=new ZZ(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(O$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O$):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,o,c,d,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,o=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(r=w,c=Date.now(),this.removeTargets(e,r,t))).next(w=>(s=w,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(g=Date.now(),QO()<=Ca.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-_}ms\n\tDetermined least recently used ${i} in `+(c-o)+`ms\n\tRemoved ${s} targets in `+(d-c)+`ms\n\tRemoved ${w} documents in `+(g-d)+`ms\nTotal Duration: ${g-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:w})))}}class YZ{constructor(e,t){this.db=e,this.garbageCollector=function j$(n,e){return new KZ(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return hx(e,r)}removeReference(e,t,r){return hx(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hx(e,t)}Xn(e,t){return function(r,i){let s=!1;return L$(r).Z(o=>F$(r,o,i).next(c=>(c&&(s=!0),oe.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(o,c)=>{if(c<=t){const d=this.Xn(e,o).next(g=>{if(!g)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Et.min()),Kd(e).delete([0,Gi(o.path)])))});i.push(d)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hx(e,t)}Yn(e,t){const r=Kd(e);let i,s=ho.ct;return r.X({index:"documentTargetsIndex"},([o,c],{path:d,sequenceNumber:g})=>{0===o?(s!==ho.ct&&t(new Qe(El(i)),s),s=g,i=d):s=ho.ct}).next(()=>{s!==ho.ct&&t(new Qe(El(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hx(n,e){return Kd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Gi(e.path),sequenceNumber:r}));var r}class H${constructor(){this.changes=new Ju(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zp(e).put(r)}removeEntry(e,t,r){return Zp(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],sx(s),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=qn.newInvalidDocument(t);return Zp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_E(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:qn.newInvalidDocument(t)};return Zp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_E(t))},(i,s)=>{r={document:this.ts(t,s),size:cx(s)}}).next(()=>r)}getEntries(e,t){let r=Us();return this.ns(e,t,(i,s)=>{const o=this.ts(i,s);r=r.insert(i,o)}).next(()=>r)}ss(e,t){let r=Us(),i=new jn(Qe.comparator);return this.ns(e,t,(s,o)=>{const c=this.ts(s,o);r=r.insert(s,c),i=i.insert(s,cx(o))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let i=new Wn(W$);t.forEach(d=>i=i.add(d));const s=IDBKeyRange.bound(_E(i.first()),_E(i.last())),o=i.getIterator();let c=o.getNext();return Zp(e).X({index:"documentKeyIndex",range:s},(d,g,_)=>{const w=Qe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;c&&W$(c,w)<0;)r(c,null),c=o.getNext();c&&c.isEqual(w)&&(r(c,g),c=o.hasNext()?o.getNext():null),c?_.G(_E(c)):_.done()}).next(()=>{for(;c;)r(c,null),c=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),sx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zp(e).j(IDBKeyRange.bound(o,c,!0)).next(d=>{let g=Us();for(const _ of d){const w=this.ts(Qe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);w.isFoundDocument()&&(nE(t,w)||i.has(w.key))&&(g=g.insert(w.key,w))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=Us();const o=G$(t,r),c=G$(t,co.max());return Zp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},(d,g,_)=>{const w=this.ts(Qe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);s=s.insert(w.key,w),s.size===i&&_.done()}).next(()=>s)}newChangeBuffer(e){return new XZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return z$(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Zn(e,t){return z$(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function LZ(n,e){let t;if(e.document)t=p$(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=$p(e.noDocument.readTime);t=qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Qe.fromSegments(e.unknownDocument.path),i=$p(e.unknownDocument.version);t=qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new or(r[0],r[1]);return Et.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return qn.newInvalidDocument(e)}}function $$(n){return new QZ(n)}class XZ extends H${constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ju(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Wn((s,o)=>jt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const c=this.us.get(s);if(t.push(this.os.removeEntry(e,s,c.readTime)),o.isValidDocument()){const d=w$(this.os.serializer,o);i=i.add(s.path.popLast()),r+=cx(d)-c.size,t.push(this.os.addEntry(e,s,d))}else if(r-=c.size,this.trackRemovals){const d=w$(this.os.serializer,o.convertToNoDocument(Et.min()));t.push(this.os.addEntry(e,s,d))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,o)=>{this.us.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function z$(n){return mi(n,"remoteDocumentGlobal")}function Zp(n){return mi(n,"remoteDocumentsV14")}function _E(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function G$(n,e){const t=e.documentKey.path.toArray();return[n,sx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function W$(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=jt(t[s],r[s]),i)return i;return i=jt(t.length,r.length),i||(i=jt(t[t.length-2],r[r.length-2]),i||jt(t[t.length-1],r[r.length-1]))}class JZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class q${constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&oE(r.mutation,i,Vs.empty(),or.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const i=Cl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=rE();return s.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Cl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=Us();const o=iE(),c=iE();return t.forEach((d,g)=>{const _=r.get(g.key);i.has(g.key)&&(void 0===_||_.mutation instanceof ec)?s=s.insert(g.key,g):void 0!==_?(o.set(g.key,_.mutation.getFieldMask()),oE(_.mutation,g,_.mutation.getFieldMask(),or.now())):o.set(g.key,Vs.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((g,_)=>o.set(g,_)),t.forEach((g,_)=>{var w;return c.set(g,new JZ(_,null!==(w=o.get(g))&&void 0!==w?w:null))}),c))}recalculateAndSaveOverlays(e,t){const r=iE();let i=new jn((o,c)=>o-c),s=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const c of o)c.keys().forEach(d=>{const g=t.get(d);if(null===g)return;let _=r.get(d)||Vs.empty();_=c.applyToLocalView(g,_),r.set(d,_);const w=(i.get(c.batchId)||qt()).add(d);i=i.insert(c.batchId,w)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),g=d.key,_=d.value,w=UH();_.forEach(T=>{if(!s.has(T)){const S=ZH(t.get(T),r.get(T));null!==S&&w.set(T,S),s=s.add(T)}}),o.push(this.documentOverlayCache.saveOverlays(e,g,w))}return oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(Cl());let c=-1,d=s;return o.next(g=>oe.forEach(g,(_,w)=>(c<w.largestBatchId&&(c=w.largestBatchId),s.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(e,g,s)).next(()=>this.computeViews(e,d,g,qt())).next(_=>({batchId:c,changes:VH(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=rE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=rE();return this.indexManager.getCollectionParents(e,i).next(o=>oe.forEach(o,c=>{const d=(g=t,_=c.child(i),new Xu(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r).next(g=>{g.forEach((_,w)=>{s=s.insert(_,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((c,d)=>{const g=d.getKey();null===s.get(g)&&(s=s.insert(g,qn.newInvalidDocument(g)))});let o=rE();return s.forEach((c,d)=>{const g=i.get(c);void 0!==g&&oE(g.mutation,d,Vs.empty(),or.now()),nE(t,d)&&(o=o.insert(c,d))}),o})}}class eK{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Lr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:TN(r.bundledQuery),readTime:Lr(r.readTime)}),oe.resolve();var r}}class tK{constructor(){this.overlays=new jn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cl();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Cl(),s=t.length+1,o=new Qe(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,g=d.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new jn((g,_)=>g-_);const o=this.overlays.getIterator();for(;o.hasNext();){const g=o.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=s.get(g.largestBatchId);null===_&&(_=Cl(),s=s.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const c=Cl(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((g,_)=>c.set(g,_)),!(c.size()>=i)););return oe.resolve(c)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _N(t,r));let s=this.ls.get(t);void 0===s&&(s=qt(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class PN{constructor(){this.fs=new Wn(yi.ds),this.ws=new Wn(yi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new yi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new yi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new mn([])),r=new yi(t,e),i=new yi(t,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new mn([])),r=new yi(t,e),i=new yi(t,e+1);let s=qt();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new yi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class yi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||jt(e.As,t.As)}static _s(e,t){return jt(e.As,t.As)||Qe.comparator(e.key,t.key)}}class nK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Wn(yi.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const o=new mN(s,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Rs=this.Rs.add(new yi(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yi(t,0),i=new yi(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const c=this.Ps(o.As);s.push(c)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(jt);return t.forEach(i=>{const s=new yi(i,0),o=new yi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],c=>{r=r.add(c.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Qe.isDocumentKey(s)||(s=s.child(""));const o=new yi(new Qe(s),0);let c=new Wn(jt);return this.Rs.forEachWhile(d=>{const g=d.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(c=c.add(d.As)),!0)},o),oe.resolve(this.Vs(c))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,i=>{const s=new yi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new yi(t,0),i=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rK{constructor(e){this.Ds=e,this.docs=new jn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=Us();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qn.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Us();const o=t.path,c=new Qe(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:g,value:{document:_}}=d.getNext();if(!o.isPrefixOf(g.path))break;g.path.length>o.length+1||eN(Jj(_),r)<=0||(i.has(_.key)||nE(t,_))&&(s=s.insert(_.key,_.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){lt()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iK(this)}getSize(e){return oe.resolve(this.size)}}class iK extends H${constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class sK{constructor(e){this.persistence=e,this.xs=new Ju(t=>Vp(t),eE),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new PN,this.targetCount=0,this.Ms=qp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((o,c)=>{c.sequenceNumber<=t&&null===r.get(c.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class ON{constructor(e,t){this.$s={},this.overlays={},this.Os=new ho(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new sK(this),this.indexManager=new GZ,this.remoteDocumentCache=new rK(r=>this.referenceDelegate.Ls(r)),this.serializer=new b$(t),this.qs=new eK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new nK(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new oK(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class oK extends tH{constructor(e){super(),this.currentSequenceNumber=e}}class fx{constructor(e){this.persistence=e,this.Qs=new PN,this.js=null}static zs(e){return new fx(e)}get Ws(){if(this.js)return this.js;throw lt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const i=Qe.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Et.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class aK{constructor(e){this.serializer=e}O(e,t,r,i){const s=new HS("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sH,{unique:!0}),c.createObjectStore("documentMutations"),Z$(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Z$(e)),o=o.next(()=>function(c){const d=c.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,d){return d.store("mutations").j().next(g=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sH,{unique:!0});const _=d.store("mutations"),w=g.map(T=>_.put(T));return oe.waitFor(w)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Ys(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(o=o.next(()=>this.Zs(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ei(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const d=c.createObjectStore("documentOverlays",{keyPath:G7});d.createIndex("collectionPathOverlayIndex",W7,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",q7,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore("remoteDocumentsV14",{keyPath:O7});d.createIndex("documentKeyIndex",N7),d.createIndex("collectionGroupIndex",F7)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:j7}).createIndex("sequenceNumberIndex",H7,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:$7}).createIndex("documentKeyIndex",z7,{unique:!1})}(e))),o}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=cx(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>oe.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",o).next(c=>oe.forEach(c,d=>{wt(d.userId===s.userId);const g=zp(this.serializer,d);return N$(e,s.userId,g).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,c)=>{const d=new mn(o),g=[0,Gi(d)];s.push(t.get(g).next(_=>_?oe.resolve():t.put({targetId:0,path:Gi(d),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:B7});const r=t.store("collectionParents"),i=new RN,s=o=>{if(i.add(o)){const c=o.lastSegment(),d=o.popLast();return r.put({collectionId:c,parent:Gi(d)})}};return t.store("remoteDocuments").X({Y:!0},(o,c)=>{const d=new mn(o);return s(d.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([o,c,d],g)=>{const _=El(c);return s(_.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=fE(i),o=E$(this.serializer,s);return t.put(o)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,o)=>{const c=t.store("remoteDocumentsV14"),d=(g=o,g.document?new Qe(mn.fromString(g.document.name).popFirst(5)):g.noDocument?Qe.fromSegments(g.noDocument.path):g.unknownDocument?Qe.fromSegments(g.unknownDocument.path):lt()).path.toArray();var g;const _={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(c.put(_))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=$$(this.serializer),s=new ON(fx.zs,this.serializer.fe);return r.j().next(o=>{const c=new Map;return o.forEach(d=>{var g;let _=null!==(g=c.get(d.userId))&&void 0!==g?g:qt();zp(this.serializer,d).keys().forEach(w=>_=_.add(w)),c.set(d.userId,_)}),oe.forEach(c,(d,g)=>{const _=new gi(g),w=ox.de(this.serializer,_),T=s.getIndexManager(_),S=dx.de(_,this.serializer,T,s.referenceDelegate);return new q$(i,S,w,T).recalculateAndSaveOverlaysForDocumentKeys(new rN(t,ho.ct),d).next()})})}}function Z$(n){n.createObjectStore("targetDocuments",{keyPath:V7}).createIndex("documentTargetsIndex",U7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",L7,{unique:!0}),n.createObjectStore("targetGlobal")}const NN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class FN{constructor(e,t,r,i,s,o,c,d,g,_,w=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=o,this.document=c,this.ri=g,this.oi=_,this.ui=w,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=T=>Promise.resolve(),!FN.D())throw new De(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YZ(this,i),this.di=t+"main",this.serializer=new b$(d),this.wi=new xa(this.di,this.ui,new aK(this.serializer)),this.Bs=new qZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$$(this.serializer),this.qs=new VZ,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===_&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(le.FAILED_PRECONDITION,NN);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ho(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Q.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Q.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Vd(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return vE(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return gx(e).delete(this.clientId)}bi(){var e=this;return(0,Q.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=mi(r,"clientMetadata");return i.j().next(s=>{const o=e.Si(s,18e5),c=s.filter(d=>-1===o.indexOf(d));return oe.forEach(c,d=>i.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):vE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new De(le.FAILED_PRECONDITION,NN);return!1}}return!(!this.networkEnabled||!this.inForeground)||gx(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||o&&c)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Q.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new rN(t,ho.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>gx(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return dx.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new WZ(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return ox.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(o=this.ui)?K7:14===o?uH:13===o?lH:12===o?Z7:11===o?aH:void lt();var o;let c;return this.wi.runTransaction(e,i,s,d=>(c=new rN(d,this.Os?this.Os.next():ho.ct),"readwrite-primary"===t?this.Ti(c).next(g=>!!g||this.Ei(c)).next(g=>{if(!g)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new De(le.FAILED_PRECONDITION,eH);return r(c)}).next(g=>this.vi(c).next(()=>g)):this.Oi(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Oi(e){return vE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(le.FAILED_PRECONDITION,NN)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vE(e).put("owner",t)}static D(){return xa.D()}Ai(e){const t=vE(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,at.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vE(n){return mi(n,"owner")}function gx(n){return mi(n,"clientMetadata")}function LN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class VN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=qt(),i=qt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new VN(e,t.fromCache,r,i)}}class K${constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(PH(t))return oe.resolve(null);let r=ms(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=JS(t,null,"F"),r=ms(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=qt(...s);return this.Ui.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const g=this.ji(t,c);return this.zi(t,g,o,d.readTime)?this.Ki(e,JS(t,null,"F")):this.Wi(e,g,t,d)}))})))}Gi(e,t,r,i){return PH(t)||i.isEqual(Et.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(t,s);return this.zi(t,o,r,i)?this.Qi(e,t):(QO()<=Ca.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fN(t)),this.Wi(e,o,t,Xj(i,-1)))})}ji(e,t){let r=new Wn(FH(e));return t.forEach((i,s)=>{nE(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return QO()<=Ca.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",fN(t)),this.Ui.getDocumentsMatchingQuery(e,t,co.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class lK{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new jn(jt),this.Yi=new Ju(s=>Vp(s),eE),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q$(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Y$(n,e,t,r){return new lK(n,e,t,r)}function Q$(n,e){return UN.apply(this,arguments)}function UN(){return UN=(0,Q.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let d=qt();for(const g of i){o.push(g.batchId);for(const _ of g.mutations)d=d.add(_.key)}for(const g of s){c.push(g.batchId);for(const _ of g.mutations)d=d.add(_.key)}return t.localDocuments.getDocuments(r,d).next(g=>({er:g,removedBatchIds:o,addedBatchIds:c}))})})}),UN.apply(this,arguments)}function uK(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,c,d,g){const _=d.batch,w=_.keys();let T=oe.resolve();return w.forEach(S=>{T=T.next(()=>g.getEntry(c,S)).next(M=>{const R=d.docVersions.get(S);wt(null!==R),M.version.compareTo(R)<0&&(_.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),g.addEntry(M)))})}),T.next(()=>o.mutationQueue.removeMutationBatch(c,_))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=qt();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function X$(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function cK(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const c=[];e.targetChanges.forEach((_,w)=>{const T=i.get(w);if(!T)return;c.push(t.Bs.removeMatchingKeys(s,_.removedDocuments,w).next(()=>t.Bs.addMatchingKeys(s,_.addedDocuments,w)));let S=T.withSequenceNumber(s.currentSequenceNumber);var M,R,N;null!==e.targetMismatches.get(w)?S=S.withResumeToken(ei.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,r)),i=i.insert(w,S),R=S,N=_,(0===(M=T).resumeToken.approximateByteSize()||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&c.push(t.Bs.updateTargetData(s,S))});let d=Us(),g=qt();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,_))}),c.push(J$(s,o,e.documentUpdates).next(_=>{d=_.nr,g=_.sr})),!r.isEqual(Et.min())){const _=t.Bs.getLastRemoteSnapshotVersion(s).next(w=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(_)}return oe.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,g)).next(()=>d)}).then(s=>(t.Ji=i,s))}function J$(n,e,t){let r=qt(),i=qt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Us();return t.forEach((c,d)=>{const g=s.get(c);d.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Et.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||0===d.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",g.version," Watch version:",d.version)}),{nr:o,sr:i}})}function dK(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function w_(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.Bs.allocateTargetId(r).next(o=>(i=new tc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function E_(n,e,t){return BN.apply(this,arguments)}function BN(){return BN=(0,Q.Z)(function*(n,e,t){const r=et(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Vd(o))throw o;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),BN.apply(this,arguments)}function mx(n,e,t){const r=et(n);let i=Et.min(),s=qt();return r.persistence.runTransaction("Execute query","readonly",o=>function(c,d,g){const _=et(c),w=_.Yi.get(g);return void 0!==w?oe.resolve(_.Ji.get(w)):_.Bs.getTargetData(d,g)}(r,o,ms(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,c.targetId).next(d=>{s=d})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,t?i:Et.min(),t?s:qt())).next(c=>(n4(r,NH(e),c),{documents:c,ir:s})))}function e4(n,e){const t=et(n),r=et(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(o=>o?o.target:null))}function t4(n,e){const t=et(n),r=t.Xi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Xj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(n4(t,e,i),i))}function n4(n,e,t){let r=n.Xi.get(e)||Et.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function jN(){return jN=(0,Q.Z)(function*(n,e,t,r){const i=et(n);let s=qt(),o=Us();for(const g of t){const _=e.rr(g.metadata.name);g.document&&(s=s.add(_));const w=e.ur(g);w.setReadTime(e.cr(g.metadata.readTime)),o=o.insert(_,w)}const c=i.Zi.newChangeBuffer({trackRemovals:!0}),d=yield w_(i,(g=r,ms(h_(mn.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",g=>J$(g,c,o).next(_=>(c.apply(g),_)).next(_=>i.Bs.removeMatchingKeysForTargetId(g,d.targetId).next(()=>i.Bs.addMatchingKeys(g,s,d.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(g,_.nr,_.sr)).next(()=>_.nr)))}),jN.apply(this,arguments)}function fK(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,Q.Z)(function*(n,e,t=qt()){const r=yield w_(n,ms(TN(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Lr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.qs.saveNamedQuery(s,e);const c=r.withResumeToken(ei.EMPTY_BYTE_STRING,o);return i.Ji=i.Ji.insert(c.targetId,c),i.Bs.updateTargetData(s,c).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),HN.apply(this,arguments)}function r4(n,e){return`firestore_clients_${n}_${e}`}function i4(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $N(n,e){return`firestore_targets_${n}_${e}`}class yx{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new De(i.error.code,i.error.message))),o?new yx(e,t,i.state,s):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new De(r.error.code,r.error.message))),s?new bE(e,r.state,i):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _x{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=pN();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=rH(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new _x(e,s):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zN{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zN(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class GN{constructor(){this.activeTargetIds=pN()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WN{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new jn(jt),this.started=!1,this.yr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=r4(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new GN),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Q.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(r4(e.persistenceKey,i));if(s){const o=_x.ar(i,s);o&&(e.gr=e.gr.insert(o.clientId,o))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem($N(this.persistenceKey,e));if(r){const i=bE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($N(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Q.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let o=ho.ct;if(null!=s)try{const c=JSON.parse(s);wt("number"==typeof c),o=c}catch(c){Fr("SharedClientState","Failed to read sequence number from WebStorage",c)}return o}(r.newValue);i!==ho.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new yx(this.currentUser,e,t,r),s=i4(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=i4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=$N(this.persistenceKey,e),s=new bE(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return _x.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return yx.ar(new gi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return bE.ar(i,t)}br(e){return zN.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Q.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),o=[],c=[];return s.forEach(d=>{i.has(d)||o.push(d)}),i.forEach(d=>{s.has(d)||c.push(d)}),this.syncEngine.Wr(o,c).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=pN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class s4{constructor(){this.Hr=new GN,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new GN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pK{Yr(e){}shutdown(){}}class o4{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vx=null;function qN(){return null===vx?vx=268435456+Math.round(2147483648*Math.random()):vx++,"0x"+vx.toString(16)}const gK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mK{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const qi="WebChannelConnection";class yK extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const o=qN(),c=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${o}:`,c,r);const d={};return this.Eo(d,i,s),this.Ao(e,c,d,r).then(g=>(Fe("RestConnection",`Received RPC '${e}' ${o}: `,g),g),g=>{throw jo("RestConnection",`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g})}vo(e,t,r,i,s,o){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+o_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${gK[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=qN();return new Promise((o,c)=>{const d=new p7;d.setWithCredentials(!0),d.listenOnce(d7.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case YO.NO_ERROR:const _=d.getResponseJson();Fe(qi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(_)),o(_);break;case YO.TIMEOUT:Fe(qi,`RPC '${e}' ${s} timed out`),c(new De(le.DEADLINE_EXCEEDED,"Request time out"));break;case YO.HTTP_ERROR:const w=d.getStatus();if(Fe(qi,`RPC '${e}' ${s} failed with status:`,w,"response text:",d.getResponseText()),w>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const M=function(R){const N=R.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(N)>=0?N:le.UNKNOWN}(S.status);c(new De(M,S.message))}else c(new De(le.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new De(le.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Fe(qi,`RPC '${e}' ${s} completed.`)}});const g=JSON.stringify(i);Fe(qi,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",g,r,15)})}Ro(e,t,r){const i=qN(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=u7(),c=c7(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;void 0!==g&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.xmlHttpFactory=new f7({})),this.Eo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const _=s.join("");Fe(qi,`Creating RPC '${e}' stream ${i}: ${_}`,d);const w=o.createWebChannel(_,d);let T=!1,S=!1;const M=new mK({ro:N=>{S?Fe(qi,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(T||(Fe(qi,`Opening RPC '${e}' stream ${i} transport.`),w.open(),T=!0),Fe(qi,`RPC '${e}' stream ${i} sending:`,N),w.send(N))},oo:()=>w.close()}),R=(N,B,G)=>{N.listen(B,X=>{try{G(X)}catch(te){setTimeout(()=>{throw te},0)}})};return R(w,US.EventType.OPEN,()=>{S||Fe(qi,`RPC '${e}' stream ${i} transport opened.`)}),R(w,US.EventType.CLOSE,()=>{S||(S=!0,Fe(qi,`RPC '${e}' stream ${i} transport closed`),M.wo())}),R(w,US.EventType.ERROR,N=>{S||(S=!0,jo(qi,`RPC '${e}' stream ${i} transport errored:`,N),M.wo(new De(le.UNAVAILABLE,"The operation could not be completed")))}),R(w,US.EventType.MESSAGE,N=>{var B;if(!S){const G=N.data[0];wt(!!G);const X=G,te=X.error||(null===(B=X[0])||void 0===B?void 0:B.error);if(te){Fe(qi,`RPC '${e}' stream ${i} received error:`,te);const re=te.status;let fe=function(Ve){const ut=$r[Ve];if(void 0!==ut)return e$(ut)}(re),Ie=te.message;void 0===fe&&(fe=le.INTERNAL,Ie="Unknown error status: "+re+" with message "+te.message),S=!0,M.wo(new De(fe,Ie)),w.close()}else Fe(qi,`RPC '${e}' stream ${i} received:`,G),M._o(G)}}),R(c,h7.STAT_EVENT,N=>{N.stat===Wj.PROXY?Fe(qi,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Wj.NOPROXY&&Fe(qi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}}function a4(){return typeof window<"u"?window:null}function bx(){return typeof document<"u"?document:null}function wE(n){return new SZ(n,!0)}class ZN{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class l4{constructor(e,t,r,i,s,o,c,d){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ZN(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Q.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Q.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Q.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new De(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Q.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _K extends l4{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function MZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:lt(),i=e.targetChange.targetIds||[],s=function(d,g){return d.useProto3Json?(wt(void 0===g||"string"==typeof g),ei.fromBase64String(g||"")):(wt(void 0===g||g instanceof Uint8Array),ei.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const g=void 0===d.code?le.UNKNOWN:e$(d.code);return new De(g,d.message||"")}(o);t=new s$(r,i,s,c||null)}else if("documentChange"in e){const r=e.documentChange,i=Dl(n,r.document.name),s=Lr(r.document.updateTime),o=r.document.createTime?Lr(r.document.createTime):Et.min(),c=new ki({mapValue:{fields:r.document.fields}}),d=qn.newFoundDocument(i,s,o,c);t=new ix(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Dl(n,r.document),s=r.readTime?Lr(r.readTime):Et.min(),o=qn.newNoDocument(i,s);t=new ix([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Dl(n,r.document);t=new ix([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new wZ(i,s);t=new i$(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Et.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Et.min():s.readTime?Lr(s.readTime):Et.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=dE(this.serializer),t.addTarget=function(i,s){let o;const c=s.target;if(o=YS(c)?{documents:g$(i,c)}:{query:DN(i,c)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=u$(i,s.resumeToken);const d=wN(i,s.expectedCount);null!==d&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(Et.min())>0){o.readTime=y_(i,s.snapshotVersion.toTimestamp());const d=wN(i,s.expectedCount);null!==d&&(o.expectedCount=d)}return o}(this.serializer,e);const r=function RZ(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=dE(this.serializer),t.removeTarget=e,this.Wo(t)}}class vK extends l4{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function kZ(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let s=Lr(r.updateTime?r.updateTime:i);return s.isEqual(Et.min())&&(s=Lr(i)),new yZ(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.cu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=dE(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hE(this.serializer,r))};this.Wo(t)}}class bK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new De(le.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new De(le.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new De(le.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class EK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Fr(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class IK{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(c=>{r.enqueueAndForget((0,Q.Z)(function*(){var d;Yd(o)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(d=(0,Q.Z)(function*(g){const _=et(g);_.vu.add(4),yield I_(_),_.bu.set("Unknown"),_.vu.delete(4),yield EE(_)}),function(g){return d.apply(this,arguments)})(o))}))}),this.bu=new EK(r,i)}}function EE(n){return YN.apply(this,arguments)}function YN(){return YN=(0,Q.Z)(function*(n){if(Yd(n))for(const e of n.Ru)yield e(!0)}),YN.apply(this,arguments)}function I_(n){return QN.apply(this,arguments)}function QN(){return QN=(0,Q.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),QN.apply(this,arguments)}function wx(n,e){const t=et(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),eF(t)?JN(t):D_(t).Ko()&&XN(t,e))}function IE(n,e){const t=et(n),r=D_(t);t.Au.delete(e),r.Ko()&&u4(t,e),0===t.Au.size&&(r.Ko()?r.jo():Yd(t)&&t.bu.set("Unknown"))}function XN(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}D_(n).su(e)}function u4(n,e){n.Vu.qt(e),D_(n).iu(e)}function JN(n){n.Vu=new IZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),D_(n).start(),n.bu.gu()}function eF(n){return Yd(n)&&!D_(n).Uo()&&n.Au.size>0}function Yd(n){return 0===et(n).vu.size}function c4(n){n.Vu=void 0}function CK(n){return tF.apply(this,arguments)}function tF(){return tF=(0,Q.Z)(function*(n){n.Au.forEach((e,t)=>{XN(n,e)})}),tF.apply(this,arguments)}function DK(n,e){return nF.apply(this,arguments)}function nF(){return nF=(0,Q.Z)(function*(n,e){c4(n),eF(n)?(n.bu.Iu(e),JN(n)):n.bu.set("Unknown")}),nF.apply(this,arguments)}function TK(n,e,t){return rF.apply(this,arguments)}function rF(){return rF=(0,Q.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof s$&&2===e.state&&e.cause)try{yield(r=(0,Q.Z)(function*(i,s){const o=s.cause;for(const c of s.targetIds)i.Au.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.Au.delete(c),i.Vu.removeTarget(c))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ex(n,r)}else if(e instanceof ix?n.Vu.Ht(e):e instanceof i$?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Et.min()))try{const r=yield X$(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const g=i.Au.get(d);g&&i.Au.set(d,g.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,d)=>{const g=i.Au.get(c);if(!g)return;i.Au.set(c,g.withResumeToken(ei.EMPTY_BYTE_STRING,g.snapshotVersion)),u4(i,c);const _=new tc(g.target,c,d,g.sequenceNumber);XN(i,_)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Ex(n,r)}var r}),rF.apply(this,arguments)}function Ex(n,e,t){return iF.apply(this,arguments)}function iF(){return iF=(0,Q.Z)(function*(n,e,t){if(!Vd(e))throw e;n.vu.add(1),yield I_(n),n.bu.set("Offline"),t||(t=()=>X$(n.localStore)),n.asyncQueue.enqueueRetryable((0,Q.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield EE(n)}))}),iF.apply(this,arguments)}function d4(n,e){return e().catch(t=>Ex(n,t,e))}function C_(n){return sF.apply(this,arguments)}function sF(){return sF=(0,Q.Z)(function*(n){const e=et(n),t=Qd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;SK(e);)try{const i=yield dK(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,xK(e,i)}catch(i){yield Ex(e,i)}h4(e)&&f4(e)}),sF.apply(this,arguments)}function SK(n){return Yd(n)&&n.Eu.length<10}function xK(n,e){n.Eu.push(e);const t=Qd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function h4(n){return Yd(n)&&!Qd(n).Uo()&&n.Eu.length>0}function f4(n){Qd(n).start()}function AK(n){return oF.apply(this,arguments)}function oF(){return oF=(0,Q.Z)(function*(n){Qd(n).hu()}),oF.apply(this,arguments)}function MK(n){return aF.apply(this,arguments)}function aF(){return aF=(0,Q.Z)(function*(n){const e=Qd(n);for(const t of n.Eu)e.uu(t.mutations)}),aF.apply(this,arguments)}function kK(n,e,t){return lF.apply(this,arguments)}function lF(){return lF=(0,Q.Z)(function*(n,e,t){const r=n.Eu.shift(),i=yN.from(r,e,t);yield d4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield C_(n)}),lF.apply(this,arguments)}function RK(n,e){return uF.apply(this,arguments)}function uF(){return uF=(0,Q.Z)(function*(n,e){var t;e&&Qd(n).ou&&(yield(t=(0,Q.Z)(function*(r,i){if(JH(s=i.code)&&s!==le.ABORTED){const o=r.Eu.shift();Qd(r).Qo(),yield d4(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield C_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),h4(n)&&f4(n)}),uF.apply(this,arguments)}function p4(n,e){return cF.apply(this,arguments)}function cF(){return cF=(0,Q.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Yd(t);t.vu.add(3),yield I_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield EE(t)}),cF.apply(this,arguments)}function dF(n,e){return hF.apply(this,arguments)}function hF(){return hF=(0,Q.Z)(function*(n,e){const t=et(n);e?(t.vu.delete(2),yield EE(t)):e||(t.vu.add(2),yield I_(t),t.bu.set("Unknown"))}),hF.apply(this,arguments)}function D_(n){return n.Su||(n.Su=function(e,t,r){const i=et(e);return i.fu(),new _K(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:CK.bind(null,n),ao:DK.bind(null,n),nu:TK.bind(null,n)}),n.Ru.push(function(){var e=(0,Q.Z)(function*(t){t?(n.Su.Qo(),eF(n)?JN(n):n.bu.set("Unknown")):(yield n.Su.stop(),c4(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Qd(n){return n.Du||(n.Du=function(e,t,r){const i=et(e);return i.fu(),new vK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:AK.bind(null,n),ao:RK.bind(null,n),au:MK.bind(null,n),cu:kK.bind(null,n)}),n.Ru.push(function(){var e=(0,Q.Z)(function*(t){t?(n.Du.Qo(),yield C_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class fF{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,c=new fF(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),Vd(n))return new De(le.UNAVAILABLE,`${e}: ${n}`);throw n}class S_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=rE(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new S_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof S_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new S_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class g4{constructor(){this.Cu=new jn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):lt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class x_{constructor(e,t,r,i,s,o,c,d,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new x_(e,t,S_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class PK{constructor(){this.Nu=void 0,this.listeners=[]}}class OK{constructor(){this.queries=new Ju(e=>OH(e),tE),this.onlineState="Unknown",this.ku=new Set}}function pF(n,e){return gF.apply(this,arguments)}function gF(){return gF=(0,Q.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new PK),i)try{s.Nu=yield t.onListen(r)}catch(o){const c=T_(o,`Initialization of query '${fN(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&_F(t)}),gF.apply(this,arguments)}function mF(n,e){return yF.apply(this,arguments)}function yF(){return yF=(0,Q.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),yF.apply(this,arguments)}function NK(n,e){const t=et(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const c of o.listeners)c.$u(i)&&(r=!0);o.Nu=i}}r&&_F(t)}function FK(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function _F(n){n.ku.forEach(e=>{e.next()})}class vF{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new x_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=x_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class LK{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class m4{constructor(e){this.serializer=e}rr(e){return Dl(this.serializer,e)}ur(e){return e.metadata.exists?p$(this.serializer,e.document,!1):qn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Lr(e)}}class VK{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=y4(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=mn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new m4(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const o of i.metadata.queries){const c=(t.get(o)||qt()).add(s);t.set(o,c)}}return t}complete(){var e=this;return(0,Q.Z)(function*(){const t=yield function hK(n,e,t,r){return jN.apply(this,arguments)}(e.localStore,new m4(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield fK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function y4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _4{constructor(e){this.key=e}}class v4{constructor(e){this.key=e}}class b4{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qt(),this.mutatedKeys=qt(),this.tc=FH(e),this.ec=new S_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new g4,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const d="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,g="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,w)=>{const T=i.get(_),S=nE(this.query,w)?w:null,M=!!T&&this.mutatedKeys.has(T.key),R=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;T&&S?T.data.isEqual(S.data)?M!==R&&(r.track({type:3,doc:S}),N=!0):this.rc(T,S)||(r.track({type:2,doc:S}),N=!0,(d&&this.tc(S,d)>0||g&&this.tc(S,g)<0)&&(c=!0)):!T&&S?(r.track({type:0,doc:S}),N=!0):T&&!S&&(r.track({type:1,doc:T}),N=!0,(d||g)&&(c=!0)),N&&(S?(o=o.add(S),s=R?s.add(_):s.delete(_)):(o=o.delete(_),s=s.delete(_)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const _="F"===this.query.limitType?o.last():o.first();o=o.delete(_.key),s=s.delete(_.key),r.track({type:1,doc:_})}return{ec:o,ic:r,zi:c,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((g,_)=>function(w,T){const S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return S(w)-S(T)}(g.type,_.type)||this.tc(g.doc,_.doc)),this.oc(r);const o=t?this.uc():[],c=0===this.Zu.size&&this.current?1:0,d=c!==this.Xu;return this.Xu=c,0!==s.length||d?{snapshot:new x_(this.query,e.ec,i,s,e.mutatedKeys,0===c,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new g4,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new v4(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new _4(r))}),t}hc(e){this.Yu=e.ir,this.Zu=qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return x_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class UK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BK{constructor(e){this.key=e,this.fc=!1}}class jK{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ju(c=>OH(c),tE),this._c=new Map,this.mc=new Set,this.gc=new jn(Qe.comparator),this.yc=new Map,this.Ic=new PN,this.Tc={},this.Ec=new Map,this.Ac=qp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function HK(n,e){return bF.apply(this,arguments)}function bF(){return bF=(0,Q.Z)(function*(n,e){const t=$F(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield w_(t.localStore,ms(e)),c=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield wF(t,e,r,"current"===c,o.resumeToken),t.isPrimaryClient&&wx(t.remoteStore,o)}return i}),bF.apply(this,arguments)}function wF(n,e,t,r,i){return EF.apply(this,arguments)}function EF(){return EF=(0,Q.Z)(function*(n,e,t,r,i){n.Rc=(w,T,S)=>{return(M=(0,Q.Z)(function*(R,N,B,G){let X=N.view.sc(B);X.zi&&(X=yield mx(R.localStore,N.query,!1).then(({documents:fe})=>N.view.sc(fe,X)));const te=G&&G.targetChanges.get(N.targetId),re=N.view.applyChanges(X,R.isPrimaryClient,te);return RF(R,N.targetId,re.cc),re.snapshot}),function(R,N,B,G){return M.apply(this,arguments)})(n,w,T,S);var M};const s=yield mx(n.localStore,e,!0),o=new b4(e,s.ir),c=o.sc(s.documents),d=uE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),g=o.applyChanges(c,n.isPrimaryClient,d);RF(n,t,g.cc);const _=new UK(e,t,o);return n.wc.set(e,_),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),g.snapshot}),EF.apply(this,arguments)}function $K(n,e){return IF.apply(this,arguments)}function IF(){return IF=(0,Q.Z)(function*(n,e){const t=et(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!tE(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield E_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),IE(t.remoteStore,r.targetId),A_(t,r.targetId)}).catch(Ld))):(A_(t,r.targetId),yield E_(t.localStore,r.targetId,!0))}),IF.apply(this,arguments)}function CF(){return CF=(0,Q.Z)(function*(n,e,t){const r=zF(n);try{const i=yield function(s,o){const c=et(s),d=or.now(),g=o.reduce((T,S)=>T.add(S.key),qt());let _,w;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=Us(),M=qt();return c.Zi.getEntries(T,g).next(R=>{S=R,S.forEach((N,B)=>{B.isValidDocument()||(M=M.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,S)).next(R=>{_=R;const N=[];for(const B of o){const G=vZ(B,_.get(B.key).overlayedDocument);null!=G&&N.push(new ec(B.key,G,bH(G.value.mapValue),ar.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,N,o)}).next(R=>{w=R;const N=R.applyToLocalDocumentSet(_,M);return c.documentOverlayCache.saveOverlays(T,R.batchId,N)})}).then(()=>({batchId:w.batchId,changes:VH(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let d=s.Tc[s.currentUser.toKey()];d||(d=new jn(jt)),d=d.insert(o,c),s.Tc[s.currentUser.toKey()]=d}(r,i.batchId,t),yield nc(r,i.changes),yield C_(r.remoteStore)}catch(i){const s=T_(i,"Failed to persist write");t.reject(s)}}),CF.apply(this,arguments)}function w4(n,e){return DF.apply(this,arguments)}function DF(){return DF=(0,Q.Z)(function*(n,e){const t=et(n);try{const r=yield cK(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.yc.get(s);o&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?wt(o.fc):i.removedDocuments.size>0&&(wt(o.fc),o.fc=!1))}),yield nc(t,r,e)}catch(r){yield Ld(r)}}),DF.apply(this,arguments)}function E4(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,o)=>{const c=o.view.Mu(e);c.snapshot&&i.push(c.snapshot)}),function(s,o){const c=et(s);c.onlineState=o;let d=!1;c.queries.forEach((g,_)=>{for(const w of _.listeners)w.Mu(o)&&(d=!0)}),d&&_F(c)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function GK(n,e,t){return TF.apply(this,arguments)}function TF(){return TF=(0,Q.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new jn(Qe.comparator);o=o.insert(s,qn.newNoDocument(s,Et.min()));const c=qt().add(s),d=new lE(Et.min(),new Map,new jn(jt),o,c);yield w4(r,d),r.gc=r.gc.remove(s),r.yc.delete(e),PF(r)}else yield E_(r.localStore,e,!1).then(()=>A_(r,e,t)).catch(Ld)}),TF.apply(this,arguments)}function WK(n,e){return SF.apply(this,arguments)}function SF(){return SF=(0,Q.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield uK(t.localStore,e);kF(t,r,null),MF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nc(t,i)}catch(i){yield Ld(i)}}),SF.apply(this,arguments)}function qK(n,e,t){return xF.apply(this,arguments)}function xF(){return xF=(0,Q.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(s,o){const c=et(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return c.mutationQueue.lookupMutationBatch(d,o).next(_=>(wt(null!==_),g=_.keys(),c.mutationQueue.removeMutationBatch(d,_))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,g,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>c.localDocuments.getDocuments(d,g))})}(r.localStore,e);kF(r,e,t),MF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nc(r,i)}catch(i){yield Ld(i)}}),xF.apply(this,arguments)}function AF(){return AF=(0,Q.Z)(function*(n,e){const t=et(n);Yd(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const o=et(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=T_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),AF.apply(this,arguments)}function MF(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function kF(n,e,t){const r=et(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function A_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||I4(n,r)})}function I4(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(IE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),PF(n))}function RF(n,e,t){for(const r of t)r instanceof _4?(n.Ic.addReference(r.key,e),KK(n,r)):r instanceof v4?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||I4(n,r.key)):lt()}function KK(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),PF(n))}function PF(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(mn.fromString(e)),r=n.Ac.next();n.yc.set(r,new BK(t)),n.gc=n.gc.insert(t,r),wx(n.remoteStore,new tc(ms(h_(t.path)),r,"TargetPurposeLimboResolution",ho.ct))}}function nc(n,e,t){return OF.apply(this,arguments)}function OF(){return OF=(0,Q.Z)(function*(n,e,t){const r=et(n),i=[],s=[],o=[];var c;r.wc.isEmpty()||(r.wc.forEach((c,d)=>{o.push(r.Rc(d,e,t).then(g=>{if((g||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(d.targetId,g?.fromCache?"not-current":"current"),g){i.push(g);const _=VN.Li(d.targetId,g);s.push(_)}}))}),yield Promise.all(o),r.dc.nu(i),yield(c=(0,Q.Z)(function*(d,g){const _=et(d);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>oe.forEach(g,T=>oe.forEach(T.Fi,S=>_.persistence.referenceDelegate.addReference(w,T.targetId,S)).next(()=>oe.forEach(T.Bi,S=>_.persistence.referenceDelegate.removeReference(w,T.targetId,S)))))}catch(w){if(!Vd(w))throw w;Fe("LocalStore","Failed to update sequence numbers: "+w)}for(const w of g){const T=w.targetId;if(!w.fromCache){const S=_.Ji.get(T),R=S.withLastLimboFreeSnapshotVersion(S.snapshotVersion);_.Ji=_.Ji.insert(T,R)}}}),function(d,g){return c.apply(this,arguments)})(r.localStore,s))}),OF.apply(this,arguments)}function YK(n,e){return NF.apply(this,arguments)}function NF(){return NF=(0,Q.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield Q$(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(o=>{o.forEach(c=>{c.reject(new De(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nc(t,r.er)}var i}),NF.apply(this,arguments)}function QK(n,e){const t=et(n),r=t.yc.get(e);if(r&&r.fc)return qt().add(r.key);{let i=qt();const s=t._c.get(e);if(!s)return i;for(const o of s){const c=t.wc.get(o);i=i.unionWith(c.view.nc)}return i}}function XK(n,e){return FF.apply(this,arguments)}function FF(){return FF=(0,Q.Z)(function*(n,e){const t=et(n),r=yield mx(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&RF(t,e.targetId,i.cc),i}),FF.apply(this,arguments)}function JK(n,e){return LF.apply(this,arguments)}function LF(){return LF=(0,Q.Z)(function*(n,e){const t=et(n);return t4(t.localStore,e).then(r=>nc(t,r))}),LF.apply(this,arguments)}function eY(n,e,t,r){return VF.apply(this,arguments)}function VF(){return VF=(0,Q.Z)(function*(n,e,t,r){const i=et(n),s=yield function(o,c){const d=et(o),g=et(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",_=>g.Sn(_,c).next(w=>w?d.localDocuments.getDocuments(_,w):oe.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield C_(i.remoteStore):"acknowledged"===t||"rejected"===t?(kF(i,e,r||null),MF(i,e),c=e,et(et(i.localStore).mutationQueue).Cn(c)):lt(),yield nc(i,s)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),VF.apply(this,arguments)}function UF(){return UF=(0,Q.Z)(function*(n,e){const t=et(n);if($F(t),zF(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield C4(t,r.toArray());t.vc=!0,yield dF(t.remoteStore,!0);for(const s of i)wx(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(A_(t,o),E_(t.localStore,o,!0))),IE(t.remoteStore,o)}),yield i,yield C4(t,r),function(s){const o=et(s);o.yc.forEach((c,d)=>{IE(o.remoteStore,d)}),o.Ic.Ts(),o.yc=new Map,o.gc=new jn(Qe.comparator)}(t),t.vc=!1,yield dF(t.remoteStore,!1)}}),UF.apply(this,arguments)}function C4(n,e,t){return BF.apply(this,arguments)}function BF(){return BF=(0,Q.Z)(function*(n,e,t){const r=et(n),i=[],s=[];for(const o of e){let c;const d=r._c.get(o);if(d&&0!==d.length){c=yield w_(r.localStore,ms(d[0]));for(const g of d){const _=r.wc.get(g),w=yield XK(r,_);w.snapshot&&s.push(w.snapshot)}}else{const g=yield e4(r.localStore,o);c=yield w_(r.localStore,g),yield wF(r,D4(g),o,!1,c.resumeToken)}i.push(c)}return r.dc.nu(s),i}),BF.apply(this,arguments)}function D4(n){return RH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function nY(n){const e=et(n);return et(et(e.localStore).persistence).$i()}function rY(n,e,t,r){return jF.apply(this,arguments)}function jF(){return jF=(0,Q.Z)(function*(n,e,t,r){const i=et(n);if(i.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield t4(i.localStore,NH(s[0])),c=lE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ei.EMPTY_BYTE_STRING);yield nc(i,o,c);break}case"rejected":yield E_(i.localStore,e,!0),A_(i,e,r);break;default:lt()}}),jF.apply(this,arguments)}function iY(n,e,t){return HF.apply(this,arguments)}function HF(){return HF=(0,Q.Z)(function*(n,e,t){const r=$F(n);if(r.vc){for(const i of e){if(r._c.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const s=yield e4(r.localStore,i),o=yield w_(r.localStore,s);yield wF(r,D4(s),o.targetId,!1,o.resumeToken),wx(r.remoteStore,o)}for(const i of t)r._c.has(i)&&(yield E_(r.localStore,i,!1).then(()=>{IE(r.remoteStore,i),A_(r,i)}).catch(Ld))}}),HF.apply(this,arguments)}function $F(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=w4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GK.bind(null,e),e.dc.nu=NK.bind(null,e.eventManager),e.dc.Pc=FK.bind(null,e.eventManager),e}function zF(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qK.bind(null,e),e}class CE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Q.Z)(function*(){t.serializer=wE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Y$(this.persistence,new K$,e.initialUser,this.serializer)}createPersistence(e){return new ON(fx.zs,this.serializer)}createSharedClientState(e){return new s4}terminate(){var e=this;return(0,Q.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GF extends CE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield zF(r.Vc.syncEngine),yield C_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Y$(this.persistence,new K$,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new B$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new k7(t,this.persistence);return new M7(e.asyncQueue,r)}createPersistence(e){const t=LN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Wi.withCacheSize(this.cacheSizeBytes):Wi.DEFAULT;return new FN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,a4(),bx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new s4}}class T4 extends GF{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof WN&&(r.sharedClientState.syncEngine={jr:eY.bind(null,i),zr:rY.bind(null,i),Wr:iY.bind(null,i),$i:nY.bind(null,i),Qr:JK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,Q.Z)(function*(o){yield function tY(n,e){return UF.apply(this,arguments)}(r.Vc.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=a4();if(!WN.D(t))throw new De(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class M_{initialize(e,t){var r=this;return(0,Q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>E4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=YK.bind(null,r.syncEngine),yield dF(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OK}createDatastore(e){const t=wE(e.databaseInfo.databaseId),r=new yK(e.databaseInfo);return new bK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=c=>E4(this.syncEngine,c,0),o=o4.D()?new o4:new pK,new IK(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,c,d,g){const _=new jK(r,i,s,o,c,d);return g&&(_.vc=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Q.Z)(function*(t){const r=et(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield I_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function S4(n,e=10240){let t=0;return{read:()=>(0,Q.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Q.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ix{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class aY{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Jr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Q.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Q.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Q.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new LK(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Q.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Q.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Q.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Q.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Q.Z)(function*(s,o){const c=et(s),d=dE(c.serializer)+"/documents",g={documents:o.map(S=>cE(c.serializer,S))},_=yield c.vo("BatchGetDocuments",d,g,o.length),w=new Map;_.forEach(S=>{const M=function AZ(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=Dl(t,r.found.name),s=Lr(r.found.updateTime),o=r.found.createTime?Lr(r.found.createTime):Et.min(),c=new ki({mapValue:{fields:r.found.fields}});return qn.newFoundDocument(i,s,o,c)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=Dl(t,r.missing),s=Lr(r.readTime);return qn.newNoDocument(i,s)}(n,e):lt()}(c.serializer,S);w.set(M.key.toString(),M)});const T=[];return o.forEach(S=>{const M=w.get(S.toString());wt(!!M),T.push(M)}),T}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new m_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Qe.fromPath(i);e.mutations.push(new gN(s,e.precondition(s)))}),yield(r=(0,Q.Z)(function*(i,s){const o=et(i),c=dE(o.serializer)+"/documents",d={writes:s.map(g=>hE(o.serializer,g))};yield o.Io("Commit",c,d)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?ar.exists(!1):ar.updateTime(t):ar.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new De(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ar.updateTime(t)}return ar.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uY{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new ZN(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Q.Z)(function*(){const t=new lY(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Zw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!JH(t)}return!1}}class cY{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=Yj.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Q.Z)(function*(c){Fe("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Fe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,Q.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=T_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Cx(n,e){return WF.apply(this,arguments)}function WF(){return WF=(0,Q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Q.Z)(function*(s){r.isEqual(s)||(yield Q$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),WF.apply(this,arguments)}function qF(n,e){return ZF.apply(this,arguments)}function ZF(){return ZF=(0,Q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield KF(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>p4(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>p4(e.remoteStore,s)),n._onlineComponents=e}),ZF.apply(this,arguments)}function x4(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function KF(n){return YF.apply(this,arguments)}function YF(){return YF=(0,Q.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!x4(t))throw t;jo("Error using user provided cache. Falling back to memory cache: "+t),yield Cx(n,new CE)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Cx(n,new CE);return n._offlineComponents}),YF.apply(this,arguments)}function Dx(n){return QF.apply(this,arguments)}function QF(){return QF=(0,Q.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield qF(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield qF(n,new M_))),n._onlineComponents}),QF.apply(this,arguments)}function A4(n){return KF(n).then(e=>e.persistence)}function Tx(n){return KF(n).then(e=>e.localStore)}function M4(n){return Dx(n).then(e=>e.remoteStore)}function XF(n){return Dx(n).then(e=>e.syncEngine)}function k_(n){return JF.apply(this,arguments)}function JF(){return JF=(0,Q.Z)(function*(n){const e=yield Dx(n),t=e.eventManager;return t.onListen=HK.bind(null,e.syncEngine),t.onUnlisten=$K.bind(null,e.syncEngine),t}),JF.apply(this,arguments)}function R4(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(i,s,o,c,d){const g=new Ix({next:w=>{s.enqueueAndForget(()=>mF(i,_));const T=w.docs.has(o);!T&&w.fromCache?d.reject(new De(le.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&c&&"server"===c.source?d.reject(new De(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(w)},error:w=>d.reject(w)}),_=new vF(h_(o.path),g,{includeMetadataChanges:!0,Ku:!0});return pF(i,_)}(yield k_(n),n.asyncQueue,e,t,r)})),r.promise}function P4(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(i,s,o,c,d){const g=new Ix({next:w=>{s.enqueueAndForget(()=>mF(i,_)),w.fromCache&&"server"===c.source?d.reject(new De(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(w)},error:w=>d.reject(w)}),_=new vF(o,g,{includeMetadataChanges:!0,Ku:!0});return pF(i,_)}(yield k_(n),n.asyncQueue,e,t,r)})),r.promise}function O4(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const N4=new Map;function eL(n,e,t){if(!t)throw new De(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function F4(n,e,t,r){if(!0===e&&!0===r)throw new De(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function L4(n){if(!Qe.isDocumentKey(n))throw new De(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function V4(n){if(Qe.isDocumentKey(n))throw new De(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sx(n);throw new De(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function U4(n,e){if(e<=0)throw new De(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class B4{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new De(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=O4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new De(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new De(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new De(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class DE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B4(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _7;switch(t.type){case"firstParty":return new E7(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=N4.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),N4.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Ri{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ri(this.firestore,e,this._query)}}class Tl extends Ri{constructor(e,t,r){super(e,t,h_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Qe(e))}withConverter(e){return new Tl(this.firestore,e,this._path)}}function H4(n,e,...t){if(n=(0,at.m9)(n),eL("collection","path",e),n instanceof DE){const r=mn.fromString(e,...t);return V4(r),new Tl(n,null,r)}{if(!(n instanceof Zn||n instanceof Tl))throw new De(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return V4(r),new Tl(n.firestore,null,r)}}function xx(n,e,...t){if(n=(0,at.m9)(n),1===arguments.length&&(e=Yj.A()),eL("doc","path",e),n instanceof DE){const r=mn.fromString(e,...t);return L4(r),new Zn(n,null,new Qe(r))}{if(!(n instanceof Zn||n instanceof Tl))throw new De(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return L4(r),new Zn(n.firestore,n instanceof Tl?n.converter:null,new Qe(r))}}function $4(n,e){return n=(0,at.m9)(n),e=(0,at.m9)(e),(n instanceof Zn||n instanceof Tl)&&(e instanceof Zn||e instanceof Tl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function tL(n,e){return n=(0,at.m9)(n),e=(0,at.m9)(e),n instanceof Ri&&e instanceof Ri&&n.firestore===e.firestore&&tE(n._query,e._query)&&n.converter===e.converter}class bY{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ZN(this,"async_queue_retry"),this.Xc=()=>{const t=bx();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=bx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=bx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Jr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Q.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Vd(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=fF.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&lt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Q.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function nL(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class wY{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends DE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||z4(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||z4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function z4(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new X7(n._databaseId,c,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,O4(g.experimentalLongPollingOptions),g.useFetchStreams));var c,g;n._firestoreClient=new cY(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function G4(n,e,t){const r=new Jr;return n.asyncQueue.enqueue((0,Q.Z)(function*(){try{yield Cx(n,t),yield qF(n,e),r.resolve()}catch(i){const s=i;if(!x4(s))throw s;jo("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function W4(n){if(n._initialized||n._terminated)throw new De(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sl(ei.fromBase64String(e))}catch(t){throw new De(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sl(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._methodName=e}}class Ax{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const RY=/^__.*__$/;class PY{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ec(e,this.data,this.fieldMask,t,this.fieldTransforms):new g_(e,this.data,t,this.fieldTransforms)}}class q4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ec(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Z4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class Mx{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Mx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Px(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Z4(this.ca)&&RY.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class OY{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wE(e)}ya(e,t,r,i=!1){return new Mx({ca:e,methodName:t,ga:r,path:Sr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yp(n){const e=n._freezeSettings(),t=wE(n._databaseId);return new OY(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kx(n,e,t,r,i,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,i);oL("Data must be an object, but it was:",o,r);const c=Q4(r,o);let d,g;if(s.merge)d=new Vs(o.fieldMask),g=o.fieldTransforms;else if(s.mergeFields){const _=[];for(const w of s.mergeFields){const T=xE(e,w,t);if(!o.contains(T))throw new De(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);J4(_,T)||_.push(T)}d=new Vs(_),g=o.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,g=o.fieldTransforms;return new PY(new ki(c),d,g)}class SE extends Kp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof SE}}function K4(n,e,t){return new Mx({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rL extends Kp{_toFieldTransform(e){return new sE(e.path,new f_)}isEqual(e){return e instanceof rL}}class NY extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=K4(this,e,!0),r=this.pa.map(s=>Qp(s,t)),i=new Bp(r);return new sE(e.path,i)}isEqual(e){return this===e}}class FY extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=K4(this,e,!0),r=this.pa.map(s=>Qp(s,t)),i=new jp(r);return new sE(e.path,i)}isEqual(e){return this===e}}class LY extends Kp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new p_(e.serializer,HH(e.serializer,this.Ia));return new sE(e.path,t)}isEqual(e){return this===e}}function iL(n,e,t,r){const i=n.ya(1,e,t);oL("Data must be an object, but it was:",i,r);const s=[],o=ki.empty();Ud(r,(d,g)=>{const _=Rx(e,d,t);g=(0,at.m9)(g);const w=i.da(_);if(g instanceof SE)s.push(_);else{const T=Qp(g,w);null!=T&&(s.push(_),o.set(_,T))}});const c=new Vs(s);return new q4(o,c,i.fieldTransforms)}function sL(n,e,t,r,i,s){const o=n.ya(1,e,t),c=[xE(e,r,t)],d=[i];if(s.length%2!=0)throw new De(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)c.push(xE(e,s[T])),d.push(s[T+1]);const g=[],_=ki.empty();for(let T=c.length-1;T>=0;--T)if(!J4(g,c[T])){const S=c[T];let M=d[T];M=(0,at.m9)(M);const R=o.da(S);if(M instanceof SE)g.push(S);else{const N=Qp(M,R);null!=N&&(g.push(S),_.set(S,N))}}const w=new Vs(g);return new q4(_,w,o.fieldTransforms)}function Y4(n,e,t,r=!1){return Qp(t,n.ya(r?4:3,e))}function Qp(n,e){if(X4(n=(0,at.m9)(n)))return oL("Unsupported field value:",e,n),Q4(n,e);if(n instanceof Kp)return function(t,r){if(!Z4(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let c=Qp(o,r.wa(s));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,at.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return HH(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=or.fromDate(t);return{timestampValue:y_(r.serializer,i)}}if(t instanceof or){const i=new or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:y_(r.serializer,i)}}if(t instanceof Ax)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sl)return{bytesValue:u$(r.serializer,t._byteString)};if(t instanceof Zn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:EN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Sx(t)}`)}(n,e)}function Q4(n,e){const t={};return dH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ud(n,(r,i)=>{const s=Qp(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function X4(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof or||n instanceof Ax||n instanceof Sl||n instanceof Zn||n instanceof Kp)}function oL(n,e,t){if(!X4(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Sx(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function xE(n,e,t){if((e=(0,at.m9)(e))instanceof rc)return e._internalPath;if("string"==typeof e)return Rx(n,e);throw Px("Field path arguments must be of type string or ",n,!1,void 0,t)}const VY=new RegExp("[~\\*/\\[\\]]");function Rx(n,e,t){if(e.search(VY)>=0)throw Px(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rc(...e.split("."))._internalPath}catch{throw Px(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Px(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||o)&&(d+=" (found",s&&(d+=` in field ${r}`),o&&(d+=` in document ${i}`),d+=")"),new De(le.INVALID_ARGUMENT,c+n+d)}function J4(n,e){return n.some(t=>t.isEqual(e))}class AE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new UY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ox("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class UY extends AE{data(){return super.data()}}function Ox(n,e){return"string"==typeof e?Rx(n,e):e instanceof rc?e._internalPath:e._delegate._internalPath}function ez(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aL{}class ME extends aL{}function Xd(n,e,...t){let r=[];e instanceof aL&&r.push(e),r=r.concat(t),function(i){const s=i.filter(c=>c instanceof R_).length,o=i.filter(c=>c instanceof kE).length;if(s>1||s>0&&o>0)throw new De(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class kE extends ME{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new kE(e,t,r)}_apply(e){const t=this._parse(e);return iz(e._query,t),new Ri(e.firestore,e.converter,hN(e._query,t))}_parse(e){const t=Yp(e.firestore);return function(i,s,o,c,d,g,_){let w;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new De(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){rz(_,g);const T=[];for(const S of _)T.push(nz(c,i,S));w={arrayValue:{values:T}}}else w=nz(c,i,_)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||rz(_,g),w=Y4(o,"where",_,"in"===g||"not-in"===g);return hn.create(d,g,w)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class R_ extends aL{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new R_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:xn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const c of o)iz(s,c),s=hN(s,c)}(e._query,t),new Ri(e.firestore,e.converter,hN(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lL extends ME{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lL(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new De(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new c_(i,s);return function(c,d){if(null===cN(c)){const g=XS(c);null!==g&&sz(0,g,d.field)}}(r,o),o}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Xu(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Nx extends ME{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Nx(e,t,r)}_apply(e){return new Ri(e.firestore,e.converter,JS(e._query,this._limit,this._limitType))}}class Fx extends ME{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Fx(e,t,r)}_apply(e){const t=tz(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,(i=t,new Xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Lx extends ME{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lx(e,t,r)}_apply(e){const t=tz(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,(i=t,new Xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function tz(n,e,t,r){if(t[0]=(0,at.m9)(t[0]),t[0]instanceof AE)return function(i,s,o,c,d){if(!c)throw new De(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const g=[];for(const _ of Up(i))if(_.field.isKeyField())g.push(Lp(s,c.key));else{const w=c.data.field(_.field);if(GS(w))throw new De(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===w){const T=_.field.canonicalString();throw new De(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}g.push(w)}return new Gd(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Yp(n.firestore);return function(s,o,c,d,g,_){const w=s.explicitOrderBy;if(g.length>w.length)throw new De(le.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let S=0;S<g.length;S++){const M=g[S];if(w[S].field.isKeyField()){if("string"!=typeof M)throw new De(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof M}`);if(!dN(s)&&-1!==M.indexOf("/"))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${M}' contains a slash.`);const R=s.path.child(mn.fromString(M));if(!Qe.isDocumentKey(R))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const N=new Qe(R);T.push(Lp(o,N))}else{const R=Y4(c,d,M);T.push(R)}}return new Gd(T,_)}(n._query,n.firestore._databaseId,i,e,t,r)}}function nz(n,e,t){if("string"==typeof(t=(0,at.m9)(t))){if(""===t)throw new De(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dN(e)&&-1!==t.indexOf("/"))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Qe.isDocumentKey(r))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lp(n,new Qe(r))}if(t instanceof Zn)return Lp(n,t._key);throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sx(t)}.`)}function rz(n,e){if(!Array.isArray(n)||0===n.length)throw new De(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iz(n,e){if(e.isInequality()){const r=XS(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new De(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=cN(n);null!==s&&sz(0,i,s)}const t=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new De(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function sz(n,e,t){if(!t.isEqual(e))throw new De(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class uL{convertValue(e,t="none"){switch($d(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ud(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Ax(xr(e.latitude),xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=WS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yw(e));default:return null}}convertTimestamp(e){const t=Bd(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);wt(v$(r));const i=new jd(r.get(1),r.get(3)),s=new Qe(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Vx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ZY extends uL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class Xp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ic extends AE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new RE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ox("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class RE extends ic{data(e={}){return super.data(e)}}class Jd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new RE(this._firestore,this._userDataWriter,r.key,r,new Xp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new RE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Xp(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const c=new RE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Xp(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,g=-1;return 0!==o.type&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),g=s.indexOf(o.doc.key)),{type:YY(o.type),doc:c,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function YY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function az(n,e){return n instanceof ic&&e instanceof ic?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Jd&&e instanceof Jd&&n._firestore===e._firestore&&tL(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class eh extends uL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function lz(n,e,t){n=fn(n,Zn);const r=fn(n.firestore,Kn),i=Vx(n.converter,e,t);return P_(r,[kx(Yp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ar.none())])}function uz(n,e,t,...r){n=fn(n,Zn);const i=fn(n.firestore,Kn),s=Yp(i);let o;return o="string"==typeof(e=(0,at.m9)(e))||e instanceof rc?sL(s,"updateDoc",n._key,e,t,r):iL(s,"updateDoc",n._key,e),P_(i,[o.toMutation(n._key,ar.exists(!0))])}function cz(n,...e){var t,r,i;n=(0,at.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||nL(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges};if(nL(e[o])){const w=e[o];e[o]=null===(t=w.next)||void 0===t?void 0:t.bind(w),e[o+1]=null===(r=w.error)||void 0===r?void 0:r.bind(w),e[o+2]=null===(i=w.complete)||void 0===i?void 0:i.bind(w)}let d,g,_;if(n instanceof Zn)g=fn(n.firestore,Kn),_=h_(n._key.path),d={next:w=>{e[o]&&e[o](cL(g,n,w))},error:e[o+1],complete:e[o+2]};else{const w=fn(n,Ri);g=fn(w.firestore,Kn),_=w._query;const T=new eh(g);d={next:S=>{e[o]&&e[o](new Jd(g,T,w,S))},error:e[o+1],complete:e[o+2]},ez(n._query)}return function(w,T,S,M){const R=new Ix(M),N=new vF(T,R,S);return w.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return pF(yield k_(w),N)})),()=>{R.Dc(),w.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return mF(yield k_(w),N)}))}}(Vr(g),_,c,d)}function P_(n,e){return function(t,r){const i=new Jr;return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function zK(n,e,t){return CF.apply(this,arguments)}(yield XF(t),r,i)})),i.promise}(Vr(n),e)}function cL(n,e,t){const r=t.docs.get(e._key),i=new eh(n);return new ic(n,i,e._key,r,new Xp(t.hasPendingWrites,t.fromCache),e.converter)}const pQ={maxAttempts:5};class dz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yp(e)}set(e,t,r){this._verifyNotCommitted();const i=th(e,this._firestore),s=Vx(i.converter,t,r),o=kx(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ar.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=th(e,this._firestore);let o;return o="string"==typeof(t=(0,at.m9)(t))||t instanceof rc?sL(this._dataReader,"WriteBatch.update",s._key,t,r,i):iL(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=th(e,this._firestore);return this._mutations=this._mutations.concat(new m_(t._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function th(n,e){if((n=(0,at.m9)(n)).firestore!==e)throw new De(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gQ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yp(e)}get(e){const t=th(e,this._firestore),r=new ZY(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const s=i[0];if(s.isFoundDocument())return new AE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new AE(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=th(e,this._firestore),s=Vx(i.converter,t,r),o=kx(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=th(e,this._firestore);let o;return o="string"==typeof(t=(0,at.m9)(t))||t instanceof rc?sL(this._dataReader,"Transaction.update",s._key,t,r,i):iL(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=th(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=th(e,this._firestore),r=new eh(this._firestore);return super.get(e).then(i=>new ic(this._firestore,r,t._key,i._document,new Xp(!1,!1),t.converter))}}function dL(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fz(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function pz(){if(!function Y7(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){o_=rn.SDK_VERSION,(0,rn._registerComponent)(new ao.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new Kn(new b7(t.getProvider("auth-internal")),new I7(t.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new De(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jd(c.options.projectId,d)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(qj,"3.12.0",n),(0,rn.registerVersion)(qj,"3.12.0","esm2017")}();class PE{constructor(e){this._delegate=e}static fromBase64String(e){return pz(),new PE(Sl.fromBase64String(e))}static fromUint8Array(e){return fz(),new PE(Sl.fromUint8Array(e))}toBase64(){return pz(),this._delegate.toBase64()}toUint8Array(){return fz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hL(n){return function CQ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class DQ{enableIndexedDbPersistence(e,t){return function IY(n,e){W4(n=fn(n,Kn));const t=Vr(n);if(t._uninitializedComponentsProvider)throw new De(le.FAILED_PRECONDITION,"SDK cache is already specified.");jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new M_;return G4(t,i,new GF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function CY(n){W4(n=fn(n,Kn));const e=Vr(n);if(e._uninitializedComponentsProvider)throw new De(le.FAILED_PRECONDITION,"SDK cache is already specified.");jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new M_;return G4(e,r,new T4(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function DY(n){if(n._initialized&&!n._terminated)throw new De(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{yield(t=(0,Q.Z)(function*(r){if(!xa.D())return Promise.resolve();const i=r+"main";yield xa.delete(i)}),function(r){return t.apply(this,arguments)})(LN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gz{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function j4(n,e,t,r={}){var i;const s=(n=fn(n,DE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&jo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,c;if("string"==typeof r.mockUserToken)o=r.mockUserToken,c=gi.MOCK_USER;else{o=(0,at.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new De(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new gi(d)}n._authCredentials=new v7(new Zj(o,c))}}(this._delegate,e,t,r)}enableNetwork(){return function SY(n){return function dY(n){return n.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield A4(n),t=yield M4(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i.vu.delete(0),EE(i)}(t)}))}(Vr(n=fn(n,Kn)))}(this._delegate)}disableNetwork(){return function xY(n){return function hY(n){return n.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield A4(n),t=yield M4(n);return e.setNetworkEnabled(!1),(r=(0,Q.Z)(function*(i){const s=et(i);s.vu.add(0),yield I_(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Vr(n=fn(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,F4("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function TY(n){return function(e){const t=new Jr;return e.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function ZK(n,e){return AF.apply(this,arguments)}(yield XF(e),t)})),t.promise}(Vr(n=fn(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function sQ(n,e){return function gY(n,e){const t=new Ix(e);return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return r=yield k_(n),i=t,et(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return r=yield k_(n),i=t,void et(r).ku.delete(i);var r,i}))}}(Vr(n=fn(n,Kn)),nL(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new O_(this,H4(this._delegate,e))}catch(t){throw ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ho(this,xx(this._delegate,e))}catch(t){throw ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,function vY(n,e){if(n=fn(n,DE),eL("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ri(n,null,(t=e,new Xu(mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function mQ(n,e,t){n=fn(n,Kn);const r=Object.assign(Object.assign({},pQ),t);return function(i){if(i.maxAttempts<1)throw new De(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const c=new Jr;return i.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){const d=yield function k4(n){return Dx(n).then(e=>e.datastore)}(i);new uY(i.asyncQueue,d,o,s,c).run()})),c.promise}(Vr(n),i=>e(new gQ(n,i)),r)}(this._delegate,t=>e(new mz(this,t)))}batch(){return Vr(this._delegate),new yz(new dz(this._delegate,e=>P_(this._delegate,e)))}loadBundle(e){return function AY(n,e){const t=Vr(n=fn(n,Kn)),r=new wY;return function mY(n,e,t,r){const i=function(s,o){let c;return c="string"==typeof s?t$().encode(s):s,d=function(d,g){if(d instanceof Uint8Array)return S4(d,g);if(d instanceof ArrayBuffer)return S4(new Uint8Array(d),g);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new aY(d,o);var d}(t,wE(e));n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){!function sY(n,e,t){const r=et(n);var i;(i=(0,Q.Z)(function*(s,o,c){try{const d=yield o.getMetadata();if(yield function(T,S){const M=et(T),R=Lr(S.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",N=>M.qs.getBundleMetadata(N,S.id)).then(N=>!!N&&N.createTime.compareTo(R)>=0)}(s.localStore,d))return yield o.close(),c._completeWith({taskState:"Success",documentsLoaded:(T=d).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);c._updateProgress(y4(d));const g=new VK(d,s.localStore,o.serializer);let _=yield o.bc();for(;_;){const T=yield g.zu(_);T&&c._updateProgress(T),_=yield o.bc()}const w=yield g.complete();return yield nc(s,w.Ju,void 0),yield function(T,S){const M=et(T);return M.persistence.runTransaction("Save bundle","readwrite",R=>M.qs.saveBundleMetadata(R,S))}(s.localStore,d),c._completeWith(w.progress),Promise.resolve(w.Hu)}catch(d){return jo("SyncEngine",`Loading bundle failed with ${d}`),c._failWith(d),Promise.resolve(new Set)}var T}),function(s,o,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield XF(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function MY(n,e){return function yY(n,e){return n.asyncQueue.enqueue((0,Q.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield Tx(n),e)}))}(Vr(n=fn(n,Kn)),e).then(t=>t?new Ri(n,null,t.query):null)}(this._delegate,e).then(t=>t?new _s(this,t):null)}}class Ux extends uL{constructor(e){super(),this.firestore=e}convertBytes(e){return new PE(new Sl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ho.forKey(t,this.firestore,null)}}class mz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ux(e)}get(e){const t=eg(e);return this._delegate.get(t).then(r=>new OE(this._firestore,new ic(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=eg(e);return r?(dL("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=eg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}}class yz{constructor(e){this._delegate=e}set(e,t,r){const i=eg(e);return r?(dL("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=eg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new RE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new NE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Jp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Jp(e,new Ux(e),t),i.set(t,s)),s}}Jp.INSTANCES=new WeakMap;class Ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ux(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ho(t,new Zn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Ho(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new O_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new O_(this.firestore,H4(this._delegate,e))}catch(t){throw ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,at.m9)(e))instanceof Zn&&$4(this._delegate,e)}set(e,t){t=dL("DocumentReference.set",t);try{return t?lz(this._delegate,e,t):lz(this._delegate,e)}catch(r){throw ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?uz(this._delegate,e):uz(this._delegate,e,t,...r)}catch(i){throw ys(i,"updateDoc()","DocumentReference.update()")}}delete(){return function rQ(n){return P_(fn(n.firestore,Kn),[new m_(n._key,ar.none())])}(this._delegate)}onSnapshot(...e){const t=_z(e),r=vz(e,i=>new OE(this.firestore,new ic(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cz(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function XY(n){n=fn(n,Zn);const e=fn(n.firestore,Kn),t=Vr(e),r=new eh(e);return function fY(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(i,s,o){try{const c=yield function(d,g){const _=et(d);return _.persistence.runTransaction("read document","readonly",w=>_.localDocuments.getDocument(w,g))}(i,s);c.isFoundDocument()?o.resolve(c):c.isNoDocument()?o.resolve(null):o.reject(new De(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const d=T_(c,`Failed to get document '${s} from cache`);o.reject(d)}}),function(i,s,o){return r.apply(this,arguments)})(yield Tx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ic(e,r,n._key,i,new Xp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function JY(n){n=fn(n,Zn);const e=fn(n.firestore,Kn);return R4(Vr(e),n._key,{source:"server"}).then(t=>cL(e,n,t))}(this._delegate):function QY(n){n=fn(n,Zn);const e=fn(n.firestore,Kn);return R4(Vr(e),n._key).then(t=>cL(e,n,t))}(this._delegate),t.then(r=>new OE(this.firestore,new ic(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ho(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}function ys(n,e,t){return n.message=n.message.replace(e,t),n}function _z(n){for(const e of n)if("object"==typeof e&&!hL(e))return e;return{}}function vz(n,e){var t,r;let i;return i=hL(n[0])?n[0]:hL(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class OE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ho(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return az(this._delegate,e._delegate)}}class NE extends OE{data(e){const t=this._delegate.data(e);return function y7(n,e){n||lt()}(void 0!==t),t}}class _s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ux(e)}where(e,t,r){try{return new _s(this.firestore,Xd(this._delegate,function BY(n,e,t){const r=e,i=Ox("where",n);return kE._create(i,r,t)}(e,t,r)))}catch(i){throw ys(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _s(this.firestore,Xd(this._delegate,function jY(n,e="asc"){const t=e,r=Ox("orderBy",n);return lL._create(r,t)}(e,t)))}catch(r){throw ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _s(this.firestore,Xd(this._delegate,function HY(n){return U4("limit",n),Nx._create("limit",n,"F")}(e)))}catch(t){throw ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _s(this.firestore,Xd(this._delegate,function $Y(n){return U4("limitToLast",n),Nx._create("limitToLast",n,"L")}(e)))}catch(t){throw ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _s(this.firestore,Xd(this._delegate,function zY(...n){return Fx._create("startAt",n,!0)}(...e)))}catch(t){throw ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _s(this.firestore,Xd(this._delegate,function GY(...n){return Fx._create("startAfter",n,!1)}(...e)))}catch(t){throw ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _s(this.firestore,Xd(this._delegate,function WY(...n){return Lx._create("endBefore",n,!1)}(...e)))}catch(t){throw ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _s(this.firestore,Xd(this._delegate,function qY(...n){return Lx._create("endAt",n,!0)}(...e)))}catch(t){throw ys(t,"endAt()","Query.endAt()")}}isEqual(e){return tL(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function tQ(n){n=fn(n,Ri);const e=fn(n.firestore,Kn),t=Vr(e),r=new eh(e);return function pY(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(i,s,o){try{const c=yield mx(i,s,!0),d=new b4(s,c.ir),g=d.sc(c.documents),_=d.applyChanges(g,!1);o.resolve(_.snapshot)}catch(c){const d=T_(c,`Failed to execute query '${s} against cache`);o.reject(d)}}),function(i,s,o){return r.apply(this,arguments)})(yield Tx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Jd(e,r,n,i))}(this._delegate):"server"===e?.source?function nQ(n){n=fn(n,Ri);const e=fn(n.firestore,Kn),t=Vr(e),r=new eh(e);return P4(t,n._query,{source:"server"}).then(i=>new Jd(e,r,n,i))}(this._delegate):function eQ(n){n=fn(n,Ri);const e=fn(n.firestore,Kn),t=Vr(e),r=new eh(e);return ez(n._query),P4(t,n._query).then(i=>new Jd(e,r,n,i))}(this._delegate),t.then(r=>new fL(this.firestore,new Jd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=_z(e),r=vz(e,i=>new fL(this.firestore,new Jd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cz(this._delegate,t,r)}withConverter(e){return new _s(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}class SQ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new NE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fL{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new NE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new SQ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new NE(this._firestore,r))})}isEqual(e){return az(this._delegate,e._delegate)}}class O_ extends _s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ho(this.firestore,e):null}doc(e){try{return new Ho(this.firestore,void 0===e?xx(this._delegate):xx(this._delegate,e))}catch(t){throw ys(t,"doc()","CollectionReference.doc()")}}add(e){return function iQ(n,e){const t=fn(n.firestore,Kn),r=xx(n),i=Vx(n.converter,e);return P_(t,[kx(Yp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ar.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ho(this.firestore,t))}isEqual(e){return $4(this._delegate,e._delegate)}withConverter(e){return new O_(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}function eg(n){return fn(n,Zn)}class pL{constructor(...e){this._delegate=new rc(...e)}static documentId(){return new pL(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,at.m9)(e))instanceof rc&&this._delegate._internalPath.isEqual(e._internalPath)}}class tg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _Q(){return new rL("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new tg(e)}static delete(){const e=function yQ(){return new SE("deleteField")}();return e._methodName="FieldValue.delete",new tg(e)}static arrayUnion(...e){const t=function vQ(...n){return new NY("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new tg(t)}static arrayRemove(...e){const t=function bQ(...n){return new FY("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new tg(t)}static increment(e){const t=function wQ(n){return new LY("increment",n)}(e);return t._methodName="FieldValue.increment",new tg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const xQ={Firestore:gz,GeoPoint:Ax,Timestamp:or,Blob:PE,Transaction:mz,WriteBatch:yz,DocumentReference:Ho,DocumentSnapshot:OE,Query:_s,QueryDocumentSnapshot:NE,QuerySnapshot:fL,CollectionReference:O_,FieldPath:pL,FieldValue:tg,setLogLevel:function TQ(n){!function m7(n){Fd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function MQ(n){(function AQ(n,e){n.INTERNAL.registerComponent(new ao.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},xQ)))})(n,(e,t)=>new gz(e,t,new DQ)),n.registerVersion("@firebase/firestore-compat","0.3.9")}(_U.Z);var kQ=j(6451);class RQ extends la.x{constructor(e=1/0,t=1/0,r=Dk){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let c=0;for(let d=1;d<r.length&&r[d]<=o;d+=2)c=d;c&&r.splice(0,c+1)}}}var PQ=j(3099);function bz(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,PQ.B)({connector:()=>new RQ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function wz(n,e){return(0,Do.m)(e)?Ir(()=>n,e):Ir(()=>n)}const Ez=new f.OlP("angularfire2.auth.use-emulator"),Iz=new f.OlP("angularfire2.auth.settings"),Cz=new f.OlP("angularfire2.auth.tenant-id"),Dz=new f.OlP("angularfire2.auth.langugage-code"),Tz=new f.OlP("angularfire2.auth.use-device-language"),Sz=new f.OlP("angularfire.auth.persistence"),xz=(n,e,t,r,i,s,o,c)=>(0,hs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const d=e.runOutsideAngular(()=>n.auth());if(t&&d.useEmulator(...t),r&&(d.tenantId=r),d.languageCode=i,s&&d.useDeviceLanguage(),o)for(const[g,_]of Object.entries(o))d.settings[g]=_;return c&&d.setPersistence(c),d},[t,r,i,s,o,c]);let Az=(()=>{class n{constructor(t,r,i,s,o,c,d,g,_,w,T,S){const M=new la.x,R=mt(void 0).pipe((0,Sp.Q)(o.outsideAngular),Ir(()=>s.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,Nt.U)(()=>(0,hs.on)(t,s,r)),(0,Nt.U)(N=>xz(N,s,c,g,_,w,d,T)),bz({bufferSize:1,refCount:!1}));if(go(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{R.pipe(To()).subscribe();const B=R.pipe(Ir(te=>te.getRedirectResult().then(re=>re,()=>null)),ds,bz({bufferSize:1,refCount:!1})),G=R.pipe(Ir(te=>new Rs.y(re=>({unsubscribe:s.runOutsideAngular(()=>te.onAuthStateChanged(fe=>re.next(fe),fe=>re.error(fe),()=>re.complete()))})))),X=R.pipe(Ir(te=>new Rs.y(re=>({unsubscribe:s.runOutsideAngular(()=>te.onIdTokenChanged(fe=>re.next(fe),fe=>re.error(fe),()=>re.complete()))}))));this.authState=B.pipe(wz(G),(0,yw.R)(o.outsideAngular),(0,Sp.Q)(o.insideAngular)),this.user=B.pipe(wz(X),(0,yw.R)(o.outsideAngular),(0,Sp.Q)(o.insideAngular)),this.idToken=this.user.pipe(Ir(te=>te?(0,En.D)(te.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Ir(te=>te?(0,En.D)(te.getIdTokenResult()):mt(null))),this.credential=(0,kQ.T)(B,M,this.authState.pipe(Zs(te=>!te))).pipe((0,Nt.U)(te=>te?.user?te:null),(0,yw.R)(o.outsideAngular),(0,Sp.Q)(o.insideAngular))}return(0,hs.pX)(this,R,s,{spy:{apply:(N,B,G)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&G.then(X=>M.next(X))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hs.Dh),f.LFG(hs.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(_w),f.LFG(Ez,8),f.LFG(Iz,8),f.LFG(Cz,8),f.LFG(Dz,8),f.LFG(Tz,8),f.LFG(Sz,8),f.LFG(Dw,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Mz(n,e){return function NQ(n,e=Tk){return new Rs.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function gL(n,e){return Mz(n,e).pipe((0,Nt.U)(t=>({payload:t,type:"query"})))}function Bx(n,e){return gL(n,e).pipe(om(void 0),oO(),(0,Nt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((o,c)=>{const d=i.find(_=>_.doc.ref.isEqual(o.ref)),g=t?.payload.docs.find(_=>_.ref.isEqual(o.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(o.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:o}})}),s}))}function kz(n,e,t){return Bx(n,t).pipe(So((r,i)=>function LQ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function VQ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mL(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mL(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mL(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function c8(n,e=gu.y){return n=n??d8,(0,Kr.e)((t,r)=>{let i,s=!0;t.subscribe((0,jr.x)(r,o=>{const c=e(o);(s||!n(i,c))&&(s=!1,i=c,r.next(o))}))})}(),(0,Nt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function mL(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Rz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Pz{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Bx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Nt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(om(void 0),oO(),Zs(([r,i])=>i.length>0||!r),(0,Nt.U)(([r,i])=>i),ds)}auditTrail(e){return this.stateChanges(e).pipe(So((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Rz(e);return kz(this.query,t,this.afs.schedulers.outsideAngular).pipe(ds)}valueChanges(e={}){return gL(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ds)}get(e){return(0,En.D)(this.query.get(e)).pipe(ds)}add(e){return this.ref.add(e)}doc(e){return new Oz(this.ref.doc(e),this.afs)}}class Oz{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Lz(r,t);return new Pz(i,s,this.afs)}snapshotChanges(){return function FQ(n,e){return Mz(n,e).pipe(om(void 0),oO(),(0,Nt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ds)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Nt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(ds)}}class UQ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Bx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zs(t=>t.length>0),ds):Bx(this.query,this.afs.schedulers.outsideAngular).pipe(ds)}auditTrail(e){return this.stateChanges(e).pipe(So((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Rz(e);return kz(this.query,t,this.afs.schedulers.outsideAngular).pipe(ds)}valueChanges(e={}){return gL(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ds)}get(e){return(0,En.D)(this.query.get(e)).pipe(ds)}}const Nz=new f.OlP("angularfire2.enableFirestorePersistence"),Fz=new f.OlP("angularfire2.firestore.persistenceSettings"),BQ=new f.OlP("angularfire2.firestore.settings"),jQ=new f.OlP("angularfire2.firestore.use-emulator");function Lz(n,e=(t=>t)){return{query:e(n),ref:n}}let yL=(()=>{class n{constructor(t,r,i,s,o,c,d,g,_,w,T,S,M,R,N,B,G){this.schedulers=d;const X=(0,hs.on)(t,c,r),te=_;w&&xz(X,c,T,M,R,N,S,B),[this.firestore,this.persistenceEnabled$]=(0,hs.cc)(`${X.name}.firestore`,"AngularFirestore",X.name,()=>{const re=c.runOutsideAngular(()=>X.firestore());if(s&&re.settings(s),te&&re.useEmulator(...te),i&&!go(o)){const fe=()=>{try{return(0,En.D)(re.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(Ie){return typeof console<"u"&&console.warn(Ie),mt(!1)}};return[re,c.runOutsideAngular(fe)]}return[re,mt(!1)]},[s,te,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Lz(i,r),c=this.schedulers.ngZone.run(()=>s);return new Pz(c,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new UQ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Oz(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hs.Dh),f.LFG(hs.xv,8),f.LFG(Nz,8),f.LFG(BQ,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(_w),f.LFG(Fz,8),f.LFG(jQ,8),f.LFG(Az,8),f.LFG(Ez,8),f.LFG(Iz,8),f.LFG(Cz,8),f.LFG(Dz,8),f.LFG(Tz,8),f.LFG(Sz,8),f.LFG(Dw,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HQ=(()=>{class n{constructor(){r8.Z.registerVersion("angularfire",KT.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Nz,useValue:!0},{provide:Fz,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[yL]}),n})(),_L=(()=>{class n{constructor(t,r){this.angularstorage=t,this.angularfirestore=r}getVideoList(){const t=[];return this.angularstorage.ref("").listAll().subscribe(i=>{for(let s=0;s<i.items.length;s++){let o=i.items[s].name;this.angularstorage.ref(i.items[s].name).getDownloadURL().subscribe(g=>{t.push({nom:o,lien:g})})}}),t}getProjetList(){return this.angularfirestore.collection("projet-collection").snapshotChanges()}createProjet(t){return new Promise((r,i)=>{this.angularfirestore.collection("projet-collection").add(t).then(s=>{console.log(s)},s=>i(s))})}deleteProjet(t){return this.angularfirestore.collection("projet-collection").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(u8),f.LFG(yL))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jx=(()=>{class n{constructor(t){this.angularfirestore=t}getExperienceList(){return this.angularfirestore.collection("experience-collection").snapshotChanges()}createExperience(t){return new Promise((r,i)=>{this.angularfirestore.collection("experience-collection").add(t).then(s=>{console.log(s)},s=>i(s))})}getExperienceDoc(t){return this.angularfirestore.collection("experience-collection").doc(t).valueChanges()}updateExperience(t,r){return this.angularfirestore.collection("experience-collection").doc(r).update({nom:t.nom,type:t.type,dateDebut:t.dateDebut,dateFin:t.dateFin,description:t.description})}deleteExperience(t){return this.angularfirestore.collection("experience-collection").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(yL))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vL=(()=>{class n{constructor(t,r){this.el=t,this.renderer=r}ngOnInit(){const t=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&(this.renderer.addClass(this.el.nativeElement,"fade-in-text"),this.renderer.removeClass(this.el.nativeElement,"invis"),t.unobserve(i.target))})},{threshold:.5});t.observe(this.el.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","appFadeIn",""]]}),n})();function $Q(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"ul",7)(1,"li",8)(2,"button",9),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openAccueil())}),f._uU(3,"1. Accueil"),f.qZA()(),f.TgZ(4,"li",8)(5,"button",10),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openApropos())}),f._uU(6,"2. \xc0 propos"),f.qZA()(),f.TgZ(7,"li",8)(8,"button",10),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openExperiences())}),f._uU(9,"3. Exp\xe9riences"),f.qZA()(),f.TgZ(10,"li",8)(11,"button",9),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openProjets())}),f._uU(12,"4. Projets"),f.qZA()()()}}function zQ(n,e){1&n&&f._UZ(0,"img",13)}function GQ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",11),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openMenu())}),f.YNc(1,zQ,1,0,"img",12),f.qZA()}if(2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",t.menuButton)}}function WQ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",14)(1,"nav",15)(2,"ul",16)(3,"li")(4,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openAccueil())}),f._uU(5,"1. Accueil"),f.qZA()(),f.TgZ(6,"li")(7,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openApropos())}),f._uU(8,"2. \xc0 propos"),f.qZA()(),f.TgZ(9,"li")(10,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openExperiences())}),f._uU(11,"3. Exp\xe9riences"),f.qZA()(),f.TgZ(12,"li")(13,"button",17),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.openProjets())}),f._uU(14,"4. Projets"),f.qZA()()(),f.TgZ(15,"button",18),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.closeMenu())}),f._UZ(16,"img",19),f.qZA()()()}if(2&n){const t=f.oxw();f.Q6J("@fadeInAnimation",t.menuVisibility?"visible":"hidden")}}const qQ=function(n){return{"blur-background":n}},ZQ=function(n){return{"drop-shadow":n}};let KQ=(()=>{class n{constructor(t){this.sharedService=t,this.menuAccueilClick=new f.vpe,this.menuAproposClick=new f.vpe,this.menuExperienceClick=new f.vpe,this.menuProjetClick=new f.vpe,this.sm=!1,this.menuVisibility=!1,this.menuButton=!0,this.isMenuOpenHeader=!1,this.headerBorder=!1}ngOnInit(){this.sharedService.isHeaderBorder$.subscribe(t=>{this.headerBorder=t}),this.getScreenWidth=window.innerWidth,this.getScreenHeight=window.innerHeight,this.onWindowResize()}openMenu(){this.menuVisibility=!0,this.menuButton=!1,this.isMenuOpenHeader=!0,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}closeMenu(){this.menuVisibility=!1,this.menuButton=!0,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}onWindowResize(){this.getScreenWidth=window.innerWidth,this.getScreenHeight=window.innerHeight,this.getScreenWidth<=769?(this.sm=!0,this.sharedService.setIsSM(this.sm),this.menuButton=!0):(this.sm=!1,this.sharedService.setIsSM(this.sm),this.menuVisibility=!1,this.menuButton=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader))}openAccueil(){this.menuAccueilClick.emit(),this.menuButton=!0,this.menuVisibility=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}openApropos(){this.menuAproposClick.emit(),this.menuButton=!0,this.menuVisibility=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}openExperiences(){this.menuExperienceClick.emit(),this.menuButton=!0,this.menuVisibility=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}openProjets(){this.menuProjetClick.emit(),this.menuButton=!0,this.menuVisibility=!1,this.isMenuOpenHeader=!1,this.sharedService.setIsMenuOpenHeader(this.isMenuOpenHeader)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ck))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-header"]],hostBindings:function(t,r){1&t&&f.NdJ("resize",function(s){return r.onWindowResize(s)},!1,f.Jf7)},outputs:{menuAccueilClick:"menuAccueilClick",menuAproposClick:"menuAproposClick",menuExperienceClick:"menuExperienceClick",menuProjetClick:"menuProjetClick"},decls:7,vars:10,consts:[[1,"fixed","z-20","w-full",3,"ngClass"],[1,"relative","flex","items-center","justify-between","w-full","h-10","sm:h-10","md:h-20","lg:h-20","xl:h-20","2xl:h-20","bg-gradient-to-r","from-white","to-sky-200",3,"ngClass"],["href","https://zakkwylde008.github.io/bruel-portfolio/","alt","Accueil"],["appFadeIn","","src","assets/images/bold.png","alt","Accueil",1,"invis","rounded","h-10","w-10","pt-1","pb-1","pl-4","2xl:h-20","2xl:w-28","2xl:pt-4","2xl:pb-4","2xl:pl-16","xl:h-20","xl:w-20","xl:pt-2","xl:pb-2","xl:pl-8","lg:h-20","lg:w-20","lg:pt-2","lg:pb-2","lg:pl-8","md:h-20","md:w-20","md:pt-2","md:pb-2","md:pl-8","sm:h-10","sm:w-10","sm:pt-1","sm:pb-1","sm:pl-2"],["class","2xl:flex 2xl:items-end 2xl:space-x-8 2xl:mr-8 xl:flex xl:items-end  xl:space-x-4 xl:mr-4 lg:flex lg:items-end lg:space-x-4 lg:mr-4 md:flex md:items-end md:space-x-4 md:mr-4",4,"ngIf"],["class","pt-1 pb-1 mr-4 rounded-lg",3,"click",4,"ngIf"],["class","fixed z-30 top-0 right-0 h-full w-auto bg-sky-200 rounded",4,"ngIf"],[1,"2xl:flex","2xl:items-end","2xl:space-x-8","2xl:mr-8","xl:flex","xl:items-end","xl:space-x-4","xl:mr-4","lg:flex","lg:items-end","lg:space-x-4","lg:mr-4","md:flex","md:items-end","md:space-x-4","md:mr-4"],[1,"py-2","2xl:py-3"],["appFadeIn","",1,"invis","text-lg","text-base","2xl:text-2xl","font-sans","duration-200","hover:text-sky-400",3,"click"],["appFadeIn","",1,"invis","text-base","text-lg","2xl:text-2xl","font-sans","duration-200","hover:text-sky-400",3,"click"],[1,"pt-1","pb-1","mr-4","rounded-lg",3,"click"],["appFadeIn","","src","assets/images/menu.png","alt","Menu","class","invis h-10 w-10 rounded-lg",4,"ngIf"],["appFadeIn","","src","assets/images/menu.png","alt","Menu",1,"invis","h-10","w-10","rounded-lg"],[1,"fixed","z-30","top-0","right-0","h-full","w-auto","bg-sky-200","rounded"],[1,"h-full","relative","flex","space-x-20","mt-5","ml-2","mr-2"],[1,"flex","flex-col","space-y-5"],[1,"text-base","text-lg","font-sans","duration-200","hover:text-sky-400",3,"click"],[3,"click"],["src","assets/images/annuler.png","alt","Fermer",1,"absolute","top-0","right-0","h-7","w-7"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"nav",1)(2,"a",2),f._UZ(3,"img",3),f.qZA(),f.YNc(4,$Q,13,0,"ul",4),f.YNc(5,GQ,2,1,"button",5),f.qZA()(),f.YNc(6,WQ,17,1,"div",6)),2&t&&(f.Q6J("@menuFadeInAnimation",!0)("ngClass",f.VKq(6,qQ,r.isMenuOpenHeader)),f.xp6(1),f.Q6J("ngClass",f.VKq(8,ZQ,r.headerBorder)),f.xp6(3),f.Q6J("ngIf",!r.sm),f.xp6(1),f.Q6J("ngIf",r.sm),f.xp6(1),f.Q6J("ngIf",r.menuVisibility))},dependencies:[an,er,vL],styles:[".animate-spin[_ngcontent-%COMP%]{animation:spin 1s 0s}.blur-background[_ngcontent-%COMP%]{filter:blur(5px)}.invis[_ngcontent-%COMP%]{opacity:0}.fade-in-text[_ngcontent-%COMP%]{animation:fadeIn .5s}@keyframes fadeIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:none}}"],data:{animation:[Y0,Bf]}}),n})();function YQ(n,e){1&n&&(f.TgZ(0,"div",2)(1,"a",3),f._UZ(2,"img",4),f.qZA(),f._uU(3,"\xa0 "),f.TgZ(4,"a",5),f._UZ(5,"img",6),f.qZA(),f._uU(6,"\xa0 "),f.TgZ(7,"a",7),f._UZ(8,"img",8),f.qZA(),f._uU(9,"\xa0 "),f.TgZ(10,"a",9),f._UZ(11,"img",10),f.qZA(),f._uU(12,"\xa0 "),f._UZ(13,"div",11),f.qZA())}function QQ(n,e){1&n&&(f.TgZ(0,"div",12)(1,"span",13),f._uU(2,"razafimbelobruel@gmail.com"),f.qZA(),f._UZ(3,"div",14),f.qZA())}let XQ=(()=>{class n{constructor(t){this.sharedService=t,this.menuVisibility=!1,this.isMenuOpenHeader=!1}ngOnInit(){this.onWindowResize()}onWindowResize(){this.getScreenWidth=window.innerWidth,this.getScreenHeight=window.innerHeight,this.getScreenWidth<769?(this.menuVisibility=!1,this.sharedService.setIsMenuOpenFooter(this.menuVisibility)):(this.menuVisibility=!0,this.sharedService.setIsMenuOpenFooter(this.menuVisibility))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ck))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],hostBindings:function(t,r){1&t&&f.NdJ("resize",function(s){return r.onWindowResize(s)},!1,f.Jf7)},decls:2,vars:2,consts:[["appFadeIn","","class","invis fixed flex flex-col items-center bottom-48 lg:ml-24 md:ml-20 xl:ml-32",4,"ngIf"],["appFadeIn","","class","invis fixed flex flex-col items-center right-0 bottom-80",4,"ngIf"],["appFadeIn","",1,"invis","fixed","flex","flex-col","items-center","bottom-48","lg:ml-24","md:ml-20","xl:ml-32"],["href","https://www.linkedin.com/in/bruel-razafimbelo-ratompoarisoa-48979026a/","target","_blank"],["src","assets/images/linkedin.png","title","Linkedin",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://github.com/ZakkWylde008","target","_blank"],["src","assets/images/github.png","title","Github",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://gitlab.com/ZakkWylde008","target","_blank"],["src","assets/images/gitlab.png","title","Gitlab",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://www.codewars.com/users/ZakkWylde008","target","_blank"],["src","assets/images/codewars.png","title","Codewars",1,"w-6","h-6","duration-500","hover:scale-150"],[1,"absolute","h-44","border-black","border-2","rounded-lg","mt-48"],["appFadeIn","",1,"invis","fixed","flex","flex-col","items-center","right-0","bottom-80"],[1,"rotate-90","italic","mt-10","duration-500","hover:scale-110"],[1,"absolute","h-44","mt-48","border-black","border-2","rounded-lg"]],template:function(t,r){1&t&&(f.YNc(0,YQ,14,0,"div",0),f.YNc(1,QQ,4,0,"div",1)),2&t&&(f.Q6J("ngIf",r.menuVisibility),f.xp6(1),f.Q6J("ngIf",r.menuVisibility))},dependencies:[er,vL],styles:[".invis[_ngcontent-%COMP%]{opacity:0}.fade-in-text[_ngcontent-%COMP%]{animation:fadeIn .5s}@keyframes fadeIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:none}}"],data:{animation:[Bf]}}),n})(),JQ=(()=>{class n{transform(t){let r=t.split(""),i=[];for(let s=0;s<r.length;s++){if("."==r[s])return i.join("").toString();i.push(r[s])}return i.join("").toString()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=f.Yjl({name:"removeExtension",type:n,pure:!0}),n})();const eX=["expChart"];function tX(n,e){1&n&&(f.TgZ(0,"div",45)(1,"div",46),f._UZ(2,"div",47)(3,"div",47)(4,"div",47)(5,"div",47)(6,"div",47)(7,"div",47)(8,"div",47)(9,"div",47)(10,"div",47)(11,"div",47),f.qZA()())}function nX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"app-header",48),f.NdJ("menuAccueilClick",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.scrollToDiv1())})("menuAproposClick",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.scrollToDiv2())})("menuExperienceClick",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.scrollToDiv3())})("menuProjetClick",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.scrollToDiv4())}),f.qZA()}}const rX=function(n,e){return{"border-sky-400":n,"text-xs":e}};function iX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",49),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw();return f.KtG(o.changeDescription(s))}),f._uU(1),f.qZA()}if(2&n){const t=e.$implicit,r=f.oxw();f.Q6J("ngClass",f.WLB(2,rX,t.isShow,r.isTextXS)),f.xp6(1),f.hij(" ",t.nom," ")}}function sX(n,e){if(1&n&&(f.TgZ(0,"div",51)(1,"p",52),f._uU(2),f.qZA(),f.TgZ(3,"p",53),f._uU(4),f.ALo(5,"date"),f.ALo(6,"date"),f.qZA(),f.TgZ(7,"p",54),f._uU(8),f.qZA()()),2&n){const t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.type),f.xp6(2),f.AsE("",f.xi3(5,4,t.dateDebut,"dd/MM/yyyy")," - ",f.xi3(6,7,t.dateFin,"dd/MM/yyyy"),""),f.xp6(4),f.Oqu(t.description)}}function oX(n,e){if(1&n&&(f.TgZ(0,"div"),f.YNc(1,sX,9,10,"div",50),f.qZA()),2&n){const t=e.$implicit;f.xp6(1),f.Q6J("ngIf",t.isShow)}}function aX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",57),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw(2);return f.KtG(o.openDemonstration(s))}),f._UZ(1,"img",58),f.TgZ(2,"div",59)(3,"p",60),f._uU(4),f.ALo(5,"removeExtension"),f.qZA()(),f.TgZ(6,"div",59)(7,"p",61),f._uU(8),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(4),f.Oqu(f.lcZ(5,2,t.nom)),f.xp6(4),f.Oqu(t.outils)}}function lX(n,e){if(1&n&&(f.TgZ(0,"div",55),f.YNc(1,aX,9,4,"div",56),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngForOf",t.projet)}}function uX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",62),f._UZ(1,"video",63),f.TgZ(2,"div",64),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.closeDemonstration())}),f.TgZ(3,"button",65),f._uU(4," X "),f.qZA()()()}if(2&n){const t=f.oxw();f.xp6(1),f.Q6J("src",t.videoUrl,f.LSH)}}function cX(n,e){1&n&&(f.TgZ(0,"div",66)(1,"a",67),f._UZ(2,"img",68),f.qZA(),f.TgZ(3,"a",69),f._UZ(4,"img",70),f.qZA(),f.TgZ(5,"a",71),f._UZ(6,"img",72),f.qZA(),f.TgZ(7,"a",73),f._UZ(8,"img",74),f.qZA()())}const dX=function(n){return{hidden:n}},hX=function(n){return{"blur-background":n}};Uo.register(...g3);let fX=(()=>{class n{constructor(t,r,i){this.sharedService=t,this.projectservice=r,this.experienceService=i,this.isLoad=!1,this.isMenuOpen=!1,this.header_variable=!0,this.experience=[],this.projet=[],this.bodyNow=0,this.docbodyNow=0,this.headerBorder=!1,this.isShowVideoModal=!1,this.videoUrl="",this.menuVisibilityFooter=!1,this.isTextXS=!1}ngOnInit(){this.isLoad=!0,setTimeout(()=>{this.isLoad=!1},3500),this.sharedService.isMenuOpenHeader$.subscribe(t=>{this.isMenuOpen=t}),this.sharedService.isMenuOpenFooter$.subscribe(t=>{this.menuVisibilityFooter=t}),this.experienceService.getExperienceList().subscribe(t=>{this.experience=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data(),isShow:!1})).sort(function(r,i){return+new Date(i.dateDebut)-+new Date(r.dateDebut)}),this.experience[0].isShow=!0}),this.projectservice.getProjetList().subscribe(t=>{this.projet=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})).sort(function(r,i){return+new Date(i.date)-+new Date(r.date)})}),this.sharedService.isSM$.subscribe(t=>{this.isTextXS=t})}ngAfterViewInit(){new Uo(this.expChart.nativeElement,{type:"bar",data:{labels:["Angular","Bootstrap","Git","MySQL","Postgres","Symfony","Tailwind"],datasets:[{label:"Mes connaissances (%)",data:[60,50,75,80,60,50,55],backgroundColor:["rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)","rgb(101, 178, 255)"],borderColor:["rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)","rgb(0, 127, 255)"],borderWidth:2,barPercentage:.2,categoryPercentage:1,borderRadius:10}]},options:{responsive:!0,indexAxis:"y",elements:{line:{borderWidth:3}},plugins:{legend:{labels:{font:{size:18}},display:!0}},scales:{x:{max:100}}}})}changeDescription(t){t.isShow=!0;for(let r=0;r<this.experience.length;r++)this.experience[r]!=t&&!0===this.experience[r].isShow&&(this.experience[r].isShow=!1)}openDemonstration(t){this.isShowVideoModal=!0,this.videoUrl=t.url}closeDemonstration(){this.isShowVideoModal=!1,this.videoUrl=""}openCV(){window.open("assets/pdf/CV_Bruel.pdf","_blank")}contactMe(){window.open("mailto:razafimbelobruel@gmail.com","_self")}scrollFunction(){(document.body.scrollTop>this.bodyNow||document.documentElement.scrollTop>this.docbodyNow)&&(this.header_variable=!1,this.bodyNow=document.body.scrollTop,this.docbodyNow=document.documentElement.scrollTop),(this.bodyNow>document.body.scrollTop||this.docbodyNow>document.documentElement.scrollTop)&&(this.header_variable=!0,this.bodyNow=document.body.scrollTop,this.docbodyNow=document.documentElement.scrollTop),this.bodyNow>0||this.docbodyNow>0?(this.headerBorder=!0,this.sharedService.setIsHeaderBorder(this.headerBorder)):(this.headerBorder=!1,this.sharedService.setIsHeaderBorder(this.headerBorder))}scrollToDiv1(){document.getElementById("target1").scrollIntoView({behavior:"smooth"})}scrollToDiv2(){document.getElementById("target2").scrollIntoView({behavior:"smooth"})}scrollToDiv3(){document.getElementById("target3").scrollIntoView({behavior:"smooth"})}scrollToDiv4(){document.getElementById("target4").scrollIntoView({behavior:"smooth"})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ck),f.Y36(_L),f.Y36(jx))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-accueil"]],viewQuery:function(t,r){if(1&t&&f.Gf(eX,5),2&t){let i;f.iGM(i=f.CRH())&&(r.expChart=i.first)}},hostBindings:function(t,r){1&t&&f.NdJ("scroll",function(){return r.scrollFunction()},!1,f.evT)},decls:87,vars:14,consts:[["class","grid h-screen bg-gradient-to-r from-white to-sky-200 place-items-center",4,"ngIf"],[3,"ngClass"],[1,"h-screen","overflow-y-scroll"],[3,"menuAccueilClick","menuAproposClick","menuExperienceClick","menuProjetClick",4,"ngIf"],[1,"absolute","z-0","w-full","bg-gradient-to-r","from-white","to-sky-200",3,"ngClass"],[1,"flex","items-center","justify-center"],[1,"fixed","top-36","left-1/3","2xl:w-96","2xl:h-96","xl:w-80","xl:h-80","lg:w-64","lg:h-64","md:w-60","md:h-60","sm:w-56","sm:h-56","w-48","h-48","bg-sky-200","rounded-full","blur-md","animate-blob1"],[1,"fixed","top-36","right-1/3","2xl:w-96","2xl:h-96","xl:w-80","xl:h-80","lg:w-64","lg:h-64","md:w-60","md:h-60","sm:w-56","sm:h-56","w-48","h-48","bg-white","rounded-full","blur-md","animate-blob2"],["id","target1",1,"w-auto","h-auto","mt-20","sm:mt-20","md:mt-20","lg:mt-20","xl:mt-24","2xl:mt-26"],["appFadeIn","",1,"invis","item-center","pt-14","ml-8","mr-8","sm:pt-16","sm:ml-20","sm:mr-20","md:pt-16","md:ml-40","md:mr-40","lg:pt-20","lg:ml-52","lg:mr-52","xl:pt-20","xl:ml-64","xl:mr-64","2xl:pt-20","2xl:ml-64","2xl:mr-64"],[1,"text-base","sm:text-base","md:text-base","lg:text-lg","xl:text-xl","2xl:text-2xl","font-sans","drop-shadow"],[1,"mt-4","text-xl","sm:mt-4","sm:text-2xl","md:mt-4","md:text-2xl","lg:mt-4","lg:text-3xl","xl:mt-4","xl:text-5xl","2xl:mt-4","2xl:text-5xl","font-sans","font-extrabold","drop-shadow"],[1,"text-lg","sm:text-xl","md:text-2xl","lg:text-3xl","xl:text-5xl","2xl:text-5xl","text-slate-400","font-sans","font-bold","drop-shadow"],["appFadeIn","",1,"invis","pr-8","ml-8","mr-8","mt-4","sm:w-80","sm:ml-20","sm:mr-20","sm:mt-4","md:w-96","md:ml-40","md:mr-40","md:mt-6","lg:w-1/3","lg:ml-52","lg:mr-52","lg:mt-6","xl:w-1/3","xl:ml-64","xl:mr-64","xl:mt-6","2xl:w-1/3","2xl:ml-64","2xl:mr-64","2xl:mt-6"],[1,"text-base","drop-shadow"],["appFadeIn","",1,"invis","w-44","h-12","ml-8","mr-8","mt-4","sm:w-44","sm:h-12","sm:ml-20","sm:mr-20","sm:mt-6","md:w-44","md:h-12","md:ml-40","md:mr-40","md:mt-10","lg:w-52","lg:h-16","lg:ml-52","lg:mr-52","lg:mt-8","xl:w-52","xl:h-16","xl:ml-64","xl:mr-64","xl:mt-8","2xl:w-52","2xl:h-16","2xl:ml-64","2xl:mr-64","2xl:mt-8","font-bold","bg-sky-200","drop-shadow","duration-500","border-sky-200","rounded-lg","hover:bg-sky-300","hover:border-[2px]","hover:text-slate-500",3,"click"],["id","target2",1,"w-auto","h-auto"],["appFadeIn","",1,"invis","flex","items-center","space-x-2","2xl:ml-64","2xl:mr-64","2xl:mt-96","xl:ml-64","xl:mr-64","xl:mt-96","lg:ml-52","lg:mr-52","lg:mt-96","md:ml-40","md:mr-40","md:mt-96","sm:ml-20","sm:mr-20","sm:mt-96","ml-8","mr-8","mt-96","drop-shadow"],[1,"2xl:text-3xl","xl:text-3xl","lg:text-2xl","md:text-xl","sm:text-lg","text-base","font-sans","font-extrabold"],[1,"w-1/2","border-black","border-2"],["appFadeIn","",1,"invis","flex","flex-col","space-y-2","pt-2","ml-8","mr-8","2xl:flex-row","2xl:space-x-6","2xl:ml-64","2xl:mr-64","xl:flex-row","xl:space-x-6","xl:ml-64","xl:mr-64","lg:flex-row","lg:pt-4","lg:space-x-2","lg:ml-52","lg:mr-52","md:flex-col","md:pt-2","md:space-y-2","md:ml-40","md:mr-40","sm:flex-col","sm:pt-2","sm:space-y-2","sm:ml-20","sm:mr-20"],[1,"rounded","2xl:w-1/2","md:w-full","sm:w-full","text-base","drop-shadow"],[1,"duration-500","hover:text-sky-400"],["appFadeIn","","src","assets/images/pdp.jpg","title","Photo",1,"invis","2xl:w-80","2xl:h-80","xl:w-80","xl:h-80","lg:w-72","lg:h-80","md:w-auto","md:h-80","sm:w-auto","sm:h-72","w-full","h-64","duration-500","rounded","drop-shadow","hover:scale-105"],["id","target3",1,"w-auto","h-auto"],[1,"flex","flex-row","2xl:space-x-14","2xl:ml-64","2xl:mr-64","2xl:mt-6","xl:space-x-12","xl:ml-64","xl:mr-64","xl:mt-6","lg:space-x-10","lg:ml-52","lg:mr-52","lg:mt-6","md:space-x-8","md:ml-40","md:mr-40","md:mt-4","sm:space-x-4","sm:ml-20","sm:mr-20","sm:mt-4","space-x-2","ml-8","mr-8","mt-2","drop-shadow"],["appFadeIn","",1,"invis","flex","flex-col","space-y-1"],["class","bg-sky-200 font-bold p-1 border-l-[4px] duration-500 hover:bg-sky-300 hover:text-slate-500",3,"ngClass","click",4,"ngFor","ngForOf"],["appFadeIn","",1,"invis","border-l-[3px]","border-r-[3px]","border-sky-400","rounded","w-3/4"],[4,"ngFor","ngForOf"],["appFadeIn","",1,"invis","scale-100","text-center","2xl:ml-64","2xl:mr-64","2xl:mt-20","xl:ml-64","xl:mr-64","xl:mt-16","lg:ml-52","lg:mr-52","lg:mt-14","md:ml-40","md:mr-40","md:mt-10","sm:ml-20","sm:mr-20","sm:mt-10","ml-8","mr-8","mt-8","drop-shadow"],["expChart",""],["id","target4",1,"w-auto","h-96"],[1,"2xl:ml-64","2xl:mr-64","2xl:mt-6","xl:ml-64","xl:mr-64","xl:mt-6","lg:ml-52","lg:mr-52","lg:mt-6","md:ml-40","md:mr-40","md:mt-4","sm:ml-20","sm:mr-20","sm:mt-4","ml-8","mr-8","mt-4"],["class","grid 2xl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-3 sm:grid-cols-2 grid-cols-2 gap-4 drop-shadow",4,"ngIf"],["class","relative w-full h-full drop-shadow",4,"ngIf"],[1,"w-auto","h-96","bg-image","mt-96","drop-shadow"],["appFadeIn","",1,"invis","flex","justify-center","text-2xl","pt-10","ml-8","mr-8","2xl:ml-64","2xl:mr-64","xl:ml-64","xl:mr-64","lg:ml-64","lg:mr-64","text-slate-400","font-sans","font-bold","drop-shadow"],["appFadeIn","",1,"invis","flex","justify-center","text-center","font-bold","mt-32","ml-8","mr-8","2xl:ml-64","2xl:mr-64","xl:ml-64","xl:mr-64","lg:ml-52","lg:mr-52","md:ml-40","md:mr-40","text-sm","sm:text-sm","lg:text-lg","xl:text-lg","2xl:text-lg","drop-shadow"],["appFadeIn","",1,"invis","flex","justify-center","ml-8","mr-8","mt-10","2xl:ml-64","2xl:mr-64","xl:ml-64","xl:mr-64","lg:ml-64","lg:mr-64"],[1,"w-36","h-10","font-bold","bg-sky-200","drop-shadow","duration-500","border-[2px]","border-sky-200","rounded-lg","hover:bg-sky-300","hover:text-slate-500",3,"click"],["appFadeIn","","class","invis mt-10 flex flex-row space-x-2 justify-center",4,"ngIf"],[1,"flex","justify-center","mt-32","pb-4"],[1,"text-sm","text-black","drop-shadow"],["href","https://www.facebook.com/bruel.razafimbeloratompoarisoa/","target","_blank",1,"font-bold","hover:underline"],[1,"grid","h-screen","bg-gradient-to-r","from-white","to-sky-200","place-items-center"],[1,"loading"],[1,"bar"],[3,"menuAccueilClick","menuAproposClick","menuExperienceClick","menuProjetClick"],[1,"bg-sky-200","font-bold","p-1","border-l-[4px]","duration-500","hover:bg-sky-300","hover:text-slate-500",3,"ngClass","click"],["class","p-2",4,"ngIf"],[1,"p-2"],[1,"font-extrabold","underline"],[1,"italic"],[1,"text-base","mt-6"],[1,"grid","2xl:grid-cols-4","xl:grid-cols-4","lg:grid-cols-3","md:grid-cols-3","sm:grid-cols-2","grid-cols-2","gap-4","drop-shadow"],["appFadeIn","","class","invis rounded-lg border-[2px] border-sky-300 shadow-xl cursor-pointer duration-500 hover:scale-105",3,"click",4,"ngFor","ngForOf"],["appFadeIn","",1,"invis","rounded-lg","border-[2px]","border-sky-300","shadow-xl","cursor-pointer","duration-500","hover:scale-105",3,"click"],["src","assets/images/folder.png","alt","Folder",1,"px-2","w-12","h-10"],[1,"px-2"],[1,"font-bold","text-lg","mb-2"],[1,"font-semibold","font-sans","text-slate-400","mb-2"],[1,"relative","w-full","h-full","drop-shadow"],["controls","","playsinline","","loop","",1,"w-full","h-auto","2xl:h-96","drop-shadow","rounded",3,"src"],[1,"absolute","right-2","top-2","cursor-pointer","bg-white","rounded-full","w-8","h-8","grid","place-items-center","hover:scale-110",3,"click"],["title","FERMER",1,"text-sky-200","font-extrabold"],["appFadeIn","",1,"invis","mt-10","flex","flex-row","space-x-2","justify-center"],["href","https://www.linkedin.com/in/bruel-razafimbelo-ratompoarisoa-48979026a/","target","_blank"],["src","assets/images/linkedin.png","title","Linkedin",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://github.com/ZakkWylde008","target","_blank"],["src","assets/images/github.png","title","Github",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://gitlab.com/ZakkWylde008","target","_blank"],["src","assets/images/gitlab.png","title","Gitlab",1,"w-6","h-6","duration-500","hover:scale-150"],["href","https://www.codewars.com/users/ZakkWylde008","target","_blank"],["src","assets/images/codewars.png","title","Codewars",1,"w-6","h-6","duration-500","hover:scale-150"]],template:function(t,r){1&t&&(f.YNc(0,tX,12,0,"div",0),f.TgZ(1,"div",1)(2,"div",2),f.YNc(3,nX,1,0,"app-header",3),f.TgZ(4,"div",4)(5,"div",5),f._UZ(6,"div",6)(7,"div",7),f.qZA(),f.TgZ(8,"section",8)(9,"div",9)(10,"h3",10),f._uU(11,"Bonjour, je m'appelle"),f.qZA(),f.TgZ(12,"h1",11),f._uU(13,"RATOMPOARISOA Bruel Razafimbelo."),f.qZA(),f.TgZ(14,"p",12),f._uU(15,"Je suis un d\xe9veloppeur web et mobile."),f.qZA()(),f.TgZ(16,"div",13)(17,"p",14),f._uU(18," Je peut m'adapter \xe0 plusieurs types de technologies utilisant des langages de programmation comme "),f.TgZ(19,"b"),f._uU(20,"Javascript"),f.qZA(),f._uU(21,", "),f.TgZ(22,"b"),f._uU(23,"Typescript"),f.qZA(),f._uU(24," ou encore "),f.TgZ(25,"b"),f._uU(26,"PHP"),f.qZA(),f._uU(27,". "),f.qZA()(),f.TgZ(28,"button",15),f.NdJ("click",function(){return r.openCV()}),f._uU(29," CURRICULUM VITAE "),f.qZA()(),f.TgZ(30,"section",16)(31,"div",17)(32,"h1",18),f._uU(33,"2. \xc0 PROPOS"),f.qZA(),f._UZ(34,"hr",19),f.qZA(),f.TgZ(35,"div",20)(36,"p",21),f._uU(37," Bonjour! Je m'appele Bruel et je suis un ing\xe9nieur en Genie Logiciel et Base de Donn\xe9es fraichement dipl\xf4m\xe9 de l'Ecole Nationale d'Informatique de Fianarantsoa. Depuis tout petit, je suis fascin\xe9 par les jeux vid\xe9os. Cela m'a men\xe9 dans le monde du digital quand je suis arriv\xe9 au lyc\xe9e vers 2013. Choisir un parcours en Informatique est devenu une \xe9vidence pour moi et j'ai d\xe9cid\xe9 d'int\xe9grer l'ENI. "),f._UZ(38,"br")(39,"br"),f._uU(40," J'ai commenc\xe9 par les bases du d\xe9veloppement web avec HTML, CSS et Javascript puis s'en est suivi des langages comme PHP, JAVA ou encore Python. Je suis maintenant un d\xe9veloppeur fullstack et apr\xe8s avoir presque touch\xe9 \xe0 tout, je me focalise pour les technologies "),f.TgZ(41,"b",22),f._uU(42,"Symfony"),f.qZA(),f._uU(43," et "),f.TgZ(44,"b",22),f._uU(45,"Angular"),f.qZA(),f._uU(46,". J'ai aussi d'autres comp\xe9tences comme par exemple construire et mettre en place des sites web avec le CMS "),f.TgZ(47,"b",22),f._uU(48,"Wordpress"),f.qZA(),f._uU(49,". "),f.qZA(),f._UZ(50,"img",23),f.qZA()(),f.TgZ(51,"section",24)(52,"div",17)(53,"h1",18),f._uU(54,"3. EXP\xc9RIENCES"),f.qZA(),f._UZ(55,"hr",19),f.qZA(),f.TgZ(56,"div",25)(57,"div",26),f.YNc(58,iX,2,5,"button",27),f.qZA(),f.TgZ(59,"div",28),f.YNc(60,oX,2,1,"div",29),f.qZA()(),f._UZ(61,"canvas",30,31),f.qZA(),f.TgZ(63,"section",32)(64,"div",17)(65,"h1",18),f._uU(66,"4. PROJETS"),f.qZA(),f._UZ(67,"hr",19),f.qZA(),f.TgZ(68,"div",33),f.YNc(69,lX,2,1,"div",34),f.YNc(70,uX,5,1,"div",35),f.qZA()(),f.TgZ(71,"div",36)(72,"div",37),f._uU(73," ME CONTACTER? "),f.qZA(),f.TgZ(74,"div",38),f._uU(75," Je suis actuellement \xe0 la recherche d'un nouveau defi et si mon profil vous int\xe9resse pour un poste, un projet ou une collaboration, n'h\xe9sitez pas \xe0 m'en faire part : "),f.qZA(),f.TgZ(76,"div",39)(77,"button",40),f.NdJ("click",function(){return r.contactMe()}),f._uU(78,"CLIQUEZ ICI"),f.qZA()(),f.YNc(79,cX,9,0,"div",41),f.TgZ(80,"div",42)(81,"span",43),f._uU(82,"\xa9 2023. Con\xe7u et r\xe9alis\xe9 par "),f.TgZ(83,"a",44),f._uU(84,"Bruel Razafimbelo"),f.qZA(),f._uU(85,". "),f.qZA()()(),f._UZ(86,"app-footer"),f.qZA()()()),2&t&&(f.Q6J("ngIf",r.isLoad),f.xp6(1),f.Q6J("@fadeInAnimation",!r.isLoad)("ngClass",f.VKq(10,dX,r.isLoad)),f.xp6(2),f.Q6J("ngIf",r.header_variable),f.xp6(1),f.Q6J("ngClass",f.VKq(12,hX,r.isMenuOpen)),f.xp6(54),f.Q6J("ngForOf",r.experience),f.xp6(2),f.Q6J("ngForOf",r.experience),f.xp6(9),f.Q6J("ngIf",!r.isShowVideoModal),f.xp6(1),f.Q6J("ngIf",r.isShowVideoModal),f.xp6(9),f.Q6J("ngIf",!r.menuVisibilityFooter))},dependencies:[an,js,er,KQ,XQ,vL,B_,JQ],styles:[".blur-background[_ngcontent-%COMP%]{filter:blur(5px)}.bg-image[_ngcontent-%COMP%]{width:100%;height:100%;background-image:url(sea_background.56ca2f894be9efaa.png);background-repeat:no-repeat;background-size:100% 100%}.loading[_ngcontent-%COMP%]{width:300px;height:200px;position:relative;display:inline-flex;align-items:center;justify-content:space-between}.bar[_ngcontent-%COMP%]{--bg: white;--delay: 1s;background:var(--bg);width:12px;height:80px;border-radius:10px;animation:loader 1.5s ease-in-out infinite;animation-delay:var(--delay)}@keyframes loader{0%,to{height:2px}50%{height:80px}}.bar[_ngcontent-%COMP%]{&:nth-child(1),&:nth-child(10){--bg: rgb(0, 94, 255);--delay: 1s}&:nth-child(2),&:nth-child(9){--bg: rgb(35, 113, 248);--delay: .8s}&:nth-child(3),&:nth-child(8){--bg: rgb(80, 142, 251);--delay: .6s}&:nth-child(4),&:nth-child(7){--bg: rgb(111, 162, 250);--delay: .4s}&:nth-child(5),&:nth-child(6){--bg: rgb(165, 196, 250);--delay: .2s}}.invis[_ngcontent-%COMP%]{opacity:0}.fade-in-text[_ngcontent-%COMP%]{animation:fadeIn 1.5s}@keyframes fadeIn{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:none}}"],data:{animation:[Y0,Bf,RC]}}),n})();function pX(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr",8)(1,"th",9),f._uU(2),f.qZA(),f.TgZ(3,"td",10),f._uU(4),f.qZA(),f.TgZ(5,"td",10),f._uU(6),f.qZA(),f.TgZ(7,"td",10),f._uU(8),f.qZA(),f.TgZ(9,"td",10),f._uU(10),f.qZA(),f.TgZ(11,"td",10),f._uU(12),f.qZA(),f.TgZ(13,"td")(14,"span",11),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw();return f.KtG(o.redirectToEdit(s))}),f.TgZ(15,"button"),f._uU(16,"Modifier"),f.qZA()(),f._uU(17," \xa0 "),f.TgZ(18,"span",12),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw();return f.KtG(o.removeExperience(s))}),f.TgZ(19,"button"),f._uU(20,"Supprimer"),f.qZA()()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.hij(" ",t.id," "),f.xp6(2),f.hij(" ",t.nom," "),f.xp6(2),f.hij(" ",t.type," "),f.xp6(2),f.hij(" ",t.dateDebut," "),f.xp6(2),f.hij(" ",t.dateFin," "),f.xp6(2),f.hij(" ",t.description," ")}}let gX=(()=>{class n{constructor(t,r){this.experienceService=t,this.router=r}ngOnInit(){this.experienceService.getExperienceList().subscribe(t=>{this.experience=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}redirectToEdit(t){this.router.navigate(["backend008/experienceUpdate",t.id])}removeExperience(t){confirm("Etes-vous sur de vouloir supprimer l'exp\xe9rience n\xb0"+t.id+" ?")&&this.experienceService.deleteExperience(t),alert("Suppression d'un exp\xe9rience eff\xe9ctu\xe9 avec succ\xe8s!"),setTimeout(()=>{this.router.navigate(["backend008/experience"])},1e3)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(jx),f.Y36(Vn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-gestion-experience"]],decls:25,vars:1,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/experienceCreate"],[1,"w-20","mt-4","p-2","font-bold","bg-sky-600","drop-shadow","rounded-lg","hover:bg-sky-200"],[1,"relative","overflow-x-auto","mt-4"],[1,"w-full","text-sm","text-left","text-cyan-600","dark:text-cyan-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700"],["scope","row",1,"py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"py-4"],[1,"bg-emerald-400","hover:bg-emerald-600","text-white","font-bold","rounded","p-1","focus:outline-none","focus:shadow-outline",3,"click"],[1,"bg-rose-400","hover:bg-rose-600","text-white","font-bold","rounded","p-1","focus:outline-none","focus:shadow-outline",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Gestion des exp\xe9riences"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Cr\xe9er"),f.qZA()(),f.TgZ(5,"div",3)(6,"table",4)(7,"thead",5)(8,"tr")(9,"th",6),f._uU(10," Id "),f.qZA(),f.TgZ(11,"th",6),f._uU(12," Nom "),f.qZA(),f.TgZ(13,"th",6),f._uU(14," Type "),f.qZA(),f.TgZ(15,"th",6),f._uU(16," Date de d\xe9but "),f.qZA(),f.TgZ(17,"th",6),f._uU(18," Date de fin "),f.qZA(),f.TgZ(19,"th",6),f._uU(20," Description "),f.qZA(),f.TgZ(21,"th",6),f._uU(22," Action "),f.qZA()()(),f.TgZ(23,"tbody"),f.YNc(24,pX,21,6,"tr",7),f.qZA()()()),2&t&&(f.xp6(24),f.Q6J("ngForOf",r.experience))},dependencies:[js]}),n})(),Vz=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),ng=(()=>{class n extends Vz{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const xl=new f.OlP("NgValueAccessor"),_X={provide:xl,useExisting:(0,f.Gpc)(()=>N_),multi:!0},bX=new f.OlP("CompositionEventMode");let N_=(()=>{class n extends Vz{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vX(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(bX,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[f._Bn([_X]),f.qOj]}),n})();const Zi=new f.OlP("NgValidators"),rh=new f.OlP("NgAsyncValidators");function $z(n){return function nh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function Hx(n){return null}function Kz(n){return null!=n}function Yz(n){return(0,f.QGY)(n)?(0,En.D)(n):n}function Qz(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Xz(n,e){return e.map(t=>t(n))}function Jz(n){return n.map(e=>function IX(n){return!n.validate}(e)?e:t=>e.validate(t))}function bL(n){return null!=n?function e6(n){if(!n)return null;const e=n.filter(Kz);return 0==e.length?null:function(t){return Qz(Xz(t,e))}}(Jz(n)):null}function wL(n){return null!=n?function t6(n){if(!n)return null;const e=n.filter(Kz);return 0==e.length?null:function(t){return function mX(...n){const e=(0,Xa.jO)(n),{args:t,keys:r}=Kv(n),i=new Rs.y(s=>{const{length:o}=t;if(!o)return void s.complete();const c=new Array(o);let d=o,g=o;for(let _=0;_<o;_++){let w=!1;(0,nm.Xf)(t[_]).subscribe((0,jr.x)(s,T=>{w||(w=!0,g--),c[_]=T},()=>d--,void 0,()=>{(!d||!w)&&(g||s.next(r?TA(r,c):c),s.complete())}))}});return e?i.pipe(tm(e)):i}(Xz(t,e).map(Yz)).pipe((0,Nt.U)(Qz))}}(Jz(n)):null}function n6(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function r6(n){return n._rawValidators}function i6(n){return n._rawAsyncValidators}function EL(n){return n?Array.isArray(n)?n:[n]:[]}function $x(n,e){return Array.isArray(n)?n.includes(e):n===e}function s6(n,e){const t=EL(e);return EL(n).forEach(i=>{$x(t,i)||t.push(i)}),t}function o6(n,e){return EL(e).filter(t=>!$x(n,t))}class a6{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vs extends a6{get formDirective(){return null}get path(){return null}}class ih extends a6{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class l6{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zx=(()=>{class n extends l6{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ih,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),IL=(()=>{class n extends l6{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vs,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const FE="VALID",Wx="INVALID",F_="PENDING",LE="DISABLED";function SL(n){return(qx(n)?n.validators:n)||null}function c6(n){return Array.isArray(n)?bL(n):n||null}function xL(n,e){return(qx(e)?e.asyncValidators:n)||null}function d6(n){return Array.isArray(n)?wL(n):n||null}function qx(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function h6(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function f6(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class Zx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=c6(this._rawValidators),this._composedAsyncValidatorFn=d6(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===FE}get invalid(){return this.status===Wx}get pending(){return this.status==F_}get disabled(){return this.status===LE}get enabled(){return this.status!==LE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=c6(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=d6(e)}addValidators(e){this.setValidators(s6(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(s6(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(o6(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(o6(e,this._rawAsyncValidators))}hasValidator(e){return $x(this._rawValidators,e)}hasAsyncValidator(e){return $x(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=F_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=LE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=FE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===FE||this.status===F_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?LE:FE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=F_,this._hasOwnPendingAsyncValidator=!0;const t=Yz(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?LE:this.errors?Wx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(F_)?F_:this._anyControlsHaveStatus(Wx)?Wx:FE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qx(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class VE extends Zx{constructor(e,t,r){super(SL(t),xL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){f6(this,0,e),Object.keys(e).forEach(r=>{h6(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class p6 extends VE{}function Kx(n,e){return[...e.path,n]}function UE(n,e){AL(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function kX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&g6(n,e)})}(n,e),function PX(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function RX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&g6(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function MX(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Yx(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Xx(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Qx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function AL(n,e){const t=r6(n);null!==e.validator?n.setValidators(n6(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=i6(n);null!==e.asyncValidator?n.setAsyncValidators(n6(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Qx(e._rawValidators,i),Qx(e._rawAsyncValidators,i)}function Xx(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=r6(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=i6(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Qx(e._rawValidators,r),Qx(e._rawAsyncValidators,r),t}function g6(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ML(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function kL(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===N_?t=s:function FX(n){return Object.getPrototypeOf(n.constructor)===ng}(s)?r=s:i=s}),i||r||t||null}function v6(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function b6(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const jE=class extends Zx{constructor(e=null,t,r){super(SL(t),xL(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qx(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=b6(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){v6(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){v6(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){b6(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},jX={provide:ih,useExisting:(0,f.Gpc)(()=>PL)},I6=(()=>Promise.resolve())();let PL=(()=>{class n extends ih{constructor(t,r,i,s,o){super(),this._changeDetectorRef=o,this.control=new jE,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kL(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),ML(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){UE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){I6.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);I6.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Kx(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vs,9),f.Y36(Zi,10),f.Y36(rh,10),f.Y36(xl,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([jX]),f.qOj,f.TTD]}),n})(),OL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),D6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const NL=new f.OlP("NgModelWithFormControlWarning"),qX={provide:vs,useExisting:(0,f.Gpc)(()=>HE)};let HE=(()=>{class n extends vs{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xx(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return UE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Yx(t.control||null,t,!1),function LX(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function _6(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Yx(r||null,t),(n=>n instanceof jE)(i)&&(UE(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function m6(n,e){AL(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function OX(n,e){return Xx(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){AL(this.form,this),this._oldForm&&Xx(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zi,10),f.Y36(rh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([qX]),f.qOj,f.TTD]}),n})();const YX={provide:ih,useExisting:(0,f.Gpc)(()=>Jx)};let Jx=(()=>{class n extends ih{constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kL(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),ML(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Kx(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(vs,13),f.Y36(Zi,10),f.Y36(rh,10),f.Y36(xl,10),f.Y36(NL,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([YX]),f.qOj,f.TTD]}),n})(),rg=(()=>{class n{constructor(){this._validator=Hx}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Hx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const sJ={provide:Zi,useExisting:(0,f.Gpc)(()=>L_),multi:!0};let L_=(()=>{class n extends rg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>$z}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([sJ]),f.qOj]}),n})(),j6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[D6]}),n})(),dJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[j6]}),n})(),H6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:NL,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[j6]}),n})();class $6 extends Zx{constructor(e,t,r){super(SL(t),xL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){f6(this,0,e),e.forEach((r,i)=>{h6(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function z6(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let G6=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return z6(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new VE(i,s)}record(t,r=null){const i=this._reduceControls(t);return new p6(i,r)}control(t,r,i){let s={};return this.useNonNullable?(z6(r)?s=r:(s.validators=r,s.asyncValidators=i),new jE(t,{...s,nonNullable:!0})):new jE(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new $6(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof jE||t instanceof Zx?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:H6}),n})(),hJ=(()=>{class n{constructor(t,r,i){this.experienceService=t,this.formBuilder=r,this.router=i,this.experienceForm=this.formBuilder.group({nom:[""],type:[""],dateDebut:[""],dateFin:[""],description:[""]})}ngOnInit(){}onSubmit(){this.experienceService.createExperience(this.experienceForm.value),alert("Ajout d'un exp\xe9rience eff\xe9ctu\xe9 avec succ\xe8s!"),setTimeout(()=>{this.router.navigate(["backend008/experience"])},1e3)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(jx),f.Y36(G6),f.Y36(Vn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create"]],decls:30,vars:2,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/experience"],[1,"text-center","w-20","m-4","p-2","font-bold","bg-black","drop-shadow","rounded-lg","text-white","hover:bg-white","hover:text-black"],[1,"w-full","mt-4"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","m-4",3,"formGroup","ngSubmit"],[1,"m-4"],["for","nom",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","nom","formControlName","nom","type","text","placeholder","Lieux de l'exp\xe9rience","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"m-6"],["for","type",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","type","formControlName","type","type","text","placeholder","Type de l'exp\xe9rience","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","dateDebut",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","dateDebut","formControlName","dateDebut","type","date","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","dateFin",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","dateFin","formControlName","dateFin","type","date",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","description",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","description","formControlName","description","cols","30","rows","10","placeholder","D\xe9scription de l'exp\xe9rience","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"flex","items-center","justify-between","m-4"],["type","submit",1,"bg-cyan-500","hover:bg-cyan-600","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"disabled"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Cr\xe9ation d'experience"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Retour"),f.qZA()(),f.TgZ(5,"div",3)(6,"form",4),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(7,"div",5)(8,"label",6),f._uU(9," Nom "),f.qZA(),f._UZ(10,"input",7),f.qZA(),f.TgZ(11,"div",8)(12,"label",9),f._uU(13," Type "),f.qZA(),f._UZ(14,"input",10),f.qZA(),f.TgZ(15,"div",8)(16,"label",11),f._uU(17," Date de d\xe9but "),f.qZA(),f._UZ(18,"input",12),f.qZA(),f.TgZ(19,"div",8)(20,"label",13),f._uU(21," Date de fin "),f.qZA(),f._UZ(22,"input",14),f.qZA(),f.TgZ(23,"div",8)(24,"label",15),f._uU(25," D\xe9scription "),f.qZA(),f._UZ(26,"textarea",16),f.qZA(),f.TgZ(27,"div",17)(28,"button",18),f._uU(29," Ajouter "),f.qZA()()()()),2&t&&(f.xp6(6),f.Q6J("formGroup",r.experienceForm),f.xp6(22),f.Q6J("disabled",!r.experienceForm.valid))},dependencies:[OL,N_,zx,IL,L_,HE,Jx]}),n})(),fJ=(()=>{class n{constructor(t,r,i,s){this.experienceService=t,this.formBuilder=r,this.act=i,this.router=s,this.experienceEditForm=this.formBuilder.group({nom:[""],type:[""],dateDebut:[""],dateFin:[""],description:[""]})}ngOnInit(){const t=this.act.snapshot.paramMap.get("id");this.experienceService.getExperienceDoc(t).subscribe(r=>{this.experienceRef=r,this.experienceEditForm=this.formBuilder.group({nom:[this.experienceRef.nom],type:[this.experienceRef.type],dateDebut:[this.experienceRef.dateDebut],dateFin:[this.experienceRef.dateFin],description:[this.experienceRef.description]})})}onSubmit(){const t=this.act.snapshot.paramMap.get("id");this.experienceService.updateExperience(this.experienceEditForm.value,t),alert("Modification d'un exp\xe9rience eff\xe9ctu\xe9 avec succ\xe8s!"),setTimeout(()=>{this.router.navigate(["backend008/experience"])},1e3)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(jx),f.Y36(G6),f.Y36(Qs),f.Y36(Vn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-update"]],decls:30,vars:2,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/experience"],[1,"text-center","w-20","m-4","p-2","font-bold","bg-black","drop-shadow","rounded-lg","text-white","hover:bg-white","hover:text-black"],[1,"w-full","mt-4"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","m-4",3,"formGroup","ngSubmit"],[1,"m-4"],["for","nom",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","nom","formControlName","nom","type","text","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"m-6"],["for","type",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","type","formControlName","type","type","text","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","dateDebut",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","dateDebut","formControlName","dateDebut","type","date","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","dateFin",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","dateFin","formControlName","dateFin","type","date",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["for","description",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","description","formControlName","description","cols","30","rows","10","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"flex","items-center","justify-between","m-4"],["type","submit",1,"bg-cyan-500","hover:bg-cyan-600","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"disabled"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Modification"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Annuler"),f.qZA()(),f.TgZ(5,"div",3)(6,"form",4),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(7,"div",5)(8,"label",6),f._uU(9," Nom "),f.qZA(),f._UZ(10,"input",7),f.qZA(),f.TgZ(11,"div",8)(12,"label",9),f._uU(13," Type "),f.qZA(),f._UZ(14,"input",10),f.qZA(),f.TgZ(15,"div",8)(16,"label",11),f._uU(17," Date de d\xe9but "),f.qZA(),f._UZ(18,"input",12),f.qZA(),f.TgZ(19,"div",8)(20,"label",13),f._uU(21," Date de fin "),f.qZA(),f._UZ(22,"input",14),f.qZA(),f.TgZ(23,"div",8)(24,"label",15),f._uU(25," D\xe9scription "),f.qZA(),f._UZ(26,"textarea",16),f.qZA(),f.TgZ(27,"div",17)(28,"button",18),f._uU(29," Modifier "),f.qZA()()()()),2&t&&(f.xp6(6),f.Q6J("formGroup",r.experienceEditForm),f.xp6(22),f.Q6J("disabled",!r.experienceEditForm.valid))},dependencies:[OL,N_,zx,IL,L_,HE,Jx]}),n})();j(1389);class q6{constructor(){return CP("auth")}}class $E{constructor(e){return e}}const Z6="storage",HL=new f.OlP("angularfire2.storage-instances");function vJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $E(r)}}const bJ={provide:class yJ{constructor(){return CP(Z6)}},deps:[[new f.FiY,HL]]},wJ={provide:$E,useFactory:function _J(n,e){const t=function IP(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(Z6,n,e);return t&&new $E(t)},deps:[[new f.FiY,HL],Qy]};let EJ=(()=>{class n{constructor(){(0,rn.registerVersion)("angularfire",KT.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[wJ,bJ]}),n})();function IJ(n,...e){return{ngModule:EJ,providers:[{provide:HL,useFactory:vJ(n),multi:!0,deps:[f.R0b,f.zs3,_w,oB,[new f.FiY,q6],[new f.FiY,Dw],...e]}]}}const CJ=qy(eB,!0),DJ=qy(JU,!0),TJ=qy(Jq,!0),K6=qy(LP,!0),SJ=qy(XU,!0);function xJ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr",8)(1,"th",9),f._uU(2),f.qZA(),f.TgZ(3,"td")(4,"span",10),f.NdJ("click",function(){const s=f.CHM(t).$implicit,o=f.oxw();return f.KtG(o.removeVideo(s))}),f.TgZ(5,"button"),f._uU(6,"Supprimer"),f.qZA()()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.hij(" ",t.nom," ")}}const AJ=[{path:"",component:fX},{path:"backend008/experience",component:gX},{path:"backend008/experienceCreate",component:hJ},{path:"backend008/experienceUpdate/:id",component:fJ},{path:"backend008/projet",component:(()=>{class n{constructor(t,r,i){this.projetservice=t,this.storage=r,this.router=i,this.videolist=[],this.projetlist=[]}ngOnInit(){this.projetservice.getProjetList().subscribe(t=>{this.projetlist=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}removeVideo(t){const r=K6(this.storage,t.nom);CJ(r).then(()=>{this.projetservice.deleteProjet(t),console.log("Projet supprimer avec succ\xe8s!"),setTimeout(()=>{this.router.navigate(["backend008/projet"])},1e3)}).catch(i=>{console.log("Erreur: "+i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_L),f.Y36($E),f.Y36(Vn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-gestion-projet"]],decls:13,vars:1,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/projetCreate"],[1,"w-20","mt-4","p-2","font-bold","bg-sky-600","drop-shadow","rounded-lg","hover:bg-sky-200"],[1,"relative","overflow-x-auto","mt-4"],[1,"w-full","text-sm","text-left","text-cyan-600","dark:text-cyan-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700"],["scope","row",1,"py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"bg-rose-400","hover:bg-rose-600","text-white","font-bold","rounded","p-1","focus:outline-none","focus:shadow-outline",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Gestion des projets"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Cr\xe9er"),f.qZA()(),f.TgZ(5,"div",3)(6,"table",4)(7,"thead",5)(8,"tr")(9,"th",6),f._uU(10," Nom video "),f.qZA()()(),f.TgZ(11,"tbody"),f.YNc(12,xJ,7,1,"tr",7),f.qZA()()()),2&t&&(f.xp6(12),f.Q6J("ngForOf",r.projetlist))},dependencies:[js]}),n})()},{path:"backend008/projetCreate",component:(()=>{class n{constructor(t,r,i){this.storage=t,this.router=r,this.projetService=i,this.video={}}ngOnInit(){}chooseVideo(t){this.video=t?.target.files[0]}onSubmit(){const t=K6(this.storage,this.video.name),r=SJ(t,this.video);r.on("state_changed",i=>{console.log("L'ajout est \xe0 "+i.bytesTransferred/i.totalBytes*100+" %")},i=>{console.log(i.message)},()=>{DJ(r.snapshot.ref).then(i=>{let s={nom:this.video.name,url:i,outils:this.outils,date:new Date};this.projetService.createProjet(s),alert("Ajout d'un projet eff\xe9ctu\xe9 avec succ\xe8s!")})})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($E),f.Y36(Vn),f.Y36(_L))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create"]],decls:18,vars:1,consts:[[1,"text-center","w-auto","m-4","p-2","font-extrabold"],["href","https://zakkwylde008.github.io/bruel-portfolio/#/backend008/projet"],[1,"text-center","w-20","m-4","p-2","font-bold","bg-black","drop-shadow","rounded-lg","text-white","hover:bg-white","hover:text-black"],[1,"w-full","mt-4"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","m-4"],[1,"m-4"],["for","video",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","video","type","file","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"change"],["for","outils",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","outils","type","text","placeholder","Outils","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],[1,"flex","items-center","justify-between","m-4"],[1,"bg-cyan-500","hover:bg-cyan-600","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Cr\xe9ation projet"),f.qZA(),f.TgZ(2,"a",1)(3,"button",2),f._uU(4,"Retour"),f.qZA()(),f.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"label",6),f._uU(9," Video: "),f.qZA(),f.TgZ(10,"input",7),f.NdJ("change",function(s){return r.chooseVideo(s)}),f.qZA()(),f.TgZ(11,"div",5)(12,"label",8),f._uU(13," Outils: "),f.qZA(),f.TgZ(14,"input",9),f.NdJ("ngModelChange",function(s){return r.outils=s}),f.qZA()(),f.TgZ(15,"div",10)(16,"button",11),f.NdJ("click",function(){return r.onSubmit()}),f._uU(17," Ajouter "),f.qZA()()()()),2&t&&(f.xp6(14),f.Q6J("ngModel",r.outils))},dependencies:[N_,zx,L_,PL]}),n})()}];let MJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[jm.forRoot(AJ,{useHash:!0}),jm]}),n})(),kJ=(()=>{class n{constructor(){this.title="bruel-portfolio"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[tC]}),n})();const $L={production:!0,firebaseConfig:{apiKey:"AIzaSyCefTqIvgYOvovAmCDIKUJVYlmwnkVZuq4",authDomain:"bruelportfolio.firebaseapp.com",projectId:"bruelportfolio",storageBucket:"bruelportfolio.appspot.com",messagingSenderId:"105832684079",appId:"1:105832684079:web:a10515f620438e735644da"}};let RJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[kJ]}),n.\u0275inj=f.cJS({providers:[{provide:hs.Dh,useValue:$L.firebaseConfig}],imports:[Fh,MJ,qv,h9(()=>f9($L.firebaseConfig)),HQ,dJ,H6,IJ(()=>TJ())]}),n})();$L.production&&(0,f.G48)(),bc().bootstrapModule(RJ).catch(n=>console.error(n))},9751:(_t,ke,j)=>{j.d(ke,{y:()=>Re});var f=j(2961),z=j(727),U=j(8822),ce=j(9635),Se=j(2416),Ce=j(576),Pe=j(2806);let Re=(()=>{class ee{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const xe=new ee;return xe.source=this,xe.operator=Ue,xe}subscribe(Ue,xe,rt){const ue=function q(ee){return ee&&ee instanceof f.Lv||function Z(ee){return ee&&(0,Ce.m)(ee.next)&&(0,Ce.m)(ee.error)&&(0,Ce.m)(ee.complete)}(ee)&&(0,z.Nn)(ee)}(Ue)?Ue:new f.Hp(Ue,xe,rt);return(0,Pe.x)(()=>{const{operator:_e,source:ht}=this;ue.add(_e?_e.call(ue,ht):ht?this._subscribe(ue):this._trySubscribe(ue))}),ue}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(xe){Ue.error(xe)}}forEach(Ue,xe){return new(xe=He(xe))((rt,ue)=>{const _e=new f.Hp({next:ht=>{try{Ue(ht)}catch(Tt){ue(Tt),_e.unsubscribe()}},error:ue,complete:rt});this.subscribe(_e)})}_subscribe(Ue){var xe;return null===(xe=this.source)||void 0===xe?void 0:xe.subscribe(Ue)}[U.L](){return this}pipe(...Ue){return(0,ce.U)(Ue)(this)}toPromise(Ue){return new(Ue=He(Ue))((xe,rt)=>{let ue;this.subscribe(_e=>ue=_e,_e=>rt(_e),()=>xe(ue))})}}return ee.create=ze=>new ee(ze),ee})();function He(ee){var ze;return null!==(ze=ee??Se.v.Promise)&&void 0!==ze?ze:Promise}},7579:(_t,ke,j)=>{j.d(ke,{x:()=>Pe});var f=j(9751),z=j(727);const ce=(0,j(3888).d)(He=>function(){He(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=j(8737),Ce=j(2806);let Pe=(()=>{class He extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ee=new Re(this,this);return ee.operator=q,ee}_throwIfClosed(){if(this.closed)throw new ce}next(q){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(q)}})}error(q){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ee}=this;for(;ee.length;)ee.shift().error(q)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ee,isStopped:ze,observers:Ue}=this;return ee||ze?z.Lc:(this.currentObservers=null,Ue.push(q),new z.w0(()=>{this.currentObservers=null,(0,Se.P)(Ue,q)}))}_checkFinalizedStatuses(q){const{hasError:ee,thrownError:ze,isStopped:Ue}=this;ee?q.error(ze):Ue&&q.complete()}asObservable(){const q=new f.y;return q.source=this,q}}return He.create=(Z,q)=>new Re(Z,q),He})();class Re extends Pe{constructor(Z,q){super(),this.destination=Z,this.source=q}next(Z){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ee||ee.call(q,Z)}error(Z){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ee||ee.call(q,Z)}complete(){var Z,q;null===(q=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===q||q.call(Z)}_subscribe(Z){var q,ee;return null!==(ee=null===(q=this.source)||void 0===q?void 0:q.subscribe(Z))&&void 0!==ee?ee:z.Lc}}},2961:(_t,ke,j)=>{j.d(ke,{Hp:()=>rt,Lv:()=>ee});var f=j(576),z=j(727),U=j(2416),ce=j(7849);function Se(){}const Ce=He("C",void 0,void 0);function He(Ae,ye,we){return{kind:Ae,value:ye,error:we}}var Z=j(3410),q=j(2806);class ee extends z.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,z.Nn)(ye)&&ye.add(this)):this.destination=Tt}static create(ye,we,Ge){return new rt(ye,we,Ge)}next(ye){this.isStopped?ht(function Re(Ae){return He("N",Ae,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?ht(function Pe(Ae){return He("E",void 0,Ae)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?ht(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Ue(Ae,ye){return ze.call(Ae,ye)}class xe{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:we}=this;if(we.next)try{we.next(ye)}catch(Ge){ue(Ge)}}error(ye){const{partialObserver:we}=this;if(we.error)try{we.error(ye)}catch(Ge){ue(Ge)}else ue(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(we){ue(we)}}}class rt extends ee{constructor(ye,we,Ge){let Ke;if(super(),(0,f.m)(ye)||!ye)Ke={next:ye??void 0,error:we??void 0,complete:Ge??void 0};else{let ie;this&&U.v.useDeprecatedNextContext?(ie=Object.create(ye),ie.unsubscribe=()=>this.unsubscribe(),Ke={next:ye.next&&Ue(ye.next,ie),error:ye.error&&Ue(ye.error,ie),complete:ye.complete&&Ue(ye.complete,ie)}):Ke=ye}this.destination=new xe(Ke)}}function ue(Ae){U.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ae):(0,ce.h)(Ae)}function ht(Ae,ye){const{onStoppedNotification:we}=U.v;we&&Z.z.setTimeout(()=>we(Ae,ye))}const Tt={closed:!0,next:Se,error:function _e(Ae){throw Ae},complete:Se}},727:(_t,ke,j)=>{j.d(ke,{Lc:()=>Ce,w0:()=>Se,Nn:()=>Pe});var f=j(576);const U=(0,j(3888).d)(He=>function(q){He(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ee,ze)=>`${ze+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ce=j(8737);class Se{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ue of q)Ue.remove(this);else q.remove(this);const{initialTeardown:ee}=this;if((0,f.m)(ee))try{ee()}catch(Ue){Z=Ue instanceof U?Ue.errors:[Ue]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Ue of ze)try{Re(Ue)}catch(xe){Z=Z??[],xe instanceof U?Z=[...Z,...xe.errors]:Z.push(xe)}}if(Z)throw new U(Z)}}add(Z){var q;if(Z&&Z!==this)if(this.closed)Re(Z);else{if(Z instanceof Se){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(Z)}}_hasParent(Z){const{_parentage:q}=this;return q===Z||Array.isArray(q)&&q.includes(Z)}_addParent(Z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(Z),q):q?[q,Z]:Z}_removeParent(Z){const{_parentage:q}=this;q===Z?this._parentage=null:Array.isArray(q)&&(0,ce.P)(q,Z)}remove(Z){const{_finalizers:q}=this;q&&(0,ce.P)(q,Z),Z instanceof Se&&Z._removeParent(this)}}Se.EMPTY=(()=>{const He=new Se;return He.closed=!0,He})();const Ce=Se.EMPTY;function Pe(He){return He instanceof Se||He&&"closed"in He&&(0,f.m)(He.remove)&&(0,f.m)(He.add)&&(0,f.m)(He.unsubscribe)}function Re(He){(0,f.m)(He)?He():He.unsubscribe()}},2416:(_t,ke,j)=>{j.d(ke,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,ke,j)=>{j.d(ke,{E:()=>z});const z=new(j(9751).y)(Se=>Se.complete())},8996:(_t,ke,j)=>{j.d(ke,{D:()=>ye});var f=j(8421),z=j(5363),U=j(9468),Ce=j(9751),Re=j(2202),He=j(576),Z=j(9672);function ee(we,Ge){if(!we)throw new Error("Iterable cannot be null");return new Ce.y(Ke=>{(0,Z.f)(Ke,Ge,()=>{const ie=we[Symbol.asyncIterator]();(0,Z.f)(Ke,Ge,()=>{ie.next().then(Xe=>{Xe.done?Ke.complete():Ke.next(Xe.value)})},0,!0)})})}var ze=j(3670),Ue=j(8239),xe=j(1144),rt=j(6495),ue=j(2206),_e=j(4532),ht=j(3260);function ye(we,Ge){return Ge?function Ae(we,Ge){if(null!=we){if((0,ze.c)(we))return function ce(we,Ge){return(0,f.Xf)(we).pipe((0,U.R)(Ge),(0,z.Q)(Ge))}(we,Ge);if((0,xe.z)(we))return function Pe(we,Ge){return new Ce.y(Ke=>{let ie=0;return Ge.schedule(function(){ie===we.length?Ke.complete():(Ke.next(we[ie++]),Ke.closed||this.schedule())})})}(we,Ge);if((0,Ue.t)(we))return function Se(we,Ge){return(0,f.Xf)(we).pipe((0,U.R)(Ge),(0,z.Q)(Ge))}(we,Ge);if((0,ue.D)(we))return ee(we,Ge);if((0,rt.T)(we))return function q(we,Ge){return new Ce.y(Ke=>{let ie;return(0,Z.f)(Ke,Ge,()=>{ie=we[Re.h](),(0,Z.f)(Ke,Ge,()=>{let Xe,At;try{({value:Xe,done:At}=ie.next())}catch(dt){return void Ke.error(dt)}At?Ke.complete():Ke.next(Xe)},0,!0)}),()=>(0,He.m)(ie?.return)&&ie.return()})}(we,Ge);if((0,ht.L)(we))return function Tt(we,Ge){return ee((0,ht.Q)(we),Ge)}(we,Ge)}throw(0,_e.z)(we)}(we,Ge):(0,f.Xf)(we)}},8421:(_t,ke,j)=>{j.d(ke,{Xf:()=>ze});var f=j(655),z=j(1144),U=j(8239),ce=j(9751),Se=j(3670),Ce=j(2206),Pe=j(4532),Re=j(6495),He=j(3260),Z=j(576),q=j(7849),ee=j(8822);function ze(Ae){if(Ae instanceof ce.y)return Ae;if(null!=Ae){if((0,Se.c)(Ae))return function Ue(Ae){return new ce.y(ye=>{const we=Ae[ee.L]();if((0,Z.m)(we.subscribe))return we.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,z.z)(Ae))return function xe(Ae){return new ce.y(ye=>{for(let we=0;we<Ae.length&&!ye.closed;we++)ye.next(Ae[we]);ye.complete()})}(Ae);if((0,U.t)(Ae))return function rt(Ae){return new ce.y(ye=>{Ae.then(we=>{ye.closed||(ye.next(we),ye.complete())},we=>ye.error(we)).then(null,q.h)})}(Ae);if((0,Ce.D)(Ae))return _e(Ae);if((0,Re.T)(Ae))return function ue(Ae){return new ce.y(ye=>{for(const we of Ae)if(ye.next(we),ye.closed)return;ye.complete()})}(Ae);if((0,He.L)(Ae))return function ht(Ae){return _e((0,He.Q)(Ae))}(Ae)}throw(0,Pe.z)(Ae)}function _e(Ae){return new ce.y(ye=>{(function Tt(Ae,ye){var we,Ge,Ke,ie;return(0,f.mG)(this,void 0,void 0,function*(){try{for(we=(0,f.KL)(Ae);!(Ge=yield we.next()).done;)if(ye.next(Ge.value),ye.closed)return}catch(Xe){Ke={error:Xe}}finally{try{Ge&&!Ge.done&&(ie=we.return)&&(yield ie.call(we))}finally{if(Ke)throw Ke.error}}ye.complete()})})(Ae,ye).catch(we=>ye.error(we))})}},6451:(_t,ke,j)=>{j.d(ke,{T:()=>Ce});var f=j(8189),z=j(8421),U=j(515),ce=j(7669),Se=j(8996);function Ce(...Pe){const Re=(0,ce.yG)(Pe),He=(0,ce._6)(Pe,1/0),Z=Pe;return Z.length?1===Z.length?(0,z.Xf)(Z[0]):(0,f.J)(He)((0,Se.D)(Z,Re)):U.E}},5403:(_t,ke,j)=>{j.d(ke,{x:()=>z});var f=j(2961);function z(ce,Se,Ce,Pe,Re){return new U(ce,Se,Ce,Pe,Re)}class U extends f.Lv{constructor(Se,Ce,Pe,Re,He,Z){super(Se),this.onFinalize=He,this.shouldUnsubscribe=Z,this._next=Ce?function(q){try{Ce(q)}catch(ee){Se.error(ee)}}:super._next,this._error=Re?function(q){try{Re(q)}catch(ee){Se.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(q){Se.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},4004:(_t,ke,j)=>{j.d(ke,{U:()=>U});var f=j(4482),z=j(5403);function U(ce,Se){return(0,f.e)((Ce,Pe)=>{let Re=0;Ce.subscribe((0,z.x)(Pe,He=>{Pe.next(ce.call(Se,He,Re++))}))})}},8189:(_t,ke,j)=>{j.d(ke,{J:()=>U});var f=j(5577),z=j(4671);function U(ce=1/0){return(0,f.z)(z.y,ce)}},5577:(_t,ke,j)=>{j.d(ke,{z:()=>Re});var f=j(4004),z=j(8421),U=j(4482),ce=j(9672),Se=j(5403),Pe=j(576);function Re(He,Z,q=1/0){return(0,Pe.m)(Z)?Re((ee,ze)=>(0,f.U)((Ue,xe)=>Z(ee,Ue,ze,xe))((0,z.Xf)(He(ee,ze))),q):("number"==typeof Z&&(q=Z),(0,U.e)((ee,ze)=>function Ce(He,Z,q,ee,ze,Ue,xe,rt){const ue=[];let _e=0,ht=0,Tt=!1;const Ae=()=>{Tt&&!ue.length&&!_e&&Z.complete()},ye=Ge=>_e<ee?we(Ge):ue.push(Ge),we=Ge=>{Ue&&Z.next(Ge),_e++;let Ke=!1;(0,z.Xf)(q(Ge,ht++)).subscribe((0,Se.x)(Z,ie=>{ze?.(ie),Ue?ye(ie):Z.next(ie)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(_e--;ue.length&&_e<ee;){const ie=ue.shift();xe?(0,ce.f)(Z,xe,()=>we(ie)):we(ie)}Ae()}catch(ie){Z.error(ie)}}))};return He.subscribe((0,Se.x)(Z,ye,()=>{Tt=!0,Ae()})),()=>{rt?.()}}(ee,ze,He,q)))}},5363:(_t,ke,j)=>{j.d(ke,{Q:()=>ce});var f=j(9672),z=j(4482),U=j(5403);function ce(Se,Ce=0){return(0,z.e)((Pe,Re)=>{Pe.subscribe((0,U.x)(Re,He=>(0,f.f)(Re,Se,()=>Re.next(He),Ce),()=>(0,f.f)(Re,Se,()=>Re.complete(),Ce),He=>(0,f.f)(Re,Se,()=>Re.error(He),Ce)))})}},3099:(_t,ke,j)=>{j.d(ke,{B:()=>Se});var f=j(8421),z=j(7579),U=j(2961),ce=j(4482);function Se(Pe={}){const{connector:Re=(()=>new z.x),resetOnError:He=!0,resetOnComplete:Z=!0,resetOnRefCountZero:q=!0}=Pe;return ee=>{let ze,Ue,xe,rt=0,ue=!1,_e=!1;const ht=()=>{Ue?.unsubscribe(),Ue=void 0},Tt=()=>{ht(),ze=xe=void 0,ue=_e=!1},Ae=()=>{const ye=ze;Tt(),ye?.unsubscribe()};return(0,ce.e)((ye,we)=>{rt++,!_e&&!ue&&ht();const Ge=xe=xe??Re();we.add(()=>{rt--,0===rt&&!_e&&!ue&&(Ue=Ce(Ae,q))}),Ge.subscribe(we),!ze&&rt>0&&(ze=new U.Hp({next:Ke=>Ge.next(Ke),error:Ke=>{_e=!0,ht(),Ue=Ce(Tt,He,Ke),Ge.error(Ke)},complete:()=>{ue=!0,ht(),Ue=Ce(Tt,Z),Ge.complete()}}),(0,f.Xf)(ye).subscribe(ze))})(ee)}}function Ce(Pe,Re,...He){if(!0===Re)return void Pe();if(!1===Re)return;const Z=new U.Hp({next:()=>{Z.unsubscribe(),Pe()}});return Re(...He).subscribe(Z)}},9468:(_t,ke,j)=>{j.d(ke,{R:()=>z});var f=j(4482);function z(U,ce=0){return(0,f.e)((Se,Ce)=>{Ce.add(U.schedule(()=>Se.subscribe(Ce),ce))})}},3410:(_t,ke,j)=>{j.d(ke,{z:()=>f});const f={setTimeout(z,U,...ce){const{delegate:Se}=f;return Se?.setTimeout?Se.setTimeout(z,U,...ce):setTimeout(z,U,...ce)},clearTimeout(z){const{delegate:U}=f;return(U?.clearTimeout||clearTimeout)(z)},delegate:void 0}},2202:(_t,ke,j)=>{j.d(ke,{h:()=>z});const z=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,ke,j)=>{j.d(ke,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,ke,j)=>{j.d(ke,{_6:()=>Ce,jO:()=>ce,yG:()=>Se});var f=j(576);function U(Pe){return Pe[Pe.length-1]}function ce(Pe){return(0,f.m)(U(Pe))?Pe.pop():void 0}function Se(Pe){return function z(Pe){return Pe&&(0,f.m)(Pe.schedule)}(U(Pe))?Pe.pop():void 0}function Ce(Pe,Re){return"number"==typeof U(Pe)?Pe.pop():Re}},8737:(_t,ke,j)=>{function f(z,U){if(z){const ce=z.indexOf(U);0<=ce&&z.splice(ce,1)}}j.d(ke,{P:()=>f})},3888:(_t,ke,j)=>{function f(z){const ce=z(Se=>{Error.call(Se),Se.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}j.d(ke,{d:()=>f})},2806:(_t,ke,j)=>{j.d(ke,{O:()=>ce,x:()=>U});var f=j(2416);let z=null;function U(Se){if(f.v.useDeprecatedSynchronousErrorHandling){const Ce=!z;if(Ce&&(z={errorThrown:!1,error:null}),Se(),Ce){const{errorThrown:Pe,error:Re}=z;if(z=null,Pe)throw Re}}else Se()}function ce(Se){f.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=Se)}},9672:(_t,ke,j)=>{function f(z,U,ce,Se=0,Ce=!1){const Pe=U.schedule(function(){ce(),Ce?z.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(z.add(Pe),!Ce)return Pe}j.d(ke,{f:()=>f})},4671:(_t,ke,j)=>{function f(z){return z}j.d(ke,{y:()=>f})},1144:(_t,ke,j)=>{j.d(ke,{z:()=>f});const f=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(_t,ke,j)=>{j.d(ke,{D:()=>z});var f=j(576);function z(U){return Symbol.asyncIterator&&(0,f.m)(U?.[Symbol.asyncIterator])}},576:(_t,ke,j)=>{function f(z){return"function"==typeof z}j.d(ke,{m:()=>f})},3670:(_t,ke,j)=>{j.d(ke,{c:()=>U});var f=j(8822),z=j(576);function U(ce){return(0,z.m)(ce[f.L])}},6495:(_t,ke,j)=>{j.d(ke,{T:()=>U});var f=j(2202),z=j(576);function U(ce){return(0,z.m)(ce?.[f.h])}},8239:(_t,ke,j)=>{j.d(ke,{t:()=>z});var f=j(576);function z(U){return(0,f.m)(U?.then)}},3260:(_t,ke,j)=>{j.d(ke,{L:()=>ce,Q:()=>U});var f=j(655),z=j(576);function U(Se){return(0,f.FC)(this,arguments,function*(){const Pe=Se.getReader();try{for(;;){const{value:Re,done:He}=yield(0,f.qq)(Pe.read());if(He)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Re)}}finally{Pe.releaseLock()}})}function ce(Se){return(0,z.m)(Se?.getReader)}},4482:(_t,ke,j)=>{j.d(ke,{A:()=>z,e:()=>U});var f=j(576);function z(ce){return(0,f.m)(ce?.lift)}function U(ce){return Se=>{if(z(Se))return Se.lift(function(Ce){try{return ce(Ce,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(_t,ke,j)=>{j.d(ke,{U:()=>U,z:()=>z});var f=j(4671);function z(...ce){return U(ce)}function U(ce){return 0===ce.length?f.y:1===ce.length?ce[0]:function(Ce){return ce.reduce((Pe,Re)=>Re(Pe),Ce)}}},7849:(_t,ke,j)=>{j.d(ke,{h:()=>U});var f=j(2416),z=j(3410);function U(ce){z.z.setTimeout(()=>{const{onUnhandledError:Se}=f.v;if(!Se)throw ce;Se(ce)})}},4532:(_t,ke,j)=>{function f(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ke,{z:()=>f})},655:(_t,ke,j)=>{function ce(de,he){var be={};for(var Me in de)Object.prototype.hasOwnProperty.call(de,Me)&&he.indexOf(Me)<0&&(be[Me]=de[Me]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(Me=Object.getOwnPropertySymbols(de);Le<Me.length;Le++)he.indexOf(Me[Le])<0&&Object.prototype.propertyIsEnumerable.call(de,Me[Le])&&(be[Me[Le]]=de[Me[Le]])}return be}function ee(de,he,be,Me){return new(be||(be=Promise))(function(ve,St){function bt(Xt){try{tt(Me.next(Xt))}catch($t){St($t)}}function Rt(Xt){try{tt(Me.throw(Xt))}catch($t){St($t)}}function tt(Xt){Xt.done?ve(Xt.value):function Le(ve){return ve instanceof be?ve:new be(function(St){St(ve)})}(Xt.value).then(bt,Rt)}tt((Me=Me.apply(de,he||[])).next())})}function Ae(de){return this instanceof Ae?(this.v=de,this):new Ae(de)}function ye(de,he,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,Me=be.apply(de,he||[]),ve=[];return Le={},St("next"),St("throw"),St("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function St(Ut){Me[Ut]&&(Le[Ut]=function(pr){return new Promise(function(Xn,ti){ve.push([Ut,pr,Xn,ti])>1||bt(Ut,pr)})})}function bt(Ut,pr){try{!function Rt(Ut){Ut.value instanceof Ae?Promise.resolve(Ut.value.v).then(tt,Xt):$t(ve[0][2],Ut)}(Me[Ut](pr))}catch(Xn){$t(ve[0][3],Xn)}}function tt(Ut){bt("next",Ut)}function Xt(Ut){bt("throw",Ut)}function $t(Ut,pr){Ut(pr),ve.shift(),ve.length&&bt(ve[0][0],ve[0][1])}}function Ge(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,he=de[Symbol.asyncIterator];return he?he.call(de):(de=function rt(de){var he="function"==typeof Symbol&&Symbol.iterator,be=he&&de[he],Me=0;if(be)return be.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Me>=de.length&&(de=void 0),{value:de&&de[Me++],done:!de}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),be={},Me("next"),Me("throw"),Me("return"),be[Symbol.asyncIterator]=function(){return this},be);function Me(ve){be[ve]=de[ve]&&function(St){return new Promise(function(bt,Rt){!function Le(ve,St,bt,Rt){Promise.resolve(Rt).then(function(tt){ve({value:tt,done:bt})},St)}(bt,Rt,(St=de[ve](St)).done,St.value)})}}}j.d(ke,{FC:()=>ye,KL:()=>Ge,_T:()=>ce,mG:()=>ee,qq:()=>Ae})},4650:(_t,ke,j)=>{j.d(ke,{$8M:()=>wc,$Z:()=>ZI,AFp:()=>uT,ALo:()=>VD,AaK:()=>Re,AsE:()=>ab,CHM:()=>Ig,CRH:()=>jb,CZH:()=>wy,CqO:()=>xu,D6c:()=>vk,EJc:()=>W1,EpF:()=>Y0,F4k:()=>RC,FYo:()=>AI,FiY:()=>Xo,G48:()=>ST,Gf:()=>Bb,GfV:()=>MI,Gpc:()=>q,JOm:()=>Er,Jf7:()=>um,KtG:()=>cc,LFG:()=>nr,LSH:()=>Xa,Lbi:()=>H1,Lck:()=>Vu,MMx:()=>cl,NdJ:()=>eo,OlP:()=>vn,Oqu:()=>qC,PXZ:()=>iw,Q6J:()=>q0,QGY:()=>Bf,QP$:()=>pe,QbO:()=>z1,Qsj:()=>t0,R0b:()=>Di,RDi:()=>hI,Rgc:()=>op,SBq:()=>yu,Sil:()=>K1,Suo:()=>GD,TTD:()=>dh,TgZ:()=>Hm,VKq:()=>RD,WLB:()=>Ab,X6Q:()=>TT,XFs:()=>ot,Xpm:()=>$n,Xts:()=>Zv,Y36:()=>Xc,YKP:()=>Ib,YNc:()=>vM,Yjl:()=>L,Yz7:()=>tt,Z0I:()=>pr,ZZ4:()=>Vy,_Bn:()=>Eb,_UZ:()=>Z0,_Vd:()=>Ps,_c5:()=>yk,_uU:()=>WC,aQg:()=>Uy,c2e:()=>G1,cJS:()=>$t,cg1:()=>Xm,dDg:()=>Md,dqk:()=>en,eFA:()=>wT,ekj:()=>Gm,eoX:()=>bp,evT:()=>RI,f3M:()=>kg,g9A:()=>Kb,h0i:()=>Ed,hGG:()=>_k,hij:()=>Wf,iGM:()=>my,ifc:()=>It,ip1:()=>lT,jDz:()=>Db,kL8:()=>hb,lG2:()=>H,lcZ:()=>Rb,lqb:()=>Do,lri:()=>yT,n5z:()=>$s,oAB:()=>si,oxw:()=>ls,q4F:()=>_u,qLn:()=>qc,qOj:()=>j0,qZA:()=>$m,rWj:()=>_T,sBO:()=>sk,sIi:()=>Lf,s_b:()=>ap,soG:()=>_p,tb:()=>Iy,tp0:()=>Jo,uIk:()=>TC,vHH:()=>xe,vpe:()=>so,wAp:()=>Ct,xi3:()=>BD,xp6:()=>VI,z2F:()=>Sy,zSh:()=>Xv,zs3:()=>Kc});var f=j(7579),z=j(727),U=j(9751),ce=j(6451),Se=j(3099);function Ce(a){for(let l in a)if(a[l]===Ce)return l;throw Error("Could not find renamed property on target object.")}function Pe(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function Re(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Re).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function He(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const Z=Ce({__forward_ref__:Ce});function q(a){return a.__forward_ref__=q,a.toString=function(){return Re(this())},a}function ee(a){return ze(a)?a():a}function ze(a){return"function"==typeof a&&a.hasOwnProperty(Z)&&a.__forward_ref__===q}class xe extends Error{constructor(l,u){super(function rt(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,u)),this.code=l}}function ue(a){return"string"==typeof a?a:null==a?"":String(a)}function ye(a,l){throw new xe(-201,!1)}function Le(a,l){null==a&&function ve(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}(l,a,null,"!=")}function tt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function $t(a){return{providers:a.providers||[],imports:a.imports||[]}}function Ut(a){return Xn(a,ri)||Xn(a,ws)}function pr(a){return null!==Ut(a)}function Xn(a,l){return a.hasOwnProperty(l)?a[l]:null}function ni(a){return a&&(a.hasOwnProperty(Qi)||a.hasOwnProperty(Aa))?a[Qi]:null}const ri=Ce({\u0275prov:Ce}),Qi=Ce({\u0275inj:Ce}),ws=Ce({ngInjectableDef:Ce}),Aa=Ce({ngInjectorDef:Ce});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Ur;function Hn(a){const l=Ur;return Ur=a,l}function Xi(a,l,u){const h=Ut(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&ot.Optional?null:void 0!==l?l:void ye(Re(a))}function Pn(a){return{toString:a}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),It=(()=>{return(a=It||(It={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",It;var a})();const en=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ur={},Pt=[],Jn=Ce({\u0275cmp:Ce}),zt=Ce({\u0275dir:Ce}),Es=Ce({\u0275pipe:Ce}),on=Ce({\u0275mod:Ce}),Br=Ce({\u0275fac:Ce}),Cn=Ce({__NG_ELEMENT_ID__:Ce});let mr=0;function $n(a){return Pn(()=>{const u=!0===a.standalone,h={},p={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||Pt,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||It.Emulated,id:"c"+mr++,styles:a.styles||Pt,_:null,setInput:null,schemas:a.schemas||null,tView:null},y=a.dependencies,b=a.features;return p.inputs=$(a.inputs,h),p.outputs=$(a.outputs),b&&b.forEach(C=>C(p)),p.directiveDefs=y?()=>("function"==typeof y?y():y).map(yr).filter(Is):null,p.pipeDefs=y?()=>("function"==typeof y?y():y).map(Y).filter(Is):null,p})}function yr(a){return F(a)||P(a)}function Is(a){return null!==a}function si(a){return Pn(()=>({type:a.type,bootstrap:a.bootstrap||Pt,declarations:a.declarations||Pt,imports:a.imports||Pt,exports:a.exports||Pt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function $(a,l){if(null==a)return ur;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],y=p;Array.isArray(p)&&(y=p[1],p=p[0]),u[p]=h,l&&(l[p]=y)}return u}const H=$n;function L(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function F(a){return a[Jn]||null}function P(a){return a[zt]||null}function Y(a){return a[Es]||null}function pe(a){const l=F(a)||P(a)||Y(a);return null!==l&&l.standalone}function We(a,l){const u=a[on]||null;if(!u&&!0===l)throw new Error(`Type ${Re(a)} does not have '\u0275mod' property.`);return u}function Wr(a){return Array.isArray(a)&&"object"==typeof a[1]}function oi(a){return Array.isArray(a)&&!0===a[1]}function Rl(a){return 0!=(8&a.flags)}function Hs(a){return 2==(2&a.flags)}function Pl(a){return 1==(1&a.flags)}function Ni(a){return null!==a.template}function lh(a){return 0!=(256&a[2])}function po(a,l){return a.hasOwnProperty(Br)?a[Br]:null}class Cs{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function dh(){return oc}function oc(a){return a.type.prototype.ngOnChanges&&(a.setInput=Nl),hh}function hh(){const a=fh(this),l=a?.current;if(l){const u=a.previous;if(u===ur)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function Nl(a,l,u,h){const p=fh(a)||function j_(a,l){return a[vg]=l}(a,{previous:ur,current:null}),y=p.current||(p.current={}),b=p.previous,C=this.declaredInputs[u],D=b[C];y[C]=new Cs(D&&D.currentValue,l,b===ur),a[h]=l}dh.ngInherit=!0;const vg="__ngSimpleChanges__";function fh(a){return a[vg]||null}function wn(a){for(;Array.isArray(a);)a=a[0];return a}function Fl(a,l){return wn(l[a])}function bi(a,l){return wn(l[a.index])}function mh(a,l){return a.data[l]}function Ds(a,l){return a[l]}function _n(a,l){const u=l[a];return Wr(u)?u:u[0]}function ka(a){return 64==(64&a[2])}function Ts(a,l){return null==l?null:a[l]}function wi(a){a[18]=0}function uc(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const Lt={lFrame:Sh(null),bindingsEnabled:!0};function Go(){return Lt.bindingsEnabled}function Ee(){return Lt.lFrame.lView}function nn(){return Lt.lFrame.tView}function Ig(a){return Lt.lFrame.contextLView=a,a[8]}function cc(a){return Lt.lFrame.contextLView=null,a}function cr(){let a=dc();for(;null!==a&&64===a.type;)a=a.parent;return a}function dc(){return Lt.lFrame.currentTNode}function Li(a,l){const u=Lt.lFrame;u.currentTNode=a,u.isParent=l}function Eh(){return Lt.lFrame.isParent}function dr(){const a=Lt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Zo(){return Lt.lFrame.bindingIndex++}function Ss(a){const l=Lt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Dg(a,l){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=a,fc(l)}function fc(a){Lt.lFrame.currentDirectiveIndex=a}function Dh(){return Lt.lFrame.currentQueryIndex}function pc(a){Lt.lFrame.currentQueryIndex=a}function Th(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function G_(a,l,u){if(u&ot.SkipSelf){let p=l,y=a;for(;!(p=p.parent,null!==p||u&ot.Host||(p=Th(y),null===p||(y=y[15],10&p.type))););if(null===p)return!1;l=p,a=y}const h=Lt.lFrame=W_();return h.currentTNode=l,h.lView=a,!0}function gc(a){const l=W_(),u=a[1];Lt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function W_(){const a=Lt.lFrame,l=null===a?null:a.child;return null===l?Sh(a):l}function Sh(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function q_(){const a=Lt.lFrame;return Lt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Tg=q_;function Ko(){const a=q_();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function tr(){return Lt.lFrame.selectedIndex}function mo(a){Lt.lFrame.selectedIndex=a}function Dn(){const a=Lt.lFrame;return mh(a.tView,a.selectedIndex)}function Ul(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const y=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:k}=y;b&&(a.contentHooks||(a.contentHooks=[])).push(-u,b),C&&((a.contentHooks||(a.contentHooks=[])).push(u,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,C)),D&&(a.viewHooks||(a.viewHooks=[])).push(-u,D),x&&((a.viewHooks||(a.viewHooks=[])).push(u,x),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,x)),null!=k&&(a.destroyHooks||(a.destroyHooks=[])).push(u,k)}}function Yo(a,l,u){yc(a,l,3,u)}function yo(a,l,u,h){(3&a[2])===u&&yc(a,l,u,h)}function Oa(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function yc(a,l,u,h){const y=h??-1,b=l.length-1;let C=0;for(let D=void 0!==h?65535&a[18]:0;D<b;D++)if("number"==typeof l[D+1]){if(C=l[D],null!=h&&C>=h)break}else l[D]<0&&(a[18]+=65536),(C<y||-1==y)&&(Mh(a,u,l,D),a[18]=(4294901760&a[18])+D+2),D++}function Mh(a,l,u,h){const p=u[h]<0,y=u[h+1],C=a[p?-u[h]:u[h]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{y.call(C)}finally{}}}else try{y.call(C)}finally{}}class _o{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Bl(a,l,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const y=u[h++],b=u[h++],C=u[h++];a.setAttribute(l,b,C,y)}else{const y=p,b=u[++h];Ph(y)?a.setProperty(l,y,b):a.setAttribute(l,y,b),h++}}return h}function X_(a){return 3===a||4===a||6===a}function Ph(a){return 64===a.charCodeAt(0)}function jl(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?u=p:0===u||J_(a,u,p,null,-1===u||2===u?l[++h]:null)}}return a}function J_(a,l,u,h,p){let y=0,b=a.length;if(-1===l)b=-1;else for(;y<a.length;){const C=a[y++];if("number"==typeof C){if(C===l){b=-1;break}if(C>l){b=y-1;break}}}for(;y<a.length;){const C=a[y];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==p&&(a[y+1]=p));if(h===a[y+1])return void(a[y+2]=p)}y++,null!==h&&y++,null!==p&&y++}-1!==b&&(a.splice(b,0,l),y=b+1),a.splice(y++,0,u),null!==h&&a.splice(y++,0,h),null!==p&&a.splice(y++,0,p)}function ev(a){return-1!==a}function Hl(a){return 32767&a}function $l(a,l){let u=function tv(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let zl=!0;function As(a){const l=zl;return zl=a,l}let xg=0;const vo={};function Gl(a,l){const u=La(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,Wl(h.data,a),Wl(l,null),Wl(h.blueprint,null));const p=bc(a,l),y=a.injectorIndex;if(ev(p)){const b=Hl(p),C=$l(p,l),D=C[1].data;for(let x=0;x<8;x++)l[y+x]=C[b+x]|D[b+x]}return l[y+8]=p,y}function Wl(a,l){a.push(0,0,0,0,0,0,0,0,l)}function La(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function bc(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=l;for(;null!==p;){if(h=Va(p),null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function bo(a,l,u){!function iv(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Cn)&&(h=u[Cn]),null==h&&(h=u[Cn]=xg++);const p=255&h;l.data[a+(p>>5)]|=1<<p}(a,l,u)}function Nh(a,l,u){if(u&ot.Optional||void 0!==a)return a;ye()}function Fh(a,l,u,h){if(u&ot.Optional&&void 0===h&&(h=null),0==(u&(ot.Self|ot.Host))){const p=a[9],y=Hn(void 0);try{return p?p.get(l,h,u&ot.Optional):Xi(l,h,u&ot.Optional)}finally{Hn(y)}}return Nh(h,0,u)}function sv(a,l,u,h=ot.Default,p){if(null!==a){if(1024&l[2]){const b=function uv(a,l,u,h,p){let y=a,b=l;for(;null!==y&&null!==b&&1024&b[2]&&!(256&b[2]);){const C=ov(y,b,u,h|ot.Self,vo);if(C!==vo)return C;let D=y.parent;if(!D){const x=b[21];if(x){const k=x.get(u,vo,h);if(k!==vo)return k}D=Va(b),b=b[15]}y=D}return p}(a,l,u,h,vo);if(b!==vo)return b}const y=ov(a,l,u,h,vo);if(y!==vo)return y}return Fh(l,u,h,p)}function ov(a,l,u,h,p){const y=function lv(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Cn)?a[Cn]:void 0;return"number"==typeof l?l>=0?255&l:zn:l}(u);if("function"==typeof y){if(!G_(l,a,h))return h&ot.Host?Nh(p,0,h):Fh(l,u,h,p);try{const b=y(h);if(null!=b||h&ot.Optional)return b;ye()}finally{Tg()}}else if("number"==typeof y){let b=null,C=La(a,l),D=-1,x=h&ot.Host?l[16][6]:null;for((-1===C||h&ot.SkipSelf)&&(D=-1===C?bc(a,l):l[C+8],-1!==D&&ql(h,!1)?(b=l[1],C=Hl(D),l=$l(D,l)):C=-1);-1!==C;){const k=l[1];if(Ag(y,C,k.data)){const V=av(C,l,u,b,h,x);if(V!==vo)return V}D=l[C+8],-1!==D&&ql(h,l[1].data[C+8]===x)&&Ag(y,C,l)?(b=k,C=Hl(D),l=$l(D,l)):C=-1}}return p}function av(a,l,u,h,p,y){const b=l[1],C=b.data[a+8],k=Lh(C,b,u,null==h?Hs(C)&&zl:h!=b&&0!=(3&C.type),p&ot.Host&&y===C);return null!==k?wo(l,b,k,C):vo}function Lh(a,l,u,h,p){const y=a.providerIndexes,b=l.data,C=1048575&y,D=a.directiveStart,k=y>>20,W=p?C+k:a.directiveEnd;for(let J=h?C:C+k;J<W;J++){const ge=b[J];if(J<D&&u===ge||J>=D&&ge.type===u)return J}if(p){const J=b[D];if(J&&Ni(J)&&J.type===u)return D}return null}function wo(a,l,u,h){let p=a[u];const y=l.data;if(function Q_(a){return a instanceof _o}(p)){const b=p;b.resolving&&function ht(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new xe(-200,`Circular dependency in DI detected for ${a}${u}`)}(function _e(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():ue(a)}(y[u]));const C=As(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?Hn(b.injectImpl):null;G_(a,h,ot.Default);try{p=a[u]=b.factory(void 0,y,a,h),l.firstCreatePass&&u>=h.directiveStart&&function Pa(a,l,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:y}=l.type.prototype;if(h){const b=oc(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,b)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,p),y&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,y))}(u,y[u],l)}finally{null!==D&&Hn(D),As(C),b.resolving=!1,Tg()}}return p}function Ag(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function ql(a,l){return!(a&ot.Self||a&ot.Host&&l)}class Zl{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return sv(this._tNode,this._lView,l,h,u)}}function zn(){return new Zl(cr(),Ee())}function $s(a){return Pn(()=>{const l=a.prototype.constructor,u=l[Br]||Kl(l),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const y=p[Br]||Kl(p);if(y&&y!==u)return y;p=Object.getPrototypeOf(p)}return y=>new y})}function Kl(a){return ze(a)?()=>{const l=Kl(ee(a));return l&&l()}:po(a)}function Va(a){const l=a[1],u=l.type;return 2===u?l.declTNode:1===u?a[6]:null}function wc(a){return function Oh(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const y=u[p];if(X_(y))break;if(0===y)p+=2;else if("number"==typeof y)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(y===l)return u[p+1];p+=2}}}return null}(cr(),a)}const Ua="__parameters__";function zs(a,l,u){return Pn(()=>{const h=function Vh(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(l);function p(...y){if(this instanceof p)return h.apply(this,y),this;const b=new p(...y);return C.annotation=b,C;function C(D,x,k){const V=D.hasOwnProperty(Ua)?D[Ua]:Object.defineProperty(D,Ua,{value:[]})[Ua];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(b),D}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class vn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function br(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let h=a[u];Array.isArray(h)?(l===a&&(l=a.slice(0,u)),br(h,l)):l!==a&&l.push(h)}return l}function Io(a,l){a.forEach(u=>Array.isArray(u)?Io(u,l):l(u))}function Bh(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function wr(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Ui(a,l,u){let h=Bi(a,l);return h>=0?a[1|h]=u:(h=~h,function eI(a,l,u,h){let p=a.length;if(p==l)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Cc(a,l){const u=Bi(a,l);if(u>=0)return a[1|u]}function Bi(a,l){return function Ha(a,l,u){let h=0,p=a.length>>u;for(;p!==h;){const y=h+(p-h>>1),b=a[y<<u];if(l===b)return y<<u;b>l?p=y:h=y+1}return~(p<<u)}(a,l,1)}const ts={},eu="__NG_DI_FLAG__",Sc="ngTempTokenPath",yv=/\n/gm,Gh="__source";let tu;function za(a){const l=tu;return tu=a,l}function Wh(a,l=ot.Default){if(void 0===tu)throw new xe(-203,!1);return null===tu?Xi(a,void 0,l):tu.get(a,l&ot.Optional?null:void 0,l)}function nr(a,l=ot.Default){return(function lr(){return Ur}()||Wh)(ee(a),l)}function kg(a,l=ot.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),nr(a,l)}function nu(a){const l=[];for(let u=0;u<a.length;u++){const h=ee(a[u]);if(Array.isArray(h)){if(0===h.length)throw new xe(900,!1);let p,y=ot.Default;for(let b=0;b<h.length;b++){const C=h[b],D=_v(C);"number"==typeof D?-1===D?p=C.token:y|=D:p=C}l.push(nr(p,y))}else l.push(nr(h))}return l}function Qo(a,l){return a[eu]=l,a.prototype[eu]=l,a}function _v(a){return a[eu]}const Xo=Qo(zs("Optional"),8),Jo=Qo(zs("SkipSelf"),4);var Er=(()=>((Er=Er||{})[Er.Important=1]="Important",Er[Er.DashCase=2]="DashCase",Er))();const Oc=new Map;let Rv=0;const na="__ngContext__";function Mr(a,l){Wr(l)?(a[na]=l[20],function Ws(a){Oc.set(a[20],a)}(l)):a[na]=l}function sf(a,l){return undefined(a,l)}function Co(a){const l=a[3];return oi(l)?l[3]:l}function jg(a){return m(a[13])}function E(a){return m(a[4])}function m(a){for(;null!==a&&!oi(a);)a=a[4];return a}function I(a,l,u,h,p){if(null!=h){let y,b=!1;oi(h)?y=h:Wr(h)&&(b=!0,h=h[0]);const C=wn(h);0===a&&null!==u?null==p?cf(l,u,C):rs(l,u,C,p||null,!0):1===a&&null!==u?rs(l,u,C,p||null,!0):2===a?function cI(a,l,u){const h=$g(a,l);h&&function fu(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}(l,C,b):3===a&&l.destroyNode(C),null!=y&&function uA(a,l,u,h,p){const y=u[7];y!==wn(u)&&I(l,a,h,y,p);for(let C=10;C<u.length;C++){const D=u[C];ff(D[1],D,a,l,h,y)}}(l,a,y,u,p)}}function ae(a,l,u){return a.createElement(l,u)}function ia(a,l){const u=a[9],h=u.indexOf(l),p=l[3];512&l[2]&&(l[2]&=-513,uc(p,-1)),u.splice(h,1)}function Qa(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const p=h[17];null!==p&&p!==a&&ia(p,h),l>0&&(a[u-1][4]=h[4]);const y=wr(a,10+l);!function je(a,l){ff(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const b=y[19];null!==b&&b.detachView(y[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function sa(a,l){if(!(128&l[2])){const u=l[11];u.destroyNode&&ff(a,l,u,3,null,null),function Yt(a){let l=a[13];if(!l)return Uc(a[1],a);for(;l;){let u=null;if(Wr(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)Wr(l)&&Uc(l[1],l),l=l[3];null===l&&(l=a),Wr(l)&&Uc(l[1],l),u=l&&l[4]}l=u}}(l)}}function Uc(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function af(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=l[u[h]];if(!(p instanceof _o)){const y=u[h+1];if(Array.isArray(y))for(let b=0;b<y.length;b+=2){const C=p[y[b]],D=y[b+1];try{D.call(C)}finally{}}else try{y.call(p)}finally{}}}}(a,l),function Hg(a,l){const u=a.cleanup,h=l[7];let p=-1;if(null!==u)for(let y=0;y<u.length-1;y+=2)if("string"==typeof u[y]){const b=u[y+1],C="function"==typeof b?b(l):wn(l[b]),D=h[p=u[y+2]],x=u[y+3];"boolean"==typeof x?C.removeEventListener(u[y],D,x):x>=0?h[p=x]():h[p=-x].unsubscribe(),y+=2}else{const b=h[p=u[y+1]];u[y].call(b)}if(null!==h){for(let y=p+1;y<h.length;y++)(0,h[y])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const u=l[17];if(null!==u&&oi(l[3])){u!==l[3]&&ia(u,l);const h=l[19];null!==h&&h.detachView(a)}!function Vg(a){Oc.delete(a[20])}(l)}}function lf(a,l,u){return function uf(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];if(2&h.flags){const p=a.data[h.directiveStart].encapsulation;if(p===It.None||p===It.Emulated)return null}return bi(h,u)}(a,l.parent,u)}function rs(a,l,u,h,p){a.insertBefore(l,u,h,p)}function cf(a,l,u){a.appendChild(l,u)}function hu(a,l,u,h,p){null!==h?rs(a,l,u,h,p):cf(a,l,u)}function $g(a,l){return a.parentNode(l)}let Hv,zg=function aA(a,l,u){return 40&a.type?bi(a,u):null};function Gg(a,l,u,h){const p=lf(a,h,l),y=l[11],C=function aI(a,l,u){return zg(a,l,u)}(h.parent||l[6],h,l);if(null!=p)if(Array.isArray(u))for(let D=0;D<u.length;D++)hu(y,p,u[D],C,!1);else hu(y,p,u,C,!1)}function hf(a,l){if(null!==l){const u=l.type;if(3&u)return bi(l,a);if(4&u)return qg(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return hf(a,h);{const p=a[l.index];return oi(p)?qg(-1,p):wn(p)}}if(32&u)return sf(l,a)()||wn(a[l.index]);{const h=Wg(a,l);return null!==h?Array.isArray(h)?h[0]:hf(Co(a[16]),h):hf(a,l.next)}}return null}function Wg(a,l){return null!==l?a[16][6].projection[l.projection]:null}function qg(a,l){const u=10+a+1;if(u<l.length){const h=l[u],p=h[1].firstChild;if(null!==p)return hf(h,p)}return l[7]}function Vv(a,l,u,h,p,y,b){for(;null!=u;){const C=h[u.index],D=u.type;if(b&&0===l&&(C&&Mr(wn(C),h),u.flags|=4),64!=(64&u.flags))if(8&D)Vv(a,l,u.child,h,p,y,!1),I(l,a,p,C,y);else if(32&D){const x=sf(u,h);let k;for(;k=x();)I(l,a,p,k,y);I(l,a,p,C,y)}else 16&D?dI(a,l,h,u,p,y):I(l,a,p,C,y);u=b?u.projectionNext:u.next}}function ff(a,l,u,h,p,y){Vv(u,h,a.firstChild,l,p,y,!1)}function dI(a,l,u,h,p,y){const b=u[16],D=b[6].projection[h.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)I(l,a,p,D[x],y);else Vv(a,l,D,b[3],p,y,!0)}function Uv(a,l,u){a.setAttribute(l,"style",u)}function Bv(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function hI(a){Hv=a}class gI{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function oa(a){return a instanceof gI?a.changingThisBreaksApplicationSecurity:a}const _A=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var kr=(()=>((kr=kr||{})[kr.NONE=0]="NONE",kr[kr.HTML=1]="HTML",kr[kr.STYLE=2]="STYLE",kr[kr.SCRIPT=3]="SCRIPT",kr[kr.URL=4]="URL",kr[kr.RESOURCE_URL=5]="RESOURCE_URL",kr))();function Xa(a){const l=function yf(){const a=Ee();return a&&a[12]}();return l?l.sanitize(kr.URL,a)||"":function jc(a,l){const u=function mI(a){return a instanceof gI&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}(a,"URL")?oa(a):function mf(a){return(a=String(a)).match(_A)?a:"unsafe:"+a}(ue(a))}const Zv=new vn("ENVIRONMENT_INITIALIZER"),Kv=new vn("INJECTOR",-1),CI=new vn("INJECTOR_DEF_TYPES");class gu{get(l,u=ts){if(u===ts){const h=new Error(`NullInjectorError: No provider for ${Re(l)}!`);throw h.name="NullInjectorError",h}return u}}function Nt(...a){return{\u0275providers:DI(0,a)}}function DI(a,...l){const u=[],h=new Set;let p;return Io(l,y=>{const b=y;tm(b,u,[],h)&&(p||(p=[]),p.push(b))}),void 0!==p&&TI(p,u),u}function TI(a,l){for(let u=0;u<a.length;u++){const{providers:p}=a[u];Io(p,y=>{l.push(y)})}}function tm(a,l,u,h){if(!(a=ee(a)))return!1;let p=null,y=ni(a);const b=!y&&F(a);if(y||b){if(b&&!b.standalone)return!1;p=a}else{const D=a.ngModule;if(y=ni(D),!y)return!1;p=D}const C=h.has(p);if(b){if(C)return!1;if(h.add(p),b.dependencies){const D="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const x of D)tm(x,l,u,h)}}else{if(!y)return!1;{if(null!=y.imports&&!C){let x;h.add(p);try{Io(y.imports,k=>{tm(k,l,u,h)&&(x||(x=[]),x.push(k))})}finally{}void 0!==x&&TI(x,l)}if(!C){const x=po(p)||(()=>new p);l.push({provide:p,useFactory:x,deps:Pt},{provide:CI,useValue:p,multi:!0},{provide:Zv,useValue:()=>nr(p),multi:!0})}const D=y.providers;null==D||C||Io(D,k=>{l.push(k)})}}return p!==a&&void 0!==a.providers}const jr=Ce({provide:String,useValue:Ce});function Yv(a){return null!==a&&"object"==typeof a&&jr in a}function Ja(a){return"function"==typeof a}const Xv=new vn("Set Injector scope."),zc={},nm={};let rm;function im(){return void 0===rm&&(rm=new gu),rm}class Do{}class Gc extends Do{constructor(l,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yr(l,b=>this.processProvider(b)),this.records.set(Kv,mu(void 0,this)),p.has("environment")&&this.records.set(Do,mu(void 0,this));const y=this.records.get(Xv);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(CI.multi,Pt,ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=za(this),h=Hn(void 0);try{return l()}finally{za(u),Hn(h)}}get(l,u=ts,h=ot.Default){this.assertNotDestroyed();const p=za(this),y=Hn(void 0);try{if(!(h&ot.SkipSelf)){let C=this.records.get(l);if(void 0===C){const D=function om(a){return"function"==typeof a||"object"==typeof a&&a instanceof vn}(l)&&Ut(l);C=D&&this.injectableDefInScope(D)?mu(ua(l),zc):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(h&ot.Self?im():this.parent).get(l,u=h&ot.Optional&&u===ts?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Sc]=b[Sc]||[]).unshift(Re(l)),p)throw b;return function ru(a,l,u,h){const p=a[Sc];throw l[Gh]&&p.unshift(l[Gh]),a.message=function vv(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=Re(l);if(Array.isArray(l))p=l.map(Re).join(" -> ");else if("object"==typeof l){let y=[];for(let b in l)if(l.hasOwnProperty(b)){let C=l[b];y.push(b+":"+("string"==typeof C?JSON.stringify(C):Re(C)))}p=`{${y.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(yv,"\n  ")}`}("\n"+a.message,p,u,h),a.ngTokenPath=p,a[Sc]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{Hn(y),za(p)}}resolveInjectorInitializers(){const l=za(this),u=Hn(void 0);try{const h=this.get(Zv.multi,Pt,ot.Self);for(const p of h)p()}finally{za(l),Hn(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(Re(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(l){let u=Ja(l=ee(l))?l:ee(l&&l.provide);const h=function Kr(a){return Yv(a)?mu(void 0,a.useValue):mu(sm(a),zc)}(l);if(Ja(l)||!0!==l.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=mu(void 0,zc,!0),p.factory=()=>nu(p.multi),this.records.set(u,p)),u=l,p.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===zc&&(u.value=nm,u.value=u.factory()),"object"==typeof u.value&&u.value&&function vf(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=ee(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function ua(a){const l=Ut(a),u=null!==l?l.factory:po(a);if(null!==u)return u;if(a instanceof vn)throw new xe(204,!1);if(a instanceof Function)return function Jv(a){const l=a.length;if(l>0)throw function Ic(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}(l,"?"),new xe(204,!1);const u=function ti(a){const l=a&&(a[ri]||a[ws]);if(l){const u=function gr(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new xe(204,!1)}function sm(a,l,u){let h;if(Ja(a)){const p=ee(a);return po(p)||ua(p)}if(Yv(a))h=()=>ee(a.useValue);else if(function SI(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...nu(a.deps||[]));else if(function Qv(a){return!(!a||!a.useExisting)}(a))h=()=>nr(ee(a.useExisting));else{const p=ee(a&&(a.useClass||a.provide));if(!function Ir(a){return!!a.deps}(a))return po(p)||ua(p);h=()=>new p(...nu(a.deps))}return h}function mu(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function Zs(a){return!!a.\u0275providers}function Yr(a,l){for(const u of a)Array.isArray(u)?Yr(u,l):Zs(u)?Yr(u.\u0275providers,l):l(u)}class e0{}class Qr{resolveComponentFactory(l){throw function SA(a){const l=Error(`No component factory found for ${Re(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Ps=(()=>{class a{}return a.NULL=new Qr,a})();function xA(){return So(cr(),Ee())}function So(a,l){return new yu(bi(a,l))}let yu=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=xA,a})();function xI(a){return a instanceof yu?a.nativeElement:a}class AI{}let t0=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Qt(){const a=Ee(),u=_n(cr().index,a);return(Wr(u)?u:a)[11]}(),a})(),bf=(()=>{class a{}return a.\u0275prov=tt({token:a,providedIn:"root",factory:()=>null}),a})();class MI{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const _u=new MI("14.2.12"),n0={};function lm(a){return a.ngOriginalError}class qc{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&lm(l);for(;u&&lm(u);)u=lm(u);return u||null}}function um(a){return a.ownerDocument.defaultView}function RI(a){return a.ownerDocument}function Ao(a){return a instanceof Function?a():a}function tl(a,l,u){let h=a.length;for(;;){const p=a.indexOf(l,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const y=l.length;if(p+y===h||a.charCodeAt(p+y)<=32)return p}u=p+1}}const Zc="ng-template";function RA(a,l,u){let h=0;for(;h<a.length;){let p=a[h++];if(u&&"class"===p){if(p=a[h],-1!==tl(p.toLowerCase(),l,0))return!0}else if(1===p){for(;h<a.length&&"string"==typeof(p=a[h++]);)if(p.toLowerCase()===l)return!0;return!1}}return!1}function nl(a){return 4===a.type&&a.value!==Zc}function PA(a,l,u){return l===(4!==a.type||u?a.value:Zc)}function OI(a,l,u){let h=4;const p=a.attrs||[],y=function NI(a){for(let l=0;l<a.length;l++)if(X_(a[l]))return l;return a.length}(p);let b=!1;for(let C=0;C<l.length;C++){const D=l[C];if("number"!=typeof D){if(!b)if(4&h){if(h=2|1&h,""!==D&&!PA(a,D,u)||""===D&&1===l.length){if(is(h))return!1;b=!0}}else{const x=8&h?D:l[++C];if(8&h&&null!==a.attrs){if(!RA(a.attrs,x,u)){if(is(h))return!1;b=!0}continue}const V=OA(8&h?"class":D,p,nl(a),u);if(-1===V){if(is(h))return!1;b=!0;continue}if(""!==x){let W;W=V>y?"":p[V+1].toLowerCase();const J=8&h?W:null;if(J&&-1!==tl(J,x,0)||2&h&&x!==W){if(is(h))return!1;b=!0}}}}else{if(!b&&!is(h)&&!is(D))return!1;if(b&&is(D))continue;b=!1,h=D|1&h}}return is(h)||b}function is(a){return 0==(1&a)}function OA(a,l,u,h){if(null===l)return-1;let p=0;if(h||!u){let y=!1;for(;p<l.length;){const b=l[p];if(b===a)return p;if(3===b||6===b)y=!0;else{if(1===b||2===b){let C=l[++p];for(;"string"==typeof C;)C=l[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=y?1:2}return-1}return function cm(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function wf(a,l,u=!1){for(let h=0;h<l.length;h++)if(OI(a,l[h],u))return!0;return!1}function dm(a,l){return a?":not("+l.trim()+")":l}function hm(a){let l=a[0],u=1,h=2,p="",y=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&h){const C=a[++u];p+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!is(b)&&(l+=dm(y,p),p=""),h=b,y=y||!is(h);u++}return""!==p&&(l+=dm(y,p)),l}const Bt={};function VI(a){UI(nn(),Ee(),tr()+a,!1)}function UI(a,l,u,h){if(!h)if(3==(3&l[2])){const y=a.preOrderCheckHooks;null!==y&&Yo(l,y,u)}else{const y=a.preOrderHooks;null!==y&&yo(l,y,0,u)}mo(u)}function rl(a,l=null,u=null,h){const p=pm(a,l,u,h);return p.resolveInjectorInitializers(),p}function pm(a,l=null,u=null,h,p=new Set){const y=[u||Pt,Nt(a)];return h=h||("object"==typeof a?void 0:Re(a)),new Gc(y,l||im(),h||null,p)}let Kc=(()=>{class a{static create(u,h){if(Array.isArray(u))return rl({name:""},h,u,"");{const p=u.name??"";return rl({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=ts,a.NULL=new gu,a.\u0275prov=tt({token:a,providedIn:"any",factory:()=>nr(Kv)}),a.__NG_ELEMENT_ID__=-1,a})();function Xc(a,l=ot.Default){const u=Ee();return null===u?nr(a,l):sv(cr(),u,ee(a),l)}function ZI(){throw new Error("invalid")}function ym(a,l){return a<<17|l<<2}function Ks(a){return a>>17&32767}function g0(a){return 2|a}function Mo(a){return(131068&a)>>2}function Af(a,l){return-131069&a|l<<2}function Ys(a){return 1|a}function sC(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const p=u[h],y=u[h+1];if(-1!==y){const b=a.data[y];pc(p),b.contentQueries(2,l[y],y)}}}function Sm(a,l,u,h,p,y,b,C,D,x,k){const V=l.blueprint.slice();return V[0]=p,V[2]=76|h,(null!==k||a&&1024&a[2])&&(V[2]|=1024),wi(V),V[3]=V[15]=a,V[8]=u,V[10]=b||a&&a[10],V[11]=C||a&&a[11],V[12]=D||a&&a[12]||null,V[9]=x||a&&a[9]||null,V[6]=y,V[20]=function Lg(){return Rv++}(),V[21]=k,V[16]=2==l.type?a[16]:V,V}function ed(a,l,u,h,p){let y=a.data[l];if(null===y)y=function il(a,l,u,h,p){const y=dc(),b=Eh(),D=a.data[l]=function k0(a,l,u,h,p,y){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?y:y&&y.parent,u,l,h,p);return null===a.firstChild&&(a.firstChild=D),null!==y&&(b?null==y.child&&null!==D.parent&&(y.child=D):null===y.next&&(y.next=D)),D}(a,l,u,h,p),function Ll(){return Lt.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=u,y.value=h,y.attrs=p;const b=function Wo(){const a=Lt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();y.injectorIndex=null===b?-1:b.injectorIndex}return Li(y,!0),y}function ko(a,l,u,h){if(0===u)return-1;const p=l.length;for(let y=0;y<u;y++)l.push(h),a.blueprint.push(h),a.data.push(null);return p}function S0(a,l,u){gc(l);try{const h=a.viewQuery;null!==h&&F0(1,h,u);const p=a.template;null!==p&&td(a,l,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&sC(a,l),a.staticViewQueries&&F0(2,a.viewQuery,u);const y=a.components;null!==y&&function Tm(a,l){for(let u=0;u<l.length;u++)sM(a,l[u])}(l,y)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,Ko()}}function xm(a,l,u,h){const p=l[2];if(128!=(128&p)){gc(l);try{wi(l),function qo(a){return Lt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&td(a,l,u,2,h);const b=3==(3&p);if(b){const x=a.preOrderCheckHooks;null!==x&&Yo(l,x,null)}else{const x=a.preOrderHooks;null!==x&&yo(l,x,0,null),Oa(l,0)}if(function mC(a){for(let l=jg(a);null!==l;l=E(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const p=u[h],y=p[3];0==(512&p[2])&&uc(y,1),p[2]|=512}}}(l),function Pf(a){for(let l=jg(a);null!==l;l=E(l))for(let u=10;u<l.length;u++){const h=l[u],p=h[1];ka(h)&&xm(p,h,p.template,h[8])}}(l),null!==a.contentQueries&&sC(a,l),b){const x=a.contentCheckHooks;null!==x&&Yo(l,x)}else{const x=a.contentHooks;null!==x&&yo(l,x,1),Oa(l,1)}!function KA(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)mo(~p);else{const y=p,b=u[++h],C=u[++h];Dg(b,y),C(2,l[y])}}}finally{mo(-1)}}(a,l);const C=a.components;null!==C&&function oC(a,l){for(let u=0;u<l.length;u++)iM(a,l[u])}(l,C);const D=a.viewQuery;if(null!==D&&F0(2,D,h),b){const x=a.viewCheckHooks;null!==x&&Yo(l,x)}else{const x=a.viewHooks;null!==x&&yo(l,x,2),Oa(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,uc(l[3],-1))}finally{Ko()}}}function td(a,l,u,h,p){const y=tr(),b=2&h;try{mo(-1),b&&l.length>22&&UI(a,l,22,!1),u(h,p)}finally{mo(y)}}function x0(a,l,u){!Go()||(function dC(a,l,u,h){const p=u.directiveStart,y=u.directiveEnd;a.firstCreatePass||Gl(u,l),Mr(h,l);const b=u.initialInputs;for(let C=p;C<y;C++){const D=a.data[C],x=Ni(D);x&&rM(l,u,D);const k=wo(l,a,C,u);Mr(k,l),null!==b&&gC(0,C-p,k,D,0,b),x&&(_n(u.index,l)[8]=k)}}(a,l,u,bi(u,l)),128==(128&u.flags)&&function tM(a,l,u){const h=u.directiveStart,p=u.directiveEnd,y=u.index,b=function KE(){return Lt.lFrame.currentDirectiveIndex}();try{mo(y);for(let C=h;C<p;C++){const D=a.data[C],x=l[C];fc(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Am(D,x)}}finally{mo(-1),fc(b)}}(a,l,u))}function A0(a,l,u=bi){const h=l.localNames;if(null!==h){let p=l.index+1;for(let y=0;y<h.length;y+=2){const b=h[y+1],C=-1===b?u(l,a):a[b];a[p++]=C}}}function aC(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=M0(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function M0(a,l,u,h,p,y,b,C,D,x){const k=22+h,V=k+p,W=function YA(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Bt);return u}(k,V),J="function"==typeof x?x():x;return W[1]={type:a,blueprint:W,template:u,queries:null,viewQuery:C,declTNode:l,data:W.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:J,incompleteFirstPass:!1}}function lC(a,l,u,h){const p=yC(l);null===u?p.push(h):(p.push(u),a.firstCreatePass&&_C(a).push(h,p.length-1))}function Rf(a,l,u){for(let h in a)if(a.hasOwnProperty(h)){const p=a[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(l,p):u[h]=[l,p]}return u}function Eu(a,l){const h=l.directiveEnd,p=a.data,y=l.attrs,b=[];let C=null,D=null;for(let x=l.directiveStart;x<h;x++){const k=p[x],V=k.inputs,W=null===y||nl(l)?null:Pm(V,y);b.push(W),C=Rf(V,x,C),D=Rf(k.outputs,x,D)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=b,l.inputs=C,l.outputs=D}function uC(a,l){const u=_n(l,a);16&u[2]||(u[2]|=32)}function R0(a,l,u,h){let p=!1;if(Go()){const y=function hC(a,l,u){const h=a.directiveRegistry;let p=null;if(h)for(let y=0;y<h.length;y++){const b=h[y];wf(u,b.selectors,!1)&&(p||(p=[]),bo(Gl(u,l),a,b.type),Ni(b)?(Mm(a,u),p.unshift(b)):p.push(b))}return p}(a,l,u),b=null===h?null:{"":-1};if(null!==y){p=!0,fC(u,a.data.length,y.length);for(let k=0;k<y.length;k++){const V=y[k];V.providersResolver&&V.providersResolver(V)}let C=!1,D=!1,x=ko(a,l,y.length,null);for(let k=0;k<y.length;k++){const V=y[k];u.mergedAttrs=jl(u.mergedAttrs,V.hostAttrs),pC(a,u,l,x,V),nM(x,V,b),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const W=V.type.prototype;!C&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),C=!0),!D&&(W.ngOnChanges||W.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),D=!0),x++}Eu(a,u)}b&&function km(a,l,u){if(l){const h=a.localNames=[];for(let p=0;p<l.length;p+=2){const y=u[l[p+1]];if(null==y)throw new xe(-301,!1);h.push(l[p],y)}}}(u,h,b)}return u.mergedAttrs=jl(u.mergedAttrs,u.attrs),p}function cC(a,l,u,h,p,y){const b=y.hostBindings;if(b){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const D=~l.index;(function eM(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(h,p,b)}}function Am(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function Mm(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function nM(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;Ni(l)&&(u[""]=a)}}function fC(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function pC(a,l,u,h,p){a.data[h]=p;const y=p.factory||(p.factory=po(p.type)),b=new _o(y,Ni(p),Xc);a.blueprint[h]=b,u[h]=b,cC(a,l,0,h,ko(a,u,p.hostVars,Bt),p)}function rM(a,l,u){const h=bi(l,a),p=aC(u),y=a[10],b=Om(a,Sm(a,p,null,u.onPush?32:16,h,l,y,y.createRenderer(h,u),null,null,null));a[l.index]=b}function os(a,l,u,h,p,y){const b=bi(a,l);!function Rm(a,l,u,h,p,y,b){if(null==y)a.removeAttribute(l,p,u);else{const C=null==b?ue(y):b(y,h||"",p);a.setAttribute(l,p,C,u)}}(l[11],b,y,a.value,u,h,p)}function gC(a,l,u,h,p,y){const b=y[l];if(null!==b){const C=h.setInput;for(let D=0;D<b.length;){const x=b[D++],k=b[D++],V=b[D++];null!==C?h.setInput(u,V,x,k):u[k]=V}}}function Pm(a,l){let u=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;a.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,a[p],l[h+1])),h+=2}else h+=2;else h+=4}return u}function O0(a,l,u,h){return new Array(a,!0,!1,l,null,0,h,u,null,null)}function iM(a,l){const u=_n(l,a);if(ka(u)){const h=u[1];48&u[2]?xm(h,u,h.template,u[8]):u[5]>0&&N0(u)}}function N0(a){for(let h=jg(a);null!==h;h=E(h))for(let p=10;p<h.length;p++){const y=h[p];if(ka(y))if(512&y[2]){const b=y[1];xm(b,y,b.template,y[8])}else y[5]>0&&N0(y)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=_n(u[h],a);ka(p)&&p[5]>0&&N0(p)}}function sM(a,l){const u=_n(l,a),h=u[1];(function oM(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),S0(h,u,u[8])}function Om(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function rd(a){for(;a;){a[2]|=32;const l=Co(a);if(lh(a)&&!l)return a;a=l}return null}function Nm(a,l,u,h=!0){const p=l[10];p.begin&&p.begin();try{xm(a,l,a.template,u)}catch(b){throw h&&L0(l,b),b}finally{p.end&&p.end()}}function F0(a,l,u){pc(0),l(a,u)}function yC(a){return a[7]||(a[7]=[])}function _C(a){return a.cleanup||(a.cleanup=[])}function L0(a,l){const u=a[9],h=u?u.get(qc,null):null;h&&h.handleError(l)}function V0(a,l,u,h,p){for(let y=0;y<u.length;){const b=u[y++],C=u[y++],D=l[b],x=a.data[b];null!==x.setInput?x.setInput(D,p,h,C):D[C]=p}}function Ro(a,l,u){const h=Fl(l,a);!function O(a,l,u){a.setValue(l,u)}(a[11],h,u)}function Of(a,l,u){let h=u?a.styles:null,p=u?a.classes:null,y=0;if(null!==l)for(let b=0;b<l.length;b++){const C=l[b];"number"==typeof C?y=C:1==y?p=He(p,C):2==y&&(h=He(h,C+": "+l[++b]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function Nf(a,l,u,h,p=!1){for(;null!==u;){const y=l[u.index];if(null!==y&&h.push(wn(y)),oi(y))for(let C=10;C<y.length;C++){const D=y[C],x=D[1].firstChild;null!==x&&Nf(D[1],D,x,h)}const b=u.type;if(8&b)Nf(a,l,u.child,h);else if(32&b){const C=sf(u,l);let D;for(;D=C();)h.push(D)}else if(16&b){const C=Wg(l,u);if(Array.isArray(C))h.push(...C);else{const D=Co(l[16]);Nf(D[1],D,C,h,!0)}}u=p?u.projectionNext:u.next}return h}class id{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Nf(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(oi(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(Qa(l,h),wr(u,h))}this._attachedToViewContainer=!1}sa(this._lView[1],this._lView)}onDestroy(l){lC(this._lView[1],this._lView,null,l)}markForCheck(){rd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Nm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gt(a,l){ff(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=l}}class bC extends id{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;Nm(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class U0 extends Ps{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=F(l);return new Ff(u,this.ngModule)}}function wC(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class lM{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){const p=this.injector.get(l,n0,h);return p!==n0||u===n0?p:this.parentInjector.get(l,u,h)}}class Ff extends e0{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function FI(a){return a.map(hm).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return wC(this.componentDef.inputs)}get outputs(){return wC(this.componentDef.outputs)}create(l,u,h,p){let y=(p=p||this.ngModule)instanceof Do?p:p?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const b=y?new lM(l,y):l,C=b.get(AI,null);if(null===C)throw new xe(407,!1);const D=b.get(bf,null),x=C.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",V=h?function h2(a,l,u){return a.selectRootElement(l,u===It.ShadowDom)}(x,h,this.componentDef.encapsulation):ae(x,k,function aM(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(k)),W=this.componentDef.onPush?288:272,J=M0(0,null,null,1,0,null,null,null,null,null),ge=Sm(null,J,null,W,null,null,C,x,D,b,null);let Be,qe;gc(ge);try{const ct=function EC(a,l,u,h,p,y){const b=u[1];u[22]=a;const D=ed(b,22,2,"#host",null),x=D.mergedAttrs=l.hostAttrs;null!==x&&(Of(D,x,!0),null!==a&&(Bl(p,a,x),null!==D.classes&&Bv(p,a,D.classes),null!==D.styles&&Uv(p,a,D.styles)));const k=h.createRenderer(a,l),V=Sm(u,aC(l),null,l.onPush?32:16,u[22],D,h,k,y||null,null,null);return b.firstCreatePass&&(bo(Gl(D,u),b,l.type),Mm(b,D),fC(D,u.length,1)),Om(u,V),u[22]=V}(V,this.componentDef,ge,C,x);if(V)if(h)Bl(x,V,["ng-version",_u.full]);else{const{attrs:Dt,classes:Te}=function LI(a){const l=[],u=[];let h=1,p=2;for(;h<a.length;){let y=a[h];if("string"==typeof y)2===p?""!==y&&l.push(y,a[++h]):8===p&&u.push(y);else{if(!is(p))break;p=y}h++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);Dt&&Bl(x,V,Dt),Te&&Te.length>0&&Bv(x,V,Te.join(" "))}if(qe=mh(J,22),void 0!==u){const Dt=qe.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const Mt=u[Te];Dt.push(null!=Mt?Array.from(Mt):null)}}Be=function m2(a,l,u,h){const p=u[1],y=function JA(a,l,u){const h=cr();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),pC(a,h,l,ko(a,l,1,null),u),Eu(a,h));const p=wo(l,a,h.directiveStart,h);Mr(p,l);const y=bi(h,l);return y&&Mr(y,l),p}(p,u,l);if(a[8]=u[8]=y,null!==h)for(const C of h)C(y,l);if(l.contentQueries){const C=cr();l.contentQueries(1,y,C.directiveStart)}const b=cr();return!p.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(mo(b.index),cC(u[1],b,0,b.directiveStart,b.directiveEnd,l),Am(l,y)),y}(ct,this.componentDef,ge,[hM]),S0(J,ge,null)}finally{Ko()}return new B0(this.componentType,Be,So(qe,ge),ge,qe)}}class B0 extends class am{}{constructor(l,u,h,p,y){super(),this.location=h,this._rootLView=p,this._tNode=y,this.instance=u,this.hostView=this.changeDetectorRef=new bC(p),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){const y=this._rootLView;V0(y[1],y,p,l,u),uC(y,this._tNode.index)}}get injector(){return new Zl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function hM(){const a=cr();Ul(Ee()[1],a)}function j0(a){let l=function IC(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let p;if(Ni(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new xe(903,!1);p=l.\u0275dir}if(p){if(u){h.push(p);const b=a;b.inputs=sd(a.inputs),b.declaredInputs=sd(a.declaredInputs),b.outputs=sd(a.outputs);const C=p.hostBindings;C&&$0(a,C);const D=p.viewQuery,x=p.contentQueries;if(D&&CC(a,D),x&&H0(a,x),Pe(a.inputs,p.inputs),Pe(a.declaredInputs,p.declaredInputs),Pe(a.outputs,p.outputs),Ni(p)&&p.data.animation){const k=a.data;k.animation=(k.animation||[]).concat(p.data.animation)}}const y=p.features;if(y)for(let b=0;b<y.length;b++){const C=y[b];C&&C.ngInherit&&C(a),C===j0&&(u=!1)}}l=Object.getPrototypeOf(l)}!function fM(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=l+=p.hostVars,p.hostAttrs=jl(p.hostAttrs,u=jl(u,p.hostAttrs))}}(h)}function sd(a){return a===ur?{}:a===Pt?[]:a}function CC(a,l){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{l(h,p),u(h,p)}:l}function H0(a,l){const u=a.contentQueries;a.contentQueries=u?(h,p,y)=>{l(h,p,y),u(h,p,y)}:l}function $0(a,l){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{l(h,p),u(h,p)}:l}let Lm=null;function Iu(){if(!Lm){const a=en.Symbol;if(a&&a.iterator)Lm=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Lm=h)}}}return Lm}function Lf(a){return!!Vn(a)&&(Array.isArray(a)||!(a instanceof Map)&&Iu()in a)}function Vn(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Xs(a,l,u){return a[l]=u}function Hr(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Du(a,l,u,h){const p=Hr(a,l,u);return Hr(a,l+1,h)||p}function TC(a,l,u,h){const p=Ee();return Hr(p,Zo(),l)&&(nn(),os(Dn(),p,a,l,u,h)),TC}function sl(a,l,u,h,p,y){const C=Du(a,function Vi(){return Lt.lFrame.bindingIndex}(),u,p);return Ss(2),C?l+ue(u)+h+ue(p)+y:Bt}function vM(a,l,u,h,p,y,b,C){const D=Ee(),x=nn(),k=a+22,V=x.firstCreatePass?function Bm(a,l,u,h,p,y,b,C,D){const x=l.consts,k=ed(l,a,4,b||null,Ts(x,C));R0(l,u,k,Ts(x,D)),Ul(l,k);const V=k.tViews=M0(2,k,h,p,y,l.directiveRegistry,l.pipeRegistry,null,l.schemas,x);return null!==l.queries&&(l.queries.template(l,k),V.queries=l.queries.embeddedTView(k)),k}(k,x,D,l,u,h,p,y,b):x.data[k];Li(V,!1);const W=D[11].createComment("");Gg(x,D,W,V),Mr(W,D),Om(D,D[k]=O0(W,D,W,V)),Pl(V)&&x0(x,D,V),null!=b&&A0(D,V,C)}function q0(a,l,u){const h=Ee();return Hr(h,Zo(),l)&&function ss(a,l,u,h,p,y,b,C){const D=bi(l,u);let k,x=l.inputs;!C&&null!=x&&(k=x[h])?(V0(a,u,k,h,p),Hs(l)&&uC(u,l.index)):3&l.type&&(h=function QA(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=b?b(p,l.value||"",h):p,y.setProperty(D,h,p))}(nn(),Dn(),h,a,l,h[11],u,!1),q0}function jm(a,l,u,h,p){const b=p?"class":"style";V0(a,u,l.inputs[b],b,h)}function Hm(a,l,u,h){const p=Ee(),y=nn(),b=22+a,C=p[11],D=p[b]=ae(C,l,function mc(){return Lt.lFrame.currentNamespace}()),x=y.firstCreatePass?function wM(a,l,u,h,p,y,b){const C=l.consts,x=ed(l,a,2,p,Ts(C,y));return R0(l,u,x,Ts(C,b)),null!==x.attrs&&Of(x,x.attrs,!1),null!==x.mergedAttrs&&Of(x,x.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,x),x}(b,y,p,0,l,u,h):y.data[b];Li(x,!0);const k=x.mergedAttrs;null!==k&&Bl(C,D,k);const V=x.classes;null!==V&&Bv(C,D,V);const W=x.styles;return null!==W&&Uv(C,D,W),64!=(64&x.flags)&&Gg(y,p,D,x),0===function wg(){return Lt.lFrame.elementDepthCount}()&&Mr(D,p),function Eg(){Lt.lFrame.elementDepthCount++}(),Pl(x)&&(x0(y,p,x),function nd(a,l,u){if(Rl(l)){const p=l.directiveEnd;for(let y=l.directiveStart;y<p;y++){const b=a.data[y];b.contentQueries&&b.contentQueries(1,u[y],y)}}}(y,x,p)),null!==h&&A0(p,x),Hm}function $m(){let a=cr();Eh()?function hc(){Lt.lFrame.isParent=!1}():(a=a.parent,Li(a,!1));const l=a;!function $_(){Lt.lFrame.elementDepthCount--}();const u=nn();return u.firstCreatePass&&(Ul(u,a),Rl(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function _c(a){return 0!=(16&a.flags)}(l)&&jm(u,l,Ee(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Sg(a){return 0!=(32&a.flags)}(l)&&jm(u,l,Ee(),l.stylesWithoutHost,!1),$m}function Z0(a,l,u,h){return Hm(a,l,u,h),$m(),Z0}function Y0(){return Ee()}function Bf(a){return!!a&&"function"==typeof a.then}function RC(a){return!!a&&"function"==typeof a.subscribe}const xu=RC;function eo(a,l,u,h){const p=Ee(),y=nn(),b=cr();return function ha(a,l,u,h,p,y,b,C){const D=Pl(h),k=a.firstCreatePass&&_C(a),V=l[8],W=yC(l);let J=!0;if(3&h.type||C){const qe=bi(h,l),ct=C?C(qe):qe,Dt=W.length,Te=C?gn=>C(wn(gn[h.index])):h.index;let Mt=null;if(!C&&D&&(Mt=function v2(a,l,u,h){const p=a.cleanup;if(null!=p)for(let y=0;y<p.length-1;y+=2){const b=p[y];if(b===u&&p[y+1]===h){const C=l[7],D=p[y+2];return C.length>D?C[D]:null}"string"==typeof b&&(y+=2)}return null}(a,l,p,h.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=y,Mt.__ngLastListenerFn__=y,J=!1;else{y=Q0(h,l,V,y,!1);const gn=u.listen(ct,p,y);W.push(y,gn),k&&k.push(p,Te,Dt,Dt+1)}}else y=Q0(h,l,V,y,!1);const ge=h.outputs;let Be;if(J&&null!==ge&&(Be=ge[p])){const qe=Be.length;if(qe)for(let ct=0;ct<qe;ct+=2){const Un=l[Be[ct]][Be[ct+1]].subscribe(y),pl=W.length;W.push(y,Un),k&&k.push(p,h.index,pl,-(pl+1))}}}(y,p,p[11],b,a,l,0,h),eo}function Po(a,l,u,h){try{return!1!==u(h)}catch(p){return L0(a,p),!1}}function Q0(a,l,u,h,p){return function y(b){if(b===Function)return h;rd(2&a.flags?_n(a.index,l):l);let D=Po(l,0,h,b),x=y.__ngNextListenerFn__;for(;x;)D=Po(l,0,x,b)&&D,x=x.__ngNextListenerFn__;return p&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function ls(a=1){return function Vl(a){return(Lt.lFrame.contextLView=function Z_(a,l){for(;a>0;)l=l[15],a--;return l}(a,Lt.lFrame.contextLView))[8]}(a)}function jC(a,l,u,h,p){const y=a[u+1],b=null===l;let C=h?Ks(y):Mo(y),D=!1;for(;0!==C&&(!1===D||b);){const k=a[C+1];TM(a[C],l)&&(D=!0,a[C+1]=h?Ys(k):g0(k)),C=h?Ks(k):Mo(k)}D&&(a[u+1]=h?g0(y):Ys(y))}function TM(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Bi(a,l)>=0}function Gm(a,l){return function Pr(a,l,u,h){const p=Ee(),y=nn(),b=Ss(2);y.firstUpdatePass&&function Mn(a,l,u,h){const p=a.data;if(null===p[u+1]){const y=p[tr()],b=function dn(a,l){return l>=a.expandoStartIndex}(a,u);(function dd(a,l){return 0!=(a.flags&(l?16:32))})(y,h)&&null===l&&!b&&(l=!1),l=function un(a,l,u,h){const p=function Ch(a){const l=Lt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let y=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(u=cd(u=sb(null,a,l,u,h),l.attrs,h),y=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==p)if(u=sb(p,a,l,u,h),null===y){let D=function rr(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==Mo(h))return a[Ks(h)]}(a,l,h);void 0!==D&&Array.isArray(D)&&(D=sb(null,a,l,D[1],h),D=cd(D,l.attrs,h),function us(a,l,u,h){a[Ks(u?l.classBindings:l.styleBindings)]=h}(a,l,h,D))}else y=function Gt(a,l,u){let h;const p=l.directiveEnd;for(let y=1+l.directiveStylingLast;y<p;y++)h=cd(h,a[y].hostAttrs,u);return cd(h,l.attrs,u)}(a,l,h)}return void 0!==y&&(h?l.residualClasses=y:l.residualStyles=y),u}(p,y,l,h),function tb(a,l,u,h,p,y){let b=y?l.classBindings:l.styleBindings,C=Ks(b),D=Mo(b);a[h]=u;let k,x=!1;if(Array.isArray(u)){const V=u;k=V[1],(null===k||Bi(V,k)>0)&&(x=!0)}else k=u;if(p)if(0!==D){const W=Ks(a[C+1]);a[h+1]=ym(W,C),0!==W&&(a[W+1]=Af(a[W+1],h)),a[C+1]=function QI(a,l){return 131071&a|l<<17}(a[C+1],h)}else a[h+1]=ym(C,0),0!==C&&(a[C+1]=Af(a[C+1],h)),C=h;else a[h+1]=ym(D,0),0===C?C=h:a[D+1]=Af(a[D+1],h),D=h;x&&(a[h+1]=g0(a[h+1])),jC(a,k,h,!0),jC(a,k,h,!1),function nb(a,l,u,h,p){const y=p?a.residualClasses:a.residualStyles;null!=y&&"string"==typeof l&&Bi(y,l)>=0&&(u[h+1]=Ys(u[h+1]))}(l,k,a,h,y),b=ym(C,D),y?l.classBindings=b:l.styleBindings=b}(p,y,l,u,b,h)}}(y,a,b,h),l!==Bt&&Hr(p,b,l)&&function zf(a,l,u,h,p,y,b,C){if(!(3&l.type))return;const D=a.data,x=D[C+1];qm(function _m(a){return 1==(1&a)}(x)?ob(D,l,u,p,Mo(x),b):void 0)||(qm(y)||function YI(a){return 2==(2&a)}(x)&&(y=ob(D,null,u,p,C,b)),function cA(a,l,u,h,p){if(l)p?a.addClass(u,h):a.removeClass(u,h);else{let y=-1===h.indexOf("-")?void 0:Er.DashCase;null==p?a.removeStyle(u,h,y):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),y|=Er.Important),a.setStyle(u,h,p,y))}}(h,b,Fl(tr(),u),p,y))}(y,y.data[tr()],p,p[11],a,p[b+1]=function Gf(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=Re(oa(a)))),a}(l,u),h,b)}(a,l,null,!0),Gm}function sb(a,l,u,h,p){let y=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(y=l[C],h=cd(h,y.hostAttrs,p),y!==a);)C++;return null!==a&&(u.directiveStylingLast=C),h}function cd(a,l,u){const h=u?1:2;let p=-1;if(null!==l)for(let y=0;y<l.length;y++){const b=l[y];"number"==typeof b?p=b:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Ui(a,b,!!u||l[++y]))}return void 0===a?null:a}function ob(a,l,u,h,p,y){const b=null===l;let C;for(;p>0;){const D=a[p],x=Array.isArray(D),k=x?D[1]:D,V=null===k;let W=u[p+1];W===Bt&&(W=V?Pt:void 0);let J=V?Cc(W,h):k===h?W:void 0;if(x&&!qm(J)&&(J=Cc(D,h)),qm(J)&&(C=J,b))return C;const ge=a[p+1];p=b?Ks(ge):Mo(ge)}if(null!==l){let D=y?l.residualClasses:l.residualStyles;null!=D&&(C=Cc(D,h))}return C}function qm(a){return void 0!==a}function WC(a,l=""){const u=Ee(),h=nn(),p=a+22,y=h.firstCreatePass?ed(h,p,1,l,null):h.data[p],b=u[p]=function A(a,l){return a.createText(l)}(u[11],l);Gg(h,u,b,y),Li(y,!1)}function qC(a){return Wf("",a,""),qC}function Wf(a,l,u){const h=Ee(),p=function od(a,l,u,h){return Hr(a,Zo(),u)?l+ue(u)+h:Bt}(h,a,l,u);return p!==Bt&&Ro(h,tr(),p),Wf}function ab(a,l,u,h,p){const y=Ee(),b=sl(y,a,l,u,h,p);return b!==Bt&&Ro(y,tr(),b),ab}const ku=void 0;var tD=["en",[["a","p"],["AM","PM"],ku],[["AM","PM"],ku,ku],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ku,"{1} 'at' {0}",ku],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function FM(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let gd={};function Xm(a){const l=function ui(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=fb(l);if(u)return u;const h=l.split("-")[0];if(u=fb(h),u)return u;if("en"===h)return tD;throw new xe(701,!1)}function hb(a){return Xm(a)[Ct.PluralCase]}function fb(a){return a in gd||(gd[a]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[a]),gd[a]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const Ru="en-US";let pb=Ru;function bb(a,l,u,h,p){if(a=ee(a),Array.isArray(a))for(let y=0;y<a.length;y++)bb(a[y],l,u,h,p);else{const y=nn(),b=Ee();let C=Ja(a)?a:ee(a.provide),D=sm(a);const x=cr(),k=1048575&x.providerIndexes,V=x.directiveStart,W=x.providerIndexes>>20;if(Ja(a)||!a.multi){const J=new _o(D,p,Xc),ge=wb(C,l,p?k:k+W,V);-1===ge?(bo(Gl(x,b),y,C),ma(y,a,l.length),l.push(C),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(J),b.push(J)):(u[ge]=J,b[ge]=J)}else{const J=wb(C,l,k+W,V),ge=wb(C,l,k,k+W),Be=J>=0&&u[J],qe=ge>=0&&u[ge];if(p&&!qe||!p&&!Be){bo(Gl(x,b),y,C);const ct=function o1(a,l,u,h,p){const y=new _o(a,u,Xc);return y.multi=[],y.index=l,y.componentProviders=0,CD(y,p,h&&!u),y}(p?s1:Lu,u.length,p,h,D);!p&&qe&&(u[ge].providerFactory=ct),ma(y,a,l.length,0),l.push(C),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(ct),b.push(ct)}else ma(y,a,J>-1?J:ge,CD(u[p?ge:J],D,!p&&h));!p&&h&&qe&&u[ge].componentProviders++}}}function ma(a,l,u,h){const p=Ja(l),y=function _f(a){return!!a.useClass}(l);if(p||y){const D=(y?ee(l.useClass):l).prototype.ngOnDestroy;if(D){const x=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const k=x.indexOf(u);-1===k?x.push(u,[h,D]):x[k+1].push(h,D)}else x.push(u,D)}}}function CD(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function wb(a,l,u,h){for(let p=u;p<h;p++)if(l[p]===a)return p;return-1}function Lu(a,l,u,h){return wd(this.multi,[])}function s1(a,l,u,h){const p=this.multi;let y;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=wo(u,u[1],this.providerFactory.index,h);y=C.slice(0,b),wd(p,y);for(let D=b;D<C.length;D++)y.push(C[D])}else y=[],wd(p,y);return y}function wd(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function Eb(a,l=[]){return u=>{u.providersResolver=(h,p)=>function i1(a,l,u){const h=nn();if(h.firstCreatePass){const p=Ni(a);bb(u,h.data,h.blueprint,p,!0),bb(l,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,l)}}class Ed{}class Ib{}function Vu(a,l){return new DD(a,l??null)}class DD extends Ed{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new U0(this);const h=We(l);this._bootstrapComponents=Ao(h.bootstrap),this._r3Injector=pm(l,u,[{provide:Ed,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],Re(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Cb extends Ib{constructor(l){super(),this.moduleType=l}create(l){return new DD(this.moduleType,l)}}class a1 extends Ed{constructor(l,u,h){super(),this.componentFactoryResolver=new U0(this),this.instance=null;const p=new Gc([...l,{provide:Ed,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],u||im(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function cl(a,l,u=null){return new a1(a,l,u).injector}let TD=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=DI(0,u.type),p=h.length>0?cl([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=tt({token:a,providedIn:"environment",factory:()=>new a(nr(Do))}),a})();function Db(a){a.getStandaloneInjector=l=>l.get(TD).getOrCreateStandaloneInjector(a)}function RD(a,l,u,h){return FD(Ee(),dr(),a,l,u,h)}function Ab(a,l,u,h,p){return Mb(Ee(),dr(),a,l,u,h,p)}function np(a,l){const u=a[l];return u===Bt?void 0:u}function FD(a,l,u,h,p,y){const b=l+u;return Hr(a,b,p)?Xs(a,b+1,y?h.call(y,p):h(p)):np(a,b+1)}function Mb(a,l,u,h,p,y,b){const C=l+u;return Du(a,C,p,y)?Xs(a,C+2,b?h.call(b,p,y):h(p,y)):np(a,C+2)}function VD(a,l){const u=nn();let h;const p=a+22;u.firstCreatePass?(h=function rp(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const y=h.factory||(h.factory=po(h.type)),b=Hn(Xc);try{const C=As(!1),D=y();return As(C),function kC(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,Ee(),p,D),D}finally{Hn(b)}}function Rb(a,l,u){const h=a+22,p=Ee(),y=Ds(p,h);return ip(p,h)?FD(p,dr(),l,y.transform,u,y):y.transform(u)}function BD(a,l,u,h){const p=a+22,y=Ee(),b=Ds(y,p);return ip(y,p)?Mb(y,dr(),l,b.transform,u,h,b):b.transform(u,h)}function ip(a,l){return a[1].data[l].pure}function Pb(a){return l=>{setTimeout(a,void 0,l)}}const so=class E1 extends f.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let p=l,y=u||(()=>null),b=h;if(l&&"object"==typeof l){const D=l;p=D.next?.bind(D),y=D.error?.bind(D),b=D.complete?.bind(D)}this.__isAsync&&(y=Pb(y),p&&(p=Pb(p)),b&&(b=Pb(b)));const C=super.subscribe({next:p,error:y,complete:b});return l instanceof z.w0&&l.add(C),C}};function jD(){return this._results[Iu()]()}class sp{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Iu(),h=sp.prototype;h[u]||(h[u]=jD)}get changes(){return this._changes||(this._changes=new so)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const p=br(l);(this._changesDetected=!function Ba(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],y=l[h];if(u&&(p=u(p),y=u(y)),y!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let op=(()=>{class a{}return a.__NG_ELEMENT_ID__=HD,a})();const I1=op,C1=class extends I1{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tViews,p=Sm(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(p[19]=b.createEmbeddedView(h)),S0(h,p,l),new id(p)}};function HD(){return py(cr(),Ee())}function py(a,l){return 4&a.type?new C1(l,a,So(a,l)):null}let ap=(()=>{class a{}return a.__NG_ELEMENT_ID__=D1,a})();function D1(){return up(cr(),Ee())}const gy=ap,lp=class extends gy{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return So(this._hostTNode,this._hostLView)}get injector(){return new Zl(this._hostTNode,this._hostLView)}get parentInjector(){const l=bc(this._hostTNode,this._hostLView);if(ev(l)){const u=$l(l,this._hostLView),h=Hl(l);return new Zl(u[1].data[h+8],u)}return new Zl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=$D(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){let p,y;"number"==typeof h?p=h:null!=h&&(p=h.index,y=h.injector);const b=l.createEmbeddedView(u||{},y);return this.insert(b,p),b}createComponent(l,u,h,p,y){const b=l&&!function Jl(a){return"function"==typeof a}(l);let C;if(b)C=u;else{const V=u||{};C=V.index,h=V.injector,p=V.projectableNodes,y=V.environmentInjector||V.ngModuleRef}const D=b?l:new Ff(F(l)),x=h||this.parentInjector;if(!y&&null==D.ngModule){const W=(b?x:this.parentInjector).get(Do,null);W&&(y=W)}const k=D.create(x,p,void 0,y);return this.insert(k.hostView,C),k}insert(l,u){const h=l._lView,p=h[1];if(function _h(a){return oi(a[3])}(h)){const k=this.indexOf(l);if(-1!==k)this.detach(k);else{const V=h[3],W=new lp(V,V[6],V[3]);W.detach(W.indexOf(l))}}const y=this._adjustIndex(u),b=this._lContainer;!function ai(a,l,u,h){const p=10+h,y=u.length;h>0&&(u[p-1][4]=l),h<y-10?(l[4]=u[p],Bh(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const b=l[17];null!==b&&u!==b&&function li(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(b,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=64}(p,h,b,y);const C=qg(y,b),D=h[11],x=$g(D,b[7]);return null!==x&&function Ye(a,l,u,h,p,y){h[0]=p,h[6]=l,ff(a,h,u,1,p,y)}(p,b[6],D,h,x,C),l.attachToViewContainerRef(),Bh(_a(b),y,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=$D(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=Qa(this._lContainer,u);h&&(wr(_a(this._lContainer),u),sa(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=Qa(this._lContainer,u);return h&&null!=wr(_a(this._lContainer),u)?new id(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function $D(a){return a[8]}function _a(a){return a[8]||(a[8]=[])}function up(a,l){let u;const h=l[a.index];if(oi(h))u=h;else{let p;if(8&a.type)p=wn(h);else{const y=l[11];p=y.createComment("");const b=bi(a,l);rs(y,$g(y,b),p,function oI(a,l){return a.nextSibling(l)}(y,b),!1)}l[a.index]=u=O0(h,l,p,a),Om(l,u)}return new lp(u,a,l)}class Id{constructor(l){this.queryList=l,this.matches=null}clone(){return new Id(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fb{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,p=[];for(let y=0;y<h;y++){const b=u.getByIndex(y);p.push(this.queries[b.indexInDeclarationView].clone())}return new Fb(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==WD(l,u).matches&&this.queries[u].setDirty()}}class dl{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class dp{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,y=this.getByIndex(h).embeddedTView(l,p);y&&(y.indexInDeclarationView=h,null!==u?u.push(y):u=[y])}return null!==u?new dp(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Lb{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Lb(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const y=h[p];this.matchTNodeWithReadOption(l,u,T1(u,y)),this.matchTNodeWithReadOption(l,u,Lh(u,l,y,!1,!1))}else h===op?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Lh(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===yu||p===ap||p===op&&4&u.type)this.addMatch(u.index,-2);else{const y=Lh(u,l,p,!1,!1);null!==y&&this.addMatch(u.index,y)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function T1(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function S1(a,l,u,h){return-1===u?function hp(a,l){return 11&a.type?So(a,l):4&a.type?py(a,l):null}(l,a):-2===u?function Vb(a,l,u){return u===yu?So(l,a):u===op?py(l,a):u===ap?up(l,a):void 0}(a,l,h):wo(a,a[1],u,l)}function zD(a,l,u,h){const p=l[19].queries[h];if(null===p.matches){const y=a.data,b=u.matches,C=[];for(let D=0;D<b.length;D+=2){const x=b[D];C.push(x<0?null:S1(l,y[x],b[D+1],u.metadata.read))}p.matches=C}return p.matches}function Ub(a,l,u,h){const p=a.queries.getByIndex(u),y=p.matches;if(null!==y){const b=zD(a,l,p,u);for(let C=0;C<y.length;C+=2){const D=y[C];if(D>0)h.push(b[C/2]);else{const x=y[C+1],k=l[-D];for(let V=10;V<k.length;V++){const W=k[V];W[17]===W[3]&&Ub(W[1],W,x,h)}if(null!==k[9]){const V=k[9];for(let W=0;W<V.length;W++){const J=V[W];Ub(J[1],J,x,h)}}}}}return h}function my(a){const l=Ee(),u=nn(),h=Dh();pc(h+1);const p=WD(u,h);if(a.dirty&&function yh(a){return 4==(4&a[2])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const y=p.crossesNgTemplate?Ub(u,l,h,[]):zD(u,l,p,h);a.reset(y,xI),a.notifyOnChanges()}return!0}return!1}function Bb(a,l,u){const h=nn();h.firstCreatePass&&(Cd(h,new dl(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),Hb(h,Ee(),l)}function GD(a,l,u,h){const p=nn();if(p.firstCreatePass){const y=cr();Cd(p,new dl(l,u,h),y.index),function x1(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}Hb(p,Ee(),u)}function jb(){return function fp(a,l){return a[19].queries[l].queryList}(Ee(),Dh())}function Hb(a,l,u){const h=new sp(4==(4&u));lC(a,l,h,h.destroy),null===l[19]&&(l[19]=new Fb),l[19].queries.push(new Id(h))}function Cd(a,l,u){null===a.queries&&(a.queries=new dp),a.queries.track(new Lb(l,u))}function WD(a,l){return a.queries.getByIndex(l)}function by(...a){}const lT=new vn("Application Initializer");let wy=(()=>{class a{constructor(u){this.appInits=u,this.resolve=by,this.reject=by,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const y=this.appInits[p]();if(Bf(y))u.push(y);else if(xu(y)){const b=new Promise((C,D)=>{y.subscribe({complete:C,error:D})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(nr(lT,8))},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const uT=new vn("AppId",{providedIn:"root",factory:function Ey(){return`${Zb()}${Zb()}${Zb()}`}});function Zb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Kb=new vn("Platform Initializer"),H1=new vn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Iy=new vn("appBootstrapListener"),z1=new vn("AnimationModuleType");let G1=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const _p=new vn("LocaleId",{providedIn:"root",factory:()=>kg(_p,ot.Optional|ot.SkipSelf)||function cT(){return typeof $localize<"u"&&$localize.locale||Ru}()}),W1=new vn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vp{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let K1=(()=>{class a{compileModuleSync(u){return new Cb(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),y=Ao(We(u).declarations).reduce((b,C)=>{const D=F(C);return D&&b.push(new Ff(D)),b},[]);return new vp(h,y)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const pT=(()=>Promise.resolve(0))();function Qb(a){typeof Zone>"u"?pT.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Di{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new so(!1),this.onMicrotaskEmpty=new so(!1),this.onStable=new so(!1),this.onError=new so(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const y=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new y("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function gT(){let a=en.requestAnimationFrame,l=en.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function Cy(a){const l=()=>{!function X1(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(en,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Jb(a),a.isCheckStableRunning=!0,Xb(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Jb(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,y,b,C)=>{try{return Uo(a),u.invokeTask(p,y,b,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||a.shouldCoalesceRunChangeDetection)&&l(),ew(a)}},onInvoke:(u,h,p,y,b,C,D)=>{try{return Uo(a),u.invoke(p,y,b,C,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),ew(a)}},onHasTask:(u,h,p,y)=>{u.hasTask(p,y),h===p&&("microTask"==y.change?(a._hasPendingMicrotasks=y.microTask,Jb(a),Xb(a)):"macroTask"==y.change&&(a.hasPendingMacrotasks=y.macroTask))},onHandleError:(u,h,p,y)=>(u.handleError(p,y),a.runOutsideAngular(()=>a.onError.emit(y)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Di.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(Di.isInAngularZone())throw new xe(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,p){const y=this._inner,b=y.scheduleEventTask("NgZoneEvent: "+p,l,mT,by,by);try{return y.runTask(b,u,h)}finally{y.cancelTask(b)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const mT={};function Xb(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Jb(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Uo(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function ew(a){a._nesting--,Xb(a)}class J1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new so,this.onMicrotaskEmpty=new so,this.onStable=new so,this.onError=new so}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,p){return l.apply(u,h)}}const yT=new vn(""),_T=new vn("");let tw,Md=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tw||(function ek(a){tw=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Di.assertNotInAngularZone(),Qb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qb(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==y),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)(nr(Di),nr(bp),nr(_T))},a.\u0275prov=tt({token:a,factory:a.\u0275fac}),a})(),bp=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return tw?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Ns=null;const nw=new vn("AllowMultipleToken"),rw=new vn("PlatformDestroyListeners");class iw{constructor(l,u){this.name=l,this.token=u}}function wT(a,l,u=[]){const h=`Platform: ${l}`,p=new vn(h);return(y=[])=>{let b=Dy();if(!b||b.injector.get(nw,!1)){const C=[...u,...y,{provide:p,useValue:!0}];a?a(C):function nk(a){if(Ns&&!Ns.get(nw,!1))throw new xe(400,!1);Ns=a;const l=a.get(wa);(function bT(a){const l=a.get(Kb,null);l&&l.forEach(u=>u())})(a)}(function sw(a=[],l){return Kc.create({name:l,providers:[{provide:Xv,useValue:"platform"},{provide:rw,useValue:new Set([()=>Ns=null])},...a]})}(C,h))}return function hl(a){const l=Dy();if(!l)throw new xe(401,!1);return l}()}}function Dy(){return Ns?.get(wa)??null}let wa=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function IT(a,l){let u;return u="noop"===a?new J1:("zone.js"===a?void 0:a)||new Di(l),u}(h?.ngZone,function ET(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),y=[{provide:Di,useValue:p}];return p.run(()=>{const b=Kc.create({providers:y,parent:this.injector,name:u.moduleType.name}),C=u.create(b),D=C.injector.get(qc,null);if(!D)throw new xe(402,!1);return p.runOutsideAngular(()=>{const x=p.onError.subscribe({next:k=>{D.handleError(k)}});C.onDestroy(()=>{xy(this._modules,C),x.unsubscribe()})}),function CT(a,l,u){try{const h=u();return Bf(h)?h.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(D,p,()=>{const x=C.injector.get(wy);return x.runInitializers(),x.donePromise.then(()=>(function ey(a){Le(a,"Expected localeId to be defined"),"string"==typeof a&&(pb=a.toLowerCase().replace(/_/g,"-"))}(C.injector.get(_p,Ru)||Ru),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const p=Ty({},h);return function vT(a,l,u){const h=new Cb(u);return Promise.resolve(h)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,p))}_moduleDoBootstrap(u){const h=u.injector.get(Sy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new xe(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(rw,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(nr(Kc))},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function Ty(a,l){return Array.isArray(l)?l.reduce(Ty,a):{...a,...l}}let Sy=(()=>{class a{constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new U.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new U.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Di.assertNotInAngularZone(),Qb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Di.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ce.T)(y,b.pipe((0,Se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof e0;if(!this._injector.get(wy).done)throw!p&&pe(u),new xe(405,false);let b;b=p?u:this._injector.get(Ps).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const C=function tk(a){return a.isBoundToModule}(b)?void 0:this._injector.get(Ed),x=b.create(Kc.NULL,[],h||b.selector,C),k=x.location.nativeElement,V=x.injector.get(yT,null);return V?.registerApplication(k),x.onDestroy(()=>{this.detachView(x.hostView),xy(this.components,x),V?.unregisterApplication(k)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;xy(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Iy,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>xy(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new xe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(nr(Di),nr(Do),nr(qc))},a.\u0275prov=tt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function xy(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let DT=!0,ky=!1;function TT(){return ky=!0,DT}function ST(){if(ky)throw new Error("Cannot enable prod mode after platform setup.");DT=!1}let sk=(()=>{class a{}return a.__NG_ELEMENT_ID__=ok,a})();function ok(a){return function AT(a,l,u){if(Hs(a)&&!u){const h=_n(a.index,l);return new id(h,h)}return 47&a.type?new id(l[16],l):null}(cr(),Ee(),16==(16&a))}class RT{constructor(){}supports(l){return Lf(l)}create(l){return new dk(l)}}const ck=(a,l)=>l;class dk{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||ck}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,p=0,y=null;for(;u||h;){const b=!h||u&&u.currentIndex<NT(h,p,y)?u:h,C=NT(b,p,y),D=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{y||(y=[]);const x=C-p,k=D-p;if(x!=k){for(let W=0;W<x;W++){const J=W<y.length?y[W]:y[W]=0,ge=J+W;k<=ge&&ge<x&&(y[W]=J+1)}y[b.previousIndex]=k-x}}C!==D&&l(b,C,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Lf(l))throw new xe(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,y,b,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)y=l[C],b=this._trackByFn(C,y),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,y,b,C)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,b,C),h=!0),u=u._next}else p=0,function DC(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Iu()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,C=>{b=this._trackByFn(p,C),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,C,b,p)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,p){let y;return null===l?y=this._itTail:(y=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,y,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,y,p)):l=this._addAfter(new PT(u,h),y,p),l}_verifyReinsertion(l,u,h,p){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==y?l=this._reinsertAfter(y,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,y=l._nextRemoved;return null===p?this._removalsHead=y:p._nextRemoved=y,null===y?this._removalsTail=p:y._prevRemoved=p,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const p=null===u?this._itHead:u._next;return l._next=p,l._prev=u,null===p?this._itTail=l:p._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new OT),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OT),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class PT{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hk{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class OT{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new hk,this.map.set(u,h)),h.add(l)}get(l,u){const p=this.map.get(l);return p?p.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NT(a,l,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+l+p}class FT{constructor(){}supports(l){return l instanceof Map||Vn(l)}create(){return new fk}}class fk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Vn(l)))throw new xe(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const y=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,y)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,u);const y=p._prev,b=p._next;return y&&(y._next=b),b&&(b._prev=y),p._next=null,p._prev=null,p}const h=new uw(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class uw{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LT(){return new Vy([new RT])}let Vy=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||LT()),deps:[[a,new Jo,new Xo]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new xe(901,!1)}}return a.\u0275prov=tt({token:a,providedIn:"root",factory:LT}),a})();function VT(){return new Uy([new FT])}let Uy=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||VT()),deps:[[a,new Jo,new Xo]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new xe(901,!1)}}return a.\u0275prov=tt({token:a,providedIn:"root",factory:VT}),a})();const yk=wT(null,"core",[]);let _k=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(nr(Sy))},a.\u0275mod=si({type:a}),a.\u0275inj=$t({}),a})();function vk(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},3942:(_t,ke,j)=>{j.d(ke,{Z:()=>xe});var f=j(2090),z=j(4859),U=j(6881),ce=j(1877);class Se{constructor(ue,_e){this._delegate=ue,this.firebase=_e,(0,U._addComponent)(ue,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ue){this._delegate.automaticDataCollectionEnabled=ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ue=>{this._delegate.checkDestroyed(),ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(ue,_e=U._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const Tt=this._delegate.container.getProvider(ue);return!Tt.isInitialized()&&"EXPLICIT"===(null===(ht=Tt.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&Tt.initialize(),Tt.getImmediate({identifier:_e})}_removeServiceInstance(ue,_e=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ue).clearInstance(_e)}_addComponent(ue){(0,U._addComponent)(this._delegate,ue)}_addOrOverwriteComponent(ue){(0,U._addOrOverwriteComponent)(this._delegate,ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function He(){const rt=function Re(rt){const ue={},_e={__esModule:!0,initializeApp:function Ae(Ke,ie={}){const Xe=U.initializeApp(Ke,ie);if((0,f.r3)(ue,Xe.name))return ue[Xe.name];const At=new rt(Xe,_e);return ue[Xe.name]=At,At},app:Tt,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function we(Ke){const ie=Ke.name,Xe=ie.replace("-compat","");if(U._registerComponent(Ke)&&"PUBLIC"===Ke.type){const At=(dt=Tt())=>{if("function"!=typeof dt[Xe])throw Pe.create("invalid-app-argument",{appName:ie});return dt[Xe]()};void 0!==Ke.serviceProps&&(0,f.ZB)(At,Ke.serviceProps),_e[Xe]=At,rt.prototype[Xe]=function(...dt){return this._getService.bind(this,ie).apply(this,Ke.multipleInstances?dt:[])}}return"PUBLIC"===Ke.type?_e[Xe]:null},removeApp:function ht(Ke){delete ue[Ke]},useAsService:function Ge(Ke,ie){return"serverAuth"===ie?null:ie},modularAPIs:U}};function Tt(Ke){if(!(0,f.r3)(ue,Ke=Ke||U._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:Ke});return ue[Ke]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function ye(){return Object.keys(ue).map(Ke=>ue[Ke])}}),Tt.App=rt,_e}(Se);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:He,extendNamespace:function ue(_e){(0,f.ZB)(rt,_e)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),rt}(),q=new ce.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=Z;!function Ue(rt){(0,U.registerVersion)("@firebase/app-compat","0.2.10",rt)}()},6881:(_t,ke,j)=>{j.r(ke),j.d(ke,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Es,_DEFAULT_ENTRY_NAME:()=>Pi,_addComponent:()=>yt,_addOrOverwriteComponent:()=>It,_apps:()=>Tn,_clearComponents:()=>ur,_components:()=>Jt,_getProvider:()=>ii,_registerComponent:()=>en,_removeServiceInstance:()=>Ar,deleteApp:()=>mr,getApp:()=>Br,getApps:()=>Cn,initializeApp:()=>on,onLog:()=>yr,registerVersion:()=>Oi,setLogLevel:()=>Is});var f=j(5861),z=j(4859),U=j(1877),ce=j(2090);let Ce,Pe;const Z=new WeakMap,q=new WeakMap,ee=new WeakMap,ze=new WeakMap,Ue=new WeakMap;let ue={get(se,ne,Oe){if(se instanceof IDBTransaction){if("done"===ne)return q.get(se);if("objectStoreNames"===ne)return se.objectStoreNames||ee.get(se);if("store"===ne)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return Ae(se[ne])},set:(se,ne,Oe)=>(se[ne]=Oe,!0),has:(se,ne)=>se instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in se};function Tt(se){return"function"==typeof se?function ht(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function He(){return Pe||(Pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...ne){return se.apply(ye(this),ne),Ae(Z.get(this))}:function(...ne){return Ae(se.apply(ye(this),ne))}:function(ne,...Oe){const Ne=se.call(ye(this),ne,...Oe);return ee.set(Ne,ne.sort?ne.sort():[ne]),Ae(Ne)}}(se):(se instanceof IDBTransaction&&function rt(se){if(q.has(se))return;const ne=new Promise((Oe,Ne)=>{const xt=()=>{se.removeEventListener("complete",Vt),se.removeEventListener("error",pn),se.removeEventListener("abort",pn)},Vt=()=>{Oe(),xt()},pn=()=>{Ne(se.error||new DOMException("AbortError","AbortError")),xt()};se.addEventListener("complete",Vt),se.addEventListener("error",pn),se.addEventListener("abort",pn)});q.set(se,ne)}(se),((se,ne)=>ne.some(Oe=>se instanceof Oe))(se,function Re(){return Ce||(Ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,ue):se)}function Ae(se){if(se instanceof IDBRequest)return function xe(se){const ne=new Promise((Oe,Ne)=>{const xt=()=>{se.removeEventListener("success",Vt),se.removeEventListener("error",pn)},Vt=()=>{Oe(Ae(se.result)),xt()},pn=()=>{Ne(se.error),xt()};se.addEventListener("success",Vt),se.addEventListener("error",pn)});return ne.then(Oe=>{Oe instanceof IDBCursor&&Z.set(Oe,se)}).catch(()=>{}),Ue.set(ne,se),ne}(se);if(ze.has(se))return ze.get(se);const ne=Tt(se);return ne!==se&&(ze.set(se,ne),Ue.set(ne,se)),ne}const ye=se=>Ue.get(se),Ke=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],Xe=new Map;function At(se,ne){if(!(se instanceof IDBDatabase)||ne in se||"string"!=typeof ne)return;if(Xe.get(ne))return Xe.get(ne);const Oe=ne.replace(/FromIndex$/,""),Ne=ne!==Oe,xt=ie.includes(Oe);if(!(Oe in(Ne?IDBIndex:IDBObjectStore).prototype)||!xt&&!Ke.includes(Oe))return;const Vt=function(){var pn=(0,f.Z)(function*(Fn,...Wt){const Gr=this.transaction(Fn,xt?"readwrite":"readonly");let Ji=Gr.store;return Ne&&(Ji=Ji.index(Wt.shift())),(yield Promise.all([Ji[Oe](...Wt),xt&&Gr.done]))[0]});return function(Wt){return pn.apply(this,arguments)}}();return Xe.set(ne,Vt),Vt}!function _e(se){ue=se(ue)}(se=>({...se,get:(ne,Oe,Ne)=>At(ne,Oe)||se.get(ne,Oe,Ne),has:(ne,Oe)=>!!At(ne,Oe)||se.has(ne,Oe)}));class dt{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function Kt(se){return"VERSION"===se.getComponent()?.type}(Oe)){const Ne=Oe.getImmediate();return`${Ne.library}/${Ne.version}`}return null}).filter(Oe=>Oe).join(" ")}}const ft="@firebase/app",he=new U.Yd("@firebase/app"),Pi="[DEFAULT]",Pn={[ft]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tn=new Map,Jt=new Map;function yt(se,ne){try{se.container.addComponent(ne)}catch(Oe){he.debug(`Component ${ne.name} failed to register with FirebaseApp ${se.name}`,Oe)}}function It(se,ne){se.container.addOrOverwriteComponent(ne)}function en(se){const ne=se.name;if(Jt.has(ne))return he.debug(`There were multiple attempts to register component ${ne}.`),!1;Jt.set(ne,se);for(const Oe of Tn.values())yt(Oe,se);return!0}function ii(se,ne){const Oe=se.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),se.container.getProvider(ne)}function Ar(se,ne,Oe=Pi){ii(se,ne).clearInstance(Oe)}function ur(){Jt.clear()}const Jn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class zt{constructor(ne,Oe,Ne){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=Ne,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}const Es="9.22.0";function on(se,ne={}){let Oe=se;"object"!=typeof ne&&(ne={name:ne});const Ne=Object.assign({name:Pi,automaticDataCollectionEnabled:!1},ne),xt=Ne.name;if("string"!=typeof xt||!xt)throw Jn.create("bad-app-name",{appName:String(xt)});if(Oe||(Oe=(0,ce.aH)()),!Oe)throw Jn.create("no-options");const Vt=Tn.get(xt);if(Vt){if((0,ce.vZ)(Oe,Vt.options)&&(0,ce.vZ)(Ne,Vt.config))return Vt;throw Jn.create("duplicate-app",{appName:xt})}const pn=new z.H0(xt);for(const Wt of Jt.values())pn.addComponent(Wt);const Fn=new zt(Oe,Ne,pn);return Tn.set(xt,Fn),Fn}function Br(se=Pi){const ne=Tn.get(se);if(!ne&&se===Pi&&(0,ce.aH)())return on();if(!ne)throw Jn.create("no-app",{appName:se});return ne}function Cn(){return Array.from(Tn.values())}function mr(se){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(se){const ne=se.name;Tn.has(ne)&&(Tn.delete(ne),yield Promise.all(se.container.getProviders().map(Oe=>Oe.delete())),se.isDeleted=!0)})).apply(this,arguments)}function Oi(se,ne,Oe){var Ne;let xt=null!==(Ne=Pn[se])&&void 0!==Ne?Ne:se;Oe&&(xt+=`-${Oe}`);const Vt=xt.match(/\s|\//),pn=ne.match(/\s|\//);if(Vt||pn){const Fn=[`Unable to register library "${xt}" with version "${ne}":`];return Vt&&Fn.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Vt&&pn&&Fn.push("and"),pn&&Fn.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void he.warn(Fn.join(" "))}en(new z.wA(`${xt}-version`,()=>({library:xt,version:ne}),"VERSION"))}function yr(se,ne){if(null!==se&&"function"!=typeof se)throw Jn.create("invalid-log-argument");(0,U.Am)(se,ne)}function Is(se){(0,U.Ub)(se)}const $="firebase-heartbeat-store";let H=null;function L(){return H||(H=function we(se,ne,{blocked:Oe,upgrade:Ne,blocking:xt,terminated:Vt}={}){const pn=indexedDB.open(se,ne),Fn=Ae(pn);return Ne&&pn.addEventListener("upgradeneeded",Wt=>{Ne(Ae(pn.result),Wt.oldVersion,Wt.newVersion,Ae(pn.transaction),Wt)}),Oe&&pn.addEventListener("blocked",Wt=>Oe(Wt.oldVersion,Wt.newVersion,Wt)),Fn.then(Wt=>{Vt&&Wt.addEventListener("close",()=>Vt()),xt&&Wt.addEventListener("versionchange",Gr=>xt(Gr.oldVersion,Gr.newVersion,Gr))}).catch(()=>{}),Fn}("firebase-heartbeat-database",1,{upgrade:(se,ne)=>{0===ne&&se.createObjectStore($)}}).catch(se=>{throw Jn.create("idb-open",{originalErrorMessage:se.message})})),H}function P(){return(P=(0,f.Z)(function*(se){try{return yield(yield L()).transaction($).objectStore($).get(We(se))}catch(ne){if(ne instanceof ce.ZR)he.warn(ne.message);else{const Oe=Jn.create("idb-get",{originalErrorMessage:ne?.message});he.warn(Oe.message)}}})).apply(this,arguments)}function Y(se,ne){return pe.apply(this,arguments)}function pe(){return(pe=(0,f.Z)(function*(se,ne){try{const Ne=(yield L()).transaction($,"readwrite");yield Ne.objectStore($).put(ne,We(se)),yield Ne.done}catch(Oe){if(Oe instanceof ce.ZR)he.warn(Oe.message);else{const Ne=Jn.create("idb-set",{originalErrorMessage:Oe?.message});he.warn(Ne.message)}}})).apply(this,arguments)}function We(se){return`${se.name}!${se.options.appId}`}class Je{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new kt(Oe),this._heartbeatsCachePromise=this._storage.read().then(Ne=>(this._heartbeatsCache=Ne,Ne))}triggerHeartbeat(){var ne=this;return(0,f.Z)(function*(){const Ne=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=it();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==xt&&!ne._heartbeatsCache.heartbeats.some(Vt=>Vt.date===xt))return ne._heartbeatsCache.heartbeats.push({date:xt,agent:Ne}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(Vt=>{const pn=new Date(Vt.date).valueOf();return Date.now()-pn<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,f.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Oe=it(),{heartbeatsToSend:Ne,unsentEntries:xt}=function tn(se,ne=1024){const Oe=[];let Ne=se.slice();for(const xt of se){const Vt=Oe.find(pn=>pn.agent===xt.agent);if(Vt){if(Vt.dates.push(xt.date),cn(Oe)>ne){Vt.dates.pop();break}}else if(Oe.push({agent:xt.agent,dates:[xt.date]}),cn(Oe)>ne){Oe.pop();break}Ne=Ne.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:Ne}}(ne._heartbeatsCache.heartbeats),Vt=(0,ce.L)(JSON.stringify({version:2,heartbeats:Ne}));return ne._heartbeatsCache.lastSentHeartbeatDate=Oe,xt.length>0?(ne._heartbeatsCache.heartbeats=xt,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),Vt})()}}function it(){return(new Date).toISOString().substring(0,10)}class kt{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,f.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function F(se){return P.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Oe=this;return(0,f.Z)(function*(){var Ne;if(yield Oe._canUseIndexedDBPromise){const Vt=yield Oe.read();return Y(Oe.app,{lastSentHeartbeatDate:null!==(Ne=ne.lastSentHeartbeatDate)&&void 0!==Ne?Ne:Vt.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Oe=this;return(0,f.Z)(function*(){var Ne;if(yield Oe._canUseIndexedDBPromise){const Vt=yield Oe.read();return Y(Oe.app,{lastSentHeartbeatDate:null!==(Ne=ne.lastSentHeartbeatDate)&&void 0!==Ne?Ne:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...ne.heartbeats]})}})()}}function cn(se){return(0,ce.L)(JSON.stringify({version:2,heartbeats:se})).length}!function vi(se){en(new z.wA("platform-logger",ne=>new dt(ne),"PRIVATE")),en(new z.wA("heartbeat",ne=>new Je(ne),"PRIVATE")),Oi(ft,"0.9.10",se),Oi(ft,"0.9.10","esm2017"),Oi("fire-js","")}("")},4859:(_t,ke,j)=>{j.d(ke,{H0:()=>Re,wA:()=>U});var f=j(5861),z=j(2090);class U{constructor(Z,q,ee){this.name=Z,this.instanceFactory=q,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ce="[DEFAULT]";class Se{constructor(Z,q){this.name=Z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const q=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(q)){const ee=new z.BH;if(this.instancesDeferred.set(q,ee),this.isInitialized(q)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:q});ze&&ee.resolve(ze)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(Z){var q;const ee=this.normalizeInstanceIdentifier(Z?.identifier),ze=null!==(q=Z?.optional)&&void 0!==q&&q;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Ue){if(ze)return null;throw Ue}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function Pe(He){return"EAGER"===He.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[q,ee]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(q);try{const Ue=this.getOrInitializeService({instanceIdentifier:ze});ee.resolve(Ue)}catch{}}}}clearInstance(Z=ce){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,f.Z)(function*(){const q=Array.from(Z.instances.values());yield Promise.all([...q.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...q.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ce){return this.instances.has(Z)}getOptions(Z=ce){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:q={}}=Z,ee=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:ee,options:q});for(const[Ue,xe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Ue)&&xe.resolve(ze);return ze}onInit(Z,q){var ee;const ze=this.normalizeInstanceIdentifier(q),Ue=null!==(ee=this.onInitCallbacks.get(ze))&&void 0!==ee?ee:new Set;Ue.add(Z),this.onInitCallbacks.set(ze,Ue);const xe=this.instances.get(ze);return xe&&Z(xe,ze),()=>{Ue.delete(Z)}}invokeOnInitCallbacks(Z,q){const ee=this.onInitCallbacks.get(q);if(ee)for(const ze of ee)try{ze(Z,q)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:q={}}){let ee=this.instances.get(Z);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(He=Z,He===ce?void 0:He),options:q}),this.instances.set(Z,ee),this.instancesOptions.set(Z,q),this.invokeOnInitCallbacks(ee,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,ee)}catch{}var He;return ee||null}normalizeInstanceIdentifier(Z=ce){return this.component?this.component.multipleInstances?Z:ce:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const q=this.getProvider(Z.name);if(q.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);q.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const q=new Se(Z,this);return this.providers.set(Z,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,ke,j)=>{j.d(ke,{Am:()=>He,Ub:()=>Re,Yd:()=>Pe,in:()=>z});const f=[];var z=(()=>{return(Z=z||(z={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",z;var Z})();const U={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},ce=z.INFO,Se={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},Ce=(Z,q,...ee)=>{if(q<Z.logLevel)return;const ze=(new Date).toISOString(),Ue=Se[q];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ue](`[${ze}]  ${Z.name}:`,...ee)};class Pe{constructor(q){this.name=q,this._logLevel=ce,this._logHandler=Ce,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in z))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?U[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...q),this._logHandler(this,z.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...q),this._logHandler(this,z.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,z.INFO,...q),this._logHandler(this,z.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,z.WARN,...q),this._logHandler(this,z.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...q),this._logHandler(this,z.ERROR,...q)}}function Re(Z){f.forEach(q=>{q.setLogLevel(Z)})}function He(Z,q){for(const ee of f){let ze=null;q&&q.level&&(ze=U[q.level]),ee.userLogHandler=null===Z?null:(Ue,xe,...rt)=>{const ue=rt.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");xe>=(ze??Ue.logLevel)&&Z({level:z[xe].toLowerCase(),message:ue,args:rt,type:Ue.name})}}}},9260:(_t,ke,j)=>{j.d(ke,{Z:()=>f.Z});var f=j(3942);f.Z.registerVersion("firebase","9.22.0","app-compat")},9568:(_t,ke,j)=>{j.r(ke);var f=j(5861),z=j(3942),U=j(1389),ce=j(2090),Pe=(j(6881),j(1877),j(4859));function Re(){return window}function q(){return(q=(0,f.Z)(function*(L,F,P){var Y;const{BuildInfo:pe}=Re();(0,U.as)(F.sessionId,"AuthEvent did not contain a session ID");const We=yield _e(F.sessionId),pt={};return(0,U.at)()?pt.ibi=pe.packageName:(0,U.au)()?pt.apn=pe.packageName:(0,U.av)(L,"operation-not-supported-in-this-environment"),pe.displayName&&(pt.appDisplayName=pe.displayName),pt.sessionId=We,(0,U.aw)(L,P,F.type,void 0,null!==(Y=F.eventId)&&void 0!==Y?Y:void 0,pt)})).apply(this,arguments)}function ze(){return(ze=(0,f.Z)(function*(L){const{BuildInfo:F}=Re(),P={};(0,U.at)()?P.iosBundleId=F.packageName:(0,U.au)()?P.androidPackageName=F.packageName:(0,U.av)(L,"operation-not-supported-in-this-environment"),yield(0,U.ax)(L,P)})).apply(this,arguments)}function rt(){return(rt=(0,f.Z)(function*(L,F,P){const{cordova:Y}=Re();let pe=()=>{};try{yield new Promise((We,pt)=>{let me=null;function Je(){var kt;We();const cn=null===(kt=Y.plugins.browsertab)||void 0===kt?void 0:kt.close;"function"==typeof cn&&cn(),"function"==typeof P?.close&&P.close()}function it(){me||(me=window.setTimeout(()=>{pt((0,U.az)(L,"redirect-cancelled-by-user"))},2e3))}function tn(){"visible"===document?.visibilityState&&it()}F.addPassiveListener(Je),document.addEventListener("resume",it,!1),(0,U.au)()&&document.addEventListener("visibilitychange",tn,!1),pe=()=>{F.removePassiveListener(Je),document.removeEventListener("resume",it,!1),document.removeEventListener("visibilitychange",tn,!1),me&&window.clearTimeout(me)}})}finally{pe()}})).apply(this,arguments)}function _e(L){return ht.apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(L){const F=Tt(L),P=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(P)).map(pe=>pe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Tt(L){if((0,U.as)(/[0-9a-zA-Z]+/.test(L),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(L);const F=new ArrayBuffer(L.length),P=new Uint8Array(F);for(let Y=0;Y<L.length;Y++)P[Y]=L.charCodeAt(Y);return P}class ye extends U.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(P=>P(F)),super.onEvent(F)}initialized(){var F=this;return(0,f.Z)(function*(){yield F.initPromise})()}}function Ke(L){return ie.apply(this,arguments)}function ie(){return(ie=(0,f.Z)(function*(L){const F=yield dt()._get(Kt(L));return F&&(yield dt()._remove(Kt(L))),F})).apply(this,arguments)}function At(){const L=[],F="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<20;P++){const Y=Math.floor(Math.random()*F.length);L.push(F.charAt(Y))}return L.join("")}function dt(){return(0,U.aC)(U.b)}function Kt(L){return(0,U.aD)("authEvent",L.config.apiKey,L.name)}function he(L){if(!L?.includes("?"))return{};const[F,...P]=L.split("?");return(0,ce.zd)(P.join("?"))}function ve(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,U.az)("no-auth-event")}}function Xt(){var L;return(null===(L=self?.location)||void 0===L?void 0:L.protocol)||null}function Ut(L=(0,ce.z$)()){return!("file:"!==Xt()&&"ionic:"!==Xt()&&"capacitor:"!==Xt()||!L.toLowerCase().match(/iphone|ipad|ipod|android/))}function ni(){try{const L=self.localStorage,F=U.aL();if(L)return L.setItem(F,"1"),L.removeItem(F),!function gr(L=(0,ce.z$)()){return function Xn(){return(0,ce.w1)()&&11===document?.documentMode}()||function ti(L=(0,ce.z$)()){return/Edge\/\d+/.test(L)}(L)}()||(0,ce.hl)()}catch{return ri()&&(0,ce.hl)()}return!1}function ri(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qi(){return(function $t(){return"http:"===Xt()||"https:"===Xt()}()||(0,ce.ru)()||Ut())&&!function pr(){return(0,ce.b$)()||(0,ce.UG)()}()&&ni()&&!ri()}function ws(){return Ut()&&typeof document<"u"}function ot(){return(ot=(0,f.Z)(function*(){return!!ws()&&new Promise(L=>{const F=setTimeout(()=>{L(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),L(!0)})})})).apply(this,arguments)}const lr={LOCAL:"local",NONE:"none",SESSION:"session"},Hn=U.aA,Xi="persistence";function Pn(L){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(L){yield L._initializationPromise;const F=yt(),P=U.aD(Xi,L.config.apiKey,L.name);F&&F.setItem(P,L._getPersistence())})).apply(this,arguments)}function yt(){var L;try{return(null===(L=function Ur(){return typeof window<"u"?window:null}())||void 0===L?void 0:L.sessionStorage)||null}catch{return null}}const It=U.aA;class en{constructor(){this.browserResolver=U.aC(U.k),this.cordovaResolver=U.aC(class Me{constructor(){this._redirectPersistence=U.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U.aE,this._overrideRedirectResult=U.aF}_initialize(F){var P=this;return(0,f.Z)(function*(){const Y=F._key();let pe=P.eventManagers.get(Y);return pe||(pe=new ye(F),P.eventManagers.set(Y,pe),P.attachCallbackListeners(F,pe)),pe})()}_openPopup(F){(0,U.av)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,P,Y,pe){var We=this;return(0,f.Z)(function*(){!function ue(L){var F,P,Y,pe,We,pt,me,Je,it,tn;const kt=Re();(0,U.aA)("function"==typeof(null===(F=kt?.universalLinks)||void 0===F?void 0:F.subscribe),L,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,U.aA)(typeof(null===(P=kt?.BuildInfo)||void 0===P?void 0:P.packageName)<"u",L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,U.aA)("function"==typeof(null===(We=null===(pe=null===(Y=kt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===pe?void 0:pe.browsertab)||void 0===We?void 0:We.openUrl),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aA)("function"==typeof(null===(Je=null===(me=null===(pt=kt?.cordova)||void 0===pt?void 0:pt.plugins)||void 0===me?void 0:me.browsertab)||void 0===Je?void 0:Je.isAvailable),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aA)("function"==typeof(null===(tn=null===(it=kt?.cordova)||void 0===it?void 0:it.InAppBrowser)||void 0===tn?void 0:tn.open),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const pt=yield We._initialize(F);yield pt.initialized(),pt.resetRedirect(),(0,U.aG)(),yield We._originValidation(F);const me=function we(L,F,P=null){return{type:F,eventId:P,urlResponse:null,sessionId:At(),postBody:null,tenantId:L.tenantId,error:(0,U.az)(L,"no-auth-event")}}(F,Y,pe);yield function Ge(L,F){return dt()._set(Kt(L),F)}(F,me);const Je=yield function Z(L,F,P){return q.apply(this,arguments)}(F,me,P),it=yield function Ue(L){const{cordova:F}=Re();return new Promise(P=>{F.plugins.browsertab.isAvailable(Y=>{let pe=null;Y?F.plugins.browsertab.openUrl(L):pe=F.InAppBrowser.open(L,(0,U.ay)()?"_blank":"_system","location=yes"),P(pe)})})}(Je);return function xe(L,F,P){return rt.apply(this,arguments)}(F,pt,it)})()}_isIframeWebStorageSupported(F,P){throw new Error("Method not implemented.")}_originValidation(F){const P=F._key();return this.originValidationPromises[P]||(this.originValidationPromises[P]=function ee(L){return ze.apply(this,arguments)}(F)),this.originValidationPromises[P]}attachCallbackListeners(F,P){const{universalLinks:Y,handleOpenURL:pe,BuildInfo:We}=Re(),pt=setTimeout((0,f.Z)(function*(){yield Ke(F),P.onEvent(ve())}),500),me=function(){var tn=(0,f.Z)(function*(kt){clearTimeout(pt);const cn=yield Ke(F);let vi=null;cn&&kt?.url&&(vi=function Xe(L,F){var P,Y;const pe=function de(L){const F=he(L),P=F.link?decodeURIComponent(F.link):void 0,Y=he(P).link,pe=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return he(pe).link||pe||Y||P||L}(F);if(pe.includes("/__/auth/callback")){const We=he(pe),pt=We.firebaseError?function ft(L){try{return JSON.parse(L)}catch{return null}}(decodeURIComponent(We.firebaseError)):null,me=null===(Y=null===(P=pt?.code)||void 0===P?void 0:P.split("auth/"))||void 0===Y?void 0:Y[1],Je=me?(0,U.az)(me):null;return Je?{type:L.type,eventId:L.eventId,tenantId:L.tenantId,error:Je,urlResponse:null,sessionId:null,postBody:null}:{type:L.type,eventId:L.eventId,tenantId:L.tenantId,sessionId:L.sessionId,urlResponse:pe,postBody:null}}return null}(cn,kt.url)),P.onEvent(vi||ve())});return function(cn){return tn.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,me);const Je=pe,it=`${We.packageName.toLowerCase()}://`;Re().handleOpenURL=function(){var tn=(0,f.Z)(function*(kt){if(kt.toLowerCase().startsWith(it)&&me({url:kt}),"function"==typeof Je)try{Je(kt)}catch(cn){console.error(cn)}});return function(kt){return tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=U.a,this._completeRedirectFn=U.aE,this._overrideRedirectResult=U.aF}_initialize(F){var P=this;return(0,f.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,P,Y,pe){var We=this;return(0,f.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openPopup(F,P,Y,pe)})()}_openRedirect(F,P,Y,pe){var We=this;return(0,f.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openRedirect(F,P,Y,pe)})()}_isIframeWebStorageSupported(F,P){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,P)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return ws()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return It(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,f.Z)(function*(){if(F.underlyingResolver)return;const P=yield function Aa(){return ot.apply(this,arguments)}();F.underlyingResolver=P?F.cordovaResolver:F.browserResolver})()}}function ii(L){return L.unwrap()}function ur(L){return Jn(L)}function Jn(L){const{_tokenResponse:F}=L instanceof ce.ZR?L.customData:L;if(!F)return null;if(!(L instanceof ce.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return U.P.credentialFromResult(L);const P=F.providerId;if(!P||P===U.p.PASSWORD)return null;let Y;switch(P){case U.p.GOOGLE:Y=U.V;break;case U.p.FACEBOOK:Y=U.U;break;case U.p.GITHUB:Y=U.W;break;case U.p.TWITTER:Y=U.Z;break;default:const{oauthIdToken:pe,oauthAccessToken:We,oauthTokenSecret:pt,pendingToken:me,nonce:Je}=F;return We||pt||pe||me?me?P.startsWith("saml.")?U.aO._create(P,me):U.L._fromParams({providerId:P,signInMethod:P,pendingToken:me,idToken:pe,accessToken:We}):new U.X(P).credential({idToken:pe,accessToken:We,rawNonce:Je}):null}return L instanceof ce.ZR?Y.credentialFromError(L):Y.credentialFromResult(L)}function zt(L,F){return F.catch(P=>{throw P instanceof ce.ZR&&function Pt(L,F){var P;const Y=null===(P=F.customData)||void 0===P?void 0:P._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new Br(L,U.aq(L,F));else if(Y){const pe=Jn(F),We=F;pe&&(We.credential=pe,We.tenantId=Y.tenantId||void 0,We.email=Y.email||void 0,We.phoneNumber=Y.phoneNumber||void 0)}}(L,P),P}).then(P=>{const pe=P.user;return{operationType:P.operationType,credential:ur(P),additionalUserInfo:U.ao(P),user:Cn.getOrCreate(pe)}})}function Es(L,F){return on.apply(this,arguments)}function on(){return(on=(0,f.Z)(function*(L,F){const P=yield F;return{verificationId:P.verificationId,confirm:Y=>zt(L,P.confirm(Y))}})).apply(this,arguments)}class Br{constructor(F,P){this.resolver=P,this.auth=function Ar(L){return L.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return zt(ii(this.auth),this.resolver.resolveSignIn(F))}}class Cn{constructor(F){this._delegate=F,this.multiFactor=U.ar(F)}static getOrCreate(F){return Cn.USER_MAP.has(F)||Cn.USER_MAP.set(F,new Cn(F)),Cn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var P=this;return(0,f.Z)(function*(){return zt(P.auth,U.a0(P._delegate,F))})()}linkWithPhoneNumber(F,P){var Y=this;return(0,f.Z)(function*(){return Es(Y.auth,U.l(Y._delegate,F,P))})()}linkWithPopup(F){var P=this;return(0,f.Z)(function*(){return zt(P.auth,U.d(P._delegate,F,en))})()}linkWithRedirect(F){var P=this;return(0,f.Z)(function*(){return yield Pn(U.aH(P.auth)),U.g(P._delegate,F,en)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var P=this;return(0,f.Z)(function*(){return zt(P.auth,U.a1(P._delegate,F))})()}reauthenticateWithPhoneNumber(F,P){return Es(this.auth,U.r(this._delegate,F,P))}reauthenticateWithPopup(F){return zt(this.auth,U.e(this._delegate,F,en))}reauthenticateWithRedirect(F){var P=this;return(0,f.Z)(function*(){return yield Pn(U.aH(P.auth)),U.h(P._delegate,F,en)})()}sendEmailVerification(F){return U.ae(this._delegate,F)}unlink(F){var P=this;return(0,f.Z)(function*(){return yield U.an(P._delegate,F),P})()}updateEmail(F){return U.aj(this._delegate,F)}updatePassword(F){return U.ak(this._delegate,F)}updatePhoneNumber(F){return U.u(this._delegate,F)}updateProfile(F){return U.ai(this._delegate,F)}verifyBeforeUpdateEmail(F,P){return U.af(this._delegate,F,P)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cn.USER_MAP=new WeakMap;const mr=U.aA;let $n=(()=>{class L{constructor(P,Y){if(this.app=P,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:pe}=P.options;mr(pe,"invalid-api-key",{appName:P.name}),mr(pe,"invalid-api-key",{appName:P.name});const We=typeof window<"u"?en:void 0;this._delegate=Y.initialize({options:{persistence:yr(pe,P.name),popupRedirectResolver:We}}),this._delegate._updateErrorMap(U.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(P){this._delegate.languageCode=P}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(P){this._delegate.tenantId=P}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(P,Y){U.I(this._delegate,P,Y)}applyActionCode(P){return U.a5(this._delegate,P)}checkActionCode(P){return U.a6(this._delegate,P)}confirmPasswordReset(P,Y){return U.a4(this._delegate,P,Y)}createUserWithEmailAndPassword(P,Y){var pe=this;return(0,f.Z)(function*(){return zt(pe._delegate,U.a8(pe._delegate,P,Y))})()}fetchProvidersForEmail(P){return this.fetchSignInMethodsForEmail(P)}fetchSignInMethodsForEmail(P){return U.ad(this._delegate,P)}isSignInWithEmailLink(P){return U.ab(this._delegate,P)}getRedirectResult(){var P=this;return(0,f.Z)(function*(){mr(Qi(),P._delegate,"operation-not-supported-in-this-environment");const Y=yield U.j(P._delegate,en);return Y?zt(P._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(P){!function St(L,F){(0,U.aH)(L)._logFramework(F)}(this._delegate,P)}onAuthStateChanged(P,Y,pe){const{next:We,error:pt,complete:me}=Oi(P,Y,pe);return this._delegate.onAuthStateChanged(We,pt,me)}onIdTokenChanged(P,Y,pe){const{next:We,error:pt,complete:me}=Oi(P,Y,pe);return this._delegate.onIdTokenChanged(We,pt,me)}sendSignInLinkToEmail(P,Y){return U.aa(this._delegate,P,Y)}sendPasswordResetEmail(P,Y){return U.a3(this._delegate,P,Y||void 0)}setPersistence(P){var Y=this;return(0,f.Z)(function*(){let pe;switch(function Pi(L,F){Hn(Object.values(lr).includes(F),L,"invalid-persistence-type"),(0,ce.b$)()?Hn(F!==lr.SESSION,L,"unsupported-persistence-type"):(0,ce.UG)()?Hn(F===lr.NONE,L,"unsupported-persistence-type"):ri()?Hn(F===lr.NONE||F===lr.LOCAL&&(0,ce.hl)(),L,"unsupported-persistence-type"):Hn(F===lr.NONE||ni(),L,"unsupported-persistence-type")}(Y._delegate,P),P){case lr.SESSION:pe=U.a;break;case lr.LOCAL:pe=(yield U.aC(U.i)._isAvailable())?U.i:U.b;break;case lr.NONE:pe=U.N;break;default:return U.av("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(pe)})()}signInAndRetrieveDataWithCredential(P){return this.signInWithCredential(P)}signInAnonymously(){return zt(this._delegate,U._(this._delegate))}signInWithCredential(P){return zt(this._delegate,U.$(this._delegate,P))}signInWithCustomToken(P){return zt(this._delegate,U.a2(this._delegate,P))}signInWithEmailAndPassword(P,Y){return zt(this._delegate,U.a9(this._delegate,P,Y))}signInWithEmailLink(P,Y){return zt(this._delegate,U.ac(this._delegate,P,Y))}signInWithPhoneNumber(P,Y){return Es(this._delegate,U.s(this._delegate,P,Y))}signInWithPopup(P){var Y=this;return(0,f.Z)(function*(){return mr(Qi(),Y._delegate,"operation-not-supported-in-this-environment"),zt(Y._delegate,U.c(Y._delegate,P,en))})()}signInWithRedirect(P){var Y=this;return(0,f.Z)(function*(){return mr(Qi(),Y._delegate,"operation-not-supported-in-this-environment"),yield Pn(Y._delegate),U.f(Y._delegate,P,en)})()}updateCurrentUser(P){return this._delegate.updateCurrentUser(P)}verifyPasswordResetCode(P){return U.a7(this._delegate,P)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return L.Persistence=lr,L})();function Oi(L,F,P){let Y=L;"function"!=typeof L&&({next:Y,error:F,complete:P}=L);const pe=Y;return{next:pt=>pe(pt&&Cn.getOrCreate(pt)),error:F,complete:P}}function yr(L,F){const P=function Jt(L,F){const P=yt();if(!P)return[];const Y=U.aD(Xi,L,F);switch(P.getItem(Y)){case lr.NONE:return[U.N];case lr.LOCAL:return[U.i,U.a];case lr.SESSION:return[U.a];default:return[]}}(L,F);if(typeof self<"u"&&!P.includes(U.i)&&P.push(U.i),typeof window<"u")for(const Y of[U.b,U.a])P.includes(Y)||P.push(Y);return P.includes(U.N)||P.push(U.N),P}class Is{constructor(){this.providerId="phone",this._delegate=new U.P(ii(z.Z.auth()))}static credential(F,P){return U.P.credential(F,P)}verifyPhoneNumber(F,P){return this._delegate.verifyPhoneNumber(F,P)}unwrap(){return this._delegate}}Is.PHONE_SIGN_IN_METHOD=U.P.PHONE_SIGN_IN_METHOD,Is.PROVIDER_ID=U.P.PROVIDER_ID;const si=U.aA;class _i{constructor(F,P,Y=z.Z.app()){var pe;si(null===(pe=Y.options)||void 0===pe?void 0:pe.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new U.R(F,P,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(L){L.INTERNAL.registerComponent(new Pe.wA("auth-compat",F=>{const P=F.getProvider("app-compat").getImmediate(),Y=F.getProvider("auth");return new $n(P,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:U.A.EMAIL_SIGNIN,PASSWORD_RESET:U.A.PASSWORD_RESET,RECOVER_EMAIL:U.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:U.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:U.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:U.A.VERIFY_EMAIL}},EmailAuthProvider:U.Q,FacebookAuthProvider:U.U,GithubAuthProvider:U.W,GoogleAuthProvider:U.V,OAuthProvider:U.X,SAMLAuthProvider:U.Y,PhoneAuthProvider:Is,PhoneMultiFactorGenerator:U.m,RecaptchaVerifier:_i,TwitterAuthProvider:U.Z,Auth:$n,AuthCredential:U.J,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),L.registerVersion("@firebase/auth-compat","0.4.2")}(z.Z)},5861:(_t,ke,j)=>{function f(U,ce,Se,Ce,Pe,Re,He){try{var Z=U[Re](He),q=Z.value}catch(ee){return void Se(ee)}Z.done?ce(q):Promise.resolve(q).then(Ce,Pe)}function z(U){return function(){var ce=this,Se=arguments;return new Promise(function(Ce,Pe){var Re=U.apply(ce,Se);function He(q){f(Re,Ce,Pe,He,Z,"next",q)}function Z(q){f(Re,Ce,Pe,He,Z,"throw",q)}He(void 0)})}}j.d(ke,{Z:()=>z})}},_t=>{_t(_t.s=2598)}]);